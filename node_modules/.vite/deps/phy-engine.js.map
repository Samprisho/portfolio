{
  "version": 3,
  "sources": ["../../phy-engine/build/Phy.module.js"],
  "sourcesContent": ["import * as THREE$1 from 'three';\nimport { Vector3, Matrix3, Quaternion, LineSegments, BufferGeometry, BufferAttribute, Float32BufferAttribute, LineBasicMaterial, SphereGeometry, CylinderGeometry, BoxGeometry, PlaneGeometry, CanvasTexture, RepeatWrapping, SRGBColorSpace, MeshPhysicalMaterial, Color, ShaderChunk, ShaderMaterial, Uniform, AdditiveBlending, FrontSide, DoubleSide, BackSide, SrcAlphaSaturateFactor, OneMinusDstColorFactor, DstColorFactor, OneMinusDstAlphaFactor, DstAlphaFactor, OneMinusSrcAlphaFactor, SrcAlphaFactor, OneMinusSrcColorFactor, SrcColorFactor, OneFactor, ZeroFactor, MaxEquation, MinEquation, ReverseSubtractEquation, SubtractEquation, AddEquation, MultiplyBlending, SubtractiveBlending, NormalBlending, NoBlending, Vector2, MeshStandardMaterial, ShadowMaterial, MeshToonMaterial, MeshBasicMaterial, MeshLambertMaterial, MeshPhongMaterial, Line, Matrix4, EventDispatcher, MathUtils, Euler, Layers, Mesh, InstancedMesh, InstancedBufferAttribute, TrianglesDrawMode, TriangleFanDrawMode, TriangleStripDrawMode, CircleGeometry, Box3, Line3, Plane, Triangle, Object3D, Loader, FileLoader, Box2, ShapeUtils, Shape, Path, ShapePath, ShapeGeometry, PerspectiveCamera, Scene, WebGLRenderer, CompressedTexture, Source, NoColorSpace, RGBAFormat, PropertyBinding, InterpolateDiscrete, NearestFilter, NearestMipmapNearestFilter, NearestMipmapLinearFilter, LinearFilter, LinearMipmapNearestFilter, LinearMipmapLinearFilter, ClampToEdgeWrapping, MirroredRepeatWrapping, InterpolateLinear, LoaderUtils, LinearSRGBColorSpace, SpotLight, PointLight, DirectionalLight, TextureLoader, ImageBitmapLoader, InterleavedBuffer, InterleavedBufferAttribute, PointsMaterial, Material, SkinnedMesh, LineLoop, Points, Group, OrthographicCamera, Skeleton, AnimationClip, Bone, Texture, VectorKeyframeTrack, NumberKeyframeTrack, QuaternionKeyframeTrack, ColorManagement, Interpolant, Sphere, Vector4, Curve, EquirectangularReflectionMapping, AmbientLight, Uint16BufferAttribute, DataTextureLoader, HalfFloatType, FloatType, DataUtils, RedFormat, RGBA_S3TC_DXT1_Format, RGB_PVRTC_4BPPV1_Format, RGB_ETC2_Format, RGB_ETC1_Format, RGBA_S3TC_DXT5_Format, RGBA_PVRTC_4BPPV1_Format, RGBA_ETC2_EAC_Format, RGBA_BPTC_Format, RGB_BPTC_UNSIGNED_Format, RGBA_ASTC_4x4_Format, UnsignedByteType, CompressedCubeTexture, CompressedArrayTexture, RGBA_ASTC_6x6_Format, RGFormat, DataTexture, Data3DTexture, LoadingManager, AnimationMixer, ObjectSpaceNormalMap, CustomBlending, SkeletonHelper, AnimationUtils, AdditiveAnimationBlendMode, NormalAnimationBlendMode, Raycaster, UVMapping, LinearMipMapLinearFilter, WebGLRenderTarget, IntType, ShortType, ByteType, UnsignedIntType, PMREMGenerator, WebGLCubeRenderTarget, CubeCamera, IcosahedronGeometry, NoToneMapping } from 'three';\n\nconst PI = Math.PI;\nconst torad$3 = PI / 180;\nconst todeg$1 = 180 / PI;\nconst EPSILON = Number.EPSILON;//0.00001;\nconst PI90 = PI*0.5;\n\n\nconst M = {\n\n    //-----------------------\n    //  LIGHT\n    //-----------------------\n\n    luminousPowers : {\n        '110000 lm (1000W)': 110000,\n        '3500 lm (300W)': 3500,\n        '1700 lm (100W)': 1700,\n        '800 lm (60W)': 800,\n        '400 lm (40W)': 400,\n        '180 lm (25W)': 180,\n        '20 lm (4W)': 20,\n        'Off': 0\n    },\n\n    // ref for solar irradiances: https://en.wikipedia.org/wiki/Lux\n    luminousIrradiances : {\n        '0.0001 lx (Moonless Night)': 0.0001,\n        '0.002 lx (Night Airglow)': 0.002,\n        '0.5 lx (Full Moon)': 0.5,\n        '3.4 lx (City Twilight)': 3.4,\n        '50 lx (Living Room)': 50,\n        '100 lx (Very Overcast)': 100,\n        '350 lx (Office Room)': 350,\n        '400 lx (Sunrise/Sunset)': 400,\n        '1000 lx (Overcast)': 1000,\n        '18000 lx (Daylight)': 18000,\n        '50000 lx (Direct Sun)': 50000\n    },\n\n    exposure : (v) => ( Math.pow( v, 5.0 ) ),\n    //Candela is default three light intensity\n    candelaToLumens : (v) => ( v * 4 * Math.PI ),\n    lumensToCandela : (v) => ( v / ( 4 * Math.PI ) ),\n\n    //-----------------------\n    //  MATH\n    //-----------------------\n\n    todeg:todeg$1,\n    torad:torad$3,\n\n    toFixed: ( x, n = 3 ) => ( x.toFixed(n) * 1 ),\n    toRound: ( x, n = 3 ) => ( Math.trunc(x) ),\n\n    clamp: ( v, min = 0, max = 1 ) => {\n        v = v < min ? min : v;\n        v = v > max ? max : v;\n        return v;\n    },\n\n    clampA: ( v, min, max ) => ( Math.max( min, Math.min( max, v ) ) ),\n\n    lerp: ( x, y, t ) => ( ( 1 - t ) * x + t * y ),\n    damp: ( x, y, lambda, dt ) => ( M.lerp( x, y, 1 - Math.exp( - lambda * dt ) ) ),\n\n    nearAngle: ( s1, s2, deg = false ) => ( s2 + Math.atan2(Math.sin(s1-s2), Math.cos(s1-s2)) * (deg ? todeg$1 : 1) ),\n\n    unwrapDeg: ( r ) => ( r - (Math.floor((r + 180)/360))*360 ), \n    //unwrapRad: ( r ) => (r - (Math.floor((r + Math.PI)/(2*Math.PI)))*2*Math.PI),\n    unwrapRad: ( r ) => ( Math.atan2(Math.sin(r), Math.cos(r)) ),\n\n    nearEquals: ( a, b, t ) => ( Math.abs(a - b) <= t ? true : false ),\n\n    autoSize: ( s = [ 1, 1, 1 ], type = 'box' ) => {\n\n        if ( s.length === 1 ) s[ 1 ] = s[ 0 ];\n        let radius = s[0];\n        let height = s[1];\n        if( type === 'sphere' ) s = [ radius, radius, radius ];\n        if( type === 'cylinder' || type === 'wheel' || type === 'capsule' ) s = [ radius, height, radius ];\n        if( type === 'cone' || type === 'pyramid' ) s = [ radius, height, radius ];\n        if ( s.length === 2 ) s[ 2 ] = s[ 0 ];\n        return s;\n\n    },\n\n    shuffle: (array) => {\n\n        let shuffled = array\n        .map(value => ({ value, sort: Math.random() }))\n        .sort((a, b) => a.sort - b.sort)\n        .map(({ value }) => value);\n\n        return shuffled\n\n    },\n\n    /*distance: ( a, b = { x:0, y:0, z:0 } ) => { // rotation array in degree\n\n        const dx = a.x ? a.x - b.x : 0\n        const dy = a.y ? a.y - b.y : 0\n        const dz = a.z ? a.z - b.z : 0\n        return Math.sqrt( dx * dx + dy * dy + dz * dz );\n\n    },*/\n\n\n    //-----------------------\n    //  RANDOM\n    //-----------------------\n\n    randomSign: () => ( Math.random() < 0.5 ? -1 : 1 ),\n    randSpread: ( range ) => ( range * ( 0.5 - Math.random() ) ),\n    rand: ( low = 0, high = 1 ) => ( low + Math.random() * ( high - low ) ),\n    randInt: ( low, high ) => ( low + Math.floor( Math.random() * ( high - low + 1 ) ) ),\n\n    randIntUnic:  ( low, high, num ) => {\n        var arr = [];\n        while( arr.length < num ){\n            var r = M.randInt(low, high);\n            if( arr.indexOf(r) === -1 ) arr.push(r);\n        }\n        return arr;\n    },\n\n    //-----------------------\n    //  EXTRA\n    //-----------------------\n\n    fromTransform: ( p1, q1, p2, q2 = [0,0,0,1], inv = false ) => {\n\n        let m1 = M.composeMatrixArray( p1, q1 );\n        let m2 = M.composeMatrixArray( p2, q2 );\n        if( inv ) m1 = M.invertMatrixArray(m1);\n        m1 = M.multiplyMatrixArray( m1, m2 );\n        return [ m1[12],m1[13],m1[14]]\n\n    },\n\n    fromTransformToQ: ( p, q, inv = false ) => {\n\n        let m = M.composeMatrixArray( p, q );\n        let res = M.decomposeFullMatrixArray( m );\n        let q1 = res.q;\n        if(inv) q1 = M.quatInvert(q1);\n        return q1\n\n    },\n\n    //-----------------------\n    //  MATRIX\n    //-----------------------\n\n    composeMatrixArray: ( p, q, s = [1,1,1] ) => {\n\n        const x = q[0], y = q[1], z = q[2], w = q[3];\n        const x2 = x + x,  y2 = y + y, z2 = z + z;\n        const xx = x * x2, xy = x * y2, xz = x * z2;\n        const yy = y * y2, yz = y * z2, zz = z * z2;\n        const wx = w * x2, wy = w * y2, wz = w * z2;\n        const sx = s[0], sy = s[1], sz = s[2];\n        return [\n            ( 1 - ( yy + zz ) ) * sx, ( xy + wz ) * sx, ( xz - wy ) * sx, 0,\n            ( xy - wz ) * sy, ( 1 - ( xx + zz ) ) * sy, ( yz + wx ) * sy, 0,\n            ( xz + wy ) * sz, ( yz - wx ) * sz, ( 1 - ( xx + yy ) ) * sz, 0,\n            p[0], p[1], p[2], 1\n        ]\n\n    },\n\n    multiplyMatrixArray: ( a, b ) => {\n\n        const ae = a;\n        const be = b;\n        const te = [];\n\n        const a11 = ae[ 0 ], a12 = ae[ 4 ], a13 = ae[ 8 ], a14 = ae[ 12 ];\n        const a21 = ae[ 1 ], a22 = ae[ 5 ], a23 = ae[ 9 ], a24 = ae[ 13 ];\n        const a31 = ae[ 2 ], a32 = ae[ 6 ], a33 = ae[ 10 ], a34 = ae[ 14 ];\n        const a41 = ae[ 3 ], a42 = ae[ 7 ], a43 = ae[ 11 ], a44 = ae[ 15 ];\n\n        const b11 = be[ 0 ], b12 = be[ 4 ], b13 = be[ 8 ], b14 = be[ 12 ];\n        const b21 = be[ 1 ], b22 = be[ 5 ], b23 = be[ 9 ], b24 = be[ 13 ];\n        const b31 = be[ 2 ], b32 = be[ 6 ], b33 = be[ 10 ], b34 = be[ 14 ];\n        const b41 = be[ 3 ], b42 = be[ 7 ], b43 = be[ 11 ], b44 = be[ 15 ];\n\n        te[ 0 ] = a11 * b11 + a12 * b21 + a13 * b31 + a14 * b41;\n        te[ 4 ] = a11 * b12 + a12 * b22 + a13 * b32 + a14 * b42;\n        te[ 8 ] = a11 * b13 + a12 * b23 + a13 * b33 + a14 * b43;\n        te[ 12 ] = a11 * b14 + a12 * b24 + a13 * b34 + a14 * b44;\n\n        te[ 1 ] = a21 * b11 + a22 * b21 + a23 * b31 + a24 * b41;\n        te[ 5 ] = a21 * b12 + a22 * b22 + a23 * b32 + a24 * b42;\n        te[ 9 ] = a21 * b13 + a22 * b23 + a23 * b33 + a24 * b43;\n        te[ 13 ] = a21 * b14 + a22 * b24 + a23 * b34 + a24 * b44;\n\n        te[ 2 ] = a31 * b11 + a32 * b21 + a33 * b31 + a34 * b41;\n        te[ 6 ] = a31 * b12 + a32 * b22 + a33 * b32 + a34 * b42;\n        te[ 10 ] = a31 * b13 + a32 * b23 + a33 * b33 + a34 * b43;\n        te[ 14 ] = a31 * b14 + a32 * b24 + a33 * b34 + a34 * b44;\n\n        te[ 3 ] = a41 * b11 + a42 * b21 + a43 * b31 + a44 * b41;\n        te[ 7 ] = a41 * b12 + a42 * b22 + a43 * b32 + a44 * b42;\n        te[ 11 ] = a41 * b13 + a42 * b23 + a43 * b33 + a44 * b43;\n        te[ 15 ] = a41 * b14 + a42 * b24 + a43 * b34 + a44 * b44;\n\n        return te;\n\n    },\n\n    invertMatrixArray: ( m ) => {\n\n        const te = m,\n\n            n11 = te[ 0 ], n21 = te[ 1 ], n31 = te[ 2 ], n41 = te[ 3 ],\n            n12 = te[ 4 ], n22 = te[ 5 ], n32 = te[ 6 ], n42 = te[ 7 ],\n            n13 = te[ 8 ], n23 = te[ 9 ], n33 = te[ 10 ], n43 = te[ 11 ],\n            n14 = te[ 12 ], n24 = te[ 13 ], n34 = te[ 14 ], n44 = te[ 15 ],\n\n            t11 = n23 * n34 * n42 - n24 * n33 * n42 + n24 * n32 * n43 - n22 * n34 * n43 - n23 * n32 * n44 + n22 * n33 * n44,\n            t12 = n14 * n33 * n42 - n13 * n34 * n42 - n14 * n32 * n43 + n12 * n34 * n43 + n13 * n32 * n44 - n12 * n33 * n44,\n            t13 = n13 * n24 * n42 - n14 * n23 * n42 + n14 * n22 * n43 - n12 * n24 * n43 - n13 * n22 * n44 + n12 * n23 * n44,\n            t14 = n14 * n23 * n32 - n13 * n24 * n32 - n14 * n22 * n33 + n12 * n24 * n33 + n13 * n22 * n34 - n12 * n23 * n34;\n\n        const det = n11 * t11 + n21 * t12 + n31 * t13 + n41 * t14;\n\n        if ( det === 0 ) return [ 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 ];\n\n        const detInv = 1 / det;\n\n        te[ 0 ] = t11 * detInv;\n        te[ 1 ] = ( n24 * n33 * n41 - n23 * n34 * n41 - n24 * n31 * n43 + n21 * n34 * n43 + n23 * n31 * n44 - n21 * n33 * n44 ) * detInv;\n        te[ 2 ] = ( n22 * n34 * n41 - n24 * n32 * n41 + n24 * n31 * n42 - n21 * n34 * n42 - n22 * n31 * n44 + n21 * n32 * n44 ) * detInv;\n        te[ 3 ] = ( n23 * n32 * n41 - n22 * n33 * n41 - n23 * n31 * n42 + n21 * n33 * n42 + n22 * n31 * n43 - n21 * n32 * n43 ) * detInv;\n\n        te[ 4 ] = t12 * detInv;\n        te[ 5 ] = ( n13 * n34 * n41 - n14 * n33 * n41 + n14 * n31 * n43 - n11 * n34 * n43 - n13 * n31 * n44 + n11 * n33 * n44 ) * detInv;\n        te[ 6 ] = ( n14 * n32 * n41 - n12 * n34 * n41 - n14 * n31 * n42 + n11 * n34 * n42 + n12 * n31 * n44 - n11 * n32 * n44 ) * detInv;\n        te[ 7 ] = ( n12 * n33 * n41 - n13 * n32 * n41 + n13 * n31 * n42 - n11 * n33 * n42 - n12 * n31 * n43 + n11 * n32 * n43 ) * detInv;\n\n        te[ 8 ] = t13 * detInv;\n        te[ 9 ] = ( n14 * n23 * n41 - n13 * n24 * n41 - n14 * n21 * n43 + n11 * n24 * n43 + n13 * n21 * n44 - n11 * n23 * n44 ) * detInv;\n        te[ 10 ] = ( n12 * n24 * n41 - n14 * n22 * n41 + n14 * n21 * n42 - n11 * n24 * n42 - n12 * n21 * n44 + n11 * n22 * n44 ) * detInv;\n        te[ 11 ] = ( n13 * n22 * n41 - n12 * n23 * n41 - n13 * n21 * n42 + n11 * n23 * n42 + n12 * n21 * n43 - n11 * n22 * n43 ) * detInv;\n\n        te[ 12 ] = t14 * detInv;\n        te[ 13 ] = ( n13 * n24 * n31 - n14 * n23 * n31 + n14 * n21 * n33 - n11 * n24 * n33 - n13 * n21 * n34 + n11 * n23 * n34 ) * detInv;\n        te[ 14 ] = ( n14 * n22 * n31 - n12 * n24 * n31 - n14 * n21 * n32 + n11 * n24 * n32 + n12 * n21 * n34 - n11 * n22 * n34 ) * detInv;\n        te[ 15 ] = ( n12 * n23 * n31 - n13 * n22 * n31 + n13 * n21 * n32 - n11 * n23 * n32 - n12 * n21 * n33 + n11 * n22 * n33 ) * detInv;\n\n        return te;\n\n    },\n\n    matrixArrayDeterminant: ( m ) => {\n        const te = m;\n\n        const n11 = te[ 0 ], n12 = te[ 4 ], n13 = te[ 8 ], n14 = te[ 12 ];\n        const n21 = te[ 1 ], n22 = te[ 5 ], n23 = te[ 9 ], n24 = te[ 13 ];\n        const n31 = te[ 2 ], n32 = te[ 6 ], n33 = te[ 10 ], n34 = te[ 14 ];\n        const n41 = te[ 3 ], n42 = te[ 7 ], n43 = te[ 11 ], n44 = te[ 15 ];\n\n        //TODO: make this more efficient\n        //( based on http://www.euclideanspace.com/maths/algebra/matrix/functions/inverse/fourD/index.htm )\n\n        return (\n            n41 * (\n                + n14 * n23 * n32\n                 - n13 * n24 * n32\n                 - n14 * n22 * n33\n                 + n12 * n24 * n33\n                 + n13 * n22 * n34\n                 - n12 * n23 * n34\n            ) +\n            n42 * (\n                + n11 * n23 * n34\n                 - n11 * n24 * n33\n                 + n14 * n21 * n33\n                 - n13 * n21 * n34\n                 + n13 * n24 * n31\n                 - n14 * n23 * n31\n            ) +\n            n43 * (\n                + n11 * n24 * n32\n                 - n11 * n22 * n34\n                 - n14 * n21 * n32\n                 + n12 * n21 * n34\n                 + n14 * n22 * n31\n                 - n12 * n24 * n31\n            ) +\n            n44 * (\n                - n13 * n22 * n31\n                 - n11 * n23 * n32\n                 + n11 * n22 * n33\n                 + n13 * n21 * n32\n                 - n12 * n21 * n33\n                 + n12 * n23 * n31\n            )\n\n        );\n    },\n\n    decomposeMatrixArray: ( m ) => {\n\n        return [\n            m[12],m[13],m[14],\n        ]\n    },\n\n    decomposeFullMatrixArray: ( m ) => {\n\n        const te = m;\n\n        let sx = M.lengthArray( [te[ 0 ], te[ 1 ], te[ 2 ]] );//_v1.set( te[ 0 ], te[ 1 ], te[ 2 ] ).length();\n        const sy = M.lengthArray( [te[ 4 ], te[ 5 ], te[ 6 ]] );//_v1.set( te[ 4 ], te[ 5 ], te[ 6 ] ).length();\n        const sz = M.lengthArray( [te[ 8 ], te[ 9 ], te[ 10 ]] );//_v1.set( te[ 8 ], te[ 9 ], te[ 10 ] ).length();\n\n        // if determine is negative, we need to invert one scale\n        const det = M.matrixArrayDeterminant(m);\n        if ( det < 0 ) sx = - sx;\n\n        let m1 = [...m];\n        const invSX = 1 / sx;\n        const invSY = 1 / sy;\n        const invSZ = 1 / sz;\n\n        m1[ 0 ] *= invSX;\n        m1[ 1 ] *= invSX;\n        m1[ 2 ] *= invSX;\n\n        m1[ 4 ] *= invSY;\n        m1[ 5 ] *= invSY;\n        m1[ 6 ] *= invSY;\n\n        m1[ 8 ] *= invSZ;\n        m1[ 9 ] *= invSZ;\n        m1[ 10 ] *= invSZ;\n\n        let q = M.quatFromRotationMatrix(m1); \n\n        return {\n            p:[m[12],m[13],m[14]],\n            q:q,\n            s:[sx,sy,sz]\n        }\n        \n    },\n\n    // for physx substep \n\n    applyTransformArray: ( v, p, q, s = [1,1,1] ) => {\n        const e = M.composeMatrixArray( p, q, s );\n        const x = v[0], y = v[1], z = v[2];\n        const w = 1 / ( e[ 3 ] * x + e[ 7 ] * y + e[ 11 ] * z + e[ 15 ] );\n        return [\n            ( e[ 0 ] * x + e[ 4 ] * y + e[ 8 ] * z + e[ 12 ] ) * w, \n            ( e[ 1 ] * x + e[ 5 ] * y + e[ 9 ] * z + e[ 13 ] ) * w,\n            ( e[ 2 ] * x + e[ 6 ] * y + e[ 10 ] * z + e[ 14 ] ) * w\n        ]\n    },\n\n    \n\n    slerpQuatArray: ( a, b, t ) => {\n\n        if ( t === 0 ) return a;\n        if ( t === 1 ) return b;\n        let r = [...a];\n        const x = a[0], y = a[1], z = a[2], w = a[3];\n        const qx = b[0], qy = b[1], qz = b[2], qw = b[3];\n        let cosHalfTheta = w * qw + x * qx + y * qy + z * qz;\n\n        if ( cosHalfTheta < 0 ) {\n            r = [ -qx, -qy, -qz, -qw ];\n            cosHalfTheta = - cosHalfTheta;\n        } else {\n            r = [...b];\n        }\n\n        if ( cosHalfTheta >= 1.0 ) return a\n        \n        const sqrSinHalfTheta = 1.0 - cosHalfTheta * cosHalfTheta;\n\n        if ( sqrSinHalfTheta <= EPSILON ) {\n\n            const s = 1 - t;\n            r[3] = s * w + t * r[3];\n            r[0] = s * x + t * r[0];\n            r[1] = s * y + t * r[1];\n            r[2] = s * z + t * r[2];\n            return M.quatNomalize(r);\n\n        }\n\n        const sinHalfTheta = Math.sqrt( sqrSinHalfTheta );\n        const halfTheta = Math.atan2( sinHalfTheta, cosHalfTheta );\n        const ratioA = Math.sin( ( 1 - t ) * halfTheta ) / sinHalfTheta, ratioB = Math.sin( t * halfTheta ) / sinHalfTheta;\n\n        r[3] = ( w * ratioA + r[3] * ratioB );\n        r[0] = ( x * ratioA + r[0] * ratioB );\n        r[1] = ( y * ratioA + r[1] * ratioB );\n        r[2] = ( z * ratioA + r[2] * ratioB );\n\n        return r;\n\n    },\n\n\n    //-----------------------\n    //  QUAT\n    //-----------------------\n\n    toLocalQuatArray: ( rot = [0,0,0], b ) => { // rotation array in degree\n\n        let q1 = M.quatFromEuler( rot );\n        let q2 = M.quatInvert( b.quaternion.toArray() );\n        return M.quatMultiply( q2, q1 )\n\n        /*quat.setFromEuler( euler.fromArray( math.vectorad( rot ) ) )\n        quat.premultiply( b.quaternion.invert() );\n        return quat.toArray();*/\n\n    },\n\n    quatFromRotationMatrix: ( m ) => {\n\n        let q = [0,0,0,1];\n\n        const te = m,\n\n            m11 = te[ 0 ], m12 = te[ 4 ], m13 = te[ 8 ],\n            m21 = te[ 1 ], m22 = te[ 5 ], m23 = te[ 9 ],\n            m31 = te[ 2 ], m32 = te[ 6 ], m33 = te[ 10 ],\n\n            trace = m11 + m22 + m33;\n\n        if ( trace > 0 ) {\n\n            const s = 0.5 / Math.sqrt( trace + 1.0 );\n\n            q[3] = 0.25 / s;\n            q[0] = ( m32 - m23 ) * s;\n            q[1] = ( m13 - m31 ) * s;\n            q[2] = ( m21 - m12 ) * s;\n\n        } else if ( m11 > m22 && m11 > m33 ) {\n\n            const s = 2.0 * Math.sqrt( 1.0 + m11 - m22 - m33 );\n\n            q[3] = ( m32 - m23 ) / s;\n            q[0] = 0.25 * s;\n            q[1] = ( m12 + m21 ) / s;\n            q[2] = ( m13 + m31 ) / s;\n\n        } else if ( m22 > m33 ) {\n\n            const s = 2.0 * Math.sqrt( 1.0 + m22 - m11 - m33 );\n\n            q[3] = ( m13 - m31 ) / s;\n            q[0] = ( m12 + m21 ) / s;\n            q[1] = 0.25 * s;\n            q[2] = ( m23 + m32 ) / s;\n\n        } else {\n\n            const s = 2.0 * Math.sqrt( 1.0 + m33 - m11 - m22 );\n\n            q[3] = ( m21 - m12 ) / s;\n            q[0] = ( m13 + m31 ) / s;\n            q[1] = ( m23 + m32 ) / s;\n            q[2] = 0.25 * s;\n\n        }\n\n        return q;\n\n    },\n\n    quatFromEuler: ( r = [0,0,0], isDeg = true ) => {\n\n        const cos = Math.cos;\n        const sin = Math.sin;\n        const n = isDeg ? torad$3 : 1; \n        const x = (r[0]*n) * 0.5, y = (r[1]*n) * 0.5, z = (r[2]*n) * 0.5;\n        const c1 = cos( x ), c2 = cos( y ), c3 = cos( z );\n        const s1 = sin( x ), s2 = sin( y ), s3 = sin( z );\n\n        return [\n            s1 * c2 * c3 + c1 * s2 * s3,\n            c1 * s2 * c3 - s1 * c2 * s3,\n            c1 * c2 * s3 + s1 * s2 * c3,\n            c1 * c2 * c3 - s1 * s2 * s3\n        ]\n        \n    },\n\n    quatFromAxis: ( r = [0,0,0], angle, isDeg = true ) => {\n\n        const n = isDeg ? torad$3 : 1; \n        const halfAngle = (angle * 0.5) * n, s = Math.sin( halfAngle );\n        return [\n            r[0] * s,\n            r[1] * s,\n            r[2] * s,\n            Math.cos( halfAngle )\n        ]\n        \n    },\n\n    quatNomalize: ( q ) => {\n        let l = M.lengthArray( q );\n        if ( l === 0 ) {\n            return [0,0,0,1]\n        } else {\n            l = 1 / l;\n            return M.scaleArray(q, l, 4)\n        }\n    },\n\n    quatInvert: ( q ) => {\n        return [-q[0],-q[1],-q[2], q[3]]\n    },\n\n    quatMultiply:( a, b ) => {\n        const qax = a[0], qay = a[1], qaz = a[2], qaw = a[3];\n        const qbx = b[0], qby = b[1], qbz = b[2], qbw = b[3];\n        return [\n            qax * qbw + qaw * qbx + qay * qbz - qaz * qby,\n            qay * qbw + qaw * qby + qaz * qbx - qax * qbz,\n            qaz * qbw + qaw * qbz + qax * qby - qay * qbx,\n            qaw * qbw - qax * qbx - qay * qby - qaz * qbz\n        ]\n    },\n\n    quatToAxis:( q ) => {\n\n        let w = 2 * Math.acos( q[3] );\n        const s = Math.sqrt( 1 - q[3] * q[3] );\n        if ( s < 0.0001 ) {\n            return [1,0,0]\n        } else {\n             return [ q[0] / s, q[1] / s, q[2] / s, w ]\n        }\n    },\n\n    eulerFromMatrix: (te) => {\n\n        const m11 = te[ 0 ], m12 = te[ 4 ], m13 = te[ 8 ];\n        te[ 1 ]; const m22 = te[ 5 ], m23 = te[ 9 ];\n        te[ 2 ]; const m32 = te[ 6 ], m33 = te[ 10 ];\n\n        let ar = [0,0,0];\n        ar[1] = Math.asin( M.clamp( m13, -1, 1 ) );\n        if ( Math.abs( m13 ) < 0.9999999 ) {\n            ar[0] = Math.atan2( - m23, m33 );\n            ar[2] = Math.atan2( - m12, m11 );\n        } else {\n            ar[0] = Math.atan2( m32, m22 );\n            ar[2] = 0;\n        }\n        return ar\n\n    },\n\n    angleTo: ( a, b ) => {\n\n        return 2 * Math.acos( Math.abs( M.clamp( M.dotArray(a,b), -1, 1 ) ) );\n\n    },\n\n\n    //-----------------------\n    //  ARRAY\n    //-----------------------\n\n    getSize: ( r ) => ( ( r.byteLength * 0.001 ) +'kb' ),\n\n    // Creates a vector normal (perpendicular) to the current Vector3\n\n    perpendicularArray: ( v ) => { \n\n        const radius = Math.sqrt(v[0] * v[0] + v[1] * v[1] + v[2] * v[2]);\n        let theta = Math.acos(v[1] / radius);\n        const phi = Math.atan2(v[2], v[0]);\n        //makes angle 90 degs to current vector\n        if( theta > PI90 ) theta -= PI90;\n        else theta += PI90;\n        //Calculates resutant normal vector from spherical coordinate of perpendicular vector\n        const x = radius * Math.sin(theta) * Math.cos(phi);\n        const y = radius * Math.cos(theta);\n        const z = radius * Math.sin(theta) * Math.sin(phi);\n\n        return [x, y, z];\n\n    },\n\n    crossArray: ( a, b ) => { \n\n        const ax = a[0], ay = a[1], az = a[2];\n        const bx = b[0], by = b[1], bz = b[2];\n        let x = ay * bz - az * by;\n        let y = az * bx - ax * bz;\n        let z = ax * by - ay * bx;\n        return [x, y, z];\n\n    },\n\n    applyQuaternion: ( v, q ) => { \n\n        // quaternion q is assumed to have unit length\n\n        const vx = v[0], vy = v[1], vz = v[2];\n        const qx = q[0], qy = q[1], qz = q[2], qw = q[3];\n\n        // t = 2 * cross( q.xyz, v );\n        const tx = 2 * ( qy * vz - qz * vy );\n        const ty = 2 * ( qz * vx - qx * vz );\n        const tz = 2 * ( qx * vy - qy * vx );\n\n        // v + q.w * t + cross( q.xyz, t );\n        let x = vx + qw * tx + qy * tz - qz * ty;\n        let y = vy + qw * ty + qz * tx - qx * tz;\n        let z = vz + qw * tz + qx * ty - qy * tx;\n\n        return [x,y,z];\n\n    },\n\n    nullArray: ( a, n, i ) => { \n        let j = 0;\n        while( i-- ) j += a[n+i];\n        return j;\n    },\n\n    equalArray: ( a, b ) => {\n        let i = a.length;\n        while(i--){ if(a[i]!==b[i]) return false; }\n        return true;\n    },\n    \n    lerpArray: ( a, b, t ) => {\n        if ( t === 0 ) return a;\n        if ( t === 1 ) return b;\n        let i = a.length;\n        let r = [];\n        while(i--){ r[i] = a[i]; r[i] += ( b[i] - r[i] ) * t; }\n        return r;\n    },\n\n    zeroArray: ( a, n = 0, i ) => {\n        i = i ?? a.length;\n        while ( i-- ) a[n+i] = 0;\n        return a;\n    },\n\n    lengthArray: ( r ) => {\n        let i = r.length, l=0;\n        while( i-- ) l += r[i] * r[i];\n        return Math.sqrt( l );\n    },\n\n    dotArray: ( a, b ) => {\n        let i = a.length, r = 0;\n        while ( i-- ) r += a[ i ] * b[ i ];\n        return r;\n    },\n\n    addArray: ( a, b, i ) => {\n        i = i ?? a.length;\n        let r = [];\n        while ( i-- ) r[i] = a[i] + b[i];\n        return r;\n    },\n\n    subArray: ( a, b, i ) => {\n        i = i ?? a.length;\n        let r = [];\n        while ( i-- ) r[i] = a[i] - b[i];\n        return r;\n    },\n\n    mulArray: ( a, b, i ) => {\n        \n        let ar = b instanceof Array;\n        if( !ar ){ \n            return a.map((x) => x * b);\n        } else { \n            let r = [];\n            i = i ?? a.length;\n            while ( i-- ) r[i] = a[i] * b[i];\n            return r;\n        }\n        \n    },\n\n    divArray: ( r, s, i ) => ( M.mulArray( r, 1/s, i ) ),\n\n    scaleArray: ( r, s, i ) => ( M.mulArray( r, s, i ) ),\n\n    fillArray: ( a, b, n = 0, i ) => {\n        i = i ?? a.length;\n        while( i-- ) b[n+i] = a[i];\n    },\n\n    copyArray: ( a, b ) => { [...b]; },\n\n    cloneArray: ( a ) => ( [...a] ),\n\n    distanceArray: ( a, b = [0,0,0] ) => ( M.lengthArray( M.subArray( a, b ) ) ),\n\n    normalizeArray: ( a ) => ( M.divArray( a, M.lengthArray(a) || 1 ) ),\n\n    normalArray: ( a, b = [0,0,0] ) => ( M.normalizeArray( M.subArray( b, a ) ) ),\n\n    //-----------------------\n    //  VOLUME\n    //-----------------------\n\n    getVolume: ( type, size, vertex = null ) => {\n\n        let volume = 1;\n        let s = size;\n\n        switch(type){\n            \n            case 'sphere' : volume = (4*Math.PI*s[0]*s[0]*s[0])/3; break;\n            case 'cone' : volume = Math.PI * s[0] * (s[1] * 0.5) * 2; break;\n            case 'box' : volume = 8 * (s[0]*0.5)*(s[1]*0.5)*(s[2]*0.5); break;\n            case 'cylinder' : volume = Math.PI * s[0] * s[0] * (s[1] * 0.5) * 2; break;\n            case 'capsule' : volume = ( (4*Math.PI*s[0]*s[0]*s[0])/3) + ( Math.PI * s[0] * s[0] * (s[1] * 0.5) * 2 ); break;\n            case 'convex' : case 'mesh' : volume = M.getConvexVolume( vertex ); break;\n\n        }\n\n        return volume;\n\n    },\n\n    getConvexVolume: ( v ) => {\n\n        let i = v.length / 3, n;\n        let min = [0, 0, 0];\n        let max = [0, 0, 0];\n\n        while(i--){\n\n            n = i*3;\n            if ( v[n] < min[0] ) min[0] = v[n];\n            else if (v[n] > max[0]) max[0] = v[n];\n            if ( v[n+1] < min[1] ) min[1] = v[n+1];\n            else if (v[n+1] > max[1]) max[1] = v[n+1];\n            if ( v[n+2] < min[2] ) min[2] = v[n+2];\n            else if (v[n+2] > max[2]) max[2] = v[n+2];\n\n        }\n\n        let s = [ max[0]-min[0], max[1]-min[1], max[2]-min[2] ];\n\n        return 8 * (s[0]*0.5)*(s[1]*0.5)*(s[2]*0.5);\n        //return (max[0]-min[0])*(max[1]-min[1])*(max[2]-min[2])\n\n    },\n\n    massFromDensity: ( density, volume ) =>  ( density * volume ),\n    densityFromMass: ( mass, volume ) =>  ( mass / volume ),\n\n\n    // GEOMETRY\n    toNonIndexed: ( g ) => ( !g.index ? g : g.clone().toNonIndexed() ),\n\n    getIndex: ( g, noIndex ) => {\n\n        if( !g.index || noIndex ) return null\n        return g.index.array || null\n\n    },\n\n    getVertex: ( g, noIndex ) => {\n        \n        let c = g.attributes.position.array;\n\n        if( noIndex && g.index ){\n            g = g.clone().toNonIndexed();\n            c = g.attributes.position.array;\n        }\n\n        return c;\n\n    },\n\n    getNormal: ( g ) => {\n\n        //if( noIndex && g.index ) g = g.clone().toNonIndexed();\n        \n        let c = g.attributes.normal.array;\n        //console.log(c)\n        return c;\n\n    },\n\n    getFaces: ( g ) => {\n\n        let faces = [];\n        if( g.index ){\n            let index = g.getIndex();\n            for ( let i = 0; i < index.count; i += 3 ) {\n                faces.push( [index.getX(i), index.getX(i+1), index.getX(i+2)] );\n            }\n        }else {\n            let lng = g.getAttribute( 'position' ).count;\n            for ( let i = 0; i < lng; i += 3 ) {\n                faces.push([i, i+1, i+2] );\n            }\n        }\n        return faces;\n\n    },\n\n    reduce: ( x ) => {\n    },\n\n    barycentric: ( simplex, point ) => {\n    },\n\n    solve: ( simplex, point ) => {\n    }\n\n};\n\nconst MathTool = M;\n\n// point weight blend space javascript\n\n/*\nget_blend_space_2d_node_influences :: (using space : *Blend_Space_2d, position : Vec2) -> []f32 #must\n{\n    weights           := alloc_array (f32, nodes.count, temp_allocator);\n    sqrd_distances    := alloc_array (f32, nodes.count, temp_allocator);\n    angular_distances := alloc_array (f32, nodes.count, temp_allocator);\n\n    total_sqrd_distance, total_angular_distance := 0.0;\n    for nodes\n    {\n        sqrd_distance := dot (position - it.position, position - it.position);\n        if sqrd_distance > 0\n        {\n            angular_distance := -(clamp (dot (normalize (position), normalize (it.position)), -1, 1) - 1) * 0.5;\n            total_sqrd_distance += 1 / sqrd_distance;\n            if angular_distance > 0 then total_angular_distance += 1 / angular_distance;\n            sqrd_distances[it_index] = sqrd_distance;\n            angular_distances[it_index] = angular_distance;\n        }\n        else    // The distance is 0 so it.position == position\n        {\n            // Weights are already initialized to 0\n            weights[it_index] = 1;\n\n            return weights;\n        }\n    }\n\n    for i : 0..nodes.count - 1\n    {\n        sqrd_distance    := total_sqrd_distance    * sqrd_distances[i];\n        angular_distance := total_angular_distance * angular_distances[i];\n        if sqrd_distance > 0 && angular_distance > 0\n            weights[i] = (1 / sqrd_distance) * 0.5 + (1 / angular_distance) * 0.5;\n        else if sqrd_distance > 0\n            weights[i] = (1 / sqrd_distance) * 0.5 + 0.5;\n        else\n            weight = 0;\n    }\n\n    return weights;\n}\n*/\n\nconst Max = {\n\tbody:4000,\n    joint:1000,\n    contact:4000,\n    ray:100,\n    character:100,\n    vehicle:50,\n    solver:20,\n};\n\nconst Num = {\n\tbodyFull:14,\n    body:8,\n    joint:16,\n    contact:1,\n    ray:11,\n    character:16,\n    vehicle:72,//max 8 wheels\n    solver:128,\n};\n\n\n// Define how many body phy can manage\n\nconst getArray = function ( engine, full = false ){\n\n    const ArPos = {};\n\n    let counts = {\n        body: Max.body * ( full ? Num.bodyFull : Num.body ),\n        joint: Max.joint * Num.joint,\n        ray: Max.ray * Num.ray,\n        contact: Max.contact * Num.contact,\n        character: Max.character * Num.character\n    };\n\n    if( engine === 'PHYSX' || engine === 'AMMO' ){ \n        counts['vehicle'] = Max.vehicle * Num.vehicle;\n    }\n\n    if( engine === 'PHYSX' ){ \n        counts['solver'] = Max.solver * Num.solver;\n    }\n\n    if( engine === 'HAVOK' || engine === 'RAPIER' || engine === 'JOLT' ){ \n        Num.joint = 0;\n    }\n\n    let prev = 0;\n\n    for( let m in counts ){ \n\n        ArPos[m] = prev;\n        prev += counts[m];\n\n    }\n\n    ArPos['total'] = prev;\n\n    return ArPos;\n\n};\n\n\n// Convert type for all engine\n\nconst getType = function ( o ) {\n    switch( o.type ){\n        case 'plane': case 'box': case 'sphere': case 'highSphere': case 'customSphere': case 'cylinder': case 'stair':case 'particle':\n        case 'cone': case 'capsule': case 'mesh': case 'convex': case 'compound': case 'null':\n            //if ( ( !o.mass || !o.density ) && !o.kinematic ) return 'solid'\n            if ( !o.mass && !o.density && !o.kinematic ) return 'solid'\n            else return 'body'\n        case 'fixe':\n        case 'generic': case 'universal': case \"dof\": case \"d6\": \n        case 'hinge': case 'revolute': \n        case \"prismatic\": \n        case 'cylindrical': case 'slider':\n        case 'spherical':\n        case 'ragdoll': \n        case \"distance\":\n            return 'joint'\n        default: \n            return o.type;\n    }\n};\n\n//import { CircleHelper } from '../3TH/helpers/CircleHelper.js';\n//import { CarbonTexture } from '../3TH/textures/CarbonTexture.js';\n\n\nconst map = new Map();\n\n//-------------------\n//\n//  ROOT\n//\n//-------------------\n\nconst root = {\n\n\tdebug:false,\n\n\tAr:null, \n\tArPos: {},\n\n\tgarbage:[],\n\n\t//AR:null,\n\n\tviewSize:null,\n\n\tengine:'OIMO',\n\tmotor: null,\n\tscene : null,\n\tscenePlus : null,\n\t//threeScene : null,\n\tpost : null,\n\t//up:null,\n\t//update:null,\n\t//change:null,\n\tjointVisible:false,\n\tdelta:0,\n\tadd:null,\n\tremove:null,\n\titems:null,\n\ttmpMesh : [],\n\tinstanceMesh : {},\n\ttmpTex : [],\n\t//tmpMat : [],\n\n\t//hideMaterial: null,\n\t//lineMaterial: null,\n\n\tmouseDown:false,\n\t\n\tflow:{\n\t\tstamp:0,\n\t\tcurrent:'',\n\t\tkey:[],\n\t\ttmp:[],\n\t\tadd:[],\n\t\tremove:[]\n\t},\n\treflow:{\n\t\tray:[],\n\t\tstat:{ fps:0 },\n\t\tpoint:{},\n\t},\n\n\textraMaterial:() => {},\n\t\n\tdisposeTmp:() => {\n\n\t\t// clear temporary mesh\n\t\tlet i, j, m;\n\t\tfor( i in root.tmpMesh ) {\n\t\t\tm = root.tmpMesh[i];\n\t\t\tif( m.children ){\n\t\t\t\tfor( j in m.children ) root.disposeMesh( m.children[j] );\n\t\t\t}\n\t\t\troot.disposeMesh( m );\n\t\t\tif( m.parent ) m.parent.remove( m );\n\t\t}\n\t\troot.tmpMesh = [];\n\n\t\t// clear temporary textures\n\t\tfor( i in root.tmpTex ) root.tmpTex[i].dispose();\n\n\t},\n\n\tdisposeMesh:( m ) => {\n\t\tif( m.geometry ) m.geometry.dispose();\n\t\tif( m.dispose ) m.dispose();\n\t},\n\n};\n\n\n//-------------------\n//\n//  UTILS\n//\n//-------------------\n\nconst Utils = {\n\n\tbyName: ( name ) => {\n\n\t\tif ( !map.has( name ) ) return null;\n\t\treturn map.get( name );\n\n\t},\n\n\tadd: ( b, parent ) => {\n\n\t\tif( b.type !== 'contact' && !b.isInstance && b.isObject3D ){\n\n\t\t\t//console.log('add', b.name, b.type )\n\n\t\t\tif(!parent){\n\t\t\t\tif(b.isButton){ root.scene.add( b ); }\n\t\t\t\telse {\n\t\t\t\t\tswitch( b.type ){\n\t\t\t\t\t\tcase 'terrain': case 'solid': case 'joint': case 'ray': case 'articulation': root.scenePlus.add( b ); break;\n\t\t\t\t\t\tdefault: root.scene.add( b ); break;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t} else {\n\t\t\t\tparent.add( b );\n\t\t\t}\n\n\t\t}\n\n\t\tif( b.isInstance && b.refName !== b.name ) map.set( b.refName, b );\n\n\t\tmap.set( b.name, b );\n\n\t},\n\n\tremove:( b ) => {\n\n\t\tif( b.dispose ) b.dispose();\n\t\tif( b.parent ) b.parent.remove( b );\n\t\tif( b.isInstance ) { \n\t\t\tif( b.refName !== b.name ) map.delete( b.refName );\n\t\t\tb.instance.remove( b.id );\n\t\t}\n\t\tmap.delete( b.name );\n\n\t},\n\n\tnoRay:( b ) => {\n\t\tif( b.isObject3D ){\n\t\t\tb.raycast = () => {return};\n\t\t\tb.traverse( ( child ) => {\n\t\t\t\tif ( child.isObject3D ) child.raycast = () => {return};\n\t\t\t});\n\t\t}\n\t},\n\n    morph: ( obj, name, value ) => {\n        \n        if(!obj.morphTargetInfluences) return\n        if(obj.morphTargetDictionary[name] === undefined ) return\n        obj.morphTargetInfluences[ obj.morphTargetDictionary[name] ] = value;\n    \n    },\n\n\n    toLocal: ( v, obj, isAxe = false ) => {\n\n    \t//if( obj.isObject3D ) obj.updateWorldMatrix( true, false )\n    \t// apply position\n    \tif(!isAxe) v.sub( obj.position );\n    \t//v.multiply(obj.scale)\n    \t// apply invers rotation\n    \tlet q = obj.quaternion;//.normalize();\n    \t//v.applyQuaternion(q.clone().invert())\n    \t//v.applyQuaternion({x:-q.x, y:-q.y, z:-q.z, w:q.w})\n    \tv.applyQuaternion({x:-q._x, y:-q._y, z:-q._z, w:q._w});\n    \t//if(isAxe) v.normalize()\n    \treturn v\n\n    },\n\n    quatLocal: ( q, obj ) => {\n\n    \tif( obj.isObject3D ) obj.updateWorldMatrix( true, false );\n    \t// apply position\n    \t//if(!isAxe) v.sub( obj.position )\n    \t// apply invers rotation\n    \tlet q1 = new Quaternion().fromArray(q);\n    \tlet q2 = obj.quaternion.clone().invert();\n    \tq1.premultiply(q2);\n    \t//v.applyQuaternion({x:-q.x, y:-q.y, z:-q.z, w:q.w})\n    \treturn q1.normalize().toArray();\n\n    },\n\n    axisLocal: ( v, obj ) => {\n\n    \tif( obj.isObject3D ) obj.updateWorldMatrix( true, false );\n    \t// apply position\n\n        let m3 = new Matrix3().setFromMatrix4( obj.matrixWorld );//.invert()\n        //m3.invert()\n        let vv = new Vector3().fromArray(v).applyMatrix3( m3 );\n\n        //let vv = new Vector3().fromArray(v).applyMatrix4( obj.matrixWorld.clone().invert() );\n\n    \treturn vv.toArray()\n\n    },\n\n\n    quatToAngular: ( qb, qa ) => {\n\n    \t/*const qq1 = new Quaternion().fromArray(qa);\n    \tconst qq2 = new Quaternion().fromArray(qb);\n    \t//qq1.normalize()\n    \t//qq2.normalize();\n\n\n\n    \tqq2.multiply( qq1.invert() )*/\n\n    \t// invert\n    \tqa[0] *= -1;\n    \tqa[1] *= -1;\n    \tqa[2] *= -1;\n\n    \tlet x = qa[0] * qb[3] + qa[3] * qb[0] + qa[1] * qb[2] - qa[2] * qb[1];\n\t\tlet y = qa[1] * qb[3] + qa[3] * qb[1] + qa[2] * qb[0] - qa[0] * qb[2];\n\t\tlet z = qa[2] * qb[3] + qa[3] * qb[2] + qa[0] * qb[1] - qa[1] * qb[0];\n\t\tlet w = qa[3] * qb[3] - qa[0] * qb[0] - qa[1] * qb[1] - qa[2] * qb[2];\n\n    \tlet angle = 2 * Math.acos(w), ax;\n\t    let s = Math.sqrt(1-w*w); // assuming quaternion normalised then w is less than 1, so term always positive.\n\t    if (s < 0.001) { // test to avoid divide by zero, s is always positive due to sqrt\n\t        // if s close to zero then direction of axis not important\n\t        // if it is important that axis is normalised then replace with x=1; y=z=0;\n\t        ax = [0,0,0];\n\t    } else {\n\t        //x = q[0] / s; // normalise axis\n\t        ax =  [x / s,y / s,z / s];\n        }\n\n\n\n    \t/*const matrix1 = new Matrix4().makeRotationFromQuaternion(qq1);\n    \tconst matrix2 = new Matrix4().makeRotationFromQuaternion(qq2);\n\n    \tmatrix2.multiply(matrix1.invert())\n\n    \tconst v = new Vector3().applyMatrix4(matrix2);\n    \tconst angle = Math.acos((matrix2.elements[0] + matrix2.elements[5] + matrix2.elements[10] - 1) / 2);\n*/\n        const v = new Vector3().fromArray(ax);\n    \tconst timeDiff = 1;//time2 - time1;\n    \tv.multiplyScalar( angle / timeDiff );\n\n    \t//console.log('result',v)\n\n    },\n\n   /* matrixToAxix: ( m ) => {\n\n    \tlet p = new Vector3(1,0,0).transformDirection( m )\n    \treturn p.toArray()\n\n    },*/\n\n    refAxis:( m, axe ) => {\n\n    \tlet zAxis = new Vector3().fromArray(axe);\n\t    let xAxis = new Vector3(1, 0, 0);\n\t    let yAxis = new Vector3(0, 1, 0);\n\t    if ( Math.abs( axe[1] ) > 0.9999 ){\n\t\t\tyAxis.copy( xAxis ).cross( zAxis ).normalize();\n\t\t} else {\n\t\t\txAxis.copy( zAxis ).cross( yAxis ).normalize();\n\t\t\tyAxis.copy( xAxis ).cross( zAxis ).normalize();\n\t\t}\n\n\t\tm.makeBasis( xAxis, yAxis, zAxis );\n\n    }\n\n};\n\nclass CircleHelper extends LineSegments {\n\n\tconstructor( box, color = 0xffff00 ) {\n\n\t\tlet size=0.6;\n\n\t\tconst indices = new Uint16Array( [ \n\t\t\t0, 1, 1, 2, 2, 3, 3, 4, 4, 5, 5, 0,   \n\t\t\t6, 7, 7, 8, 8, 9, 9, 10, 10, 11, 11, 6,\n\t\t\t12, 13, 13, 14, 14, 15, 15, 16, 16, 17, 17, 12,\n\t\t\t18,19, 20,21, 22, 23,\n\t\t\t] );\n\t\tconst positions = [\n\n\t\t\n\n\t\t 0.5, 0.0, 0.0,\n\t\t0.25, 0.433, 0.0,\n\t\t-0.25, 0.433, 0.0,\n\t\t-0.5, 0.0, 0.0,\n\t\t-0.25, -0.433, 0.0,\n\t\t0.25, -0.433, 0.0, \n\n\t\t 0.5, 0.0,0.0, \n\t\t0.25,  0.0,0.433,\n\t\t-0.25,  0.0,0.433,\n\t\t-0.5, 0.0, 0.0,\n\t\t-0.25,0.0, -0.433, \n\t\t0.25, 0.0, -0.433, \n\n\t\t0.0,0.5, 0.0,\n\t\t0.0,0.25, 0.433, \n\t\t0.0,-0.25, 0.433, \n\t\t0.0,-0.5, 0.0, \n\t\t0.0,-0.25, -0.433, \n\t\t0.0,0.25, -0.433, \n\n\t\t0, 0, 0,\tsize, 0, 0,\n\t\t0, 0, 0,\t0, size, 0,\n\t\t0, 0, 0,\t0, 0, size,\n\n\t\t\n\t\t];\n\n\t\tconst colors = [\n\n\t\t0, 0, 1,\n\t\t0, 0, 1,\n\t\t0, 0, 1,\n\t\t0, 0, 1,\n\t\t0, 0, 1,\n\t\t0, 0, 1,\n\t\t\n\t\t0, 1, 0,\n\t\t0, 1, 0,\n\t\t0, 1, 0,\n\t\t0, 1, 0,\n\t\t0, 1, 0,\n\t\t0, 1, 0,\n\n        1, 0, 0,\n\t\t1, 0, 0,\n\t\t1, 0, 0,\n\t\t1, 0, 0,\n\t\t1, 0, 0,\n\t\t1, 0, 0,\n\n\t\t1, 0, 0,\t1, 0, 0,\n\t\t0, 1, 0,\t0, 1, 0,\n\t\t0, 0, 1,\t0, 0, 1,\n\n\t\t];\n\n\t\tconst geometry = new BufferGeometry();\n\n\t\tgeometry.setIndex( new BufferAttribute( indices, 1 ) );\n\n\t\tgeometry.setAttribute( 'position', new Float32BufferAttribute( positions, 3 ) );\n\t\tgeometry.setAttribute( 'color', new Float32BufferAttribute( colors, 3 ) );\n\n\t\tsuper( geometry, new LineBasicMaterial( { color: color, depthTest: false, depthWrite: false, toneMapped: false, transparent: true } ) );\n\n\t\tthis.box = box;\n\n\t\tthis.type = 'CircleHelper';\n\n\t\tthis.geometry.computeBoundingSphere();\n\n\t}\n\n\tupdateMatrixWorld( force ) {\n\n\t\tconst box = this.box;\n\n\t\tif ( box.isEmpty() ) return;\n\n\t\tbox.getCenter( this.position );\n\n\t\tbox.getSize( this.scale );\n\n\t\tthis.scale.multiplyScalar( 0.5 );\n\n\t\tsuper.updateMatrixWorld( force );\n\n\t}\n\n\tdispose() {\n\n\t\tthis.geometry.dispose();\n\t\tthis.material.dispose();\n\n\t}\n\n}\n\n//-------------------\n//\n//  GEOMETRY\n//\n//-------------------\n\n\nlet geoN = 0;\nlet geo = {};\n\nconst Geo = {\n\n\tunic: ( g ) => {\n\n\t\tgeo[ 'geo' + geoN++ ] = g;\n\n\t},\n\n\tset: ( g ) => {\n\n\t\tgeo[g.name] = g;\n\n\t},\n\n\tget: ( name, o = {} ) => {\n\n\t\tif( !geo[name] ){\n\t\t\tlet g;\n\t\t\tswitch( name ){\n\t\t\t\tcase 'plane':    g = new PlaneGeometry(1,1); g.rotateX( -Math.PI * 0.5 ); break\n\t\t\t\tcase 'box':      g = new BoxGeometry(1,1,1); break\n\t\t\t\tcase 'sphere':   g = new SphereGeometry( 1, 16, 12 ); break\n\t\t\t\tcase 'cylinder': g = new CylinderGeometry( 1, 1, 1 , 16 ); break\n\t\t\t\t//case 'wheel':    g = new CylinderGeometry( 1, 1, 1 , 16 ); g.rotateX( -Math.PI * 0.5 ); break\n\t\t\t\tcase 'cone':     g = new CylinderGeometry( 0.001, 1, 1 , 16 ); break\n\t\t\t\t//case 'joint':    g = new Box3Helper().geometry; g.scale( 0.05,0.05,0.05 ); break\n\t\t\t\tcase 'particle': g = new SphereGeometry( 1.0, 8, 6 ); break\n\t\t\t\tcase 'joint':    g = new CircleHelper().geometry; break\n\t\t\t\tdefault: return null;\n\t\t\t}\n\t\t\tgeo[name] = g;\n\t\t}\n\n\t\treturn geo[name]\n\t\t\n\t},\n\n\tdispose: () => {\n\t\t//console.log( geo )\n\t\tfor( let n in geo ) geo[n].dispose();\n\t\tgeo = {};\n\t\tgeoN = 0;\n\n\t}\n\n};\n\nclass CarbonTexture {\n\n\tconstructor( normal, c1='rgb(69,69,69)', c2='rgb(39,39,39)'  ) {\n\n\t\tlet s = 128;\n\n\t\tconst canvas = document.createElement( 'canvas' );\n\t\tcanvas.width = canvas.height = s;\n\n\t\tconst ctx = canvas.getContext( '2d' );\n\t\tctx.fillStyle = c1;\n\t\tctx.fillRect( 0, 0, s, s );\n\n\t\tif( !normal ){\n\n\t\t\tctx.beginPath();\n\t\t\tctx.fillStyle = c2;\n\t\t    ctx.rect(0, 0, 32, 64);\n\t\t    ctx.rect(32, 32, 32, 64);\n\t\t    ctx.rect(64, 64, 32, 64);\n\t\t    ctx.rect(96, 96, 32, 64);\n\t\t    ctx.rect(96, -32, 32, 64);\n\t\t    ctx.fill();\n\n\t    } else {\n\n\t    \tlet i, j, n, d;\n\t    \tlet pos = [ [0, 0], [32, 32],[64, 64],[96, 96],[96, -32] ];\n\t    \tlet deg = [ [0, 64], [32, 96],[64, 128],[96, 160],[-32, 32] ];\n\n\t    \tlet f1 = normal ? 'rgb(128,128,255)' : c1;\n\t    \tlet f2 = normal ? 'rgb(160,100,255)' : c2;\n\t    \tlet f3 = normal ? 'rgba(100,160,255, 0.5)' : 'rgba(0,0,0, 0.1)';\n\n\t    \tctx.strokeStyle = f3;\n\t    \tctx.lineWidth = 1;\n\n\t    \tfor( i = 0; i<5; i++ ){\n\n\t    \t\td = ctx.createLinearGradient(0, deg[i][0], 0, deg[i][1]);\n\t\t\t\td.addColorStop(0, f2);\n\t\t\t\td.addColorStop(1, f1);\n\n\t\t\t\tctx.beginPath();\n\t\t\t\tctx.fillStyle = d;\n\t\t\t\tctx.rect(pos[i][0], pos[i][1], 32, 64);\n\t\t\t\tctx.fill();\n\n\t\t\t\tfor( let j = 0; j<8; j++ ){   \n\n\t\t\t\t\tn = (Math.random()-0.5) * 2; \n\t\t\t\t           \n\t\t\t\t    ctx.beginPath();\n\t\t\t\t\tctx.moveTo(pos[i][0]+n+2+j*4, pos[i][1]);\n\t\t\t\t\tctx.lineTo(pos[i][0]+n+2+j*4, pos[i][1]+64);\n\t\t\t\t\tctx.stroke();\n\t\t\t\t}\n\n\t    \t}\n\n\t    \tpos = [ [32, 0], [64, 32],[96, 64],[-32, 64],[0, 96] ];\n\t    \tdeg = [ [32, 96], [64, 128],[96, 160],[-32, 32],[0, 64] ];\n\n\t    \tfor( i = 0; i<5; i++ ){\n\n\t    \t\td = ctx.createLinearGradient(deg[i][0], 0, deg[i][1], 0);\n\t\t\t\td.addColorStop(0, f1);\n\t\t\t\td.addColorStop(1, f2);\n\n\t\t\t\tctx.beginPath();\n\t\t\t\tctx.fillStyle = d;\n\t\t\t\tctx.rect(pos[i][0], pos[i][1], 64, 32);\n\t\t\t\tctx.fill();\n\n\t\t\t\tfor( j = 0; j<8; j++ ){\n\n\t\t\t\t\tn = (Math.random()-0.5) * 2; \n\t\t\t\t\tctx.beginPath();\n\t\t\t\t\tctx.moveTo(pos[i][0], pos[i][1]+n+2+j*4);\n\t\t\t\t\tctx.lineTo(pos[i][0]+64, pos[i][1]+n+2+j*4);\n\t\t\t\t\tctx.stroke();\n\t\t\t\t}\n\n\t    \t}\n\n\t    }\n\n\t\t//return canvas;\n\n\t\tconst texture = new CanvasTexture( canvas ); //new CarbonTexture('#ffffff', '#CCCCCC') )\n\t\ttexture.wrapS = texture.wrapT = RepeatWrapping;\n\t\ttexture.repeat.x = texture.repeat.y = 60;\n\n\t\tif(!normal) texture.colorSpace = SRGBColorSpace;\n\n\t\treturn texture;\n\n\t}\n\n}\n\n/**\n * ------------------------------------------------------------------------------------------\n * Subsurface Scattering shader\n * Based on GDC 2011 – Approximating Translucency for a Fast, Cheap and Convincing Subsurface Scattering Look\n * https://colinbarrebrisebois.com/2011/03/07/gdc-2011-approximating-translucency-for-a-fast-cheap-and-convincing-subsurface-scattering-look/\n *------------------------------------------------------------------------------------------\n */\n\nclass MeshSssMaterial extends MeshPhysicalMaterial {\n\n\tconstructor( parameters ) {\n\n\t\tsuper();\n\n\t\tthis.defines = {\n\n\t\t\t'STANDARD': '',\n\t\t\t'PHYSICAL': '',\n\t\t\t'SUBSURFACE': '',\n\t\t\t'USE_UV': '',\n\n\t\t};\n\n\t\tthis.extra = {};\n\n\t\tthis.addParametre( 'sssMap', null );\n\t\tthis.addParametre( 'sssColor', new Color( 0,0,0 ) );\n\t\tthis.addParametre( 'sssAmbient', 0.5 );\n\t\tthis.addParametre( 'sssDistortion', 0.6 );\n\t\tthis.addParametre( 'sssAttenuation', 0.1 );\n\t\tthis.addParametre( 'sssPower', 1.0 );\n\t\tthis.addParametre( 'sssScale', 6.0 );\n\t\t\n\t\tthis.setValues( parameters );\n\n\t\tlet self = this;\n\n        self.onBeforeCompile = function ( shader ) {\n        \tfor(let name in self.extra ) {\n\t\t\t\tshader.uniforms[ name ] = { value: self.extra[name] };\n\t\t\t}\n\n\t\t\tshader.fragmentShader = shader.fragmentShader.replace( '#include <common>', shaderChange.common );\n\t\t\tshader.fragmentShader = shader.fragmentShader.replace( '#include <lights_fragment_begin>', \n\t\t\t\tself.replaceAll(\n\t\t\t\t\tShaderChunk[ 'lights_fragment_begin' ],\n\t\t\t\t\t'RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );',\n\t\t\t\t\tshaderChange.light\n\t\t\t\t)\n\t\t\t);\n\n\t\t\tself.userData.shader = shader;\n        };\n\n\t}\n\n\taddParametre( name, value ){\n\n\t\tthis.extra[ name ] = value;\n\n\t\tObject.defineProperty( this, name, {\n\t\t\tget: () => ( this.extra[ name ] ),\n\t\t\tset: ( v ) => {\n\t\t\t\tthis.extra[ name ] = v;\n\t\t\t\tif( this.userData.shader ) this.userData.shader.uniforms[name].value = this.extra[ name ];\n\t\t\t}\n\t\t});\n\t}\n\n\treplaceAll( string, find, replace ) {\n\n\t\treturn string.split( find ).join( replace );\n\n\t}\n\n\t/*customProgramCacheKey(){\n\n\t\treturn self\n\n\t} */\n\n\t/*onBeforeCompile( shader ){\n\n\t\tfor(let name in this.extra ) {\n\t\t\tshader.uniforms[ name ] = { value: this.extra[name] };\n\t\t}\n\n\t\tshader.fragmentShader = shader.fragmentShader.replace( '#include <common>', shaderChange.common );\n\t\tshader.fragmentShader = shader.fragmentShader.replace( '#include <lights_fragment_begin>', \n\t\t\tthis.replaceAll(\n\t\t\t\tTHREE.ShaderChunk[ 'lights_fragment_begin' ],\n\t\t\t\t'RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );',\n\t\t\t\tshaderChange.light\n\t\t\t)\n\t\t);\n\n\t\tthis.userData.shader = shader;\n\n\t}*/\n\n}\n\nconst shaderChange = {\n\n\tcommon : /* glsl */`\n\t#include <common>\n\tuniform sampler2D sssMap;\n\tuniform float sssPower;\n\tuniform float sssScale;\n\tuniform float sssDistortion;\n\tuniform float sssAmbient;\n\tuniform float sssAttenuation;\n\tuniform vec3 sssColor;\n\n\tvoid RE_Direct_Scattering(const in IncidentLight directLight, const in vec2 uv, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, inout ReflectedLight reflectedLight) {\n\t\tvec3 thickness = sssColor * texture2D(sssMap, uv).r;\n\t\tvec3 scatteringHalf = normalize(directLight.direction + (geometryNormal * sssDistortion));\n\t\tfloat scatteringDot = pow(saturate(dot(geometryViewDir, -scatteringHalf)), sssPower) * sssScale;\n\t\tvec3 scatteringIllu = (scatteringDot + sssAmbient) * thickness;\n\t\treflectedLight.directDiffuse += scatteringIllu * sssAttenuation * directLight.color;\n\t}\n\t`,\n\tlight : /* glsl */`\n\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t#if defined( SUBSURFACE ) && defined( USE_UV )\n\t\tRE_Direct_Scattering(directLight, vUv, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, reflectedLight);\n\t#endif\n\t`\n};\n\n//https://github.com/0beqz/enhance-shader-lighting\n\n\nconst shaderFunctions = /* glsl */ `\n\nmat4 brightnessMatrix( float brightness )\n{\n    return mat4( 1, 0, 0, 0,\n                 0, 1, 0, 0,\n                 0, 0, 1, 0,\n                 brightness, brightness, brightness, 1 );\n}\n\nmat4 contrastMatrix( float contrast )\n{\n    float t = ( 1.0 - contrast ) / 2.0;\n    \n    return mat4( contrast, 0, 0, 0,\n                 0, contrast, 0, 0,\n                 0, 0, contrast, 0,\n                 t, t, t, 1 );\n\n}\n\nmat4 saturationMatrix( float saturation )\n{\n    vec3 luminance = vec3( 0.3086, 0.6094, 0.0820 );\n    \n    float oneMinusSat = 1.0 - saturation;\n    \n    vec3 red = vec3( luminance.x * oneMinusSat );\n    red+= vec3( saturation, 0, 0 );\n    \n    vec3 green = vec3( luminance.y * oneMinusSat );\n    green += vec3( 0, saturation, 0 );\n    \n    vec3 blue = vec3( luminance.z * oneMinusSat );\n    blue += vec3( 0, 0, saturation );\n    \n    return mat4( red,     0,\n                 green,   0,\n                 blue,    0,\n                 0, 0, 0, 1 );\n}\n//fragColor = brightnessMatrix( brightness ) *\n//                contrastMatrix( contrast ) * \n//                saturationMatrix( saturation ) *\n//                color;\n\n// source: https://timseverien.com/posts/2020-06-19-colour-correction-with-webgl/\nvec3 adjustContrast(vec3 color, float value) {\n    const vec3 zero = vec3(0.);\n    vec3 cc = color-0.5;\n    return max(zero, 0.5 + value * (cc));\n}\n\n// source: https://gist.github.com/yiwenl/745bfea7f04c456e0101\nvec3 hsv2rgb(vec3 c){\n    vec4 K = vec4(1.0, 2.0 / 3.0, 1.0 / 3.0, 3.0);\n    vec3 p = abs(fract(c.xxx + K.xyz) * 6.0 - K.www);\n    return c.z * mix(K.xxx, clamp(p - K.xxx, 0.0, 1.0), c.y);\n}\n\n// source: https://gist.github.com/yiwenl/745bfea7f04c456e0101\nvec3 rgb2hsv(vec3 rgb) {\n    float Cmax = max(rgb.r, max(rgb.g, rgb.b));\n    float Cmin = min(rgb.r, min(rgb.g, rgb.b));\n    float delta = Cmax - Cmin;\n    vec3 hsv = vec3(0., 0., Cmax);\n    if (Cmax > Cmin) {\n        hsv.y = delta / Cmax;\n        if (rgb.r == Cmax)\n            hsv.x = (rgb.g - rgb.b) / delta;\n        else {\n            if (rgb.g == Cmax)\n                hsv.x = 2. + (rgb.b - rgb.r) / delta;\n            else\n                hsv.x = 4. + (rgb.r - rgb.g) / delta;\n        }\n        hsv.x = fract(hsv.x / 6.);\n    }\n    return hsv;\n}\n`;\nconst aoCode = /* glsl */ `\nfloat aoMapClr = 1.;\n\n#ifdef USE_AOMAP\n    aoMapClr = (texture2D(aoMap, vAoMapUv).r - 1.0) * aoMapIntensity + 1.0;\n#else\n    #ifdef USE_LIGHTMAP\n\n        float lightMapIntensityCorrect = lightMapIntensity;\n        if(useLegacyLights) lightMapIntensityCorrect = lightMapIntensity / PI;\n        vec3 lightMapVec = (texture2D(lightMap, vLightMapUv).rgb - vec3(1.)) * (lightMapIntensityCorrect) + vec3(1.);\n        \n        const vec3 luminanceWeight = vec3(0.2126, 0.7152, 0.0722);\n\n        // grayscale the lightmap\n        aoMapClr = dot(lightMapVec.rgb, luminanceWeight);\n    #endif\n#endif\n\nif(aoMapGamma != 1.) aoMapClr = pow(aoMapClr, 1. / aoMapGamma);\n\n// clamp\naoMapClr = min(1., aoMapClr);\n`;\n\nconst aomap_fragment = /* glsl */ `\n#ifdef USE_AOMAP\n\n    // reads channel R, compatible with a combined OcclusionRoughnessMetallic (RGB) texture\n    if(!enableESL) {\n\n        float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;\n        reflectedLight.indirectDiffuse *= ambientOcclusion;\n\n        #if defined( USE_CLEARCOAT ) \n            clearcoatSpecularIndirect *= ambientOcclusion;\n        #endif\n\n        #if defined( USE_SHEEN ) \n            sheenSpecularIndirect *= ambientOcclusion;\n        #endif\n\n        #if defined( USE_ENVMAP ) && defined( STANDARD )\n\n            float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );\n\n            reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\n        #endif\n    }\n\n#endif\n`;\n\nconst envBasicCode = /* glsl */ `\nenvMapColor.rgb *= aoMapClr;\n\nvec3 origEnvMapColor = vec3(envMapColor.rgb);\n\nfloat origAoMapClr = aoMapClr;\n\n#ifndef DISABLE_SMOOTHING\n    // calculate smoothing\n    float smoothingRoughnessInfluence = max(0.75 - roughness, 0.);\n    float smoothingAoInfluence = (1. - aoMapClr) * 0.75;\n\n    float totalSmoothing = 0.3 + smoothingPower + (1. - smoothingPower) * smoothingRoughnessInfluence - smoothingAoInfluence;\n    vec3 smoothing = vec3(max(totalSmoothing, 0.));\n\n    envMapColor.rgb = pow(envMapColor.rgb, smoothing);\n#endif\n\nenvMapColor.rgb += pow(envMapColor.rgb, vec3(envPower)) * (aoPower * 0.2);\n\nfloat aoMapPower = pow(aoMapClr + aoSmoothing * (0.5 - aoMapClr), aoPower);\nif(aoMapPower > 1.) aoMapPower = 1.;\n`;\n\n// will replace \"return PI * envMapColor.rgb * envMapIntensity;\"\nconst getIBLIrradiance_replace = /* glsl */ `\n\nif(enableESL){\n    ${envBasicCode}\n\n    envMapColor.rgb *= irradianceColor;\n\n    #ifndef DISABLE_SMOOTHING\n        envMapColor.rgb = pow(envMapColor.rgb, smoothing);\n    #endif\n\n    float origAoMapClrPow = origAoMapClr * origAoMapClr;\n\n    vec3 hemisphereInfluence = aoMapClr * mix(\n        irradianceColor,\n        hemisphereColor,\n        1. - origAoMapClrPow\n    ) * envMapColor.rgb * envMapIntensity * 0.125;\n\n    envMapColor.rgb = mix(envMapColor.rgb, hemisphereColor, 1. - origAoMapClrPow);\n\n    vec3 env = irradianceIntensity * envMapColor.rgb * envMapIntensity * aoMapPower + hemisphereInfluence;\n\n    if(sunIntensity != 0.){\n        env += irradianceIntensity * sunIntensity * irradianceColor * origEnvMapColor * envMapIntensity * pow(aoMapClr, 16.);\n    }\n\n     return env;\n} else {\n    return PI * envMapColor.rgb * envMapIntensity;\n}\n`;\n\n// will replace \"return envMapColor.rgb * envMapIntensity;\"\nconst getIBLRadiance_replace = /* glsl */ `\n\nif(enableESL) {\n    ${envBasicCode}\n\n    #ifndef DISABLE_SMOOTHING\n\n        envMapColor.rgb *= radianceColor;\n        envMapColor.rgb = pow(envMapColor.rgb, smoothing);\n\n    #endif\n\n    vec3 env = envMapColor.rgb * envMapIntensity * 0.125 * (aoMapPower * radianceIntensity + aoMapClr * radianceColor);\n\n    if(sunIntensity != 0.){\n        env += radianceIntensity * sunIntensity * irradianceColor * origEnvMapColor * envMapIntensity * pow(aoMapClr, 16.);\n    }\n\n    return env;\n\n} else {\n    return envMapColor.rgb * envMapIntensity;\n}\n`;\nconst new_map_fragment = /* glsl */ `\n#ifdef USE_MAP\n\n   vec4 sampledDiffuseColor = texture2D( map, vMapUv );\n\n   #ifdef DECODE_VIDEO_TEXTURE\n\n        // use inline sRGB decode until browsers properly support SRGB8_ALPHA8 with video textures (#26516)\n\n        sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );\n    \n    #endif\n\nif(enableESL) {\n    #ifdef USE_LIGHTMAP\n        float lightMapIntensityCorrect = lightMapIntensity;\n        if(useLegacyLights) lightMapIntensityCorrect = lightMapIntensity / PI;\n        vec3 lightMapClr = (texture2D(lightMap, vLightMapUv).rgb - vec3(1.)) * (lightMapIntensityCorrect) + vec3(1.);\n    #else\n        vec3 lightMapClr = vec3(1.);\n    #endif\n\n    if(lightMapGamma != 1.) lightMapClr = pow(lightMapClr, vec3(1. / lightMapGamma));\n\n    if(lightMapContrast != 1.) lightMapClr = adjustContrast(lightMapClr, lightMapContrast);\n\n    // clamp\n    lightMapClr = min(lightMapClr, vec3(1.));\n\n    // source: Chapter 16 of OpenGL Shading Language\n    const vec3 W = vec3(0.2125, 0.7154, 0.0721);\n    vec3 intensity = vec3(dot(lightMapClr, W));\n    lightMapClr = mix(intensity, lightMapClr, lightMapSaturation);\n\n    if(mapContrast != 1.) sampledDiffuseColor = vec4(adjustContrast(sampledDiffuseColor.rgb, mapContrast), sampledDiffuseColor.a);\n    //sampledDiffuseColor = clamp(sampledDiffuseColor, 0.0,1.0);\n    //if(mapContrast != 1.) sampledDiffuseColor *= contrastMatrix( mapContrast );\n    //if(mapContrast != 1.) sampledDiffuseColor *= saturationMatrix( mapContrast );\n\n    vec3 lightMapHsv = rgb2hsv(lightMapClr);\n    float saturation = lightMapHsv.y;\n\n    float mixVal = saturation;\n    \n    float value = pow(lightMapHsv.z, 0.05);\n    float darkness = 1. - value;\n\n     lightMapHsv.y = mix(lightMapHsv.y, lightMapHsv.y * 5., darkness * 1.75);\n    \n    lightMapHsv = hsv2rgb(lightMapHsv);\n\n    // blend the lightmap color towards the diffuse color the more light this spot receives\n    lightMapHsv = mix(lightMapHsv, lightMapHsv * normalize(sampledDiffuseColor.rgb) * length(sampledDiffuseColor.rgb), value);\n\n    mixVal += darkness * 0.2;\n    \n    lightMapClr = pow(\n        mix(lightMapClr, lightMapHsv, mixVal),\n        vec3(1.25)\n    );\n\n    float lightnessFactor = pow(lightMapHsv.z, 0.1);\n\n    diffuseColor *= lightnessFactor * sampledDiffuseColor * vec4(lightMapClr, 1.0);\n    diffuseColor.a = 1.0;\n\n} else {\n    diffuseColor *= sampledDiffuseColor;\n}\n#endif\n`;\n\nTHREE$1.ShaderChunk.map_fragment.replace( \"diffuseColor *= sampledDiffuseColor;\", new_map_fragment );\n\nconst lights_pars_begin = THREE$1.ShaderChunk.lights_pars_begin.replace(\n\t\"vec3 irradiance = ambientLightColor;\",\n\t/* glsl */ `\n    vec3 irradiance = vec3(0.0);\n    if(enableESL) {\n        ${aoCode}\n        aoMapClr *= aoMapClr;\n        irradiance = mix( ambientLightColor, aoColor * 15.0 * ((aoMapClr - 1.0) * 0.28 + 1.0), 1.0 - aoMapClr );\n    } else {\n        irradiance = ambientLightColor;\n    }\n    `\n);\n\n//const lights_fragment_maps = THREE.ShaderChunk.lights_fragment_maps.replace(\"USE_LIGHTMAP\", \"false\")\n//const lightmap_fragment = THREE.ShaderChunk.lightmap_fragment.replace(\"USE_LIGHTMAP\", \"false\")\n\nconst lights_fragment_maps = THREE$1.ShaderChunk.lights_fragment_maps.replace(\"irradiance += lightMapIrradiance;\", \"if(!enableESL) irradiance += lightMapIrradiance;\");\n//const lightmap_fragment = THREE.ShaderChunk.lightmap_fragment.replace(\"reflectedLight.indirectDiffuse += lightMapIrradiance;\", \"if(!enableESL) reflectedLight.indirectDiffuse += lightMapIrradiance;\")\n\n\nconst toFloat32 = number => {\n\tlet float32 = Math.fround(number).toString();\n\tif (!float32.includes(\".\")) float32 += \".\";\n\n\treturn float32\n};\n\nconst toVec3 = color => {\n\treturn \"vec3(\" + toFloat32(color.r) + \", \" + toFloat32(color.g) + \", \" + toFloat32(color.b) + \")\"\n};\n\n\nfunction EnhanceLighting( shader,\n\t{\n        enableESL = true,\n        useLegacyLights = false,\n\t\taoColor = new THREE$1.Color(0x000000),\n\t\themisphereColor = new THREE$1.Color(0xffffff),\n\t\tirradianceColor = new THREE$1.Color(0xffffff),\n\t\tradianceColor = new THREE$1.Color(0xffffff),\n\n\t\taoPower = 1,\n\t\taoSmoothing = 0,\n\t\taoMapGamma = 1,\n\t\tlightMapGamma = 1,\n\t\tlightMapSaturation = 1,\n\t\tenvPower = 1,\n\t\troughnessPower = 1,\n\t\tsunIntensity = 0,\n\t\tmapContrast = 1,\n\t\tlightMapContrast = 1,\n\t\tsmoothingPower = 0.25,\n\t\tirradianceIntensity = Math.PI,\n\t\tradianceIntensity = 1,\n\n\t\thardcodeValues = false\n\t} = {}\n) {\n\tif (shader.defines && shader.fragmentShader.includes(\"#define ENHANCE_SHADER_LIGHTING\")) return\n\n\tif (shader.defines === undefined) shader.defines = {};\n\n\tshader.defines.ENHANCE_SHADER_LIGHTING = \"\";\n    //shader.defines.DISABLE_SMOOTHING = \"\"\n\n\tif (hardcodeValues) {\n\t\tshader.fragmentShader = shader.fragmentShader.replace(\n\t\t\t\"uniform float opacity;\",\n\t\t\t/* glsl */ `\n            uniform float opacity;\n            \n            const vec3 aoColor = ${toVec3(aoColor)};\n            const vec3 hemisphereColor = ${toVec3(hemisphereColor)};\n            const vec3 irradianceColor = ${toVec3(irradianceColor)};\n            const vec3 radianceColor = ${toVec3(radianceColor)};\n\n            const float aoPower = ${toFloat32(aoPower)};\n            const float aoSmoothing = ${toFloat32(aoSmoothing)};\n            const float aoMapGamma = ${toFloat32(aoMapGamma)};\n            const float lightMapGamma = ${toFloat32(lightMapGamma)};\n            const float lightMapSaturation = ${toFloat32(lightMapSaturation)};\n            const float envPower = ${toFloat32(envPower)};\n            const float roughnessPower = ${toFloat32(roughnessPower)};\n            const float sunIntensity = ${toFloat32(sunIntensity)};\n            const float mapContrast = ${toFloat32(mapContrast)};\n            const float lightMapContrast = ${toFloat32(lightMapContrast)};\n            const float smoothingPower = ${toFloat32(smoothingPower)};\n            const float irradianceIntensity = ${toFloat32(irradianceIntensity)};\n            const float radianceIntensity = ${toFloat32(radianceIntensity)};\n            `\n\t\t);\n\t} else {\n        \n\t\tshader.uniforms.aoColor = { value: aoColor };\n\t\tshader.uniforms.hemisphereColor = { value: hemisphereColor };\n\t\tshader.uniforms.irradianceColor = { value: irradianceColor };\n\t\tshader.uniforms.radianceColor = { value: radianceColor };\n\n        shader.uniforms.enableESL = { value: enableESL };\n        shader.uniforms.useLegacyLights = { value: useLegacyLights };\n\n\t\tshader.uniforms.aoPower = { value: aoPower };\n\t\tshader.uniforms.aoSmoothing = { value: aoSmoothing };\n\t\tshader.uniforms.lightMapGamma = { value: lightMapGamma };\n\t\tshader.uniforms.lightMapSaturation = { value: lightMapSaturation };\n\t\tshader.uniforms.aoMapGamma = { value: aoMapGamma };\n\t\tshader.uniforms.envPower = { value: envPower };\n\t\tshader.uniforms.smoothingPower = { value: smoothingPower };\n\t\tshader.uniforms.roughnessPower = { value: roughnessPower };\n\t\tshader.uniforms.sunIntensity = { value: sunIntensity };\n\t\tshader.uniforms.mapContrast = { value: mapContrast };\n\t\tshader.uniforms.lightMapContrast = { value: lightMapContrast };\n\n\t\tshader.uniforms.irradianceIntensity = { value: irradianceIntensity };\n\t\tshader.uniforms.radianceIntensity = { value: radianceIntensity };\n\n\t\tshader.fragmentShader = shader.fragmentShader.replace(\n\t\t\t\"uniform float opacity;\",\n\t\t\t/* glsl */ `\n            uniform float opacity;\n            \n            uniform vec3 aoColor;\n            uniform vec3 hemisphereColor;\n            uniform vec3 irradianceColor;\n            uniform vec3 radianceColor;\n\n            uniform bool enableESL;\n            uniform bool useLegacyLights;\n\n            uniform float aoPower;\n            uniform float aoSmoothing;\n            uniform float aoMapGamma;\n            uniform float lightMapGamma;\n            uniform float lightMapSaturation;\n            uniform float envPower;\n            uniform float roughnessPower;\n            uniform float sunIntensity;\n            uniform float mapContrast;\n            uniform float lightMapContrast;\n            uniform float smoothingPower;\n            uniform float irradianceIntensity;\n            uniform float radianceIntensity;\n\n            #define ENHANCE_SHADER_LIGHTING\n            ${shaderFunctions}\n            `\n\t\t);\n\t}\n\n\tshader.fragmentShader = shader.fragmentShader\n\t\t.replace(\n\t\t\t\"main() {\",\n\t\t\t`\n            main() {\n            ${aoCode}\n            `\n\t\t)\n\t\t.replace(\"#include <aomap_fragment>\", aomap_fragment)\n\t\t.replace(\"#include <lights_pars_begin>\", lights_pars_begin)\n\t\t.replace(\"#include <lights_fragment_maps>\", lights_fragment_maps)\n\t\t//.replace(\"#include <lightmap_fragment>\", lightmap_fragment) // NO MORE LIGHTMAP IN LAST THREE \n\t\t//.replace(\"#include <map_fragment>\", map_fragment) \n        .replace( \"#include <map_fragment>\", new_map_fragment )\n        ///.replace( \"diffuseColor *= sampledDiffuseColor;\", new_map_fragment )\n\n\t\t.replace(\"#include <envmap_physical_pars_fragment>\", THREE$1.ShaderChunk.envmap_physical_pars_fragment)\n\n        // in envmap_physical_pars_fragment\n\n\t\t.replace(\n            \"getIBLIrradiance( const in vec3 normal )\", \n            \"getIBLIrradiance( const in vec3 normal, float aoMapClr )\"\n        )\n\t\t.replace(\n\t\t\t\"getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness )\",\n\t\t\t\"getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, float aoMapClr )\"\n\t\t)\n\n\t\t.replace(\"return PI * envMapColor.rgb * envMapIntensity;\", getIBLIrradiance_replace)\n\t\t.replace(\"return envMapColor.rgb * envMapIntensity;\", getIBLRadiance_replace)\n\n        // in lights_fragment_maps\n\n        .replace(\n            \"#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\",\n            /* glsl */ `\n            //#include <aomap_fragment>\n            #if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n            `\n        )\n        .replace(\n            \"iblIrradiance += getIBLIrradiance( geometryNormal );\",\n            \"iblIrradiance += getIBLIrradiance( geometryNormal, aoMapClr );\"\n        )\n        .replace(\n            \"radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );\",\n            \"radiance += getIBLRadiance( geometryViewDir, geometryNormal, pow(material.roughness, enableESL ? roughnessPower : 1.0), aoMapClr );\"\n        )\n        .replace(\n            \"clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );\",\n            \"clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, pow(material.clearcoatRoughness, enableESL ? roughnessPower : 1.0), aoMapClr );\"\n        );\n\n}\n\n/**\n * FakeGlow material by Anderson Mancini - Fec 2024.\n */\n\nclass FakeGlowMaterial extends ShaderMaterial {\n\n  /**\n   * Create a FakeGlowMaterial.\n   *\n   * @param {Object} parameters - The parameters to configure the material.\n   * @param {number} [parameters.falloff=0.1] - The falloff factor for the glow effect.\n   * @param {number} [parameters.glowInternalRadius=6.0] - The internal radius for the glow effect.\n   * @param {Color} [parameters.glowColor=new Color('#00d5ff')] - The color of the glow effect.\n   * @param {number} [parameters.glowSharpness=0.5] - The sharpness of the glow effect.\n   * @param {number} [parameters.opacity=1.0] - The opacity of the hologram.\n   * @param {number} [parameters.side=THREE.FrontSide] - The rendering side. Use `THREE.FrontSide`, `THREE.BackSide`, or `THREE.DoubleSide`.\n   * @param {boolean} [parameters.depthTest=false] - Enable or disable depth testing.\n   */\n\n  constructor(parameters = {}) {\n    super();\n\n    this.vertexShader = /*GLSL */\n      `\n      varying vec3 vPosition;\n      varying vec3 vNormal;\n\n      void main() {\n        vec4 modelPosition = modelMatrix * vec4(position, 1.0);\n        gl_Position = projectionMatrix * viewMatrix * modelPosition;\n        vec4 modelNormal = modelMatrix * vec4(normal, 0.0);\n        vPosition = modelPosition.xyz;\n        vNormal = modelNormal.xyz;\n\n      }\n    `;\n\n    this.fragmentShader = /*GLSL */\n      `\n      uniform vec3 glowColor;\n      uniform float falloff;\n      uniform float glowSharpness;\n      uniform float glowInternalRadius;\n      uniform float opacity;\n\n      varying vec3 vPosition;\n      varying vec3 vNormal;\n\n      void main()\n      {\n        // Normal\n        vec3 normal = normalize(vNormal);\n        if(!gl_FrontFacing)\n            normal *= - 1.0;\n        vec3 viewDirection = normalize(cameraPosition - vPosition);\n        float fresnel = dot(viewDirection, normal);\n        fresnel = pow(fresnel, glowInternalRadius + 0.1);\n        float falloff = smoothstep(0., falloff, fresnel);\n        float fakeGlow = fresnel;\n        fakeGlow += fresnel * glowSharpness;\n        fakeGlow *= falloff;\n        gl_FragColor = vec4(clamp(glowColor * fresnel, 0., 1.0), clamp(fakeGlow, 0., opacity));\n\n        #include <tonemapping_fragment>\n        #include <colorspace_fragment>\n      } \n      `;\n\n    // Set default values or modify existing properties if needed\n    this.uniforms = {\n\n      /**\n       * The opacity for the glow effect.\n       * @type {Uniform<number>}\n       * @default 1.0\n       */\n      opacity: new Uniform(parameters.opacity !== undefined ? parameters.opacity : 1.0),\n\n      /**\n       * The strength of the glowInternalRadius.\n       * @type {Uniform<number>}\n       * @default 6.0\n       */\n      glowInternalRadius: new Uniform(parameters.glowInternalRadius !== undefined ? parameters.glowInternalRadius : -2),//6.0\n\n      /**\n       * The glowSharpness.\n       * @type {Uniform<number>}\n       * @default 0.5\n       */\n      glowSharpness: new Uniform(parameters.glowSharpness !== undefined ? parameters.glowSharpness : 0),//0.5\n\n      /**\n       * The falloff.\n       * @type {Uniform<number>}\n       * @default 0.1\n       */\n      falloff: new Uniform(parameters.falloff !== undefined ? parameters.falloff : 0),//0.1\n\n      /**\n       * The color of the glow.\n       * @type {Uniform<Color>}\n       * @default new Color(#00d5ff)\n       */\n      glowColor: new Uniform(parameters.glowColor !== undefined ? new Color(parameters.glowColor) : new Color(\"#202020\")),\n\n    };\n\n    this.setValues(parameters);\n    //this.depthTest = parameters.depthTest !== undefined ? parameters.depthTest : false;\n    this.blending = parameters.blendMode !== undefined ? parameters.blendMode : AdditiveBlending;\n    this.transparent = true;\n    this.side = parameters.side !== undefined ? parameters.side : FrontSide;\n    this.polygonOffset = true;\n    this.polygonOffsetFactor = -1;\n    this.polygonOffsetUnits = 1;\n    this.premultipliedAlpha = true;\n\n  }\n\n}\n\n//-------------------\n//\n//  MATERIAL\n//\n//-------------------\n\n//const mat = new Map()\nlet mat = {};\n\nlet TmpMat = [];\n\nconst matExtra = {\n\n\t//clearcoat:1.0,\n\t//clearcoatRoughness:0.1,\n\tmetalness: 0.0,\n\troughness: 0.2,\n\t//normalScale: new Vector2(0.25,0.25),\n\n};\n\nconst RealismLightOption = {\n\tenableESL:true,\n\texposure:1,\n\tenvMapIntensity:1,\n\n\taoColor: new Color(0x000000),\n\themisphereColor: new Color(0xffffff),\n    irradianceColor: new Color(0xffffff),\n    radianceColor: new Color(0xffffff),\n\n    aoPower: 9.7,//6,\n    aoSmoothing: 0.26,\n    aoMapGamma: 0.89,\n    lightMapGamma: 0.9,//1,\n    lightMapSaturation: 1,\n    envPower: 1,//2\n    roughnessPower: 1,//1.45,\n    sunIntensity: 0,\n    mapContrast: 1,//0.93,\n    lightMapContrast: 1.03,\n    smoothingPower: 0.76,\n    irradianceIntensity: 6.59,\n    radianceIntensity: 4.62,\n    hardcodeValues: false\n\n};\n\nconst Colors = {\n    body:new Color( 0xefefd4 ),\n    sleep:new Color( 0x9FBFBD ),//0xBFBFBD\n    solid:new Color( 0x6C6A68 ),\n    base:new Color( 0xc9c8c7 ),\n    black:new Color( 0x222222 ),\n    gold:new Color( 0.944, 0.776, 0.373 ),\n    gold2:new Color( 0.998, 0.981, 0.751 ),\n    copper:new Color( 0.96467984, 0.37626296, 0.25818297 ),\n    carPaint:new Color( 0.1037792, 0.59212029, 0.85064936 ),\n    clay:new Color( 0.604,0.584,0.497 ),\n    concrete:new Color( 0xa9a9a9 ),\n};\n\n\n\nconst ThreeVariable = {\n\n\tNo: NoBlending,\n\tNormal: NormalBlending,\n\tAdditive: AdditiveBlending,\n\tSubtractive: SubtractiveBlending,\n\tMultiply: MultiplyBlending,\n\n\tEadd: AddEquation,\n\tEsub: SubtractEquation,\n\tErev: ReverseSubtractEquation,\n\tEmin: MinEquation,\n\tEmaw: MaxEquation,\n\n\tFzero: ZeroFactor,\n\tFone:  OneFactor,\n\tFcolor: SrcColorFactor,\n\tFcolorm: OneMinusSrcColorFactor,\n\tFalpha: SrcAlphaFactor,\n\tFalpham: OneMinusSrcAlphaFactor,\n\tFdstalpha: DstAlphaFactor,\n\tFdstalpham: OneMinusDstAlphaFactor,\n\tFdstcolor: DstColorFactor,\n\tFdstcolorm: OneMinusDstColorFactor,\n\tFalphasaturate: SrcAlphaSaturateFactor, // ! not for destination\n\n\tFront: FrontSide,\n\tBack: BackSide,\n\tDouble: DoubleSide,\n\n};\n\nconst addRenderMode = ()=>{\n\n\tlet s = ShaderChunk.common;\n\ts = s.replace( '#define EPSILON 1e-6', `\n\t\t#define EPSILON 1e-6\n\t\tuniform int renderMode;\n\t\tuniform int depthPacking;\n\t\tvarying vec2 vZW;\n    `);\n    ShaderChunk.common = s;\n\n    ShaderChunk.clipping_planes_vertex = `\n        #if NUM_CLIPPING_PLANES > 0\n            vClipPosition = - mvPosition.xyz;\n        #endif\n        vZW = gl_Position.zw;\n    `;\n\n    s = ShaderChunk.dithering_fragment;\n\ts = s.replace( '#endif', `\n\t\t#endif\n\n        #ifdef STANDARD\n\n        if( renderMode == 1 ){ // depth render\n            float fz = 0.5 * vZW[0] / vZW[1] + 0.5;\n            fz=pow(fz, 10.0);\n            gl_FragColor = depthPacking == 1 ? packDepthToRGBA( fz ) : vec4( vec3( 1.0 - fz ), opacity );\n        }\n        if( renderMode == 2 ) gl_FragColor = vec4(  packNormalToRGB( normal ), opacity );// normal render\n        //if( renderMode == 3 ) gl_FragColor = vec4(  shadowColor, opacity );// normal render\n\n        #else\n\n        if( renderMode != 0 ) discard;\n\n        #endif\n    `);\n    ShaderChunk.dithering_fragment = s;\n\n\n};\n\nconst Mat = {\n\n\trenderMode:{ value: 0 },\n\tdepthPacking:{ value: 0 },\n\n\tisRealism:false,\n\trealismOption:{},\n\tenvMapIntensity:1.0,\n\n\tchangeRenderMode: (n) => {\n\n\t\tMat.renderMode.value = n;\n\n\t},\n\n\tinitExtandShader: () => {\n\t\taddRenderMode();\n\t},\n\t\n\n\tuseRealLight: (o) => {\n\n\t\tMat.isRealism = true;\n\n\t\t// apply color setting number\n\t\tfor(let c in o){\n\t\t\tif(c.search('Color')!==-1){\n\t\t\t\tif(!o[c].isColor){\n\t\t\t\t\tRealismLightOption[c].set( o[c] );\n\t\t\t\t\tdelete o[c];\n\t\t\t\t}\n\t\t\t} \n\t\t}\n\n\t\tMat.realismOption = { ...RealismLightOption, ...o };\n\n\t},\n\n\tsetColor:( o ) => {\n\n\t\tif(!Mat.isRealism) return;\n\n\t\t//console.log(o)\n\n\t\tRealismLightOption.aoColor.set(o.minLuma).convertLinearToSRGB();\n\t\tRealismLightOption.hemisphereColor.set(o.maxLuma).convertLinearToSRGB();\n\t\tRealismLightOption.irradianceColor.set(o.sun).convertLinearToSRGB();\n\t\tRealismLightOption.radianceColor.set(o.vibrant).convertLinearToSRGB();\n\n\t},\n\n\tset:( m, direct, beforeCompile = null ) => {\n\n\t\tif(!beforeCompile) beforeCompile = m.onBeforeCompile;\n\t\tif(!direct) Mat.extendShader( m, beforeCompile );\n\t\tmat[m.name] = m;\n\t\t//Mat.setEnvmapIntensity(m)\n\n\t},\n\n\textendShader:( m, beforeCompile = null ) => { \n\n\t\t//let oldCompile = null;\n\t\t//if( m.onBeforeCompile ) oldCompile = m.onBeforeCompile;\n\n\t\tif( Mat.isRealism ){\n\t\t\tm.onBeforeCompile = function ( shader ) {\n\t\t\t\tshader.uniforms.renderMode = Mat.renderMode;\n\t\t\t\tshader.uniforms.depthPacking = Mat.depthPacking;\n\n\t\t\t\tEnhanceLighting( shader, Mat.realismOption );\n\t\t        m.userData.isRealism = true;\n\t\t        m.userData.shader = shader;\n\t            if( beforeCompile ) beforeCompile( shader );\n\t        };\n\n\t\t} else {\n\t\t\tm.onBeforeCompile = function ( shader ) {\n\n\t\t\t\tshader.uniforms.renderMode = Mat.renderMode;\n\t\t\t\tshader.uniforms.depthPacking = Mat.depthPacking;\n\n\t            if( beforeCompile ) beforeCompile( shader );\n\t            m.userData.shader = shader;\n\t        };\n\t\t}\n\t\t\n\t},\n\n\taddToTmp:( m ) => {\n\n\t\tTmpMat.push( m );\n\n\t},\n\n\tcreate:( o ) => {\n\n\t\tlet m, beforeCompile = null;\n\n\t\tif( o.isMaterial ){\n\t\t\tm = o;\n\t\t} else {\n\n\t\t\tlet type = o.type !== undefined ? o.type : 'Standard';\n\t\t\tif( o.type ) delete o.type;\n\n\t\t\t//if( !o.shadowSide ) o.shadowSide = 'double'\n\n\t\t\tbeforeCompile = o.beforeCompile || null;\n\t\t    if( o.beforeCompile ) delete o.beforeCompile;\n\n\t\t\tif( o.thickness || o.sheen || o.clearcoat || o.transmission || o.specularColor ) type = 'Physical';\n\n\t\t\tif(o.normalScale){\n\t\t\t\tif( !o.normalScale.isVector2 ) o.normalScale = new Vector2().fromArray(o.normalScale);\n\t\t\t}\n\n\t\t    if( o.side ) o.side = Mat.findValue( o.side );\n\t\t    if( o.shadowSide ) o.shadowSide = Mat.findValue( o.shadowSide );\n\t\t    if( o.blending ) o.blending = Mat.findValue( o.blending );\n\t\t    if( o.blendEquation ) o.blendEquation = Mat.findValue( o.blendEquation );\n\t\t    if( o.blendEquationAlpha ) o.blendEquationAlpha = Mat.findValue( o.blendEquationAlpha );\n\t\t    if( o.blendSrc ) o.blendSrc = Mat.findValue( o.blendSrc );\n\t\t    if( o.blendDst ) o.blendDst = Mat.findValue( o.blendDst );\n\t\t    if( o.blendDstAlpha ) o.blendDstAlpha = Mat.findValue( o.blendDstAlpha );\n\t\t    if( o.blendSrcAlpha ) o.blendSrcAlpha = Mat.findValue( o.blendSrcAlpha );\n\n\t\t    if(o.clearcoatNormalScale){\n\t\t\t\tif( !o.clearcoatNormalScale.isVector2 ) o.clearcoatNormalScale = new Vector2().fromArray( o.clearcoatNormalScale );\n\t\t\t}\n\n\t\t    type = type.toLowerCase();\n\n\t\t    switch( type ){\n\n\t\t\t\tcase 'physical': \n\t\t\t\t\tm = new MeshPhysicalMaterial( o ); \n\t\t\t\t\tm.defines = {\n\t\t\t\t\t\t'STANDARD': '',\n\t\t\t\t\t\t'PHYSICAL': '',\n\t\t\t\t\t\t'USE_UV':'',\n\t\t\t\t\t\t'USE_SPECULAR':''\n\t\t\t\t\t};\n\t\t\t\tbreak;\n\t\t\t\tcase 'phong': m = new MeshPhongMaterial( o ); break;\n\t\t\t\tcase 'lambert': m = new MeshLambertMaterial( o ); break;\n\t\t\t\tcase 'basic': m = new MeshBasicMaterial( o ); break;\n\t\t\t\tcase 'line': m = new LineBasicMaterial( o ); break;\n\t\t\t\tcase 'toon': m = new MeshToonMaterial( o ); break;\n\t\t\t\tcase 'shadow': m = new ShadowMaterial( o ); break;\n\t\t\t\tcase 'sss': m = new MeshSssMaterial( o ); break;\n\t\t\t\tdefault: m = new MeshStandardMaterial( o ); break;\n\n\t\t\t}\n\n\t\t\tMat.upEnvmapIntensity( m );\n\n\t\t} \n\n\t\tif( mat[ m.name ] ) return null;\n\t    Mat.set( m, false, beforeCompile );\n\t\treturn m;\n\n\t},\n\n\tfindValue:(v) => ( v === 'string' ? ThreeVariable[ v.charAt(0).toUpperCase() + v.slice(1) ] : v ),\n\n\n\n\taddToMat:( o ) => {\n\n\t\tif( Mat.isRealism ){\n\t\t\tfor(let m in o){\n\t\t\t\to[m].shadowSide = DoubleSide;\n\t\t\t\to[m].onBeforeCompile = function ( shader ) {\n\t\t            EnhanceLighting( shader, Mat.realismOption );\n\t\t            o[m].userData.isRealism = true;\n\t\t            o[m].userData.shader = shader;\n\t\t        };\n\t\t\t}\n\n\n\t\t}\n\n\t\tmat = { ...mat, ...o };\n\n\t},\n\n\tchangeType:() => {\n\n\n\n\t},\n\n\tdirectIntensity: ( v ) => {\n\t\t\n\t},\n\n\tsetEnvmapIntensity: ( v ) => {\n\n\t\t//console.log('set', v)\n\n\t\t//if( v === Mat.envMapIntensity ) return;\n\t\t//Mat.envMapIntensity = v;\n\n\t\t//for( let name in mat ) Mat.upEnvmapIntensity( mat[name] );\n\t\t\n\t},\n\n\tupEnvmapIntensity: ( m ) => {\n\n\t\t\n\n\t\t//if( !m.userData.envp ) m.userData.envp = m.envMapIntensity;\n\t\t//m.envMapIntensity = m.userData.envp * Mat.envMapIntensity;\n\n\t\t//console.log('HH', m.name, m.envMapIntensity)\n\t\t\n\t},\n\t\n\tgetList: () => {\n\n\t\tlet l = {...mat};\n\t\tconst ignor = ['line', 'debug', 'hide', 'svg'];\n\t\tlet i = ignor.length;\n\t\twhile(i--) delete l[ignor[i]];\n\n\t\treturn l\n\n\t},\n\n\tget:( name ) => {\n\n\t\tif( !mat[name] ){\n\t\t\tswitch( name ){\n\n\t\t\t\tcase 'body': Mat.create({name:'body', color:Colors.body, ...matExtra }); break\n\n\t\t\t    //case 'body':   m = new MeshStandardMaterial({ color:Colors.body, ...matExtra }); break//0xFFF1D2\n\t\t\t    case 'sleep':  Mat.create({ name:'sleep', color:Colors.sleep, ...matExtra }); break//0x46B1C9\n\t\t\t    case 'solid':  Mat.create({ name:'solid', color:Colors.solid, metalness: 0.1, roughness: 0.8, }); break\n\t\t\t    case 'clay':  Mat.create({ name:'clay', color:Colors.clay, metalness: 0.0, roughness: 0.9, }); break\n\t\t\t    case 'base':   Mat.create({ name:'base', color:Colors.base, ...matExtra }); break\n\n\t\t\t    case 'concrete':  Mat.create({ name:'concrete', color:Colors.concrete, metalness: 0.0, roughness: 0.9, }); break\n\n\t\t\t    case 'black':   Mat.create({ name:'black', color:Colors.black, metalness: 0, roughness: 0.25 }); break\n\n\t\t\t    \n\n\t\t\t    // metal\n\t\t\t    case 'chrome': Mat.create({ name:'chrome', color:0xCCCCCC, metalness: 1, roughness:0.075 }); break\n\t\t\t    case 'silver': Mat.create({ name:'silver', color:0xAAAAAA, metalness: 0.8, roughness:0.22 }); break\n\t\t\t    case 'gold': Mat.create({ name:'gold', color:Colors.gold, specularColor:Colors.gold2, metalness: 1, roughness:0.02 }); break\n\t\t\t    case 'copper': Mat.create({ name:'copper', color:Colors.copper, metalness: 1, roughness:0.25, clearcoat: 1.0, clearcoatRoughness: 0.2 }); break\n\n\t\t\t    case 'carPaint': Mat.create({ name:'carPaint', color:Colors.carPaint, metalness: 0, anisotropy:new Vector2(0.5,0.5), roughness:0.4, clearcoat: 1.0, clearcoatRoughness: 0, }); break\n\n\t\t\t\t//case 'simple': m = Mat.create({ name:'simple', color:0x808080, metalness: 0, roughness: 1 }); break\n\n\t\t\t\tcase 'carbon': Mat.create({ name:'carbon', map:new CarbonTexture(), normalMap:new CarbonTexture(true), clearcoat: 1.0, clearcoatRoughness: 0.1, roughness: 0.5 }); break\n\t\t\t\tcase 'cloth': Mat.create({ name:'cloth', color:0x8009cf, roughness: 0.5, sheenColor:0xcb7cff, sheen:1, sheenRoughness:0.2 }); break\n\n\n\t\t\t\t//case 'clear':  m = new MeshStandardMaterial({ color:0xFFFFFF, metalness: 0.5, roughness: 0 }); break\n\t\t\t\t//case 'wood':   m = Mat.create({ name:'wood', color:0xe8c2a1, metalness: 0, roughness: 1 }); break\n\t\t\t\t\n\t\t\t\t//case 'hero':   m = new MeshStandardMaterial({ color:0x00FF88, ...matExtra }); break\n\t\t\t\tcase 'skinny':   Mat.create({ name:'skinny', color:0xe0ac69, ...matExtra }); break\n\t\t\t\t\n\t\t\t\tcase 'glass':  Mat.create({ name:'glass', color:0xFFFFff, transparent:true, roughness:0.02, metalness:0.0, side:DoubleSide, alphaToCoverage:true, premultipliedAlpha:true, transmission:1, clearcoat:1, thickness:0.01  }); break\n\t\t\t\tcase 'glassX':  Mat.create({ name:'glassX', color:0xeeeeee, transparent:false, opacity:1.0, roughness:0.03, metalness:0,  side:DoubleSide, transmission:1.0, clearcoat:1, clearcoatRoughness:0.0, thickness:0.02, ior:1.52, shadowSide:1, reflectivity:0.5, iridescence:0 }); break\n\t\t\t\tcase 'plexi':  Mat.create({ name:'plexi', blending:AdditiveBlending, color:0x010101, transparent:true, opacity:0.7, reflectivity:0.3, metalness:0.6, roughness:0.1, clearcoat:0.2, clearcoatRoughness: 0.02, side:DoubleSide, alphaToCoverage:true, premultipliedAlpha:true }); break\n\t\t\t\tcase 'plexi2':  Mat.create({ name:'plexi2', blending:AdditiveBlending, color:0x010101, transparent:false, opacity:0.7, reflectivity:0.3, metalness:0.6, roughness:0.1, clearcoat:0.2, clearcoatRoughness: 0.02, side:DoubleSide, alphaToCoverage:false, premultipliedAlpha:true }); break\n\t\t\t\tcase 'glass2': Mat.create({ name:'glass2', color:0xEEEEEE, transparent:true, roughness:0, alphaToCoverage:true, opacity:0.3  }); break\n\t\t\t\tcase 'glass3': Mat.create({ name:'glass3', color:0x000000, transparent:true, roughness:0, alphaToCoverage:true, opacity:0.4  }); break\n\t\t\t\tcase 'glass_red': Mat.create({ name:'glass_red', color:0xFF0000, transparent:true, roughness:0, alphaToCoverage:true, opacity:0.8  }); break\n\t\t\t\t\n\t\t\t\t\n\t\t\t\tcase 'car':   Mat.create({ name:'car', color:0x303030, metalness: 1.0, roughness: 0.5, clearcoat: 1.0, clearcoatRoughness: 0.03, sheen: 0.5 }); break\n\t\t\t\tcase 'carGlass':   Mat.create({ name:'carGlass', color: 0xffffff, metalness: 0, roughness: 0, transmission: 1.0, ior:1.52 }); break\n\n\t\t\t\tcase 'outline': \n\t\t\t\tif( !mat[ 'outline' ] ) mat[ 'outline' ] = outliner;\n\t\t\t\tmat[ 'outline' ];\n\t\t\t\t//m = Mat.create({ name:'outline', color:0xFFFFFF, type:'Basic', side:BackSide, toneMapped:false, wireframe:false }); \n\t\t\t\tbreak\n\t\t\t\tcase 'debug': Mat.create({ name:'debug', type:'Basic', color:0xF37042, wireframe:true, toneMapped: false, transparent:true, opacity:0.5 }); break\n\t\t\t\t//case 'debug': m = Mat.create({ name:'debug', color:0xF37042, wireframe:true, toneMapped: false, transparent:true, opacity:0.5 }); break\n\t\t\t\t\n\t\t\t\t//case 'debug2': m = Mat.create({ name:'debug2', type:'Basic', color:0x00FFFF, wireframe:true, toneMapped: false }); break\n\t\t\t\t//case 'debug3':  m = Mat.create({ name:'debug3', type:'Basic', color:0x000000, wireframe:true, transparent:true, opacity:0.1, toneMapped: false }); break\n\t\t\t\t//case 'shadows': m = Mat.create({ name:'shadows', type:'Basic', transparent:true, opacity:0.01 }); break\n\n\t\t\t\t//case 'simple': m = Mat.create({ name:'simple', type:'basic'  }); break\n\n\t\t\t\tcase 'shadow': Mat.create({ name:'shadow', type:'shadow', color:0x000000, opacity:0.5 }); break\n\n\n\t\t\t\tcase 'bones':  Mat.create({ name:'bones', color:0xfde7d6,  wireframe:true }); break\n\t\t\t\tcase 'bones2':  Mat.create({ name:'bones2', type:'basic', color:0xdfc4a8, transparent:true, opacity:0.5, depthTest:true, depthWrite:false, alphaToCoverage:true }); break\n\n\t\t\t\t\n\t\t\t\tcase 'button':  Mat.create({ name:'button', color:0xFF404B, ...matExtra }); break\n\t\t\t\t//case 'hide': m = new MeshBasicMaterial({ visible:false }); break\n\n\t\t\t\tcase 'line':\n\t\t\t\t    Mat.create({ name:'line', type:'line', vertexColors: true, toneMapped: false });\n\t\t\t    break\n\t\t\t    case 'liner':\n\t\t\t\t    Mat.create({ name:'liner', type:'line', vertexColors: true, toneMapped: false, depthTest:true, depthWrite:true, alphaToCoverage:true });\n\t\t\t    break\n\t\t\t\tcase 'hide':\n\t\t\t\t    Mat.create({ name:'hide', type:'basic', visible:false });\n\t\t\t    break\n\t\t\t    case 'particle':\n\t\t\t\t    Mat.create({ name:'particle', type:'basic', toneMapped: false, color:0x00ff00 });\n\t\t\t    break\n\t\t\t    case 'svg':\n\t\t\t\t    Mat.create({ name:'svg', type:'basic', toneMapped:false, vertexColors:true, transparent:false, side:DoubleSide });\n\t\t\t    break\n\n\t\t\t}\n\t\t\t\n\t\t}\n\n\t\treturn mat[name]\n\n\t},\n\n\tdispose:() => {\n\n\t\tMat.isRealism = false;\n\n\t\tfor(let m in mat){\n\t\t\tmat[m].dispose();\n\t\t\tdelete mat[m];\n\t\t}\n\n\t\tlet i = TmpMat.length;\n\t\twhile( i-- ) { TmpMat[i].dispose(); }\n\t\tTmpMat = [];\n\n\t},\n\n\tupShader:() => {\n\n\t\tlet option = Mat.realismOption;\n\t\t//if(!option.enable) option = \n\n\t\tfor( let name in mat ){\n\n\t\t\tconst m = mat[name];\n\t\t\tconst shader = m.userData.shader;\n\n\t\t\tfor( let o in option ){\n\n\t\t\t\t\n\t\t\t\t// undate shader uniforme\n\t\t\t\tif(shader){ \n\t\t\t\t\t/*if(o==='enable'){ \n\t\t\t\t\t\tshader.defines.ENHANCE_SHADER_LIGHTING = option[o] ? \"\" : undefined;\n\t\t\t\t\t\t//console.log(shader.defines.ENHANCE_SHADER_LIGHTING)\n\t\t\t\t\t}*/\n\t\t\t\t\tif(shader.uniforms[o]!==undefined) shader.uniforms[o].value = option[o]; \n\t\t\t\t}\n\t\t\t\t// update material option\n\t\t\t\tif( m[o] ) m[o] = option[o];\n\t\t\t}\n\n\n\t\t}\n\n\t},\n\n};\nconst outliner = new FakeGlowMaterial();\n\n/*const outliner = new ShaderMaterial({\n    uniforms: {\n        color: {type: 'c', value: new Color(0xFFFFFF) },\n        power: {type: 'f', value: 0.01 },\n    },\n    vertexShader:`\n        uniform float power;\n        void main(){\n            //vec3 pos = position + normal * power;\n            vec3 pos = position + normalize( normal ) * power;\n            gl_Position = projectionMatrix * modelViewMatrix * vec4( pos, 1.0 );\n        }\n    `,\n    fragmentShader:`\n        uniform vec3 color;\n        void main(){\n           gl_FragColor = vec4( color, 0.1 );\n        }\n    `,\n    side:BackSide,\n    toneMapped: false,\n    //wireframe:true,\n    //transparent:true,\n    //opacity:0.1,\n\n});*/\n\nclass Timer {\n\n\tconstructor( framerate = -1 ) {\n\n\t\tthis.perf = window.performance;\n\t\tthis.time = { now:0, delta:0, then:0, interval: 0, tmp:0, n:0, dt:0 };\n\t\tthis.fps = 0;\n\t\tthis.delta = 0;\n\t\tthis.elapsedTime = 0;\n\t\tthis.unlimited = false;\n\t\tthis.setFramerate( framerate );\n\t\tthis.force = false;\n\n\t} \n\n\tup ( stamp ) {\n\n\t\tlet t = this.time;\n\n\t\tif(this.unlimited) this.force = true;\n\n\t\tt.now = stamp !== undefined ? stamp : this.now();\n\t\tt.delta = t.now - t.then;\n\n\t\tif( this.force ) {\n\t\t\tt.delta = t.interval;\n\t\t\tthis.force = false;\n\t\t}\n\t\t\n\t\tif ( t.delta >= t.interval || this.unlimited ) {\n\n\t\t    t.then = this.unlimited ? t.now : t.now - ( t.delta % t.interval );\n\t\t    //if(t.delta>)\n\t\t    //this.delta = t.delta * 0.001 // bug on outside\n\t\t    this.delta = t.interval * 0.001;\n\t\t    //if(this.delta>this.time.interval)this.delta=this.time.interval\n\t\t    this.elapsedTime += this.delta;\n\t\t    \n\t\t    //if ( t.now - 1000 > t.tmp ){ t.tmp = t.now; this.fps = t.n; t.n = 0; }; t.n++;\n\t\t\treturn true\n\n\t\t}\n\n\t\treturn false\n\n\t}\n\n\tsetFramerate ( framerate ){\n\t\t\n\t\tthis.elapsedTime = 0;\n\t\tthis.framerate = framerate;\n\t\tthis.unlimited = this.framerate < 0;\n\t\tthis.time.interval = 1000 / framerate;\n\t\tif( framerate === 60 ) this.time.interval = 16.67;\n\n\t}\n\n    static now () {\n    \treturn this.perf ? this.perf.now() : Date.now();\n    }\n\n    static format_time ( time ) {\n\t    if (time > 1000)  return (time / 1000) + \" sec\";\n\t    return time + \" ms\";\n\t}\n\t\n}\n\nclass User {\n\n\t// key map\n    // 0 : axe L | left:right  -1>1\n    // 1 : axe L | top:down    -1>1\n    // 2 : axe R | left:right  -1>1\n    // 3 : axe R | top:down    -1>1\n    // 4 : bouton A             0-1  jump / space\n    // 5 : bouton B             0-1  roulade / shift ctrl\n    // 6 : bouton X             0-1  arme principale / E\n    // 7 : bouton Y             0-1  arme secondaire\n    // 8 : gachette L up        0-1  \n    // 9 : gachette R up        0-1\n    // 10 : gachette L down     0>1\n    // 11 : gachette R down     0>1\n    // 12 : bouton setup        0-1\n    // 13 : bouton menu         0-1\n    // 14 : axe button left     0-1\n    // 15 : axe button right    0-1\n    // 16 : Xcross axe top      0-1\n    // 17 : Xcross axe down     0-1\n    // 18 : Xcross axe left     0-1\n    // 19 : Xcross axe right    0-1\n\n    // 20 : Keyboard or Gamepad    0-1\n\n\tconstructor () {\n\n\t\tthis.key = [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];\n        this.key2 = [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];\n\n\t\tthis.gamepad = new Gamepad( this.key ); \n\n\t\tthis.useGamepad = false;\n\t\tthis.sameAxis = true;\n\n\t\tdocument.addEventListener( 'keydown', function(e){this.keyDown(e);}.bind(this), false );\n        document.addEventListener( 'keyup', function(e){this.keyUp(e);}.bind(this), false );\n\n\t}\n\n    setKey( i, v ){\n        this.key[i] = v;\n    }\n\n\tupdate () {\n\n\t\tthis.gamepad.update();\n\n        if( this.gamepad.ready ){ \n            if( !this.useGamepad ) this.useGamepad = true;\n            this.gamepad.getValue(0);\n        }\n\n        if( this.sameAxis ){\n            this.key[ 2 ] = this.key[ 0 ];\n            this.key[ 3 ] = this.key[ 1 ];\n        }\n\n        //this.axeL[ 0 ] = this.key[ 0 ];\n        //this.axeL[ 1 ] = this.key[ 1 ];\n\n        return this.key\n\n\t}\n\n\tkeyDown (e) {\n\n\t\tvar key = this.key;\n        var key2 = this.key2;\n        e = e || window.event;\n\n        if( this.sameAxis ){\n\n            switch ( e.which ) {\n                // axe L\n                case 65: case 81: case 37: key[0] = -1; key2[0] = 1; break;//key[0]<=-1 ? -1:key[0]-= 0.1; break; // left, A, Q\n                case 68:  case 39:         key[0] = 1;  key2[1] = 1; break; // right, D\n                case 87: case 90:  case 38: key[1] = -1; break; // up, W, Z\n                case 83: case 40:          key[1] = 1;  break; // down, S\n\n                case 32:          key[4] = 1; break; // space\n                case 17: case 67: key[5] = 1; break; // ctrl, C\n                case 69:          key[6] = 1; break; // E\n                \n                case 16:          key[7] = 1; break; // shift\n                //case 71:          view.hideGrid(); break; // G\n                //case 121:         noui(); break; // f10\n                //case 122:         fscreen(); break; // f11\n            }\n\n        } else {\n\n            switch ( e.which ) {\n                // axe L\n                case 65: case 81: key[0] = -1; key2[0] = 1; break;//key[0]<=-1 ? -1:key[0]-= 0.1; break; // left, A, Q\n                case 68:          key[0] = 1; key2[1] = 1; break; // right, D\n                case 87: case 90: key[1] = -1; break; // up, W, Z\n                case 83:          key[1] = 1;  break; // down, S\n                // axe R\n                case 37:          key[2] = -1;  key2[0] = 1;break; // left\n                case 39:          key[2] = 1;  key2[1] = 1;break; // right\n                case 38:          key[3] = -1; break; // up\n                case 40:          key[3] = 1;  break; // down\n                \n\n                case 32:          key[4] = 1; break; // space\n                case 17: case 67: key[5] = 1; break; // ctrl, C\n                case 69:          key[6] = 1; break; // E\n                \n                case 16:          key[7] = 1; break; // shift\n                //case 121:         noui(); break; // f10\n                //case 122:         fscreen(); break; // f11\n                \n                //case 71:          view.hideGrid(); break; // G\n            }\n        }\n\n        this.gamepad.reset();\n        //e.preventDefault();\n\n\t}\n\n\tkeyUp (e) {\n\n\t\tvar key = this.key;\n        var key2 = this.key2;\n        e = e || window.event;\n\n        if( this.sameAxis ){\n\n            switch ( e.which ) {\n                 // axe L\n                case 65: case 81: case 37: key[0] = key[0]<0 ? 0:key[0]; key2[0] = 0; break; // left, A, Q\n                case 68: case 39:         key[0] = key[0]>0 ? 0:key[0]; key2[1] = 0; break; // right, D\n                case 87: case 90: case 38:key[1] = key[1]<0 ? 0:key[1]; break; // up, W, Z\n                case 83: case 40:         key[1] = key[1]>0 ? 0:key[1]; break; // down, S\n\n                case 32:          key[4] = 0; break; // space\n                case 17: case 67: key[5] = 0; break; // ctrl, C\n                case 69:          key[6] = 0; break; // E\n                \n                case 16:          key[7] = 0; break; // shift\n            }\n\n        } else {\n\n            switch( e.which ) {\n                \n                // axe L\n                case 65: case 81: key[0] = key[0]<0 ? 0:key[0]; key2[0] = 0; break; // left, A, Q\n                case 68:          key[0] = key[0]>0 ? 0:key[0]; key2[1] = 0; break; // right, D\n                case 87: case 90: key[1] = key[1]<0 ? 0:key[1]; break; // up, W, Z\n                case 83:          key[1] = key[1]>0 ? 0:key[1]; break; // down, S\n                // axe R\n                case 37:          key[2] = key[2]<0 ? 0:key[2]; key2[0] = 0;break; // left\n                case 39:          key[2] = key[2]>0 ? 0:key[2]; key2[1] = 0;break; // right\n                case 38:          key[3] = key[3]<0 ? 0:key[3]; break; // up\n                case 40:          key[3] = key[3]>0 ? 0:key[3]; break; // down\n\n                case 32:          key[4] = 0; break; // space\n                case 17: case 67: key[5] = 0; break; // ctrl, C\n                case 69:          key[6] = 0; break; // E\n                \n                case 16:          key[7] = 0; break; // shift\n\n                \n            }\n        }\n\n        //e.preventDefault();\n\t\t\n\t}\n\n\n}\n\n\nclass Gamepad {\n\n\tconstructor ( key ) {\n\n\t\tthis.values = []; \n        this.ready = 0;\n        this.key = key;\n\n\t}\n\n\tupdate () {\n\n\t\tvar i,j,k,l, v, pad;\n        var fix = this.fix;\n        var gamepads = navigator.getGamepads();\n\n        for (i = 0; i < gamepads.length; i++) {\n\n            pad = gamepads[i];\n            if(pad){\n                k = pad.axes.length;\n                l = pad.buttons.length;\n                if(l){\n                    if(!this.values[i]) this.values[i] = [];\n                    // axe\n                    for (j = 0; j < k; j++) {\n                        v = fix(pad.axes[j], 0.08 );\n                        if(this.ready == 0 && v !== 0 ) this.ready = 1;\n                        this.values[i][j] = v;\n                        //if(i==0) this.key[j] = fix( pad.axes[j], 0.08 );\n                    }\n                    // button\n                    for (j = 0; j < l; j++) {\n                        v = fix(pad.buttons[j].value); \n                        if(this.ready == 0 && v !== 0 ) this.ready = 1;\n                        this.values[i][k+j] = v;\n                        //if(i==0) this.key[k+j] = fix( pad.buttons[j].value );\n                    }\n                    //info += 'gamepad '+i+'| ' + this.values[i]+ '<br>';\n                } else {\n                    if(this.values[i]) this.values[i] = null;\n                }\n            }\n        }\n\n\t}\n\n\tgetValue (n) {\n\n\t\tvar i = 19, v;\n        while(i--){\n            v = this.values[n][i];\n            if(this.ready == 0 && v !== 0 ) this.ready = 1;\n            this.key[i] = v;\n        }\n\n\t}\n\n\treset () {\n\n\t\tthis.ready = 0;\n\t\t\n\t}\n\n\tfix (v, dead) {\n\n\t\tlet n = Number((v.toString()).substring(0, 5));\n        if(dead && n<dead && n>-dead) n = 0;\n        return n;\n\t\t\n\t}\n\n\n}\n\nclass Item {\n\n\tconstructor () {\n\n\t\tthis.id = 0;\n\t\tthis.list = [];\n\t\tthis.type = 'item';\n\t\tthis.Utils = null;\n\n\t}\n\n\treset () {\n\n\t\tlet i = this.list.length;\n\t\twhile( i-- ) this.dispose( this.list[i] );\n\t\tthis.list = [];\n\t    this.id = 0;\n\n\t}\n\n\t///\n\n\tbyName ( name ) {\n\n\t\treturn this.Utils.byName( name );\n\n\t}\n\n\tsetName ( o = {} ) {\n\n\t\tlet name = o.name !== undefined ? o.name : this.type + this.id ++;\n\n\t\t// clear old item if existe keep id\n\t\to.id = this.remove( name, true );\n\t\to.name = name;\n\t\treturn name;\n\n\t}\n\n\taddToWorld ( b, id = -1 ) {\n\n\t\tthis.Utils.add( b );\n\t\tif( id !== -1 ) this.list[id] = b;\n\t\telse this.list.push( b );\n\n\t}\n\n\tremove ( name, remplace ) {\n\n\t\tlet b = this.byName( name );\n\t\tif( !b ) return -1;\n\t\treturn this.clear( b, remplace );\n\n\t}\n\n\tclear ( b, remplace ) {\n\n\t\tlet n = this.list.indexOf( b );\n\t\tif ( n !== -1 && !remplace ) this.list.splice( n, 1 );\n\t\telse this.list[n] = null;\n\t\tthis.dispose( b );\n\t\treturn n;\n\n\t}\n\n\tdispose ( b ) {\n\n\t\tif( b !== null ) this.Utils.remove( b );\n\n\t}\n\n\tadd ( o = {} ) { }\n\n\tset ( o = {} ) { }\n\n\tstep ( AR, N ) { }\n\n\t// ARRAY MATH TOOL\n\n    /*\n    vecZero ( ar, n, i ) { while ( i-- ) ar[n+i] = 0; }\n\n    fillArray ( ar, ar2, n, i ) { \n\n    \tn = n || 0;\n    \ti = i ?? ar.length;\n    \twhile( i-- ) ar2[n+i] = ar[i];\n\n    }\n\n    arLength ( ar ) { \n\n    \tlet v = Math.sqrt( ar[0] * ar[0] + ar[1] * ar[1] + ar[2] * ar[2] );\n    \tif( v < 0.001 ) v = 0;\n    \treturn v;\n\n    }\n\n    multiplyScalar ( ar, v, i ) { \n\n    \ti = i ?? ar.length;\n    \twhile(i--) ar[i] *= v;\n\n    }\n\n    divideScalar ( ar, v, i ) {\n\n    \tthis.multiplyScalar( ar, 1/v, i );\n\n    }*/\n\n}\n\n// THREE RAY\n\nclass Ray extends Item {\n\n\tconstructor () {\n\n\t\tsuper();\n\n\t\tthis.Utils = Utils;\n\t\tthis.type = 'ray';\n\t\tthis.iType = 'ray';\n\n\t}\n\n\tstep () {\n\n\t\tconst AR = root.Ar;\n\t\tconst N = root.ArPos[this.type];\n\n\t\tlet i = this.list.length, r, n;\n\n\t\twhile( i-- ){\n\n\t\t\tr = this.list[i];\n\t\t\tn = N + ( i * Num.ray );\n\t\t\tr.update( AR, n, root.reflow.ray[i] || null );\n\n\t\t}\n\n\t}\n\n\tadd ( o = {} ) {\n\n\t\tthis.setName( o );\n\n\t\tlet r = new ExtraRay( o );\n\n\t\tr.visible = o.visible !== undefined ? o.visible : true;\n\n\t\t// add to world\n\t\tthis.addToWorld( r, o.id );\n\n\t\tif(o.parent){\n\t\t\tif( typeof o.parent !== 'string' ) o.parent = o.parent.name;\n\t\t}\n\n\t\tif( o.callback ) delete o.callback;\n\n\t\t\n\n\t\t// add to worker \n\t\troot.post( { m:'add', o:o } );\n\n\t\treturn r;\n\n\t}\n\n\tset ( o = {}, r = null ) {\n\n\t\tif( r === null ) r = this.byName( o.name );\n\t\tif( r === null ) return;\n\n\t\tr.setRay(o);\n\n\t}\n\n}\n\n\nclass ExtraRay extends Line {\n\n\tconstructor( o = {} ) {\n\n\t    super( new BufferGeometry(), Mat.get('line') );\n\n\t    this.isRay = true;\n\n\t    this.data = {\n\n\t\t\thit:false,\n\t\t\tbody: '',\n\t\t\tpoint: [0,0,0],\n\t\t\tnormal: [0,0,0],\n\t\t\tdistance: 0,\n\t\t\tangle:0,\n\t\t\tparent:null\n\n\t\t};\n\n\t    this.type = 'ray';\n\t    this.name = o.name;\n\n\t    this.parentMesh = null;\n\t    if(o.parent){\n\t    \tthis.parentMesh = typeof o.parent === 'string' ?  Utils.byName( o.parent ) : o.parent;\n\t    \tthis.data.parent = this.parentMesh;\n\t    }\n\n\t    this.callback = o.callback || null;\n\n\t    // color\n\t\tthis.c0 = [ 0.1, 0.1, 0.3 ];\n\t\tthis.c1 = [ 0.1, 0.4, 0.6 ];\n\t\tthis.c2 = [ 1.0, 0.1, 0.1 ];\n\t\tthis.c3 = [ 0.1, 1.0, 0.1 ];\n\n\t    this.begin = new Vector3();\n\t    this.end = new Vector3(0,1,0);\n\t    this.tmp = new Vector3();\n\t    this.vnormal = new Vector3();\n\t    this.vv1 = new Vector3();\n\t    this.vv2 = new Vector3();\n\n\t    this.fullDistance = 0;\n\n\t    this.setRay( o );\n\n\t    const positions = [0,0,0, 0,0,0, 0,0,0];\n\t    const colors = [0,0,0, 0,0,0, 0,0,0];\n\n\t    //this.geometry = new BufferGeometry();\n\t    this.geometry.setAttribute( 'position', new Float32BufferAttribute( positions, 3 ) );\n\t    this.geometry.setAttribute( 'color', new Float32BufferAttribute( colors, 3 ) );\n\t    //this.geometry.computeBoundingSphere();\n\n\t    this.vertices = this.geometry.attributes.position;\n\t    this.colors = this.geometry.attributes.color;\n\t    this.local = [ 0, 0, 0, 0, 0, 0, 0, 0, 0 ];\n\n\t    this.matrixAutoUpdate = false;\n\t    this.frustumCulled = false;\n\n\t}\n\n\tsetRay( o ){\n\n\t\tif( o.begin ) this.begin.fromArray( o.begin );\n\t    if( o.end ) this.end.fromArray( o.end );\n\t    this.fullDistance = this.begin.distanceTo( this.end );\n\n\t}\n\n\tupdate ( r, n = 0, body = null ) {\n\n\t\tthis.data.hit = r[n] !== 0 ? true : false;\n\t\tthis.data.body = body ? body : '';\n\n\t\tthis.data.distance = r[n+1];\n\n\t\tif( this.data.hit ){\n\n\t\t\tthis.local[0] = r[n+2];\n\t\t\tthis.local[1] = r[n+3];\n\t\t\tthis.local[2] = r[n+4];\n\n\t\t\tthis.tmp.fromArray( r, n+5 );\n\t\t\tthis.vnormal.fromArray( r, n+8 );\n\n\t\t\tthis.data.point = this.tmp.toArray();\n\t\t\tthis.data.normal = this.vnormal.toArray();\n\t\t\t//this.data.distance = this._begin.distanceTo( this.tmp )\n\n\t\t\tthis.tmp.toArray( this.local, 3 );\n\t\t\tthis.vv1.fromArray( this.local ).sub(this.tmp).normalize(); \n\t\t\tthis.tmp.addScaledVector( this.vnormal, this.fullDistance - this.data.distance );\n\t\t\tthis.tmp.toArray( this.local, 6 );\n\n\t\t\t\n\t\t\t//vv1.fromArray( r, n+5 ); \n\n\t\t\tthis.data.angle = Math.floor( MathTool.angleTo( this.vv1.toArray(), this.data.normal ) * todeg$1 );\n\t\t\t//let angle = MathTool.angleTo( [this.local[0], this.local[2], this.local[2]], [this.local[3], this.local[4], this.local[5]] ) * todeg\n\t\t\t//console.log(this.data.angle)\n\n\t\t} else {\n\t\t\tif( this.parentMesh ){\n\t\t\t\t//this.data.parent = this.parentMesh;\n\t\t\t\t//this.parentMesh.updateWorldMatrix(false,false )\n\t\t\t\tconst mtx = this.parentMesh.matrixWorld;\n\t\t\t\tthis.tmp.copy( this.begin ).applyMatrix4(mtx).toArray( this.local, 0 );\n\t\t\t\tthis.tmp.copy( this.end ).applyMatrix4(mtx);\n\t\t\t\tthis.tmp.toArray( this.local, 3 );\n\t\t\t\tthis.tmp.toArray( this.local, 6 );\n\t\t\t} else {\n\t\t\t\tthis.begin.toArray( this.local, 0 );\n\t\t\t\tthis.end.toArray( this.local, 3 );\n\t\t\t\tthis.end.toArray( this.local, 6 );\n\t\t\t}\n\t\t}\n\n\t\tthis.updateGeometry();\n\t\tthis.updateMatrix();\n\n\t\tif(this.callback) this.callback( this.data );\n\n\t}\n\n\tdispose(){\n\t\t\n\t\tthis.callback = null;\n\t\tthis.parentMesh = null;\n\t\tthis.data = {};\n\t\tthis.geometry.dispose();\n\n\t}\n\n\traycast(){\n\t\treturn\n\t}\n\n\tupdateGeometry(){\n\n\t\tif ( !this.visible ) return;\n\n\t\tlet v = this.vertices.array;\n\t\tlet c = this.colors.array;\n\t\tlet l = this.local;\n\t\tlet hit = this.data.hit;\n\t\tlet c1 = hit ? this.c2 : this.c1;\n\t\tlet c2 = hit ? this.c3 : this.c1;\n\n\t\tc[ 3 ] = c1[0];\n\t\tc[ 4 ] = c1[1];\n\t\tc[ 5 ] = c1[2];\n\n\t\tc[ 6 ] = c2[0];\n\t\tc[ 7 ] = c2[1];\n\t\tc[ 8 ] = c2[2];\n\n\t\tv[ 0 ] = l[ 0 ];\n\t\tv[ 1 ] = l[ 1 ];\n\t\tv[ 2 ] = l[ 2 ];\n\n\t\tv[ 3 ] = l[ 3 ];\n\t\tv[ 4 ] = l[ 4 ];\n\t\tv[ 5 ] = l[ 5 ];\n\t\t\n\t\tv[ 6 ] = l[ 6 ];\n\t\tv[ 7 ] = l[ 7 ];\n\t\tv[ 8 ] = l[ 8 ];\n\n\t\tthis.vertices.needsUpdate = true;\n\t    this.colors.needsUpdate = true;\n\t}\n\n}\n\n//ExtraRay.prototype.isRay = true;\n\nlet _object3DId = 0;\n\nconst _v1$2 = new Vector3();\nconst _q1 = new Quaternion();\nconst _m1 = new Matrix4();\nconst _target = new Vector3();\n\nconst _position = new Vector3();\nconst _scale = new Vector3();\nconst _quaternion = new Quaternion();\n\nconst _xAxis = new Vector3( 1, 0, 0 );\nconst _yAxis = new Vector3( 0, 1, 0 );\nconst _zAxis = new Vector3( 0, 0, 1 );\n\nconst _addedEvent = { type: 'added' };\nconst _removedEvent = { type: 'removed' };\n\nclass Basic3D extends EventDispatcher {\n\n\tconstructor() {\n\n\t\tsuper();\n\n\t\tthis.isObject3D = true;\n\n\t\tObject.defineProperty( this, 'id', { value: _object3DId ++ } );\n\t\tthis.uuid = MathUtils.generateUUID();\n\t\t\n\t    this.isRay = true;\n\t    this.matrix = new Matrix4();\n\t    this.matrixWorld = new Matrix4();\n\t\t\n\t\tthis.name = '';\n\t\tthis.type = 'Object3D';\n\n\t\tthis.children = [];\n\t\tthis.parent = null;\n\t\t\n\t\t\n\t\tthis.position = new Vector3();\n\t\tthis.quaternion = new Quaternion();\n\t\tthis.tmpRotation = new Euler();\n\t\tthis.scale = new Vector3( 1, 1, 1 );\n\n\t\tthis.isKinematic = false;\n\t\t\n\t\tthis.matrixAutoUpdate = false;\n\t\tthis.matrixWorldNeedsUpdate = false;\n\n\t\tthis.layers = new Layers();\n\t\tthis.visible = true;\n\t\tthis.isVisible = true;\n\n\t\t//this.castShadow = false;\n\t\t//this.receiveShadow = false;\n\n\t\tthis.frustumCulled = true;\n\t\tthis.renderOrder = 0;\n\n\t\t//this.animations = [];\n\n\t\tthis.userData = {};\n\n\t\tthis.mass = 0;\n\t\tthis.density = 0;\n\t\t// TODO \n\t\tthis.inertia = new Vector3(1, 1, 1);\n\n\t\t\n\t\tthis.shapetype = 'box';\n\t\tthis.size = [1,1,1];\n\t\t//this.data = {}\n\t\t//this._size = new Vector3(1,1,1)\n\t\tthis.velocity = new Vector3();\n\t\tthis.angular = new Vector3();\n\t\t\n\t\tthis.defMat = false;\n\t\tthis.actif = false;\n\t\tthis.auto = false;\n\t\tthis.sleep = false;\n\n\t\t// only for high mesh\n\t\tthis.mesh = null;\n\t\tthis.meshSize = 1;\n\n\t\t// if object is link by joint\n\t\tthis.linked = [];\n\n\t\tthis.isOver = false;\n\t\tthis.overMaterial = null;\n\n\t}\n\n\t// ADD\n\n\tclearOutLine() {\n\n\t\tif( !this.overMaterial ) return;\n\t\tif( !this.outline ) return;\n\t\tthis.remove(this.outline);\n\t\tthis.outline = null;\n\n\t}\n\n\taddOutLine() {\n\n\t\tif( !this.overMaterial ) return;\n\t\tif( !this.children[0].isMesh ) return;\n\n\t\t//console.log(this.children[0])\n\t\t//\n\t\tlet s = 0.01;\n\t\t/*if(this.children[0].geometry.boundingBox){\n\t\t\tlet tt = new Vector3()\n\t\t\tthis.children[0].geometry.boundingBox.getSize(tt);\n\t\t\ts = tt.length() * 0.01\n\t\t}*/\n\t\t//this.children[0].geometry.boundingBox.getSize(tt);\n\t\t//let gSize = tt.length() * 0.5\n\t\t//let mScale = this.children[0].scale.length() * 0.5\n\t\t//console.log( mScale)\n\n\t\tthis.outline = new Mesh().copy( this.children[0] );\n\t\t//this.outline.geometry.computeVertexNormals()\n\t\t//this.outline.geometry.normalizeNormals()\n\t\tthis.outline.name = \"outline\";\n\t\tthis.outline.material = this.overMaterial;\n\t\t//if( this.shapetype==='sphere' ) this.meshSize = 0.5\n\t\tif(this.overMaterial.uniforms.power)this.overMaterial.uniforms.power.value = s / this.meshSize;\n\t\tthis.outline.matrixAutoUpdate = false;\n\t\tthis.outline.receiveShadow = false;\n\t\tthis.outline.castShadow = false;\n\t\tthis.outline.raycast = () => ( false );\n\t\tthis.add( this.outline );\n\n\t}\n\n\tover ( b ) {\n\n\t\tif( b && !this.isOver ){ \n\n            this.isOver = true;\n            this.addOutLine();\n\n        }\n\n        if( !b && this.isOver ){ \n\n            this.isOver = false;\n            this.clearOutLine();\n\n        }\n\n\t\t//if(b) this.addOutLine();\n\t\t//else this.clearOutLine();\n\n    }\n\n\tselect ( b ) {\n\n\t\t//console.log(b)\n\n    }\n\n    dispose () {\n\n    \tthis.clearOutLine();\n    \tthis.traverse( function ( node ) {\n\t\t\tif( node.isMesh && node.unic ) node.geometry.dispose();\n\t\t});\n\n\t\tthis.children = [];\n\n    }\n\n\t/*set size( value ){\n\t\tthis._size.fromArray( value )\n\t}\n\n\tget size(){\n\t\treturn this._size.toArray()\n\t}*/\n\n\tset receiveShadow( value ){\n\t\tthis.traverse( function ( node ) {\n\t\t\tif( node.isMesh ) node.receiveShadow = value;\n\t\t});\n\t}\n\n\tget receiveShadow(){\n\t\tif( this.children[0] ) return this.children[0].receiveShadow;\n\t\telse return false\n\t}\n\n\tset castShadow( value ){\n\t\tthis.traverse( function ( node ) {\n\t\t\tif( node.isMesh ) node.castShadow = value;\n\t\t});\n\t}\n\n\tget castShadow(){\n\t\tif( this.children[0] ) return this.children[0].castShadow;\n\t\telse return false\n\t}\n\n\tset material( value ){\n\t\tthis.traverse( function ( node ) {\n\t\t\tif( node.isMesh ){ \n\t\t\t\tif( node.name !== 'outline' ) node.material = value;\n\t\t\t}\n\t\t});\n\t}\n\n\tget material(){\n\t\tthis.children;\n\t\tif( this.children[0] ) return this.children[0].material;\n\t\telse return null;\n\t}\n\n    set rotation( v ){\n    \tthis.tmpRotation = v;\n\t\tquaternion.setFromEuler( this.tmpRotation, false );\n\t}\n\n\tget rotation(){\n\t\treturn this.tmpRotation.setFromQuaternion( this.quaternion, undefined, false );\n\t}\n\n    //////\n\n\n\tonBeforeRender( /* renderer, scene, camera, geometry, material, group */ ) {}\n\n\tonAfterRender( /* renderer, scene, camera, geometry, material, group */ ) {}\n\n\tapplyMatrix4( matrix ) {\n\n\t\tif ( this.matrixAutoUpdate ) this.updateMatrix();\n\n\t\tthis.matrix.premultiply( matrix );\n\n\t\tthis.matrix.decompose( this.position, this.quaternion, this.scale );\n\n\t}\n\n\tapplyQuaternion( q ) {\n\n\t\tthis.quaternion.premultiply( q );\n\n\t\treturn this;\n\n\t}\n\n\tsetRotationFromAxisAngle( axis, angle ) {\n\n\t\t// assumes axis is normalized\n\n\t\tthis.quaternion.setFromAxisAngle( axis, angle );\n\n\t}\n\n\tsetRotationFromEuler( euler ) {\n\n\t\tthis.quaternion.setFromEuler( euler, true );\n\n\t}\n\n\tsetRotationFromMatrix( m ) {\n\n\t\t// assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)\n\n\t\tthis.quaternion.setFromRotationMatrix( m );\n\n\t}\n\n\tsetRotationFromQuaternion( q ) {\n\n\t\t// assumes q is normalized\n\n\t\tthis.quaternion.copy( q );\n\n\t}\n\n\trotateOnAxis( axis, angle ) {\n\n\t\t// rotate object on axis in object space\n\t\t// axis is assumed to be normalized\n\n\t\t_q1.setFromAxisAngle( axis, angle );\n\n\t\tthis.quaternion.multiply( _q1 );\n\n\t\treturn this;\n\n\t}\n\n\trotateOnWorldAxis( axis, angle ) {\n\n\t\t// rotate object on axis in world space\n\t\t// axis is assumed to be normalized\n\t\t// method assumes no rotated parent\n\n\t\t_q1.setFromAxisAngle( axis, angle );\n\n\t\tthis.quaternion.premultiply( _q1 );\n\n\t\treturn this;\n\n\t}\n\n\trotateX( angle ) {\n\n\t\treturn this.rotateOnAxis( _xAxis, angle );\n\n\t}\n\n\trotateY( angle ) {\n\n\t\treturn this.rotateOnAxis( _yAxis, angle );\n\n\t}\n\n\trotateZ( angle ) {\n\n\t\treturn this.rotateOnAxis( _zAxis, angle );\n\n\t}\n\n\ttranslateOnAxis( axis, distance ) {\n\n\t\t// translate object by distance along axis in object space\n\t\t// axis is assumed to be normalized\n\n\t\t_v1$2.copy( axis ).applyQuaternion( this.quaternion );\n\n\t\tthis.position.add( _v1$2.multiplyScalar( distance ) );\n\n\t\treturn this;\n\n\t}\n\n\ttranslateX( distance ) {\n\n\t\treturn this.translateOnAxis( _xAxis, distance );\n\n\t}\n\n\ttranslateY( distance ) {\n\n\t\treturn this.translateOnAxis( _yAxis, distance );\n\n\t}\n\n\ttranslateZ( distance ) {\n\n\t\treturn this.translateOnAxis( _zAxis, distance );\n\n\t}\n\n\tlocalToWorld( vector ) {\n\n\t\treturn vector.applyMatrix4( this.matrixWorld );\n\n\t}\n\n\tworldToLocal( vector ) {\n\n\t\treturn vector.applyMatrix4( _m1.copy( this.matrixWorld ).invert() );\n\n\t}\n\n\tlookAt( x, y, z ) {\n\n\t\t// This method does not support objects having non-uniformly-scaled parent(s)\n\n\t\tif ( x.isVector3 ) {\n\n\t\t\t_target.copy( x );\n\n\t\t} else {\n\n\t\t\t_target.set( x, y, z );\n\n\t\t}\n\n\t\tconst parent = this.parent;\n\n\t\tthis.updateWorldMatrix( true, false );\n\n\t\t_position.setFromMatrixPosition( this.matrixWorld );\n\n\t\tif ( this.isCamera || this.isLight ) {\n\n\t\t\t_m1.lookAt( _position, _target, this.up );\n\n\t\t} else {\n\n\t\t\t_m1.lookAt( _target, _position, this.up );\n\n\t\t}\n\n\t\tthis.quaternion.setFromRotationMatrix( _m1 );\n\n\t\tif ( parent ) {\n\n\t\t\t_m1.extractRotation( parent.matrixWorld );\n\t\t\t_q1.setFromRotationMatrix( _m1 );\n\t\t\tthis.quaternion.premultiply( _q1.invert() );\n\n\t\t}\n\n\t}\n\n\tadd( object ) {\n\n\t\tif ( arguments.length > 1 ) {\n\n\t\t\tfor ( let i = 0; i < arguments.length; i ++ ) {\n\n\t\t\t\tthis.add( arguments[ i ] );\n\n\t\t\t}\n\n\t\t\treturn this;\n\n\t\t}\n\n\t\tif ( object === this ) {\n\n\t\t\tconsole.error( 'THREE.Object3D.add: object can\\'t be added as a child of itself.', object );\n\t\t\treturn this;\n\n\t\t}\n\n\t\tif ( object && object.isObject3D ) {\n\n\t\t\tif ( object.parent !== null ) {\n\n\t\t\t\tobject.parent.remove( object );\n\n\t\t\t}\n\n\t\t\tobject.parent = this;\n\t\t\tthis.children.push( object );\n\n\t\t\tobject.dispatchEvent( _addedEvent );\n\n\t\t} else {\n\n\t\t\tconsole.error( 'THREE.Object3D.add: object not an instance of THREE.Object3D.', object );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tremove( object ) {\n\n\t\tif ( arguments.length > 1 ) {\n\n\t\t\tfor ( let i = 0; i < arguments.length; i ++ ) {\n\n\t\t\t\tthis.remove( arguments[ i ] );\n\n\t\t\t}\n\n\t\t\treturn this;\n\n\t\t}\n\n\t\tconst index = this.children.indexOf( object );\n\n\t\tif ( index !== -1 ) {\n\n\t\t\tobject.parent = null;\n\t\t\tthis.children.splice( index, 1 );\n\n\t\t\tobject.dispatchEvent( _removedEvent );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tremoveFromParent() {\n\n\t\tconst parent = this.parent;\n\n\t\tif ( parent !== null ) {\n\n\t\t\tparent.remove( this );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tclear() {\n\n\t\tconst children = this.children;\n\t\tlet i = children.length;\n\n\t\twhile( i-- ){\n\t\t//for ( let i = 0; i < this.children.length; i ++ ) {\n\n\t\t\tconst object = children[ i ];\n\t\t\tobject.parent = null;\n\t\t\tobject.dispatchEvent( _removedEvent );\n\n\t\t}\n\n\t\tthis.children.length = 0;\n\n\t\treturn this;\n\n\n\t}\n\n\tattach( object ) {\n\n\t\t// adds object as a child of this, while maintaining the object's world transform\n\t\t// Note: This method does not support scene graphs having non-uniformly-scaled nodes(s)\n\n\t\tthis.updateWorldMatrix( true, false );\n\n\t\t_m1.copy( this.matrixWorld ).invert();\n\n\t\tif ( object.parent !== null ) {\n\n\t\t\tobject.parent.updateWorldMatrix( true, false );\n\n\t\t\t_m1.multiply( object.parent.matrixWorld );\n\n\t\t}\n\n\t\tobject.applyMatrix4( _m1 );\n\n\t\tthis.add( object );\n\n\t\tobject.updateWorldMatrix( false, true );\n\n\t\treturn this;\n\n\t}\n\n\tgetObjectById( id ) {\n\n\t\treturn this.getObjectByProperty( 'id', id );\n\n\t}\n\n\tgetObjectByName( name ) {\n\n\t\treturn this.getObjectByProperty( 'name', name );\n\n\t}\n\n\tgetObjectByProperty( name, value ) {\n\n\t\tif ( this[ name ] === value ) return this;\n\n\t\tconst children = this.children;\n\t\tlet i = children.length;\n\n\t\twhile( i-- ){\n\t\t//for ( let i = 0, l = this.children.length; i < l; i ++ ) {\n\n\t\t\tconst child = children[ i ];\n\t\t\tconst object = child.getObjectByProperty( name, value );\n\n\t\t\tif ( object !== undefined ) {\n\n\t\t\t\treturn object;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn undefined;\n\n\t}\n\n\tgetWorldPosition( target ) {\n\n\t\tthis.updateWorldMatrix( true, false );\n\n\t\treturn target.setFromMatrixPosition( this.matrixWorld );\n\n\t}\n\n\tgetWorldQuaternion( target ) {\n\n\t\tthis.updateWorldMatrix( true, false );\n\n\t\tthis.matrixWorld.decompose( _position, target, _scale );\n\n\t\treturn target;\n\n\t}\n\n\tgetWorldScale( target ) {\n\n\t\tthis.updateWorldMatrix( true, false );\n\n\t\tthis.matrixWorld.decompose( _position, _quaternion, target );\n\n\t\treturn target;\n\n\t}\n\n\tgetWorldDirection( target ) {\n\n\t\tthis.updateWorldMatrix( true, false );\n\n\t\tconst e = this.matrixWorld.elements;\n\n\t\treturn target.set( e[ 8 ], e[ 9 ], e[ 10 ] ).normalize();\n\n\t}\n\n\tsetRaycast(v){\n\t\tif( v !== undefined ) this.isRay = v;\n\t\tif(!this.isRay){\n\t\t\tlet i =  this.children.length;\n\t\t\twhile( i-- ) {\n\t\t\t\tlet j =  this.children[i].children.length;\n\t\t\t\twhile( j-- ) this.children[i].children[j].raycast = () => {}; \n\t\t\t\tthis.children[i].raycast = () => {};\n\t\t\t}\n\t\t}\n\t}\n\n\t// direct raycast avoid recursive !!\n\traycast( raycaster, intersects ) {\n\n\t\tif( !this.isRay ) return\n\n\t\tconst children = this.children;\n\t\tlet i = children.length;\n\n\t\twhile( i-- ){\n\n\t\t\tif ( children[i].layers.test( raycaster.layers ) ) {\n\n\t\t\t\tchildren[i].raycast( raycaster, intersects );\n\n\t\t\t}\n\n\t\t}\n\t}\n\n\ttraverse( callback ) {\n\n\t\tcallback( this );\n\n\t\tconst children = this.children;\n\t\tlet i = children.length;\n\n\t\t//for ( let i = 0, l = children.length; i < l; i ++ ) {\n\t\twhile( i-- ){\n\n\t\t\tchildren[ i ].traverse( callback );\n\n\t\t}\n\n\t}\n\n\ttraverseVisible( callback ) {\n\n\t\tif ( this.visible === false ) return;\n\n\t\tcallback( this );\n\n\t\tconst children = this.children;\n\t\tlet i = children.length;\n\n\t\t//for ( let i = 0, l = children.length; i < l; i ++ ) {\n\t\twhile( i-- ){\n\n\t\t\tchildren[ i ].traverseVisible( callback );\n\n\t\t}\n\n\t}\n\n\ttraverseAncestors( callback ) {\n\n\t\tconst parent = this.parent;\n\n\t\tif ( parent !== null ) {\n\n\t\t\tcallback( parent );\n\n\t\t\tparent.traverseAncestors( callback );\n\n\t\t}\n\n\t}\n\n\t/*setTransform( p, q, s ) {\n\n\t\tthis.position.fromArray( p )\n\t\tthis.quaternion.fromArray( q )\n\n\t\tthis.matrix.copy( m );\n\t\tthis.matrix.decompose( this.position, this.quaternion, this.scale );\n\t\tthis.matrixWorldNeedsUpdate = true;\n\n\t}\n\n\tsetColor( color ) {\n\n\t\tif( this.isInstance ){\n\t\t    this.instance.setColorAt( this.instanceId, color );\n\t\t}\n\t\t\n\t}\n\n\tupdateMatrix() {\n\n\t\tthis.matrix.compose( this.position, this.quaternion, this.scale );\n\t    this.matrixWorldNeedsUpdate = true;\n\n\t\tif( this.isInstance ) {\n\t\t\tthis.instance.setTransformAt( this.instanceId, this.position.toArray(), this.quaternion.toArray(), this.size )\n\t\t\treturn;\n\t\t} else {\n\t\t\t\n\t\t}\n\n\t\t\n\n\t\t//if( this.isInstance ) this.instance.setMatrixAt( this.instanceId, this.matrix );\n\t\t//else this.matrixWorldNeedsUpdate = true;\n\n\t}*/\n\n\tupdateMatrix() {\n\n\t\tthis.matrix.compose( this.position, this.quaternion, this.scale );\n\t\tthis.matrixWorldNeedsUpdate = true;\n\n\t}\n\n\tupdateMatrixWorld( force ) {\n\n\t\tif ( this.matrixAutoUpdate ) this.updateMatrix();\n\n\t\tif ( this.matrixWorldNeedsUpdate || force ) {\n\n\t\t\tif ( this.parent === null ) {\n\n\t\t\t\tthis.matrixWorld.copy( this.matrix );\n\n\t\t\t} else {\n\n\t\t\t\tthis.matrixWorld.multiplyMatrices( this.parent.matrixWorld, this.matrix );\n\n\t\t\t}\n\n\t\t\tthis.matrixWorldNeedsUpdate = false;\n\n\t\t\tforce = true;\n\n\t\t}\n\n\t\t// update children\n\n\t\tconst children = this.children;\n\t\tlet i = children.length;\n\n\t\twhile( i-- ){\n\t\t//for ( let i = 0, l = children.length; i < l; i ++ ) {\n\t\t\tchildren[ i ].updateMatrixWorld( force );\n\n\t\t}\n\n\t}\n\n\tupdateWorldMatrix( updateParents, updateChildren ) {\n\n\t\tconst parent = this.parent;\n\n\t\tif ( updateParents === true && parent !== null ) {\n\n\t\t\tparent.updateWorldMatrix( true, false );\n\n\t\t}\n\n\t\tif ( this.matrixAutoUpdate ) this.updateMatrix();\n\n\t\tif ( this.parent === null ) {\n\n\t\t\tthis.matrixWorld.copy( this.matrix );\n\n\t\t} else {\n\n\t\t\tthis.matrixWorld.multiplyMatrices( this.parent.matrixWorld, this.matrix );\n\n\t\t}\n\n\t\t// update children\n\n\t\tif ( updateChildren === true ) {\n\n\t\t\tconst children = this.children;\n\t\t\tlet i = children.length;\n\n\t\t\twhile( i-- ){\n\t\t\t//for ( let i = 0, l = children.length; i < l; i ++ ) {\n\t\t\t\tchildren[ i ].updateWorldMatrix( false, true );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n}\n\nclass Instance extends InstancedMesh {\n\n\tconstructor( geometry, material, count = 0 ) {\n\n        super( geometry, material, count );\n\n        //this.instanceMatrix = null;\n        this.matrixAutoUpdate = false; \n        this.tmpMatrix = new Matrix4();\n        this.tmpQuat = new Quaternion();\n\n        this.instanceUv = null;\n        this.instanceColor = null;\n        this.needSphereUp = false;\n        this.isRay = true;\n\n        this.overMaterial = null;\n        this.currentOver = -1;\n        this.isOver = false;\n\n        this.tmpElement = [];\n        \n    }\n\n    clearOutLine() {\n\n        if( !this.overMaterial ) return;\n        if( !this.outline ) return;\n        //let i = this.outline.length\n        this.parent.remove( this.outline );\n        this.outline = null;\n        this.currentOver = -1;\n\n    }\n\n    addOutLine( obj ) {\n\n        if( !this.overMaterial ) return;\n\n        this.outline = new Mesh( this.geometry, this.overMaterial );\n        if(this.overMaterial.uniforms.power)this.overMaterial.uniforms.power.value = 0.01;\n        this.outline.matrixAutoUpdate = false;\n        this.tmpMatrix.fromArray( this.instanceMatrix.array, obj.id*16 );\n        this.outline.matrix.copy( this.tmpMatrix );\n        this.outline.matrixWorldNeedsUpdate = true;\n        this.parent.add( this.outline );\n        this.currentOver = obj.id;\n\n    }\n\n    over ( b ) {\n\n        if( b && !this.instance.isOver ){ \n\n            this.instance.isOver = true;\n            this.instance.addOutLine( this );\n\n        }\n\n        if( !b && this.instance.isOver ){ \n\n            this.instance.isOver = false;\n            this.instance.clearOutLine();\n\n        }\n\n    }\n\n    getInfo( index ) {\n\n        this.tmpMatrix.fromArray( this.instanceMatrix.array, index * 16 );\n        let pos = {x:0, y:0, z:0 };\n        let scale = { x:0, y:0, z:0 };\n        this.tmpMatrix.decompose( pos, this.tmpQuat, scale );\n        return {\n            pos:[pos.x, pos.y, pos.z],\n            quat:this.tmpQuat.toArray(),\n            scale:[scale.x, scale.y, scale.z],\n            //worldMatrix:this.tmpMatrix.toArray(),\n        }\n    }\n\n    \n\n    setColorAt( index, color ) {\n\n        if ( this.instanceColor === null ) {\n\n            this.instanceColor = new InstancedBufferAttribute( new Float32Array( this.instanceMatrix.count * 3 ), 3 );\n\n        }\n\n        if( color.isColor ) color = color.toArray();\n        \n        let id = index * 3;\n        this.instanceColor.array[id] = color[0];\n        this.instanceColor.array[id +1] = color[1];\n        this.instanceColor.array[id +2] = color[2];\n        //color.toArray( this.instanceColor.array, index * 3 );\n\n    }\n\n    /*setUvAt( index, uv ) {\n\n        if ( this.instanceUv === null ) this.instanceUv = new InstancedBufferAttribute( new Float32Array( this.instanceMatrix.count * 2 ), 2 );\n        \n        if( uv.isVector2 ) uv = uv.toArray()\n        let id = index * 2\n        this.instanceUv.array[id] = uv[0]\n        this.instanceUv.array[id +1] = uv[1]\n\n    }*/\n\n    add( bref, position = [0,0,0], rotation = [0,0,0,1], scale = [1,1,1], color = null, uv = null ) {\n\n        if( rotation.length === 3 ) rotation = this.tmpQuat.setFromEuler( {_x:rotation[0], _y:rotation[1], _z:rotation[2], _order:'XYZ'}, false ).toArray();\n        if(color){ \n            if( color.isColor ) color = color.toArray();\n            if ( this.instanceColor === null ) this.instanceColor = new InstancedBufferAttribute( new Float32Array( this.instanceMatrix.count * 3 ), 3 );\n        }\n        /*if(uv){ \n            if( uv.isVector2 ) uv = uv.toArray()\n            if ( this.instanceUv === null ) this.instanceUv = new InstancedBufferAttribute( new Float32Array( this.instanceMatrix.count * 2 ), 2 );\n        }*/\n        this.expand( position, rotation, scale, color, uv );\n\n        //console.log(bref.id)\n        this.tmpElement.push( bref );\n    }\n\n    slice( ar, begin, end ) {\n\n        let target = new Float32Array(end - begin);\n        for (let i = 0; i < begin + end; ++i) {\n            target[i] = ar[begin + i];\n        }\n        return target\n\n    }\n\n    remove( id ) {\n\n        if(!this.count) return;\n        \n        this.tmpElement.splice( id, 1 );\n\n        let old = [...this.instanceMatrix.array];\n        old.splice( id*16, 16 );\n        this.instanceMatrix = new InstancedBufferAttribute( new Float32Array(old), 16 );\n        //this.instanceMatrix.array = new Float32Array(old);\n\n        //this.instanceMatrix.array = this.slice( this.instanceMatrix.array, id*16, 16 );\n        //this.instanceMatrix.needsUpdate = true;\n\n        if ( this.instanceColor !== null ) {\n            old = [...this.instanceColor.array];\n            old.splice( id*3, 3 );\n            this.instanceColor = new InstancedBufferAttribute( new Float32Array(old), 3 );\n            //this.instanceColor.array = new Float32Array(old);\n        }\n\n        if ( this.instanceUv !== null ) {\n            old = [...this.instanceUv.array];\n            old.splice( id*2, 2 );\n            this.instanceUv = new InstancedBufferAttribute( new Float32Array(old), 2 );\n            //this.instanceUv.array = new Float32Array(old);\n        }\n        this.count--;\n\n        this.reDistribute();\n\n    }\n\n    reDistribute() {\n\n        let i = this.count;\n        while(i--) this.tmpElement[i].id = i;\n        \n    }\n\n    getByName( index ) {\n\n        return this.tmpElement[index].name;\n\n    }\n\n    getBodyList(){\n\n        let bodyNames = [];\n        let i = this.count;\n        while(i--) bodyNames.push( this.tmpElement[i].name );\n        return bodyNames;\n\n    }\n\n    expand( p, q, s, c = [1,1,1], uv ) {\n\n        let old = this.instanceMatrix !== null ? this.instanceMatrix.array : [];\n        this.tmpMatrix.compose({x:p[0], y:p[1], z:p[2]}, {_x:q[0], _y:q[1], _z:q[2], _w:q[3]}, {x:s[0], y:s[1], z:s[2]});\n        this.instanceMatrix = new InstancedBufferAttribute( new Float32Array([...old, ...this.tmpMatrix.toArray()]), 16 );\n        //this.instanceMatrix.setUsage( DynamicDrawUsage );\n        if ( this.instanceColor !== null ) {\n            old = this.instanceColor.array;\n            this.instanceColor = new InstancedBufferAttribute( new Float32Array([...old, ...c ]), 3 );\n        }\n       /* if ( this.instanceUv !== null ) {\n            old = this.instanceUv.array;\n            this.instanceUv = new InstancedBufferAttribute( new Float32Array([...old, ...uv ]), 2 );\n        }*/\n        this.count ++;\n\n    }\n\n    setTransformAt( index, p, q, s ) {\n\n        this.tmpMatrix.compose({ x:p[0], y:p[1], z:p[2] }, {_x:q[0], _y:q[1], _z:q[2], _w:q[3]}, {x:s[0], y:s[1], z:s[2]});\n        this.tmpMatrix.toArray( this.instanceMatrix.array, index * 16 );\n        this.needSphereUp = true;\n\n        if( !this.outline ) return;\n        if(this.currentOver === index ){\n            this.outline.matrix.copy(this.tmpMatrix);\n            this.outline.matrixWorldNeedsUpdate = true;\n        }\n\n    }\n\n    dispose() {\n\n        this.clearOutLine();\n        this.parent.remove(this);\n        this.geometry.dispose();\n        //this.instanceMatrix = null;\n        this.instanceColor = null;\n        this.count = 0;\n        this.tmpElement = [];\n        //console.log(this.name+\" is dispose\")\n        this.dispatchEvent( { type: 'dispose' } );\n\n    }\n\n    setRaycast(v) {\n\n        if( v !== undefined ) this.isRay = v;\n\n    }\n\n    raycast( raycaster, intersects ) {\n\n        if(!this.isRay) return\n        super.raycast( raycaster, intersects );\n\n    }\n\n    update(){\n\n        if( this.needSphereUp ) this.computeBoundingSphere();\n        if( this.instanceMatrix ) this.instanceMatrix.needsUpdate = true;\n        if( this.instanceColor ) this.instanceColor.needsUpdate = true;\n        //if( this.instanceUv ) this.instanceUv.needsUpdate = true;\n        this.needSphereUp = false;\n\n    }\n\n}\n\n/**\n * @param  {Array<BufferGeometry>} geometries\n * @param  {Boolean} useGroups\n * @return {BufferGeometry}\n */\nfunction mergeGeometries( geometries, useGroups = false ) {\n\n\tconst isIndexed = geometries[ 0 ].index !== null;\n\n\tconst attributesUsed = new Set( Object.keys( geometries[ 0 ].attributes ) );\n\tconst morphAttributesUsed = new Set( Object.keys( geometries[ 0 ].morphAttributes ) );\n\n\tconst attributes = {};\n\tconst morphAttributes = {};\n\n\tconst morphTargetsRelative = geometries[ 0 ].morphTargetsRelative;\n\n\tconst mergedGeometry = new BufferGeometry();\n\n\tlet offset = 0;\n\n\tfor ( let i = 0; i < geometries.length; ++ i ) {\n\n\t\tconst geometry = geometries[ i ];\n\t\tlet attributesCount = 0;\n\n\t\t// ensure that all geometries are indexed, or none\n\n\t\tif ( isIndexed !== ( geometry.index !== null ) ) {\n\n\t\t\tconsole.error( 'THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index ' + i + '. All geometries must have compatible attributes; make sure index attribute exists among all geometries, or in none of them.' );\n\t\t\treturn null;\n\n\t\t}\n\n\t\t// gather attributes, exit early if they're different\n\n\t\tfor ( const name in geometry.attributes ) {\n\n\t\t\tif ( ! attributesUsed.has( name ) ) {\n\n\t\t\t\tconsole.error( 'THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index ' + i + '. All geometries must have compatible attributes; make sure \"' + name + '\" attribute exists among all geometries, or in none of them.' );\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t\tif ( attributes[ name ] === undefined ) attributes[ name ] = [];\n\n\t\t\tattributes[ name ].push( geometry.attributes[ name ] );\n\n\t\t\tattributesCount ++;\n\n\t\t}\n\n\t\t// ensure geometries have the same number of attributes\n\n\t\tif ( attributesCount !== attributesUsed.size ) {\n\n\t\t\tconsole.error( 'THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index ' + i + '. Make sure all geometries have the same number of attributes.' );\n\t\t\treturn null;\n\n\t\t}\n\n\t\t// gather morph attributes, exit early if they're different\n\n\t\tif ( morphTargetsRelative !== geometry.morphTargetsRelative ) {\n\n\t\t\tconsole.error( 'THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index ' + i + '. .morphTargetsRelative must be consistent throughout all geometries.' );\n\t\t\treturn null;\n\n\t\t}\n\n\t\tfor ( const name in geometry.morphAttributes ) {\n\n\t\t\tif ( ! morphAttributesUsed.has( name ) ) {\n\n\t\t\t\tconsole.error( 'THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index ' + i + '.  .morphAttributes must be consistent throughout all geometries.' );\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t\tif ( morphAttributes[ name ] === undefined ) morphAttributes[ name ] = [];\n\n\t\t\tmorphAttributes[ name ].push( geometry.morphAttributes[ name ] );\n\n\t\t}\n\n\t\tif ( useGroups ) {\n\n\t\t\tlet count;\n\n\t\t\tif ( isIndexed ) {\n\n\t\t\t\tcount = geometry.index.count;\n\n\t\t\t} else if ( geometry.attributes.position !== undefined ) {\n\n\t\t\t\tcount = geometry.attributes.position.count;\n\n\t\t\t} else {\n\n\t\t\t\tconsole.error( 'THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index ' + i + '. The geometry must have either an index or a position attribute' );\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t\tmergedGeometry.addGroup( offset, count, i );\n\n\t\t\toffset += count;\n\n\t\t}\n\n\t}\n\n\t// merge indices\n\n\tif ( isIndexed ) {\n\n\t\tlet indexOffset = 0;\n\t\tconst mergedIndex = [];\n\n\t\tfor ( let i = 0; i < geometries.length; ++ i ) {\n\n\t\t\tconst index = geometries[ i ].index;\n\n\t\t\tfor ( let j = 0; j < index.count; ++ j ) {\n\n\t\t\t\tmergedIndex.push( index.getX( j ) + indexOffset );\n\n\t\t\t}\n\n\t\t\tindexOffset += geometries[ i ].attributes.position.count;\n\n\t\t}\n\n\t\tmergedGeometry.setIndex( mergedIndex );\n\n\t}\n\n\t// merge attributes\n\n\tfor ( const name in attributes ) {\n\n\t\tconst mergedAttribute = mergeAttributes( attributes[ name ] );\n\n\t\tif ( ! mergedAttribute ) {\n\n\t\t\tconsole.error( 'THREE.BufferGeometryUtils: .mergeGeometries() failed while trying to merge the ' + name + ' attribute.' );\n\t\t\treturn null;\n\n\t\t}\n\n\t\tmergedGeometry.setAttribute( name, mergedAttribute );\n\n\t}\n\n\t// merge morph attributes\n\n\tfor ( const name in morphAttributes ) {\n\n\t\tconst numMorphTargets = morphAttributes[ name ][ 0 ].length;\n\n\t\tif ( numMorphTargets === 0 ) break;\n\n\t\tmergedGeometry.morphAttributes = mergedGeometry.morphAttributes || {};\n\t\tmergedGeometry.morphAttributes[ name ] = [];\n\n\t\tfor ( let i = 0; i < numMorphTargets; ++ i ) {\n\n\t\t\tconst morphAttributesToMerge = [];\n\n\t\t\tfor ( let j = 0; j < morphAttributes[ name ].length; ++ j ) {\n\n\t\t\t\tmorphAttributesToMerge.push( morphAttributes[ name ][ j ][ i ] );\n\n\t\t\t}\n\n\t\t\tconst mergedMorphAttribute = mergeAttributes( morphAttributesToMerge );\n\n\t\t\tif ( ! mergedMorphAttribute ) {\n\n\t\t\t\tconsole.error( 'THREE.BufferGeometryUtils: .mergeGeometries() failed while trying to merge the ' + name + ' morphAttribute.' );\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t\tmergedGeometry.morphAttributes[ name ].push( mergedMorphAttribute );\n\n\t\t}\n\n\t}\n\n\treturn mergedGeometry;\n\n}\n\n/**\n * @param {Array<BufferAttribute>} attributes\n * @return {BufferAttribute}\n */\nfunction mergeAttributes( attributes ) {\n\n\tlet TypedArray;\n\tlet itemSize;\n\tlet normalized;\n\tlet gpuType = -1;\n\tlet arrayLength = 0;\n\n\tfor ( let i = 0; i < attributes.length; ++ i ) {\n\n\t\tconst attribute = attributes[ i ];\n\n\t\tif ( TypedArray === undefined ) TypedArray = attribute.array.constructor;\n\t\tif ( TypedArray !== attribute.array.constructor ) {\n\n\t\t\tconsole.error( 'THREE.BufferGeometryUtils: .mergeAttributes() failed. BufferAttribute.array must be of consistent array types across matching attributes.' );\n\t\t\treturn null;\n\n\t\t}\n\n\t\tif ( itemSize === undefined ) itemSize = attribute.itemSize;\n\t\tif ( itemSize !== attribute.itemSize ) {\n\n\t\t\tconsole.error( 'THREE.BufferGeometryUtils: .mergeAttributes() failed. BufferAttribute.itemSize must be consistent across matching attributes.' );\n\t\t\treturn null;\n\n\t\t}\n\n\t\tif ( normalized === undefined ) normalized = attribute.normalized;\n\t\tif ( normalized !== attribute.normalized ) {\n\n\t\t\tconsole.error( 'THREE.BufferGeometryUtils: .mergeAttributes() failed. BufferAttribute.normalized must be consistent across matching attributes.' );\n\t\t\treturn null;\n\n\t\t}\n\n\t\tif ( gpuType === -1 ) gpuType = attribute.gpuType;\n\t\tif ( gpuType !== attribute.gpuType ) {\n\n\t\t\tconsole.error( 'THREE.BufferGeometryUtils: .mergeAttributes() failed. BufferAttribute.gpuType must be consistent across matching attributes.' );\n\t\t\treturn null;\n\n\t\t}\n\n\t\tarrayLength += attribute.count * itemSize;\n\n\t}\n\n\tconst array = new TypedArray( arrayLength );\n\tconst result = new BufferAttribute( array, itemSize, normalized );\n\tlet offset = 0;\n\n\tfor ( let i = 0; i < attributes.length; ++ i ) {\n\n\t\tconst attribute = attributes[ i ];\n\t\tif ( attribute.isInterleavedBufferAttribute ) {\n\n\t\t\tconst tupleOffset = offset / itemSize;\n\t\t\tfor ( let j = 0, l = attribute.count; j < l; j ++ ) {\n\n\t\t\t\tfor ( let c = 0; c < itemSize; c ++ ) {\n\n\t\t\t\t\tconst value = attribute.getComponent( j, c );\n\t\t\t\t\tresult.setComponent( j + tupleOffset, c, value );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tarray.set( attribute.array, offset );\n\n\t\t}\n\n\t\toffset += attribute.count * itemSize;\n\n\t}\n\n\tif ( gpuType !== undefined ) {\n\n\t\tresult.gpuType = gpuType;\n\n\t}\n\n\treturn result;\n\n}\n\n/**\n * @param {BufferGeometry} geometry\n * @param {number} tolerance\n * @return {BufferGeometry}\n */\nfunction mergeVertices( geometry, tolerance = 1e-4 ) {\n\n\ttolerance = Math.max( tolerance, Number.EPSILON );\n\n\t// Generate an index buffer if the geometry doesn't have one, or optimize it\n\t// if it's already available.\n\tconst hashToIndex = {};\n\tconst indices = geometry.getIndex();\n\tconst positions = geometry.getAttribute( 'position' );\n\tconst vertexCount = indices ? indices.count : positions.count;\n\n\t// next value for triangle indices\n\tlet nextIndex = 0;\n\n\t// attributes and new attribute arrays\n\tconst attributeNames = Object.keys( geometry.attributes );\n\tconst tmpAttributes = {};\n\tconst tmpMorphAttributes = {};\n\tconst newIndices = [];\n\tconst getters = [ 'getX', 'getY', 'getZ', 'getW' ];\n\tconst setters = [ 'setX', 'setY', 'setZ', 'setW' ];\n\n\t// Initialize the arrays, allocating space conservatively. Extra\n\t// space will be trimmed in the last step.\n\tfor ( let i = 0, l = attributeNames.length; i < l; i ++ ) {\n\n\t\tconst name = attributeNames[ i ];\n\t\tconst attr = geometry.attributes[ name ];\n\n\t\ttmpAttributes[ name ] = new BufferAttribute(\n\t\t\tnew attr.array.constructor( attr.count * attr.itemSize ),\n\t\t\tattr.itemSize,\n\t\t\tattr.normalized\n\t\t);\n\n\t\tconst morphAttr = geometry.morphAttributes[ name ];\n\t\tif ( morphAttr ) {\n\n\t\t\ttmpMorphAttributes[ name ] = new BufferAttribute(\n\t\t\t\tnew morphAttr.array.constructor( morphAttr.count * morphAttr.itemSize ),\n\t\t\t\tmorphAttr.itemSize,\n\t\t\t\tmorphAttr.normalized\n\t\t\t);\n\n\t\t}\n\n\t}\n\n\t// convert the error tolerance to an amount of decimal places to truncate to\n\tconst halfTolerance = tolerance * 0.5;\n\tconst exponent = Math.log10( 1 / tolerance );\n\tconst hashMultiplier = Math.pow( 10, exponent );\n\tconst hashAdditive = halfTolerance * hashMultiplier;\n\tfor ( let i = 0; i < vertexCount; i ++ ) {\n\n\t\tconst index = indices ? indices.getX( i ) : i;\n\n\t\t// Generate a hash for the vertex attributes at the current index 'i'\n\t\tlet hash = '';\n\t\tfor ( let j = 0, l = attributeNames.length; j < l; j ++ ) {\n\n\t\t\tconst name = attributeNames[ j ];\n\t\t\tconst attribute = geometry.getAttribute( name );\n\t\t\tconst itemSize = attribute.itemSize;\n\n\t\t\tfor ( let k = 0; k < itemSize; k ++ ) {\n\n\t\t\t\t// double tilde truncates the decimal value\n\t\t\t\thash += `${ ~ ~ ( attribute[ getters[ k ] ]( index ) * hashMultiplier + hashAdditive ) },`;\n\n\t\t\t}\n\n\t\t}\n\n\t\t// Add another reference to the vertex if it's already\n\t\t// used by another index\n\t\tif ( hash in hashToIndex ) {\n\n\t\t\tnewIndices.push( hashToIndex[ hash ] );\n\n\t\t} else {\n\n\t\t\t// copy data to the new index in the temporary attributes\n\t\t\tfor ( let j = 0, l = attributeNames.length; j < l; j ++ ) {\n\n\t\t\t\tconst name = attributeNames[ j ];\n\t\t\t\tconst attribute = geometry.getAttribute( name );\n\t\t\t\tconst morphAttr = geometry.morphAttributes[ name ];\n\t\t\t\tconst itemSize = attribute.itemSize;\n\t\t\t\tconst newarray = tmpAttributes[ name ];\n\t\t\t\tconst newMorphArrays = tmpMorphAttributes[ name ];\n\n\t\t\t\tfor ( let k = 0; k < itemSize; k ++ ) {\n\n\t\t\t\t\tconst getterFunc = getters[ k ];\n\t\t\t\t\tconst setterFunc = setters[ k ];\n\t\t\t\t\tnewarray[ setterFunc ]( nextIndex, attribute[ getterFunc ]( index ) );\n\n\t\t\t\t\tif ( morphAttr ) {\n\n\t\t\t\t\t\tfor ( let m = 0, ml = morphAttr.length; m < ml; m ++ ) {\n\n\t\t\t\t\t\t\tnewMorphArrays[ m ][ setterFunc ]( nextIndex, morphAttr[ m ][ getterFunc ]( index ) );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\thashToIndex[ hash ] = nextIndex;\n\t\t\tnewIndices.push( nextIndex );\n\t\t\tnextIndex ++;\n\n\t\t}\n\n\t}\n\n\t// generate result BufferGeometry\n\tconst result = geometry.clone();\n\tfor ( const name in geometry.attributes ) {\n\n\t\tconst tmpAttribute = tmpAttributes[ name ];\n\n\t\tresult.setAttribute( name, new BufferAttribute(\n\t\t\ttmpAttribute.array.slice( 0, nextIndex * tmpAttribute.itemSize ),\n\t\t\ttmpAttribute.itemSize,\n\t\t\ttmpAttribute.normalized,\n\t\t) );\n\n\t\tif ( ! ( name in tmpMorphAttributes ) ) continue;\n\n\t\tfor ( let j = 0; j < tmpMorphAttributes[ name ].length; j ++ ) {\n\n\t\t\tconst tmpMorphAttribute = tmpMorphAttributes[ name ][ j ];\n\n\t\t\tresult.morphAttributes[ name ][ j ] = new BufferAttribute(\n\t\t\t\ttmpMorphAttribute.array.slice( 0, nextIndex * tmpMorphAttribute.itemSize ),\n\t\t\t\ttmpMorphAttribute.itemSize,\n\t\t\t\ttmpMorphAttribute.normalized,\n\t\t\t);\n\n\t\t}\n\n\t}\n\n\t// indices\n\n\tresult.setIndex( newIndices );\n\n\treturn result;\n\n}\n\n/**\n * @param {BufferGeometry} geometry\n * @param {number} drawMode\n * @return {BufferGeometry}\n */\nfunction toTrianglesDrawMode( geometry, drawMode ) {\n\n\tif ( drawMode === TrianglesDrawMode ) {\n\n\t\tconsole.warn( 'THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles.' );\n\t\treturn geometry;\n\n\t}\n\n\tif ( drawMode === TriangleFanDrawMode || drawMode === TriangleStripDrawMode ) {\n\n\t\tlet index = geometry.getIndex();\n\n\t\t// generate index if not present\n\n\t\tif ( index === null ) {\n\n\t\t\tconst indices = [];\n\n\t\t\tconst position = geometry.getAttribute( 'position' );\n\n\t\t\tif ( position !== undefined ) {\n\n\t\t\t\tfor ( let i = 0; i < position.count; i ++ ) {\n\n\t\t\t\t\tindices.push( i );\n\n\t\t\t\t}\n\n\t\t\t\tgeometry.setIndex( indices );\n\t\t\t\tindex = geometry.getIndex();\n\n\t\t\t} else {\n\n\t\t\t\tconsole.error( 'THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible.' );\n\t\t\t\treturn geometry;\n\n\t\t\t}\n\n\t\t}\n\n\t\t//\n\n\t\tconst numberOfTriangles = index.count - 2;\n\t\tconst newIndices = [];\n\n\t\tif ( drawMode === TriangleFanDrawMode ) {\n\n\t\t\t// gl.TRIANGLE_FAN\n\n\t\t\tfor ( let i = 1; i <= numberOfTriangles; i ++ ) {\n\n\t\t\t\tnewIndices.push( index.getX( 0 ) );\n\t\t\t\tnewIndices.push( index.getX( i ) );\n\t\t\t\tnewIndices.push( index.getX( i + 1 ) );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\t// gl.TRIANGLE_STRIP\n\n\t\t\tfor ( let i = 0; i < numberOfTriangles; i ++ ) {\n\n\t\t\t\tif ( i % 2 === 0 ) {\n\n\t\t\t\t\tnewIndices.push( index.getX( i ) );\n\t\t\t\t\tnewIndices.push( index.getX( i + 1 ) );\n\t\t\t\t\tnewIndices.push( index.getX( i + 2 ) );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tnewIndices.push( index.getX( i + 2 ) );\n\t\t\t\t\tnewIndices.push( index.getX( i + 1 ) );\n\t\t\t\t\tnewIndices.push( index.getX( i ) );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( ( newIndices.length / 3 ) !== numberOfTriangles ) {\n\n\t\t\tconsole.error( 'THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.' );\n\n\t\t}\n\n\t\t// build final geometry\n\n\t\tconst newGeometry = geometry.clone();\n\t\tnewGeometry.setIndex( newIndices );\n\t\tnewGeometry.clearGroups();\n\n\t\treturn newGeometry;\n\n\t} else {\n\n\t\tconsole.error( 'THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:', drawMode );\n\t\treturn geometry;\n\n\t}\n\n}\n\n/**\n* SPHERE BOX GEOMETRY\n*/\nclass SphereBox extends BufferGeometry {\n\n    constructor( radius=1, widthSegs=10, heightSegs=10, depthSegs=10, roundness=1 ) {\n\n        super();\n\n        this.type = 'SphereBox';\n        this.name = 'SphereBox_' + radius +'_'+widthSegs+'_'+heightSegs+'_'+depthSegs+'_'+roundness;\n\n        radius = radius || 1;\n\n        // segments\n\n        widthSegs = Math.floor( widthSegs );\n        heightSegs = Math.floor( heightSegs );\n        depthSegs = Math.floor( depthSegs );        \n        let g = new BoxGeometry( 1,1,1, widthSegs, heightSegs, depthSegs ), v = new Vector3(), r = new Vector3(), n;\n\n        let ar = g.attributes.position.array;\n        let nm = g.attributes.normal.array;\n\n        for ( let i = 0, l = g.attributes.position.count; i < l; i ++ ) {\n\n            n = i*3;\n            v.set( ar[n], ar[n+1], ar[n+2] );\n            r.copy( v ).normalize();\n\n            v.lerp( r, roundness ).multiplyScalar( radius );\n\n            ar[n] = v.x;\n            ar[n+1] = v.y;\n            ar[n+2] = v.z;\n\n            v.normalize();\n\n            nm[n] = v.x;\n            nm[n+1] = v.y;\n            nm[n+2] = v.z;\n            \n        }\n\n        this.copy(g);\n\n    }\n}\n\n/**\n* CAPSULE GEOMETRY\n*/\nclass Capsule extends BufferGeometry {\n\n    constructor( radius = 1, height = 1, radialSegs = 12, heightSegs = 1 ) {\n\n        super();\n\n    \tthis.type = 'CapsuleGeometry';\n        //this.name = 'Capsule_' + radius +'_'+height+'_'+radialSegs+'_'+heightSegs;\n\n        let pi = Math.PI;\n\n        let th = (radius*2) + height;\n        let sy = radius / th;\n        let hy = 1 - (2*sy);\n\n        radialSegs = Math.floor( radialSegs );\n        heightSegs = Math.floor( heightSegs );\n\n        let sHeight = Math.floor( radialSegs * 0.5 );\n        let o0 = Math.PI * 2;\n        let o1 = Math.PI * 0.5;\n        let m0 = new CylinderGeometry( radius, radius, height, radialSegs, heightSegs, true );\n        //let m0 = new CylinderGeometryFix2( radius, radius, height, radialSegs, heightSegs, true );\n        //let m0 = new CylinderGeometry( radius, radius, height, radialSegs, heightSegs, true );\n        scaleUV( m0, 0, sy, 1, hy );\n        let m1 = new SphereGeometry( radius, radialSegs, sHeight, 0, o0, 0, o1);\n        scaleUV( m1, 0, 1-sy, 1, sy );\n        let m2 = new SphereGeometry( radius, radialSegs, sHeight, 0, o0, o1, o1);\n        scaleUV( m2, 0, 0, 1, sy );\n        let mtx0 = new Matrix4().makeRotationY( -pi*0.5 );\n        let mtx1 = new Matrix4().makeTranslation(0, height*0.5,0);\n        let mtx2 = new Matrix4().makeTranslation(0, -height*0.5,0);\n        m0.applyMatrix4( mtx0 );\n        m1.applyMatrix4( mtx1 );\n        m2.applyMatrix4( mtx2 );\n\n\n        let g = mergeVertices( mergeGeometries( [ m0, m1, m2] ) );\n        this.copy( g );\n\n        /*m0.dispose()\n        m1.dispose()\n        m2.dispose()\n        g.dispose()*/\n\n    }\n}\n\n\n/**\n* TORUS EXTRA GEOMETRY\n*/\nclass TorusGeometryFix extends BufferGeometry {\n\n    constructor( radius = 1, tube = 0.4, radialSegments = 8, tubularSegments = 6, arc= Math.PI * 2, thetaStart=0, thetaLength=Math.PI ) {\n\n        super();\n\n        this.type = 'TorusGeometryFix';\n\n        this.parameters = {\n            radius: radius,\n            tube: tube,\n            radialSegments: radialSegments,\n            tubularSegments: tubularSegments,\n            arc: arc\n        };\n\n        radialSegments = Math.floor( radialSegments );\n        tubularSegments = Math.floor( tubularSegments );\n\n        // buffers\n\n        const indices = [];\n        const vertices = [];\n        const normals = [];\n        const uvs = [];\n\n        // helper variables\n\n        const center = new Vector3();\n        const vertex = new Vector3();\n        const normal = new Vector3();\n\n        let j, i;\n\n        // generate vertices, normals and uvs\n\n        for ( j = 0; j <= radialSegments; j ++ ) {\n\n            for ( i = 0; i <= tubularSegments; i ++ ) {\n\n                const u = i / tubularSegments * arc;\n                //const v = j / radialSegments * Math.PI * 2;\n\n                const v = (j / radialSegments) * thetaLength + thetaStart;\n\n                // vertex\n\n                vertex.x = ( radius + tube * Math.cos( v ) ) * Math.cos( u );\n                vertex.y = ( radius + tube * Math.cos( v ) ) * Math.sin( u );\n                vertex.z = tube * Math.sin( v );\n\n                vertices.push( vertex.x, vertex.y, vertex.z );\n\n                // normal\n\n                center.x = radius * Math.cos( u );\n                center.y = radius * Math.sin( u );\n                normal.subVectors( vertex, center ).normalize();\n\n                normals.push( normal.x, normal.y, normal.z );\n\n                // uv\n\n                uvs.push( i / tubularSegments );\n                uvs.push( j / radialSegments );\n\n            }\n\n        }\n\n        // generate indices\n\n        for ( j = 1; j <= radialSegments; j ++ ) {\n\n            for ( i = 1; i <= tubularSegments; i ++ ) {\n\n                // indices\n\n                const a = ( tubularSegments + 1 ) * j + i - 1;\n                const b = ( tubularSegments + 1 ) * ( j - 1 ) + i - 1;\n                const c = ( tubularSegments + 1 ) * ( j - 1 ) + i;\n                const d = ( tubularSegments + 1 ) * j + i;\n\n                // faces\n\n                indices.push( a, b, d );\n                indices.push( b, c, d );\n\n            }\n\n        }\n\n        // build geometry\n\n        this.setIndex( indices );\n        this.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n        this.setAttribute( 'normal', new Float32BufferAttribute( normals, 3 ) );\n        this.setAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\n\n    }\n}\n\n\n/**\n* CHAMFER CYLINDRE GEOMETRY\n*/\nclass ChamferCyl extends BufferGeometry {\n\n    constructor( radiusTop = 1, radiusBottom = 1, height = 1, filet =0.01, radialSegs = 12, heightSegs = 1, filetSegs = 2 ) {\n\n        super();\n\n        this.type = 'ChamferCyl';\n        //this.name = 'ChamferCyl_' + radiusTop +'_'+radiusBottom+'_'+height+'_'+filet+'_'+radialSegs+'_'+heightSegs+'_'+filetSegs;\n\n        radialSegs = Math.floor( radialSegs );\n        heightSegs = Math.floor( heightSegs );\n        filetSegs = Math.floor( filetSegs );\n\n        let mr = new Matrix4();\n        let mt = new Matrix4();\n\n        let pi = Math.PI;\n        let p90 = pi * 0.5;\n        let twoPi = pi * 2;\n\n        let start = 0;//(twoPi / radialSegs)*(3/radialSegs)//;\n\n        let th = height;\n        let sy = filet / th;\n        let hy = 1 - (2*sy);\n        //console.log(start)\n\n        //let mid = new CylinderGeometryFix( radiusBottom, radiusTop, height-(filet*2), radialSegs, heightSegs, true, start );\n        let mid = new CylinderGeometry( radiusTop, radiusBottom, height-(filet*2), radialSegs, heightSegs, true, start );\n        mr.makeRotationY( p90 );\n        mid.applyMatrix4( mr );\n\n        scaleUV( mid, 0, sy, 1, hy );\n\n        // top\n        let c1 = new TorusGeometryFix( radiusTop-filet, filet, filetSegs, radialSegs, twoPi, 0, p90 );\n        let c2 = new CircleGeometry( radiusTop-filet, radialSegs );\n\n        mt.makeTranslation( 0,0, filet );\n        c2.applyMatrix4( mt );\n\n        scaleUV( c1, 0, 1-sy, 1, sy );\n\n        let top = mergeGeometries( [ c1, c2 ] );\n\n        mr.makeTranslation( 0,0,( (height*0.5) - filet) );\n        mt.makeRotationX( -p90 );\n\n        top.applyMatrix4( mt.multiply(mr) );\n\n        /*c1.dispose();\n        c2.dispose();*/\n\n        // bottom\n        c1 = new TorusGeometryFix( radiusBottom-filet, filet, filetSegs, radialSegs, twoPi, 0, p90 );\n        c2 = new CircleGeometry( radiusBottom-filet, radialSegs );\n\n        mt.makeTranslation( 0,0, filet );\n        c2.applyMatrix4( mt );\n\n        scaleUV( c1, 0, 1-sy, 1, sy, true );\n\n        let low = mergeGeometries( [ c1, c2 ] );\n\n        mr.makeTranslation( 0,0,( (height*0.5) - filet) );\n        mt.makeRotationX( p90 );\n        low.applyMatrix4( mt.multiply(mr) );\n\n        /*c1.dispose();\n        c2.dispose();*/\n\n        let g = mergeVertices( mergeGeometries( [ top, mid, low ] ) );\n\n        /*mid.dispose();\n        top.dispose();\n        low.dispose();*/\n\n        this.copy(g);\n        //g.dispose();\n\n    }\n}\n\n//ChamferCyl.prototype = Object.create( THREE.BufferGeometry.prototype );\n\n/**\n* CHAMFER BOX GEOMETRY\n*/\nclass ChamferBox extends BufferGeometry {\n\n    constructor( width  = 1, height = 1, depth = 1, filet = 0.01, widthSegs = 1, heightSegs = 1, depthSegs = 1, filetSegs = 2 ) {\n\n        super();\n\n        this.type = 'ChamferBox';\n        //this.name = 'ChamferBox_' + width +'_'+height+'_'+depth+'_'+filet+'_'+widthSegs+'_'+heightSegs+'_'+depthSegs+'_'+filetSegs;\n\n        widthSegs = Math.floor( widthSegs );\n        heightSegs = Math.floor( heightSegs );\n        depthSegs = Math.floor( depthSegs );\n        filetSegs = Math.floor( filetSegs );\n\n        let pi = Math.PI;\n        let p90 = pi * 0.5;\n        let twoFilet = filet * 2;\n\n        let midWidth = width * 0.5;\n        let midHeight = height * 0.5;\n        let midDepth = depth * 0.5;\n\n        let mr = new Matrix4();\n        let mt = new Matrix4();\n        let mp = new Matrix4();\n\n        // uv calc\n\n        let tw = width;\n        let sw = filet / tw;\n        let vw = 1 - (2*sw);\n\n        let th = height;\n        let sh = filet / th;\n        let vh = 1 - (2*sw);\n\n        let td = depth;\n        let sd = filet / td;\n        let vd = 1 - (2*sd);\n\n        let f = new PlaneGeometry( width-twoFilet, height-twoFilet, widthSegs, heightSegs );\n        let c1 = new CylinderGeometry( filet, filet, width-twoFilet, filetSegs, widthSegs, true, 0, p90 );\n        let c2 = new CylinderGeometry( filet, filet, height-twoFilet, filetSegs, heightSegs, true, 0, p90 );\n        let s1 = new SphereGeometryFix( filet, filetSegs, filetSegs, 0, p90, 0, -p90 );\n        let s2 = new SphereGeometryFix( filet, filetSegs, filetSegs, 0, p90, 0, -p90 );\n\n        scaleUV( f, -sw, sh, vw, vh );\n        scaleUV( c1, 0, sw, sh, vw );\n       //scaleUV( c2, 0, -sw, vw, sw )\n\n        mt.makeTranslation( 0, midHeight - filet, 0 );\n        mr.makeRotationX( p90 );\n        s1.applyMatrix4( mt.multiply(mr) );\n\n        mt.makeTranslation( 0, -midHeight + filet, 0 );\n        mr.makeRotationX( p90 );\n        mp.makeRotationY( -p90 );\n        s2.applyMatrix4( mt.multiply(mr).multiply(mp) );\n\n        let tra = mergeGeometries( [ c2, s1, s2 ] );\n        let trc = tra.clone();\n\n        /*c2.dispose();\n        s1.dispose();\n        s2.dispose();*/\n        \n        mt.makeTranslation( midWidth - filet, 0, -filet );\n\n        tra.applyMatrix4( mt );\n\n        mt.makeTranslation( -midWidth + filet, 0, -filet );\n        mr.makeRotationZ( pi );\n\n        trc.applyMatrix4( mt.multiply(mr) );\n\n        // cylinder\n\n        let c3 = c1.clone();\n\n        mr.makeRotationZ( p90 );\n        mt.makeTranslation( 0, midHeight - filet, -filet );\n        c1.applyMatrix4( mt.multiply(mr) );\n        mt.makeTranslation( 0, -midHeight + filet, -filet );\n        mr.makeRotationZ( -p90 );\n        c3.applyMatrix4( mt.multiply(mr) );\n\n        let rf = mergeGeometries( [ c1, c3, f, tra, trc ] );\n        let rg = rf.clone();\n\n        mt.makeTranslation( 0, 0, midDepth );\n        rf.applyMatrix4( mt );\n\n        mt.makeTranslation( 0, 0, -midDepth );\n        mr.makeRotationY( pi );\n        rg.applyMatrix4( mt.multiply(mr) );\n\n        // side left\n\n        /*f.dispose();\n        c1.dispose();\n        c3.dispose();*/\n\n        f = new PlaneGeometry( depth-twoFilet, height-twoFilet, depthSegs, heightSegs );\n        c1 = new CylinderGeometry( filet, filet, depth-twoFilet, filetSegs, depthSegs, true, 0, p90 );\n        c3 = c1.clone();\n\n        scaleUV( f, -sd, sh, vd, vh );\n\n        mt.makeTranslation( 0, -(midHeight - filet), -filet, 0 );\n        mr.makeRotationZ( -p90 );\n\n        c1.applyMatrix4( mt.multiply(mr) );\n\n        mt.makeTranslation( 0, midHeight - filet, -filet, 0 );\n        mr.makeRotationZ( p90 );\n\n        c3.applyMatrix4( mt.multiply(mr) );\n\n\n        let rr = mergeGeometries( [ c1, c3, f ] );\n        let rb = rr.clone();\n\n        /*f.dispose();\n        c1.dispose();\n        c3.dispose()*/\n\n        mt.makeTranslation( -midWidth, 0, 0 );\n        mr.makeRotationY( -p90 );\n\n        rr.applyMatrix4( mt.multiply(mr) );\n\n        // side right\n\n        mt.makeTranslation( midWidth, 0, 0 );\n        mr.makeRotationY( p90 );\n\n        rb.applyMatrix4( mt.multiply(mr) );\n\n        // top\n        f = new PlaneGeometry( width-twoFilet, depth-twoFilet, widthSegs, depthSegs );\n        scaleUV( f, -sw, sd, vw, vd );\n        let f2 = f.clone();\n\n\n\n        mt.makeTranslation( 0, midHeight, 0);\n        mr.makeRotationX( -p90 );\n        f.applyMatrix4( mt.multiply(mr) );\n\n        // bottom\n        mt.makeTranslation( 0, -midHeight, 0);\n        mr.makeRotationX( p90 );\n        f2.applyMatrix4( mt.multiply(mr) );\n\n        let g = mergeVertices( mergeGeometries( [ rf, rg, rr, rb, f, f2 ] ) );\n\n        /*rf.dispose();\n        rg.dispose();\n        rr.dispose();\n        rb.dispose();\n        f2.dispose();\n        f.dispose();*/\n        //g.computeVertexNormals()\n        //g = g.toNonIndexed()\n        //\n\n        createUV(g, 'box');\n\n        this.copy(g);\n        /*g.dispose();*/\n\n    }\n}\n\nclass SphereGeometryFix extends BufferGeometry {\n\n    constructor( radius = 1, widthSegments = 8, heightSegments = 6, phiStart = 0, phiLength = Math.PI * 2, thetaStart = 0, thetaLength = Math.PI ) {\n\n        super();\n\n        this.type = 'SphereGeometryFix';\n\n        this.parameters = {\n            radius: radius,\n            widthSegments: widthSegments,\n            heightSegments: heightSegments,\n            phiStart: phiStart,\n            phiLength: phiLength,\n            thetaStart: thetaStart,\n            thetaLength: thetaLength\n        };\n\n        widthSegments =  Math.floor( widthSegments );\n        heightSegments =  Math.floor( heightSegments );\n\n        const thetaEnd = Math.min( thetaStart + thetaLength, Math.PI );\n\n        let index = 0;\n        const grid = [];\n\n        const vertex = new Vector3();\n        const normal = new Vector3();\n\n        // buffers\n\n        const indices = [];\n        const vertices = [];\n        const normals = [];\n        const uvs = [];\n\n        // generate vertices, normals and uvs\n\n        for ( let iy = 0; iy <= heightSegments; iy ++ ) {\n\n            const verticesRow = [];\n\n            const v = iy / heightSegments;\n\n            // special case for the poles\n\n            let uOffset = 0;\n\n            if ( iy == 0 && thetaStart == 0 ) {\n\n                uOffset = 0.5 / widthSegments;\n\n            } else if ( iy == heightSegments && thetaEnd == Math.PI ) {\n\n                uOffset = -0.5 / widthSegments;\n\n            }\n\n            for ( let ix = 0; ix <= widthSegments; ix ++ ) {\n\n                const u = ix / widthSegments;\n\n                // vertex\n\n                vertex.x = - radius * Math.cos( phiStart + u * phiLength ) * Math.sin( thetaStart + v * thetaLength );\n                vertex.y = radius * Math.cos( thetaStart + v * thetaLength );\n                vertex.z = radius * Math.sin( phiStart + u * phiLength ) * Math.sin( thetaStart + v * thetaLength );\n\n                vertices.push( vertex.x, vertex.y, vertex.z );\n\n                // normal\n\n                normal.copy( vertex ).normalize();\n                normals.push( normal.x, normal.y, normal.z );\n\n                // uv\n\n                uvs.push( u + uOffset, 1 - v );\n\n                verticesRow.push( index ++ );\n\n            }\n\n            grid.push( verticesRow );\n\n        }\n\n        // indices\n\n        for ( let iy = 0; iy < heightSegments; iy ++ ) {\n\n            for ( let ix = 0; ix < widthSegments; ix ++ ) {\n\n                const a = grid[ iy ][ ix + 1 ];\n                const b = grid[ iy ][ ix ];\n                const c = grid[ iy + 1 ][ ix ];\n                const d = grid[ iy + 1 ][ ix + 1 ];\n\n                if ( iy !== 0 || thetaStart > 0 ) indices.push( a, b, d );\n                if ( iy !== heightSegments - 1 || thetaEnd < Math.PI ) indices.push( b, c, d );\n\n            }\n\n        }\n\n        // build geometry\n\n        this.setIndex( indices );\n        this.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n        this.setAttribute( 'normal', new Float32BufferAttribute( normals, 3 ) );\n        this.setAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\n\n    }\n\n}\n\n// { SphereGeometryFix };\n\n\n// UV \n\nfunction scaleUV( geometry, x=0, y=0, dx=1, dy=1, reverse ) {\n\n    let uv = geometry.attributes.uv;\n    let ar = uv.array;\n    let i = uv.count, n =0;\n\n    while( i-- ){\n        n=i*2;\n        ar[n] = (ar[n]*dx)-x;\n        ar[n+1] = (ar[n+1]*dy)+y;\n\n        if(reverse){\n            ar[n] = 1 - ar[n];\n            ar[n+1] = 1 - ar[n+1];\n        }\n    }\n\n\n}\n\nfunction createUV( geometry, type = 'sphere', boxSize, pos = [0,0,0], quat = [0,0,0,1], transformMatrix ) {\n\n    //type = type || 'sphere';\n\n    if ( transformMatrix === undefined ) transformMatrix = new Matrix4();\n    transformMatrix.compose( {x:pos[0], y:pos[1], z:pos[2] }, { _x:quat[0], _y:quat[1], _z:quat[2], _w:quat[3] }, {x:1, y:1, z:1 });\n\n\n\n    if ( boxSize === undefined ) {\n        if( !geometry.boundingBox ) geometry.computeBoundingBox();\n        let bbox = geometry.boundingBox;\n        boxSize = Math.max( bbox.max.x - bbox.min.x, bbox.max.y - bbox.min.y, bbox.max.z - bbox.min.z );\n    }\n\n    //.expandByScalar(0.9);//new THREE.Box3( new THREE.Vector3(-boxSize / 2, -boxSize / 2, -boxSize / 2), new THREE.Vector3(boxSize / 2, boxSize / 2, boxSize / 2));\n    //_applyBoxUV( bufferGeometry, transformMatrix, uvBbox, boxSize );\n\n    let uvBbox = new Box3(new Vector3(-boxSize / 2, -boxSize / 2, -boxSize / 2), new Vector3(boxSize / 2, boxSize / 2, boxSize / 2));\n    //let uvBbox = new Box3(new Vector3(-(boxSize / 2)/3, -(boxSize / 2)/3, -(boxSize / 2)/3), new Vector3((boxSize / 2)/3, (boxSize / 2)/3, (boxSize / 2)/3));\n    //let uvBbox = bbox\n    \n\n\n    let coords = [];\n    //coords.length = 2 * geometry.attributes.position.array.length / 3;\n    coords.length = 2 * geometry.attributes.position.count;\n\n    //if ( geometry.attributes.uv === undefined ) geometry.addAttribute('uv', new Float32BufferAttribute(coords, 2));\n    if ( geometry.attributes.uv === undefined ) geometry.setAttribute('uv', new Float32BufferAttribute(coords, 2));\n    \n    let makeSphereUVs = function( v0, v1, v2 ) {\n\n        //pre-rotate the model so that cube sides match world axis\n        v0.applyMatrix4(transformMatrix);\n        v1.applyMatrix4(transformMatrix);\n        v2.applyMatrix4(transformMatrix);\n\n        let invTwoPi = 1 / (2.0 * Math.PI);\n        let invPi = 1 / Math.PI;\n\n        v0.normalize();\n        v1.normalize();\n        v2.normalize();\n\n        return {\n            uv0: new Vector2( .5 - Math.atan( v0.z, - v0.x ) * invTwoPi, .5 - Math.asin( v0.y ) * invPi ),\n            uv1: new Vector2( .5 - Math.atan( v1.z, - v1.x ) * invTwoPi, .5 - Math.asin( v1.y ) * invPi ),\n            uv2: new Vector2( .5 - Math.atan( v2.z, - v2.x ) * invTwoPi, .5 - Math.asin( v2.y ) * invPi ),\n        };\n\n    };\n\n\n  \n    //maps 3 verts of 1 face on the better side of the cube\n    //side of the cube can be XY, XZ or YZ\n    let makeCubeUVs = function( v0, v1, v2 ) {\n\n        //pre-rotate the model so that cube sides match world axis\n        v0.applyMatrix4(transformMatrix);\n        v1.applyMatrix4(transformMatrix);\n        v2.applyMatrix4(transformMatrix);\n\n        //get normal of the face, to know into which cube side it maps better\n        let n = new Vector3();\n        n.crossVectors( v1.clone().sub(v0), v1.clone().sub(v2) ).normalize();\n        if(n.x<0 || n.y<0 || n.z<0) ;\n\n        n.x = Math.abs(n.x);\n        n.y = Math.abs(n.y);\n        n.z = Math.abs(n.z);\n\n        let uv0 = new Vector2();\n        let uv1 = new Vector2();\n        let uv2 = new Vector2();\n        let max = 1/boxSize;\n\n        \n        // xz mapping\n        if ( n.y > n.x && n.y > n.z ) {\n\n            uv0.set( v0.x - uvBbox.min.x, uvBbox.max.z - v0.z ).multiplyScalar( max );\n            uv1.set( v1.x - uvBbox.min.x, uvBbox.max.z - v1.z ).multiplyScalar( max );\n            uv2.set( v2.x - uvBbox.min.x, uvBbox.max.z - v2.z ).multiplyScalar( max );\n\n        } else if ( n.x > n.y && n.x > n.z ) {\n\n            uv0.set( v0.z - uvBbox.min.z, v0.y - uvBbox.min.y ).multiplyScalar( max );\n            uv1.set( v1.z - uvBbox.min.z, v1.y - uvBbox.min.y ).multiplyScalar( max );\n            uv2.set( v2.z - uvBbox.min.z, v2.y - uvBbox.min.y ).multiplyScalar( max );\n\n        } else if ( n.z > n.y && n.z > n.x ) {\n\n            uv0.set( v0.x - uvBbox.min.x, v0.y - uvBbox.min.y ).multiplyScalar( max );\n            uv1.set( v1.x - uvBbox.min.x, v1.y - uvBbox.min.y ).multiplyScalar( max );\n            uv2.set( v2.x - uvBbox.min.x, v2.y - uvBbox.min.y ).multiplyScalar( max );\n\n        }\n\n        return { uv0: uv0, uv1: uv1, uv2: uv2 } \n    };\n\n\n\n    let i, id0, id1, id2, uvs;\n    let v0 = new Vector3();\n    let v1 = new Vector3();\n    let v2 = new Vector3();\n\n    new Vector3();\n    new Vector3();\n    new Vector3();\n\n    const positionAttribute = geometry.getAttribute( 'position' );\n    geometry.getAttribute( 'normal' );\n\n    if ( geometry.index ) { // is it indexed buffer geometry\n\n        for (i = 0; i < geometry.index.count; i+=3 ) {\n\n            //console.log('is index')\n\n            //n = i*3;\n            id0 = geometry.index.getX( i + 0 );\n            id1 = geometry.index.getX( i + 1 );\n            id2 = geometry.index.getX( i + 2 );\n\n            v0.fromBufferAttribute( positionAttribute, id0 );\n            v1.fromBufferAttribute( positionAttribute, id1 );\n            v2.fromBufferAttribute( positionAttribute, id2 );\n\n            /*nn0.fromBufferAttribute( normalAttribute, id0 );\n            nn1.fromBufferAttribute( normalAttribute, id1 );\n            nn2.fromBufferAttribute( normalAttribute, id2 )*/\n\n\n\n            if( type === 'sphere' ) uvs = makeSphereUVs( v0, v1, v2 );\n            else uvs = makeCubeUVs( v0, v1, v2);\n\n            coords[2 * id0] = uvs.uv0.x;\n            coords[2 * id0 + 1] = uvs.uv0.y;\n\n            coords[2 * id1] = uvs.uv1.x;\n            coords[2 * id1 + 1] = uvs.uv1.y;\n\n            coords[2 * id2] = uvs.uv2.x;\n            coords[2 * id2 + 1] = uvs.uv2.y;\n        }\n    } else {\n\n        for ( i = 0; i < positionAttribute.count; i += 3) {\n\n            v0.fromBufferAttribute( positionAttribute, i + 0 );\n            v1.fromBufferAttribute( positionAttribute, i + 1 );\n            v2.fromBufferAttribute( positionAttribute, i + 2 );\n\n            if( type === 'sphere' ) uvs = makeSphereUVs( v0, v1, v2 );\n            else uvs = makeCubeUVs( v0, v1, v2 );\n\n            let idx0 = i;//vi / 3;\n            let idx1 = i+1;//idx0 + 1;\n            let idx2 = i+2;//idx0 + 2;\n\n            coords[2 * idx0] = uvs.uv0.x;\n            coords[2 * idx0 + 1] = uvs.uv0.y;\n\n            coords[2 * idx1] = uvs.uv1.x;\n            coords[2 * idx1 + 1] = uvs.uv1.y;\n\n            coords[2 * idx2] = uvs.uv2.x;\n            coords[2 * idx2 + 1] = uvs.uv2.y;\n        }\n\n    }\n\n    geometry.attributes.uv.array = new Float32Array( coords );\n    geometry.attributes.uv.needsUpdate = true;\n\n}\n\n\n/*\nexport function calcNormal( normals, normal, angle ){\n\n    let allowed = normals.filter( n => n.angleTo( normal ) < angle * Math.PI / 180 );\n    return allowed.reduce( (a, b) => a.clone().add( b ) ).normalize();\n\n}\n\nexport function computeVertexNormals(geometry, angle){\n\n    geometry.computeFaceNormals();\n    \n    var vertices = geometry.vertices.map( () => [] ); // vertices with normals array\n\n    geometry.faces.map( face => {\n        vertices[ face.a ].push( face.normal );\n        vertices[ face.b ].push( face.normal );\n        vertices[ face.c ].push( face.normal );\n    });\n\n    geometry.faces.map( face => {\n        face.vertexNormals[ 0 ] = calcNormal( vertices[ face.a ], face.normal, angle );\n        face.vertexNormals[ 1 ] = calcNormal( vertices[ face.b ], face.normal, angle );\n        face.vertexNormals[ 2 ] = calcNormal( vertices[ face.c ], face.normal, angle );\n    });\n\n    if ( geometry.faces.length > 0 ) geometry.normalsNeedUpdate = true;\n\n}*/\n\n/*\n\nBufferGeometry.prototype.computeMorphFaceNormals = function () {\n\n        var i, il, f, fl, face;\n\n        // save original normals\n        // - create temp variables on first access\n        //   otherwise just copy (for faster repeated calls)\n\n        for ( f = 0, fl = this.faces.length; f < fl; f ++ ) {\n\n            face = this.faces[ f ];\n\n            if ( ! face.__originalFaceNormal ) {\n\n                face.__originalFaceNormal = face.normal.clone();\n\n            } else {\n\n                face.__originalFaceNormal.copy( face.normal );\n\n            }\n\n        }\n\n        // use temp geometry to compute face normals for each morph\n\n        var tmpGeo = new THREE.Geometry();\n        tmpGeo.faces = this.faces;\n\n        for ( i = 0, il = this.morphTargets.length; i < il; i ++ ) {\n\n            // create on first access\n\n            if ( ! this.morphNormals[ i ] ) {\n\n                this.morphNormals[ i ] = {};\n                this.morphNormals[ i ].faceNormals = [];\n\n                var dstNormalsFace = this.morphNormals[ i ].faceNormals;\n\n                var faceNormal;\n\n                for ( f = 0, fl = this.faces.length; f < fl; f ++ ) {\n\n                    faceNormal = new Vector3();\n\n                    dstNormalsFace.push( faceNormal );\n\n                }\n\n            }\n\n            var morphNormals = this.morphNormals[ i ];\n\n            // set vertices to morph target\n\n            tmpGeo.vertices = this.morphTargets[ i ].vertices;\n\n            // compute morph normals\n\n            tmpGeo.computeFaceNormals();\n\n            // store morph normals\n\n            var faceNormal;\n\n            for ( f = 0, fl = this.faces.length; f < fl; f ++ ) {\n\n                face = this.faces[ f ];\n\n                faceNormal = morphNormals.faceNormals[ f ];\n\n                faceNormal.copy( face.normal );\n            }\n\n        }\n\n        // restore original normals\n\n        for ( f = 0, fl = this.faces.length; f < fl; f ++ ) {\n\n            face = this.faces[ f ];\n\n            face.normal = face.__originalFaceNormal;\n\n        }\n\n    }\n    */\n\n/**\n * Ported from: https://github.com/maurizzzio/quickhull3d/ by Mauricio Poppe (https://github.com/maurizzzio)\n */\n\nconst Visible = 0;\nconst Deleted = 1;\n\nconst _v1$1 = new Vector3();\nconst _line3 = new Line3();\nconst _plane = new Plane();\nconst _closestPoint = new Vector3();\nconst _triangle = new Triangle();\n\nclass ConvexHull {\n\n\tconstructor() {\n\n\t\tthis.tolerance = -1;\n\n\t\tthis.faces = []; // the generated faces of the convex hull\n\t\tthis.newFaces = []; // this array holds the faces that are generated within a single iteration\n\n\t\t// the vertex lists work as follows:\n\t\t//\n\t\t// let 'a' and 'b' be 'Face' instances\n\t\t// let 'v' be points wrapped as instance of 'Vertex'\n\t\t//\n\t\t//     [v, v, ..., v, v, v, ...]\n\t\t//      ^             ^\n\t\t//      |             |\n\t\t//  a.outside     b.outside\n\t\t//\n\t\tthis.assigned = new VertexList();\n\t\tthis.unassigned = new VertexList();\n\n\t\tthis.vertices = []; \t// vertices of the hull (internal representation of given geometry data)\n\n\t}\n\n\tsetFromPoints( points ) {\n\n\t\t// The algorithm needs at least four points.\n\n\t\tif ( points.length >= 4 ) {\n\n\t\t\tthis.makeEmpty();\n\n\t\t\tfor ( let i = 0, l = points.length; i < l; i ++ ) {\n\n\t\t\t\tthis.vertices.push( new VertexNode( points[ i ] ) );\n\n\t\t\t}\n\n\t\t\tthis.compute();\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tsetFromObject( object ) {\n\n\t\tconst points = [];\n\n\t\tobject.updateMatrixWorld( true );\n\n\t\tobject.traverse( function ( node ) {\n\n\t\t\tconst geometry = node.geometry;\n\n\t\t\tif ( geometry !== undefined ) {\n\n\t\t\t\tconst attribute = geometry.attributes.position;\n\n\t\t\t\tif ( attribute !== undefined ) {\n\n\t\t\t\t\tfor ( let i = 0, l = attribute.count; i < l; i ++ ) {\n\n\t\t\t\t\t\tconst point = new Vector3();\n\n\t\t\t\t\t\tpoint.fromBufferAttribute( attribute, i ).applyMatrix4( node.matrixWorld );\n\n\t\t\t\t\t\tpoints.push( point );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} );\n\n\t\treturn this.setFromPoints( points );\n\n\t}\n\n\tcontainsPoint( point ) {\n\n\t\tconst faces = this.faces;\n\n\t\tfor ( let i = 0, l = faces.length; i < l; i ++ ) {\n\n\t\t\tconst face = faces[ i ];\n\n\t\t\t// compute signed distance and check on what half space the point lies\n\n\t\t\tif ( face.distanceToPoint( point ) > this.tolerance ) return false;\n\n\t\t}\n\n\t\treturn true;\n\n\t}\n\n\tintersectRay( ray, target ) {\n\n\t\t// based on \"Fast Ray-Convex Polyhedron Intersection\" by Eric Haines, GRAPHICS GEMS II\n\n\t\tconst faces = this.faces;\n\n\t\tlet tNear = - Infinity;\n\t\tlet tFar = Infinity;\n\n\t\tfor ( let i = 0, l = faces.length; i < l; i ++ ) {\n\n\t\t\tconst face = faces[ i ];\n\n\t\t\t// interpret faces as planes for the further computation\n\n\t\t\tconst vN = face.distanceToPoint( ray.origin );\n\t\t\tconst vD = face.normal.dot( ray.direction );\n\n\t\t\t// if the origin is on the positive side of a plane (so the plane can \"see\" the origin) and\n\t\t\t// the ray is turned away or parallel to the plane, there is no intersection\n\n\t\t\tif ( vN > 0 && vD >= 0 ) return null;\n\n\t\t\t// compute the distance from the ray’s origin to the intersection with the plane\n\n\t\t\tconst t = ( vD !== 0 ) ? ( - vN / vD ) : 0;\n\n\t\t\t// only proceed if the distance is positive. a negative distance means the intersection point\n\t\t\t// lies \"behind\" the origin\n\n\t\t\tif ( t <= 0 ) continue;\n\n\t\t\t// now categorized plane as front-facing or back-facing\n\n\t\t\tif ( vD > 0 ) {\n\n\t\t\t\t// plane faces away from the ray, so this plane is a back-face\n\n\t\t\t\ttFar = Math.min( t, tFar );\n\n\t\t\t} else {\n\n\t\t\t\t// front-face\n\n\t\t\t\ttNear = Math.max( t, tNear );\n\n\t\t\t}\n\n\t\t\tif ( tNear > tFar ) {\n\n\t\t\t\t// if tNear ever is greater than tFar, the ray must miss the convex hull\n\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t}\n\n\t\t// evaluate intersection point\n\n\t\t// always try tNear first since its the closer intersection point\n\n\t\tif ( tNear !== - Infinity ) {\n\n\t\t\tray.at( tNear, target );\n\n\t\t} else {\n\n\t\t\tray.at( tFar, target );\n\n\t\t}\n\n\t\treturn target;\n\n\t}\n\n\tintersectsRay( ray ) {\n\n\t\treturn this.intersectRay( ray, _v1$1 ) !== null;\n\n\t}\n\n\tmakeEmpty() {\n\n\t\tthis.faces = [];\n\t\tthis.vertices = [];\n\n\t\treturn this;\n\n\t}\n\n\t// Adds a vertex to the 'assigned' list of vertices and assigns it to the given face\n\n\taddVertexToFace( vertex, face ) {\n\n\t\tvertex.face = face;\n\n\t\tif ( face.outside === null ) {\n\n\t\t\tthis.assigned.append( vertex );\n\n\t\t} else {\n\n\t\t\tthis.assigned.insertBefore( face.outside, vertex );\n\n\t\t}\n\n\t\tface.outside = vertex;\n\n\t\treturn this;\n\n\t}\n\n\t// Removes a vertex from the 'assigned' list of vertices and from the given face\n\n\tremoveVertexFromFace( vertex, face ) {\n\n\t\tif ( vertex === face.outside ) {\n\n\t\t\t// fix face.outside link\n\n\t\t\tif ( vertex.next !== null && vertex.next.face === face ) {\n\n\t\t\t\t// face has at least 2 outside vertices, move the 'outside' reference\n\n\t\t\t\tface.outside = vertex.next;\n\n\t\t\t} else {\n\n\t\t\t\t// vertex was the only outside vertex that face had\n\n\t\t\t\tface.outside = null;\n\n\t\t\t}\n\n\t\t}\n\n\t\tthis.assigned.remove( vertex );\n\n\t\treturn this;\n\n\t}\n\n\t// Removes all the visible vertices that a given face is able to see which are stored in the 'assigned' vertex list\n\n\tremoveAllVerticesFromFace( face ) {\n\n\t\tif ( face.outside !== null ) {\n\n\t\t\t// reference to the first and last vertex of this face\n\n\t\t\tconst start = face.outside;\n\t\t\tlet end = face.outside;\n\n\t\t\twhile ( end.next !== null && end.next.face === face ) {\n\n\t\t\t\tend = end.next;\n\n\t\t\t}\n\n\t\t\tthis.assigned.removeSubList( start, end );\n\n\t\t\t// fix references\n\n\t\t\tstart.prev = end.next = null;\n\t\t\tface.outside = null;\n\n\t\t\treturn start;\n\n\t\t}\n\n\t}\n\n\t// Removes all the visible vertices that 'face' is able to see\n\n\tdeleteFaceVertices( face, absorbingFace ) {\n\n\t\tconst faceVertices = this.removeAllVerticesFromFace( face );\n\n\t\tif ( faceVertices !== undefined ) {\n\n\t\t\tif ( absorbingFace === undefined ) {\n\n\t\t\t\t// mark the vertices to be reassigned to some other face\n\n\t\t\t\tthis.unassigned.appendChain( faceVertices );\n\n\n\t\t\t} else {\n\n\t\t\t\t// if there's an absorbing face try to assign as many vertices as possible to it\n\n\t\t\t\tlet vertex = faceVertices;\n\n\t\t\t\tdo {\n\n\t\t\t\t\t// we need to buffer the subsequent vertex at this point because the 'vertex.next' reference\n\t\t\t\t\t// will be changed by upcoming method calls\n\n\t\t\t\t\tconst nextVertex = vertex.next;\n\n\t\t\t\t\tconst distance = absorbingFace.distanceToPoint( vertex.point );\n\n\t\t\t\t\t// check if 'vertex' is able to see 'absorbingFace'\n\n\t\t\t\t\tif ( distance > this.tolerance ) {\n\n\t\t\t\t\t\tthis.addVertexToFace( vertex, absorbingFace );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tthis.unassigned.append( vertex );\n\n\t\t\t\t\t}\n\n\t\t\t\t\t// now assign next vertex\n\n\t\t\t\t\tvertex = nextVertex;\n\n\t\t\t\t} while ( vertex !== null );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\t// Reassigns as many vertices as possible from the unassigned list to the new faces\n\n\tresolveUnassignedPoints( newFaces ) {\n\n\t\tif ( this.unassigned.isEmpty() === false ) {\n\n\t\t\tlet vertex = this.unassigned.first();\n\n\t\t\tdo {\n\n\t\t\t\t// buffer 'next' reference, see .deleteFaceVertices()\n\n\t\t\t\tconst nextVertex = vertex.next;\n\n\t\t\t\tlet maxDistance = this.tolerance;\n\n\t\t\t\tlet maxFace = null;\n\n\t\t\t\tfor ( let i = 0; i < newFaces.length; i ++ ) {\n\n\t\t\t\t\tconst face = newFaces[ i ];\n\n\t\t\t\t\tif ( face.mark === Visible ) {\n\n\t\t\t\t\t\tconst distance = face.distanceToPoint( vertex.point );\n\n\t\t\t\t\t\tif ( distance > maxDistance ) {\n\n\t\t\t\t\t\t\tmaxDistance = distance;\n\t\t\t\t\t\t\tmaxFace = face;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif ( maxDistance > 1000 * this.tolerance ) break;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\t// 'maxFace' can be null e.g. if there are identical vertices\n\n\t\t\t\tif ( maxFace !== null ) {\n\n\t\t\t\t\tthis.addVertexToFace( vertex, maxFace );\n\n\t\t\t\t}\n\n\t\t\t\tvertex = nextVertex;\n\n\t\t\t} while ( vertex !== null );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\t// Computes the extremes of a simplex which will be the initial hull\n\n\tcomputeExtremes() {\n\n\t\tconst min = new Vector3();\n\t\tconst max = new Vector3();\n\n\t\tconst minVertices = [];\n\t\tconst maxVertices = [];\n\n\t\t// initially assume that the first vertex is the min/max\n\n\t\tfor ( let i = 0; i < 3; i ++ ) {\n\n\t\t\tminVertices[ i ] = maxVertices[ i ] = this.vertices[ 0 ];\n\n\t\t}\n\n\t\tmin.copy( this.vertices[ 0 ].point );\n\t\tmax.copy( this.vertices[ 0 ].point );\n\n\t\t// compute the min/max vertex on all six directions\n\n\t\tfor ( let i = 0, l = this.vertices.length; i < l; i ++ ) {\n\n\t\t\tconst vertex = this.vertices[ i ];\n\t\t\tconst point = vertex.point;\n\n\t\t\t// update the min coordinates\n\n\t\t\tfor ( let j = 0; j < 3; j ++ ) {\n\n\t\t\t\tif ( point.getComponent( j ) < min.getComponent( j ) ) {\n\n\t\t\t\t\tmin.setComponent( j, point.getComponent( j ) );\n\t\t\t\t\tminVertices[ j ] = vertex;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// update the max coordinates\n\n\t\t\tfor ( let j = 0; j < 3; j ++ ) {\n\n\t\t\t\tif ( point.getComponent( j ) > max.getComponent( j ) ) {\n\n\t\t\t\t\tmax.setComponent( j, point.getComponent( j ) );\n\t\t\t\t\tmaxVertices[ j ] = vertex;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\t// use min/max vectors to compute an optimal epsilon\n\n\t\tthis.tolerance = 3 * Number.EPSILON * (\n\t\t\tMath.max( Math.abs( min.x ), Math.abs( max.x ) ) +\n\t\t\tMath.max( Math.abs( min.y ), Math.abs( max.y ) ) +\n\t\t\tMath.max( Math.abs( min.z ), Math.abs( max.z ) )\n\t\t);\n\n\t\treturn { min: minVertices, max: maxVertices };\n\n\t}\n\n\t// Computes the initial simplex assigning to its faces all the points\n\t// that are candidates to form part of the hull\n\n\tcomputeInitialHull() {\n\n\t\tconst vertices = this.vertices;\n\t\tconst extremes = this.computeExtremes();\n\t\tconst min = extremes.min;\n\t\tconst max = extremes.max;\n\n\t\t// 1. Find the two vertices 'v0' and 'v1' with the greatest 1d separation\n\t\t// (max.x - min.x)\n\t\t// (max.y - min.y)\n\t\t// (max.z - min.z)\n\n\t\tlet maxDistance = 0;\n\t\tlet index = 0;\n\n\t\tfor ( let i = 0; i < 3; i ++ ) {\n\n\t\t\tconst distance = max[ i ].point.getComponent( i ) - min[ i ].point.getComponent( i );\n\n\t\t\tif ( distance > maxDistance ) {\n\n\t\t\t\tmaxDistance = distance;\n\t\t\t\tindex = i;\n\n\t\t\t}\n\n\t\t}\n\n\t\tconst v0 = min[ index ];\n\t\tconst v1 = max[ index ];\n\t\tlet v2;\n\t\tlet v3;\n\n\t\t// 2. The next vertex 'v2' is the one farthest to the line formed by 'v0' and 'v1'\n\n\t\tmaxDistance = 0;\n\t\t_line3.set( v0.point, v1.point );\n\n\t\tfor ( let i = 0, l = this.vertices.length; i < l; i ++ ) {\n\n\t\t\tconst vertex = vertices[ i ];\n\n\t\t\tif ( vertex !== v0 && vertex !== v1 ) {\n\n\t\t\t\t_line3.closestPointToPoint( vertex.point, true, _closestPoint );\n\n\t\t\t\tconst distance = _closestPoint.distanceToSquared( vertex.point );\n\n\t\t\t\tif ( distance > maxDistance ) {\n\n\t\t\t\t\tmaxDistance = distance;\n\t\t\t\t\tv2 = vertex;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\t// 3. The next vertex 'v3' is the one farthest to the plane 'v0', 'v1', 'v2'\n\n\t\tmaxDistance = -1;\n\t\t_plane.setFromCoplanarPoints( v0.point, v1.point, v2.point );\n\n\t\tfor ( let i = 0, l = this.vertices.length; i < l; i ++ ) {\n\n\t\t\tconst vertex = vertices[ i ];\n\n\t\t\tif ( vertex !== v0 && vertex !== v1 && vertex !== v2 ) {\n\n\t\t\t\tconst distance = Math.abs( _plane.distanceToPoint( vertex.point ) );\n\n\t\t\t\tif ( distance > maxDistance ) {\n\n\t\t\t\t\tmaxDistance = distance;\n\t\t\t\t\tv3 = vertex;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tconst faces = [];\n\n\t\tif ( _plane.distanceToPoint( v3.point ) < 0 ) {\n\n\t\t\t// the face is not able to see the point so 'plane.normal' is pointing outside the tetrahedron\n\n\t\t\tfaces.push(\n\t\t\t\tFace.create( v0, v1, v2 ),\n\t\t\t\tFace.create( v3, v1, v0 ),\n\t\t\t\tFace.create( v3, v2, v1 ),\n\t\t\t\tFace.create( v3, v0, v2 )\n\t\t\t);\n\n\t\t\t// set the twin edge\n\n\t\t\tfor ( let i = 0; i < 3; i ++ ) {\n\n\t\t\t\tconst j = ( i + 1 ) % 3;\n\n\t\t\t\t// join face[ i ] i > 0, with the first face\n\n\t\t\t\tfaces[ i + 1 ].getEdge( 2 ).setTwin( faces[ 0 ].getEdge( j ) );\n\n\t\t\t\t// join face[ i ] with face[ i + 1 ], 1 <= i <= 3\n\n\t\t\t\tfaces[ i + 1 ].getEdge( 1 ).setTwin( faces[ j + 1 ].getEdge( 0 ) );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\t// the face is able to see the point so 'plane.normal' is pointing inside the tetrahedron\n\n\t\t\tfaces.push(\n\t\t\t\tFace.create( v0, v2, v1 ),\n\t\t\t\tFace.create( v3, v0, v1 ),\n\t\t\t\tFace.create( v3, v1, v2 ),\n\t\t\t\tFace.create( v3, v2, v0 )\n\t\t\t);\n\n\t\t\t// set the twin edge\n\n\t\t\tfor ( let i = 0; i < 3; i ++ ) {\n\n\t\t\t\tconst j = ( i + 1 ) % 3;\n\n\t\t\t\t// join face[ i ] i > 0, with the first face\n\n\t\t\t\tfaces[ i + 1 ].getEdge( 2 ).setTwin( faces[ 0 ].getEdge( ( 3 - i ) % 3 ) );\n\n\t\t\t\t// join face[ i ] with face[ i + 1 ]\n\n\t\t\t\tfaces[ i + 1 ].getEdge( 0 ).setTwin( faces[ j + 1 ].getEdge( 1 ) );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// the initial hull is the tetrahedron\n\n\t\tfor ( let i = 0; i < 4; i ++ ) {\n\n\t\t\tthis.faces.push( faces[ i ] );\n\n\t\t}\n\n\t\t// initial assignment of vertices to the faces of the tetrahedron\n\n\t\tfor ( let i = 0, l = vertices.length; i < l; i ++ ) {\n\n\t\t\tconst vertex = vertices[ i ];\n\n\t\t\tif ( vertex !== v0 && vertex !== v1 && vertex !== v2 && vertex !== v3 ) {\n\n\t\t\t\tmaxDistance = this.tolerance;\n\t\t\t\tlet maxFace = null;\n\n\t\t\t\tfor ( let j = 0; j < 4; j ++ ) {\n\n\t\t\t\t\tconst distance = this.faces[ j ].distanceToPoint( vertex.point );\n\n\t\t\t\t\tif ( distance > maxDistance ) {\n\n\t\t\t\t\t\tmaxDistance = distance;\n\t\t\t\t\t\tmaxFace = this.faces[ j ];\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tif ( maxFace !== null ) {\n\n\t\t\t\t\tthis.addVertexToFace( vertex, maxFace );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\t// Removes inactive faces\n\n\treindexFaces() {\n\n\t\tconst activeFaces = [];\n\n\t\tfor ( let i = 0; i < this.faces.length; i ++ ) {\n\n\t\t\tconst face = this.faces[ i ];\n\n\t\t\tif ( face.mark === Visible ) {\n\n\t\t\t\tactiveFaces.push( face );\n\n\t\t\t}\n\n\t\t}\n\n\t\tthis.faces = activeFaces;\n\n\t\treturn this;\n\n\t}\n\n\t// Finds the next vertex to create faces with the current hull\n\n\tnextVertexToAdd() {\n\n\t\t// if the 'assigned' list of vertices is empty, no vertices are left. return with 'undefined'\n\n\t\tif ( this.assigned.isEmpty() === false ) {\n\n\t\t\tlet eyeVertex, maxDistance = 0;\n\n\t\t\t// grap the first available face and start with the first visible vertex of that face\n\n\t\t\tconst eyeFace = this.assigned.first().face;\n\t\t\tlet vertex = eyeFace.outside;\n\n\t\t\t// now calculate the farthest vertex that face can see\n\n\t\t\tdo {\n\n\t\t\t\tconst distance = eyeFace.distanceToPoint( vertex.point );\n\n\t\t\t\tif ( distance > maxDistance ) {\n\n\t\t\t\t\tmaxDistance = distance;\n\t\t\t\t\teyeVertex = vertex;\n\n\t\t\t\t}\n\n\t\t\t\tvertex = vertex.next;\n\n\t\t\t} while ( vertex !== null && vertex.face === eyeFace );\n\n\t\t\treturn eyeVertex;\n\n\t\t}\n\n\t}\n\n\t// Computes a chain of half edges in CCW order called the 'horizon'.\n\t// For an edge to be part of the horizon it must join a face that can see\n\t// 'eyePoint' and a face that cannot see 'eyePoint'.\n\n\tcomputeHorizon( eyePoint, crossEdge, face, horizon ) {\n\n\t\t// moves face's vertices to the 'unassigned' vertex list\n\n\t\tthis.deleteFaceVertices( face );\n\n\t\tface.mark = Deleted;\n\n\t\tlet edge;\n\n\t\tif ( crossEdge === null ) {\n\n\t\t\tedge = crossEdge = face.getEdge( 0 );\n\n\t\t} else {\n\n\t\t\t// start from the next edge since 'crossEdge' was already analyzed\n\t\t\t// (actually 'crossEdge.twin' was the edge who called this method recursively)\n\n\t\t\tedge = crossEdge.next;\n\n\t\t}\n\n\t\tdo {\n\n\t\t\tconst twinEdge = edge.twin;\n\t\t\tconst oppositeFace = twinEdge.face;\n\n\t\t\tif ( oppositeFace.mark === Visible ) {\n\n\t\t\t\tif ( oppositeFace.distanceToPoint( eyePoint ) > this.tolerance ) {\n\n\t\t\t\t\t// the opposite face can see the vertex, so proceed with next edge\n\n\t\t\t\t\tthis.computeHorizon( eyePoint, twinEdge, oppositeFace, horizon );\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// the opposite face can't see the vertex, so this edge is part of the horizon\n\n\t\t\t\t\thorizon.push( edge );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tedge = edge.next;\n\n\t\t} while ( edge !== crossEdge );\n\n\t\treturn this;\n\n\t}\n\n\t// Creates a face with the vertices 'eyeVertex.point', 'horizonEdge.tail' and 'horizonEdge.head' in CCW order\n\n\taddAdjoiningFace( eyeVertex, horizonEdge ) {\n\n\t\t// all the half edges are created in ccw order thus the face is always pointing outside the hull\n\n\t\tconst face = Face.create( eyeVertex, horizonEdge.tail(), horizonEdge.head() );\n\n\t\tthis.faces.push( face );\n\n\t\t// join face.getEdge( - 1 ) with the horizon's opposite edge face.getEdge( - 1 ) = face.getEdge( 2 )\n\n\t\tface.getEdge( -1 ).setTwin( horizonEdge.twin );\n\n\t\treturn face.getEdge( 0 ); // the half edge whose vertex is the eyeVertex\n\n\n\t}\n\n\t//  Adds 'horizon.length' faces to the hull, each face will be linked with the\n\t//  horizon opposite face and the face on the left/right\n\n\taddNewFaces( eyeVertex, horizon ) {\n\n\t\tthis.newFaces = [];\n\n\t\tlet firstSideEdge = null;\n\t\tlet previousSideEdge = null;\n\n\t\tfor ( let i = 0; i < horizon.length; i ++ ) {\n\n\t\t\tconst horizonEdge = horizon[ i ];\n\n\t\t\t// returns the right side edge\n\n\t\t\tconst sideEdge = this.addAdjoiningFace( eyeVertex, horizonEdge );\n\n\t\t\tif ( firstSideEdge === null ) {\n\n\t\t\t\tfirstSideEdge = sideEdge;\n\n\t\t\t} else {\n\n\t\t\t\t// joins face.getEdge( 1 ) with previousFace.getEdge( 0 )\n\n\t\t\t\tsideEdge.next.setTwin( previousSideEdge );\n\n\t\t\t}\n\n\t\t\tthis.newFaces.push( sideEdge.face );\n\t\t\tpreviousSideEdge = sideEdge;\n\n\t\t}\n\n\t\t// perform final join of new faces\n\n\t\tfirstSideEdge.next.setTwin( previousSideEdge );\n\n\t\treturn this;\n\n\t}\n\n\t// Adds a vertex to the hull\n\n\taddVertexToHull( eyeVertex ) {\n\n\t\tconst horizon = [];\n\n\t\tthis.unassigned.clear();\n\n\t\t// remove 'eyeVertex' from 'eyeVertex.face' so that it can't be added to the 'unassigned' vertex list\n\n\t\tthis.removeVertexFromFace( eyeVertex, eyeVertex.face );\n\n\t\tthis.computeHorizon( eyeVertex.point, null, eyeVertex.face, horizon );\n\n\t\tthis.addNewFaces( eyeVertex, horizon );\n\n\t\t// reassign 'unassigned' vertices to the new faces\n\n\t\tthis.resolveUnassignedPoints( this.newFaces );\n\n\t\treturn\tthis;\n\n\t}\n\n\tcleanup() {\n\n\t\tthis.assigned.clear();\n\t\tthis.unassigned.clear();\n\t\tthis.newFaces = [];\n\n\t\treturn this;\n\n\t}\n\n\tcompute() {\n\n\t\tlet vertex;\n\n\t\tthis.computeInitialHull();\n\n\t\t// add all available vertices gradually to the hull\n\n\t\twhile ( ( vertex = this.nextVertexToAdd() ) !== undefined ) {\n\n\t\t\tthis.addVertexToHull( vertex );\n\n\t\t}\n\n\t\tthis.reindexFaces();\n\n\t\tthis.cleanup();\n\n\t\treturn this;\n\n\t}\n\n}\n\n//\n\nclass Face {\n\n\tconstructor() {\n\n\t\tthis.normal = new Vector3();\n\t\tthis.midpoint = new Vector3();\n\t\tthis.area = 0;\n\n\t\tthis.constant = 0; // signed distance from face to the origin\n\t\tthis.outside = null; // reference to a vertex in a vertex list this face can see\n\t\tthis.mark = Visible;\n\t\tthis.edge = null;\n\n\t}\n\n\tstatic create( a, b, c ) {\n\n\t\tconst face = new Face();\n\n\t\tconst e0 = new HalfEdge( a, face );\n\t\tconst e1 = new HalfEdge( b, face );\n\t\tconst e2 = new HalfEdge( c, face );\n\n\t\t// join edges\n\n\t\te0.next = e2.prev = e1;\n\t\te1.next = e0.prev = e2;\n\t\te2.next = e1.prev = e0;\n\n\t\t// main half edge reference\n\n\t\tface.edge = e0;\n\n\t\treturn face.compute();\n\n\t}\n\n\tgetEdge( i ) {\n\n\t\tlet edge = this.edge;\n\n\t\twhile ( i > 0 ) {\n\n\t\t\tedge = edge.next;\n\t\t\ti --;\n\n\t\t}\n\n\t\twhile ( i < 0 ) {\n\n\t\t\tedge = edge.prev;\n\t\t\ti ++;\n\n\t\t}\n\n\t\treturn edge;\n\n\t}\n\n\tcompute() {\n\n\t\tconst a = this.edge.tail();\n\t\tconst b = this.edge.head();\n\t\tconst c = this.edge.next.head();\n\n\t\t_triangle.set( a.point, b.point, c.point );\n\n\t\t_triangle.getNormal( this.normal );\n\t\t_triangle.getMidpoint( this.midpoint );\n\t\tthis.area = _triangle.getArea();\n\n\t\tthis.constant = this.normal.dot( this.midpoint );\n\n\t\treturn this;\n\n\t}\n\n\tdistanceToPoint( point ) {\n\n\t\treturn this.normal.dot( point ) - this.constant;\n\n\t}\n\n}\n\n// Entity for a Doubly-Connected Edge List (DCEL).\n\nclass HalfEdge {\n\n\n\tconstructor( vertex, face ) {\n\n\t\tthis.vertex = vertex;\n\t\tthis.prev = null;\n\t\tthis.next = null;\n\t\tthis.twin = null;\n\t\tthis.face = face;\n\n\t}\n\n\thead() {\n\n\t\treturn this.vertex;\n\n\t}\n\n\ttail() {\n\n\t\treturn this.prev ? this.prev.vertex : null;\n\n\t}\n\n\tlength() {\n\n\t\tconst head = this.head();\n\t\tconst tail = this.tail();\n\n\t\tif ( tail !== null ) {\n\n\t\t\treturn tail.point.distanceTo( head.point );\n\n\t\t}\n\n\t\treturn -1;\n\n\t}\n\n\tlengthSquared() {\n\n\t\tconst head = this.head();\n\t\tconst tail = this.tail();\n\n\t\tif ( tail !== null ) {\n\n\t\t\treturn tail.point.distanceToSquared( head.point );\n\n\t\t}\n\n\t\treturn -1;\n\n\t}\n\n\tsetTwin( edge ) {\n\n\t\tthis.twin = edge;\n\t\tedge.twin = this;\n\n\t\treturn this;\n\n\t}\n\n}\n\n// A vertex as a double linked list node.\n\nclass VertexNode {\n\n\tconstructor( point ) {\n\n\t\tthis.point = point;\n\t\tthis.prev = null;\n\t\tthis.next = null;\n\t\tthis.face = null; // the face that is able to see this vertex\n\n\t}\n\n}\n\n// A double linked list that contains vertex nodes.\n\nclass VertexList {\n\n\tconstructor() {\n\n\t\tthis.head = null;\n\t\tthis.tail = null;\n\n\t}\n\n\tfirst() {\n\n\t\treturn this.head;\n\n\t}\n\n\tlast() {\n\n\t\treturn this.tail;\n\n\t}\n\n\tclear() {\n\n\t\tthis.head = this.tail = null;\n\n\t\treturn this;\n\n\t}\n\n\t// Inserts a vertex before the target vertex\n\n\tinsertBefore( target, vertex ) {\n\n\t\tvertex.prev = target.prev;\n\t\tvertex.next = target;\n\n\t\tif ( vertex.prev === null ) {\n\n\t\t\tthis.head = vertex;\n\n\t\t} else {\n\n\t\t\tvertex.prev.next = vertex;\n\n\t\t}\n\n\t\ttarget.prev = vertex;\n\n\t\treturn this;\n\n\t}\n\n\t// Inserts a vertex after the target vertex\n\n\tinsertAfter( target, vertex ) {\n\n\t\tvertex.prev = target;\n\t\tvertex.next = target.next;\n\n\t\tif ( vertex.next === null ) {\n\n\t\t\tthis.tail = vertex;\n\n\t\t} else {\n\n\t\t\tvertex.next.prev = vertex;\n\n\t\t}\n\n\t\ttarget.next = vertex;\n\n\t\treturn this;\n\n\t}\n\n\t// Appends a vertex to the end of the linked list\n\n\tappend( vertex ) {\n\n\t\tif ( this.head === null ) {\n\n\t\t\tthis.head = vertex;\n\n\t\t} else {\n\n\t\t\tthis.tail.next = vertex;\n\n\t\t}\n\n\t\tvertex.prev = this.tail;\n\t\tvertex.next = null; // the tail has no subsequent vertex\n\n\t\tthis.tail = vertex;\n\n\t\treturn this;\n\n\t}\n\n\t// Appends a chain of vertices where 'vertex' is the head.\n\n\tappendChain( vertex ) {\n\n\t\tif ( this.head === null ) {\n\n\t\t\tthis.head = vertex;\n\n\t\t} else {\n\n\t\t\tthis.tail.next = vertex;\n\n\t\t}\n\n\t\tvertex.prev = this.tail;\n\n\t\t// ensure that the 'tail' reference points to the last vertex of the chain\n\n\t\twhile ( vertex.next !== null ) {\n\n\t\t\tvertex = vertex.next;\n\n\t\t}\n\n\t\tthis.tail = vertex;\n\n\t\treturn this;\n\n\t}\n\n\t// Removes a vertex from the linked list\n\n\tremove( vertex ) {\n\n\t\tif ( vertex.prev === null ) {\n\n\t\t\tthis.head = vertex.next;\n\n\t\t} else {\n\n\t\t\tvertex.prev.next = vertex.next;\n\n\t\t}\n\n\t\tif ( vertex.next === null ) {\n\n\t\t\tthis.tail = vertex.prev;\n\n\t\t} else {\n\n\t\t\tvertex.next.prev = vertex.prev;\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\t// Removes a list of vertices whose 'head' is 'a' and whose 'tail' is b\n\n\tremoveSubList( a, b ) {\n\n\t\tif ( a.prev === null ) {\n\n\t\t\tthis.head = b.next;\n\n\t\t} else {\n\n\t\t\ta.prev.next = b.next;\n\n\t\t}\n\n\t\tif ( b.next === null ) {\n\n\t\t\tthis.tail = a.prev;\n\n\t\t} else {\n\n\t\t\tb.next.prev = a.prev;\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tisEmpty() {\n\n\t\treturn this.head === null;\n\n\t}\n\n}\n\nclass ConvexGeometry extends BufferGeometry {\n\n\tconstructor( points = [] ) {\n\n\t\tsuper();\n\n\t\t// buffers\n\n\t\tconst vertices = [];\n\t\tconst normals = [];\n\n\t\tconst convexHull = new ConvexHull().setFromPoints( points );\n\n\t\t// generate vertices and normals\n\n\t\tconst faces = convexHull.faces;\n\n\t\tfor ( let i = 0; i < faces.length; i ++ ) {\n\n\t\t\tconst face = faces[ i ];\n\t\t\tlet edge = face.edge;\n\n\t\t\t// we move along a doubly-connected edge list to access all face points (see HalfEdge docs)\n\n\t\t\tdo {\n\n\t\t\t\tconst point = edge.head().point;\n\n\t\t\t\tvertices.push( point.x, point.y, point.z );\n\t\t\t\tnormals.push( face.normal.x, face.normal.y, face.normal.z );\n\n\t\t\t\tedge = edge.next;\n\n\t\t\t} while ( edge !== face.edge );\n\n\t\t}\n\n\t\t// build geometry\n\n\t\tthis.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\t\tthis.setAttribute( 'normal', new Float32BufferAttribute( normals, 3 ) );\n\n\t}\n\n}\n\nclass CapsuleHelper extends Object3D {\n\n\t\n\n\tconstructor( r, h, useDir, material, c1 = [0,1,0], c2 = [0,0.5,0], full = false ) {\n\n\t\t\n\n\t\tsuper();\n\t\t// TODO bug with hero skeleton !! create new CapsuleHelper on over ??\n\t\tif(!r) return\n\t\tif(!h) return\n\n\t\t\n\n\t\tconst geometry = new BufferGeometry();\n\n\t\tlet py = (h*0.5)-r;\n\t\tlet side = 12;//32;\n\t\tlet dir = r*0.2;\n\n\n\t\tlet colors = [];\n\n\t\tconst positions = [\n\t\t    r, py, 0 ,   r, -py, 0,\n\t\t    -r, py, 0 ,   -r, -py, 0,\n\t\t    0, py, r-dir ,   0, py, r+dir,\n\t\t];\n\n\n\n\t\t//console.log( r )\n\n\t\tcolors.push(\n\t\t\t...c1,...c2,\n\t\t\t...c1,...c2,\n\t\t\t...c2,...c2\n\t\t);\n\n\t\tif(full){ \n\t\t\tpositions.push(\n\t\t\t\t0, py, r, 0, -py, r,\n\t\t\t\t0, py, -r, 0, -py, -r \n\t\t\t);\n\t\t\tcolors.push(\n\t\t\t\t...c1,...c2,\n\t\t\t\t...c1,...c2,\n\t\t\t);\n\t\t}\n\n\n\t\t// circle top / bottom\n\n\t\tfor ( let i = 0, j = 1; i < side; i ++, j ++ ) {\n\n\t\t\tconst p1 = ( i / side ) * Math.PI * 2;\n\t\t\tconst p2 = ( j / side ) * Math.PI * 2;\n\n\t\t\tpositions.push(\n\t\t\t\tr*Math.cos( p1 ), py, r*Math.sin( p1 ),\n\t\t\t\tr*Math.cos( p2 ), py, r*Math.sin( p2 ),\n\n\t\t\t\tr*Math.cos( p1 ), -py, r*Math.sin( p1 ),\n\t\t\t\tr*Math.cos( p2 ), -py, r*Math.sin( p2 ),\n\t\t\t);\n\n\t\t\tcolors.push(\n\t\t\t\t...c1,...c1,\n\t\t\t\t...c2,...c2,\n\t\t\t);\n\n\t\t}\n\n\t\t// circle start / end\n\n\t\tfor ( let i = 0, j = 1; i < side; i ++, j ++ ) {\n\n\t\t\tconst p1 = ( i / side ) * Math.PI * 2;\n\t\t\tconst p2 = ( j / side ) * Math.PI * 2;\n\n\t\t\tlet s = j <= side*0.5 ? 1 : -1; \n\n\t\t\tpositions.push(\n\t\t\t\tr*Math.cos( p1 ), py*s + r*Math.sin( p1 ),0,\n\t\t\t\tr*Math.cos( p2 ), py*s + r*Math.sin( p2 ),0,\n\t\t\t);\n\n\t\t\tif(s===1) colors.push( ...c1,...c1 );\n\t\t\telse colors.push( ...c2,...c2 );\n\n\t\t\tif(full){\n\t\t\t\tpositions.push(\n\t\t\t\t\t0, py*s + r*Math.sin( p1 ),r*Math.cos( p1 ),\n\t\t\t\t\t0, py*s + r*Math.sin( p2 ),r*Math.cos( p2 ),\n\t\t\t\t);\n\t\t\t\tif(s===1) colors.push( ...c1,...c1 );\n\t\t\t    else colors.push( ...c2,...c2 );\n\t\t\t}\n\n\t\t}\n\n\t\t//console.log( positions )\n\n\t\tgeometry.setAttribute( 'position', new Float32BufferAttribute( positions, 3 ) );\n\t\tgeometry.setAttribute( 'color', new Float32BufferAttribute( colors, 3 ) );\n\n\t\tgeometry.computeBoundingSphere();\n\n\t\tthis.colors = geometry.attributes.color.array;\n\t\tthis.colorsbase = [...this.colors];\n\t\tthis.geometry = geometry;\n\n\t\t//const material = new LineBasicMaterial( { color:0x00ff00, fog: false, toneMapped: false } );\n\n\n\t\t\n\t\tthis.cone = new LineSegments( geometry, material );\n\t\tthis.cone.raycast = function(){return false };\n\t\tthis.cone.updateMorphTargets = ()=>{};\n\t\tthis.cone.name = 'cone';\n\t\tthis.add( this.cone );\n\n\t\tthis.isOver = false;\n\t\tthis.matrixAutoUpdate = false;\n\t\tthis.type = 'CapsuleHelper';\n\n\t\tif(!useDir) return\n\n\t\tconst geometry2 = new BufferGeometry();\n\n\t\tconst positions2 = [\n\t\t    dir*0.5, -py, r-dir ,   dir*0.5, -py, r+dir,\n\t\t    -dir*0.5, -py, r-dir ,   -dir*0.5, -py, r+dir,\n\t\t    dir*0.5, -py, r-dir,  -dir*0.5, -py, r-dir,\n\n\t\t    -dir*0.5, -py, r+dir , -dir, -py, r+dir ,\n\t\t    dir*0.5, -py, r+dir , dir, -py, r+dir ,\n\n\t\t    -dir, -py, r+dir , 0, -py, r+dir*2 ,\n\t\t    dir, -py, r+dir , 0, -py, r+dir*2 ,\n\t\t];\n\n\t\tcolors = [];\n\t\tlet cc = positions2.length/3;\n\t\twhile(cc--){\n\t\t\tcolors.push(1,0,0);\n\t\t}\n\n\t\tgeometry2.setAttribute( 'position', new Float32BufferAttribute( positions2, 3 ) );\n\t\tgeometry2.setAttribute( 'color', new Float32BufferAttribute( colors, 3 ) );\n\n\n\n\t\t//const material2 = new LineBasicMaterial( { color:0xFF0000, fog: false, toneMapped: false } );\n\n\t\tthis.direction = new LineSegments( geometry2, material );\n\t\tthis.direction.raycast = function(){return false};\n\t\tthis.add( this.direction );\n\n\t}\n\n\tover(b){\n\n\t\tif(b){\n\t\t\tif(!this.isOver){\n\t\t\t\tthis.isOver = true;\n\t\t\t\tthis.changeColor(this.isOver);\n\t\t\t}\n\t\t}else {\n\t\t\tif(this.isOver){\n\t\t\t\tthis.isOver = false;\n\t\t\t\tthis.changeColor(this.isOver);\n\t\t    }\n\t\t}\n\t\t\n\n\t\t//console.log('yo')\n\n\t}\n\n\tchangeColor(b) {\n\n\t\tlet i = this.colors.length;\n\t\twhile(i--) this.colors[i] = b ? 1 : this.colorsbase[i];\n\t\tif( this.geometry ) this.geometry.attributes.color.needsUpdate = true;\n\n\t}\n\n\tsetDirection(r) {\n\n\t\tif(!this.direction) return\n\t\t//this.rotation.y = r\n\t\tthis.direction.rotation.y = r;\n\n\t}\n\n\tdispose() {\n\n\t\tthis.geometry.dispose();\n\n\t\tthis.cone.geometry.dispose();\n\t\t//this.cone.material.dispose();\n\n\t\tif(this.direction){\n\t\t\tthis.direction.geometry.dispose();\n\t\t\t//this.direction.material.dispose();\n\t\t}\n\n\t}\n\n\traycast(){\n\t\treturn false\n\t}\n\n\tupdate() {\n\n\t\t/*this.light.updateWorldMatrix( true, false );\n\t\tthis.light.target.updateWorldMatrix( true, false );\n\n\t\tconst coneLength = this.light.distance ? this.light.distance : 1000;\n\t\tconst coneWidth = coneLength * Math.tan( this.light.angle );\n\n\t\tthis.cone.scale.set( coneWidth, coneWidth, coneLength );\n\n\t\t_vector.setFromMatrixPosition( this.light.target.matrixWorld );\n\n\t\tthis.cone.lookAt( _vector );*/\n\n\t\t/*if ( this.color !== undefined ) {\n\n\t\t\tthis.cone.material.color.set( this.color );\n\n\t\t} else {\n\n\t\t\tthis.cone.material.color.copy( this.light.color );\n\n\t\t}*/\n\n\t}\n\n}\n\n// THREE BODY\n\nclass Body extends Item {\n\n\tconstructor () {\n\n\t\tsuper();\n\n\t\tthis.Utils = Utils;\n\t\tthis.type = 'body';\n\t\tthis.num = Num[this.type];\n\t\tthis.full = false;\n\t\tthis.extraConvex = false;\n\t\tthis.needMatrix = root.engine ==='RAPIER' || root.engine ==='HAVOK';\n\t\t//this.tmpVolume = 0\n\n\t}\n\n\tsetFull( full ){\n\t\tthis.num = Num[ full ? 'bodyFull':'body' ];\n\t\tthis.full = full;\n\t}\n\n\tstep () {\n\n\t\tconst AR = root.Ar;\n\t\tconst N = root.ArPos[this.type];\n\t\tconst list = this.list;\n\t\tlet i = list.length, b, n;\n\t\t\n\t\twhile( i-- ){\n\n\t\t\tb = list[i];\n\n\t\t\tif( b === null ) continue\n\n\t\t\tn = N + ( i * this.num );\n\n\t\t\t// update only when physics actif\n\t\t\tif( !b.actif ){\n\t\t\t\t// a = MathTool.nullArray( AR, n, this.num );\n\t\t\t\t//a = AR[n+0]+AR[n+1]+AR[n+2]+AR[n+3]+ AR[n+4]+AR[n+5]+AR[n+6]+AR[n+7];\n\t\t\t\t//if( a === 0 ) continue\n\t\t\t\tif( MathTool.nullArray( AR, n, this.num ) === 0 ) continue;\n\t\t\t\telse b.actif = true;\n\t\t\t}\n\n\t\t    // test is object sleep\n\t\t\tb.sleep = AR[n] > 0 ? false : true;\n\n\t\t\t// update default material\n\t        if( b.defMat ){\n\n\t        \tif( b.isInstance ){\n\t        \t\tb.instance.setColorAt( b.id, b.sleep ? Colors.sleep : Colors.body );\n\t        \t} else {\n\t        \t\tif ( !b.sleep && b.material.name === 'sleep' ) b.material = Mat.get('body');\n\t\t\t        if ( b.sleep && b.material.name === 'body' ) b.material = Mat.get('sleep');\n\t        \t}\n\t\t\t    \n\t\t\t}\n\n\t\t\tif( b.sleep && !b.isKinematic ) continue; \n\n\t\t\t// update position / rotation / velocity\n\n\t\t    if( b.isInstance ){ \n\t\t    \tif( b.speedMat ){ \n\t\t    \t\t//b.instance.setColorAt( b.id, [ Math.abs(AR[n+8])*0.5, Math.abs(AR[n+9])*0.5, Math.abs(AR[n+10])*0.5] );\n\t\t    \t\tlet v = AR[n]*0.01;///255; //MathTool.lengthArray([AR[n+8], AR[n+9], AR[n+10]]) * 0.062;\n\t\t    \t\tb.instance.setColorAt( b.id, [ v,v,v ] );\n\t\t    \t}\n\t\t    \tb.instance.setTransformAt( b.id, [AR[n+1],AR[n+2],AR[n+3]], [AR[n+4],AR[n+5],AR[n+6],AR[n+7]], b.noScale ? [1,1,1] : b.size );\n\t\t    \tb.position = {x:AR[n+1], y:AR[n+2], z:AR[n+3]};\n\t\t    \t///b.quaternion = {x:AR[n+4], y:AR[n+5], z:AR[n+6], w:AR[n+7]}\n\t\t    \tb.quaternion = {_x:AR[n+4], _y:AR[n+5], _z:AR[n+6], _w:AR[n+7]};\n\t\t    \tif( this.needMatrix ) b.matrixWorld.compose( b.position, b.quaternion, {x:1, y:1, z:1}); \n\t\t    \tif( this.full ){\n\t\t    \t\tb.velocity = {x:AR[n+8], y:AR[n+9], z:AR[n+10]};\n\t\t    \t\tb.angular = {x:AR[n+11], y:AR[n+12], z:AR[n+13]};\n\t\t    \t}\n\t\t    }\n\t\t    else {\n\t\t    \tb.position.fromArray( AR, n + 1 );\n\t\t        b.quaternion.fromArray( AR, n + 4 );\n\t\t        if( this.full ){\n\t\t\t        b.velocity.fromArray( AR, n + 8 );\n\t\t\t        b.angular.fromArray( AR, n + 11 );\n\t\t\t    }\n\t\t        if( !b.auto ) b.updateMatrix();\n\t\t    }\n\t\t}\n\n\t}\n\n\t///\n\n\tgeometry ( o = {}, b = null, material = null ) {\n\n\t\tlet g, i, n, s = o.size, gName='';\n\t\tlet t = o.type;\n\t\tlet noScale = false, unic = false;\n\t\tlet seg = o.seg || 16;\n\n\t\tconst noIndex = root.engine === 'OIMO' || root.engine === 'JOLT' || root.engine === 'CANNON';\n\n\t\t//if( o.instance && t!== 'capsule'&& !o.radius) s = o.instanceSize || [1,1,1]\n\n\t\tif( o.instance && t === 'compound'){ \n\t\t\tt = o.shapes[0].type;\n\t\t\ts = o.shapes[0].size;\n\t\t\to.translate = o.shapes[0].pos;\n\t\t}\n\n\t\tif( t==='mesh' || t==='convex' ){\n\t\t\tif( o.shape ){\n\t\t\t\tif( o.shape.isMesh ) o.shape = o.shape.geometry;\n\t\t\t} else {\n\t\t\t\tif( o.mesh && !o.v ) o.shape = o.mesh.geometry;\n\t\t\t}\t\n\t\t}\n\n\t\tif( o.radius ){\n\t\t\tif( !o.breakable ){\n\t\t\t\tif( t === 'box' ) t = 'ChamferBox';\n\t\t\t\tif( t === 'cylinder' ) t = 'ChamferCyl';\n\t\t\t}\n\t\t}\n\n\t\tif( o.geometry ){\n\t\t\tif( t === 'convex' ) o.shape = o.geometry;\n\t\t\telse t = 'direct';\n\t\t} \n\n\n\t    //if( root.engine === 'PHYSX' && ( o.type==='cylinder' || o.type==='cone' ) ){\n\t    if( root.engine === 'PHYSX' && o.type==='cylinder' ){\n\t\t\t// convert geometry to convex if not in physics\n\t    \tlet geom = new CylinderGeometry( o.size[ 0 ], o.size[ 0 ], o.size[ 1 ], seg, 1 );//24\n\t    \tif( o.isWheel ) geom.rotateZ( -PI90 );\n\t    \to.v = MathTool.getVertex( geom );\n\t    \to.type = 'convex';\n\n\t    }\n\n\t    if( ( root.engine === 'PHYSX' || root.engine === 'HAVOK' || root.engine === 'JOLT' ) && o.type==='cone' ){\n\t    \t// convert geometry to convex if not in physics\n\t    \t//if( !o.size[2] ) o.size[2] = 0;\n\t    \t//console.log(o.size[2])\n\t    \tlet geom = new CylinderGeometry( 0, o.size[ 0 ], o.size[ 1 ], seg, 1 );//24\n\n\t    \t//o.size[2] = o.size[0]\n\t    \to.v = MathTool.getVertex( geom );\n\t    \to.type = 'convex';\n\n\t    }\n\n\t    if( o.type==='stair' ){\n\t    \to.type = 'box';\n\t    \tt = 'box';\n\t    }\n\n\t\tswitch( t ){\n\n\t\t\tcase 'direct':\n\n\t\t\t    g = o.geometry.clone();\n\t\t\t    if( o.size ) g.scale( o.size[0], o.size[1], o.size[2] );\n\n\t\t\t    unic = true;\n\t\t\t    noScale = true;\n\n\t\t\tbreak;\n\n\t\t\tcase 'convex':\n\n\t\t\t\tif( o.v ){ \n\n\t\t\t\t\tif( o.nogeo ) g = new BufferGeometry();\n\t\t\t\t\telse {\n\t\t\t\t\t\tlet vv = [];\n\t\t\t\t\t\ti = Math.floor( o.v.length/3 );\n\t\t\t\t\t\twhile( i-- ){\n\t\t\t\t\t\t\tn = i*3;\n\t\t\t\t\t\t\tvv.push( new Vector3( o.v[n], o.v[n+1], o.v[n+2] ) );\n\t\t\t\t\t\t}\n\t\t\t\t\t\tg = new ConvexGeometry( vv );\n\t\t\t\t\t\t//o.v = math.getVertex( g )\n\t\t\t\t\t\t//o.index = math.getIndex( g )\n\t\t\t\t\t\t//console.log(o.v, o.index)\n\t\t\t\t\t}\n\t\t\t\t\tunic = true;\n\t\t\t\t\tnoScale = true;\n\t\t\t\t}\n\n\t\t\t\tif( o.shape ){\n\n\t\t\t\t\tg = o.shape.clone();\n\t\t\t\t\tif( o.size ) g.scale( o.size[0], o.size[0], o.size[0] );\n\t\t\t\t\tif( o.shapeScale ) g.scale( o.shapeScale[0], o.shapeScale[1], o.shapeScale[2] );\n\n\t\t\t\t\tlet tg = noIndex ? MathTool.toNonIndexed(g) : null;\n\t\t\t\t\to.v = MathTool.getVertex( tg || g, noIndex );\n\t\t\t\t\to.index = MathTool.getIndex( tg || g, noIndex );\n\t\t\t\t\tif(root.engine === 'CANNON');\n\n\t\t\t\t\tunic = true;\n\t\t\t\t\tnoScale = true;\n\t\t\t\t}\n\n\t\t\t\tif(!g.boundingBox) g.computeBoundingBox();\n\t\t\t\tlet bx = g.boundingBox;\n\t\t\t    o.boxSize = [ -bx.min.x + bx.max.x, -bx.min.y + bx.max.y, -bx.min.z + bx.max.z ];\n\n\t\t\tbreak;\n\n\t\t\tcase 'mesh':\n\n\t\t\t\tg = o.shape.clone();\n\t\t\t\tif( o.size ) g.scale( o.size[0], o.size[0], o.size[0] );\n\t\t\t\t\n\t\t\t\to.v = MathTool.getVertex( g, noIndex );\n\t\t\t\to.index = MathTool.getIndex( g, noIndex );\n\t\t\t\t\n\t\t\t\t\n\t\t\t\tunic = true;\n\t\t\t\tnoScale = true;\n\t\t\t\n\t\t\tbreak;\n\n\t\t\tcase 'customSphere':\n\n\t\t\t    gName = 'customSphere_' + s[ 0 ];\n\n\t\t\t    g = Geo.get( gName );\n\t\t\t    if(!g){\n\t\t\t    \tg = new SphereGeometry( s[ 0 ], o.seg1 || 32, o.seg2 || 16 );\n\t\t\t\t\tg.name = gName;\n\t\t\t    } else {\n\t\t\t\t\tgName = '';\n\t\t\t\t}\n\t\t\t    noScale = true;\n\t\t\t    o.type = 'sphere';\n\n\t\t\tbreak;\n\n\t\t\tcase 'highSphere':\n\n\t\t\t    gName = 'highSphere_' + s[ 0 ];\n\n\t\t\t    g = Geo.get( gName );\n\t\t\t    if(!g){\n\t\t\t    \tg = new SphereBox( s[ 0 ] );\n\t\t\t\t\tg.name = gName;\n\t\t\t    } else {\n\t\t\t\t\tgName = '';\n\t\t\t\t}\n\t\t\t    noScale = true;\n\t\t\t    o.type = 'sphere';\n\n\t\t\tbreak;\n\n\t\t\tcase 'capsule':\n\n\t\t\t    gName = 'capsule_' + s[ 0 ] +'_'+s[ 1 ] + '_' + seg; \n\n\t\t\t    g = Geo.get( gName );\n\t\t\t    if(!g){\n\t\t\t    \t//if( o.helper ) g = new CapsuleHelperGeometry( s[ 0 ], s[ 1 ] )\n\t\t\t\t\t//else \n\t\t\t\t\tg = new Capsule( s[ 0 ], s[ 1 ], seg );\n\t\t\t\t\tg.name = gName;\n\t\t\t\t} else {\n\t\t\t\t\tgName = '';\n\t\t\t\t}\n\t\t\t\tnoScale = true;\n\t\t\tbreak;\n\n\t\t\tcase 'ChamferBox':\n\n\t\t\t    gName = 'ChamferBox_' + s[ 0 ] +'_'+ s[ 1 ] +'_'+ s[ 2 ] + '_' + o.radius; \n\n\t\t\t    //console.log(s, o.radius)\n\t\t\t    g = Geo.get( gName );\n\t\t\t    if(!g){\n\t\t\t\t\tg = new ChamferBox( s[ 0 ], s[ 1 ], s[ 2 ], o.radius );\n\t\t\t\t\tg.name = gName;\n\t\t\t\t} else {\n\t\t\t\t\tgName = '';\n\t\t\t\t}\n\t\t\t\tnoScale = true;\n\t\t\tbreak;\n\n\t\t\tcase 'ChamferCyl':\n\n\t\t\t    gName = 'ChamferCyl_' + s[ 0 ] +'_'+ s[ 1 ] +'_'+ s[ 2 ] + '_' + o.radius + '_' + seg;\n\n\t\t\t    g = Geo.get( gName );\n\t\t\t    if(!g){\n\t\t\t\t\tg = new ChamferCyl( s[ 0 ], s[ 0 ], s[ 1 ], o.radius, seg );\n\t\t\t\t\tg.name = gName;\n\t\t\t\t} else {\n\t\t\t\t\tgName = '';\n\t\t\t\t}\n\t\t\t\tnoScale = true;\n\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t    if( !o.breakable ) g = Geo.get(t); //geo[ t ];\n\t\t\t    else {\n\t\t\t    \tg = Geo.get(t).clone();\n\t\t\t    \tg.scale( s[0], s[1], s[2] );\n\t\t\t    \tunic = true;\n\t\t\t    \tnoScale = true;\n\t\t\t    }\n\t\t\tbreak;\n\n\t\t}\n\n\n\t\tif( o.translate ) g.translate( o.translate[0], o.translate[1], o.translate[2]);\n\n\n\t\t// clear untranspherable variable for phy\n    \tif( o.shape ) delete o.shape;\n    \tif( o.geometry ) delete o.geometry;\n\n\n    \tif ( g.attributes.uv === undefined || o.autoUV ){\n\t\t\t\t//console.log(o.shape)\n\t\t\t\tcreateUV(g, 'box', 5.0, o.pos, o.quat );\n\t\t}\n\n\n    \t// reuse complex geometry\n    \tif( gName !== '' ) Geo.set( g );\n\n    \tif( o.isWheel ){\n    \t\tg = g.clone();\n    \t\tg.rotateZ( -PI90 );\n    \t\tunic = true;\n    \t}\n    \t\n    \t// unic geometry dispose on reset \n    \tif( unic ) Geo.unic(g);\n\n    \t\n\n\n    \tif( b === null && material === null ){\n    \t\tg.noScale = noScale; \n    \t\treturn g\n    \t}\n\n    \tif( o.meshRemplace && o.debug ) material = Mat.get( 'debug' );\n    \t//if( o.debug ) material = Mat.get( 'debug' )\n    \t//if( o.helper ) material = Mat.get( 'hide' )\n\n    \t//if( o.instance ) return\n\n    \t//console.log( material.name )\n\n\t\tlet m = new Mesh( g, material );\n\n\t\tif( o.button ) m.isButton = true;\n\n\t\t//if( o.helper ) m.add( new LineSegments( new CapsuleHelperGeometry( s[ 0 ], s[ 1 ] ),  Mat.get( 'line' ) ))\n\t\tif( o.helper ) {\n\n\t\t\tlet hcolor = o.hcolor || [0.3,0.1,0.0];\n\t\t\tlet hcolor2 = o.hcolor2 || [0.8,0.2,0.0];\n\n\t\t\t// TODO bug with character\n\t\t\tlet hh = new CapsuleHelper( s[ 0 ], s[ 1 ]+(s[ 0 ]*2), false, Mat.get( 'liner' ), hcolor, hcolor2, true );\n\t\t\tm.add( hh );\n\t\t\tm.userData['helper'] = hh;\n\n\t\t}\n\n\t\tif( o.localRot ) o.localQuat = MathTool.quatFromEuler(o.localRot); //math.toQuatArray( o.localRot )\n\t\tif( o.localPos ) m.position.fromArray( o.localPos );\n\t\tif( o.localQuat ) m.quaternion.fromArray( o.localQuat );\n\n    \tif( !noScale ) m.scale.fromArray( o.size );\n    \t//if( unic ) m.unic = true\n\n    \t// disable raycast\n    \tif(o.ray !== undefined){\n    \t\tif( !o.ray ) m.raycast = () => {return};\n    \t}\n\n    \t// add or not add\n    \tif( !o.meshRemplace || o.debug ){ \n    \t\tb.add( m );\n    \t\tif(m.userData.helper) b.over = (b)=>{ m.userData.helper.over(b); };\n    \t}\n\n\t}\n\n\tadd ( o = {} ) {\n\n\t\tif(o.worldScale){\n\t\t\to = this.scaler( o, o.worldScale );\n\t\t\tdelete o.worldScale;\n\t\t}\n\n\t\t//this.tmpVolume = 0\n\n\t\t//console.log('add', o.type )\n\n\t\tlet i, n, name, volume = 0;\n\n\t\tif( !o.instance ) name = this.setName( o );\n\n\t\to.type = o.type === undefined ? 'box' : o.type;\n\n\t\tif( o.type === 'plane' && !o.visible ) o.visible = false;\n\n\t\tif( o.type === 'stair'){ \n\n\t\t\tlet v1 = new Vector3(0,0,o.size[2]);\n\t\t\tlet v2 = new Vector3(0, o.size[1]*0.5,o.size[2]*0.5);\n\t\t\tlet angle = v1.angleTo(v2);\n\t\t\tlet dist = v1.distanceTo(v2);\n\t\t\to.rot = [angle * todeg$1,0,0];\n\t\t\to.size[1] *= o.div || 0.2;\n\t\t\to.size[2] = dist*2;\n\t\t\n\t\t    let p1 = new Vector3(0,-o.size[1]*0.5,0);\n\t\t    p1.applyAxisAngle({x:1, y:0, z:0}, angle);\n\t\t\to.pos[1] += p1.y;\n\t\t\to.pos[2] += p1.z;\n\n\t\t}\n\n\t\t// change default center of mass \n\t\tif( o.massCenter && root.engine !== 'PHYSX'){\n\t\t\tif( o.type !== 'compound' ){\n\t\t\t\t//o.localPos = o.massCenter\n\t\t\t\to.shapes = [{ type:o.type, pos:o.massCenter, size:o.size }];\n\t\t\t\tif( o.seg ) o.shapes[0].seg = o.seg;\n\t\t\t\tif( o.radius ) o.shapes[0].radius = o.radius;\n\t\t\t\tdelete o.size; // ?? TODO\n\t\t\t\to.type = 'compound';\n\t\t\t} else {\n\t\t\t\tfor ( i = 0; i < o.shapes.length; i ++ ) {\n\t\t\t\t\tn = o.shapes[ i ];\n\t\t\t\t\tif( n.pos ) n.pos = Utils.vecAdd( n.pos, o.massCenter );\n\t\t\t\t\telse n.pos = o.massCenter;\n\t\t\t\t\tGeo.unic(n);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif( o.collision !== undefined ){\n\t\t\tif(o.collision === false){\n\t\t\t\tif( root.engine === 'PHYSX' ) o.flags = 0;\n\t\t\t\tif( root.engine === 'OIMO' ) o.mask = 0;\n\t\t\t\t//o.mask = 0\n\t\t\t}\n\t\t\t\n\t\t}\n\n\t\t//----------------------------\n\t\t//  Position, Rotation, Size\n\t\t//----------------------------\n\n\t\to.pos = o.pos === undefined ? [ 0, 0, 0 ] : o.pos;\n\n\t\t// rotation is in degree or Quaternion\n\t    o.quat = o.quat === undefined ? [ 0, 0, 0, 1 ] : o.quat;\n\t    // convert euler degree to Quaternion\n\t    if( o.rot !== undefined ) o.quat = MathTool.quatFromEuler(o.rot);\n\t    if( o.meshRot !== undefined ) o.meshQuat = MathTool.quatFromEuler(o.meshRot);\n\n\t    //o.size = o.size == undefined ? [ 1, 1, 1 ] : math.correctSize( o.size );\n\t    o.size = MathTool.autoSize( o.size, o.type );\n\t    if( o.meshScale ) o.meshScale = MathTool.autoSize( o.meshScale );\n\n\n\t    //--------------------\n\t\t//  Material\n\t\t//--------------------\n\n\t    let material, noMat = false;\n\n\t    if( o.visible === false ) o.material = 'hide';\n\n\t    if ( o.material !== undefined ) {\n\t    \tif ( o.material.constructor === String ) material = Mat.get( o.material );\n\t    \telse material = o.material;\n\t    } else {\n\t    \tnoMat = true;\n\t    \t//defMat = this.type === 'body'\n\t    \tmaterial = Mat.get( this.type );\n\t    \tif( o.instance ) material = Mat.get( 'base' );\n\t    }\n\n\t    if( o.unicMat ) {\n\t    \tmaterial = material.clone();\n\t    \t//root.tmpMat.push( material )\n\t    \tMat.addToTmp( material );\n\t    }\n\n\n\t    //--------------------\n\t\t//  Define Object\n\t\t//--------------------\n\n\t    let b = o.instance ? {} : new Basic3D();\n\n\t    if( o.mesh && !o.instance ){\n\n\t    \t//if( o.isTerrain ) o.noClone = true\n\t    \tif( o.mesh.type === 'terrain' ) o.noClone = true;\n\n\t    \tlet mm = o.noClone ? o.mesh : o.mesh.clone();\n\n\t    \tmm.position.fromArray( o.meshPos || [0,0,0]);\n\t    \t//if( o.meshRot ) { o.meshQuat = MathTool.quatFromEuler(o.meshRot); delete o.meshRot; }\n\t    \tif( o.meshQuat ) mm.quaternion.fromArray( o.meshQuat );\n\t    \tif( o.meshSize ) mm.scale.set(1,1,1).multiplyScalar(o.meshSize);\n\t    \tif( o.meshScale ) mm.scale.fromArray( o.meshScale );\n\t    \t\n\t    \tif( !noMat ){ \n\t    \t\tmm.material = material;\n\t    \t\tif(mm.children && !o.nofullmat ) for(let k in mm.children) mm.children[k].material = material;\n\t    \t}\n\n\t    \troot.tmpMesh.push(mm);\n\n\t    \to.meshRemplace = true;\n\t    \tb.add( mm );\n\n\t    }\n\n\t    //--------------------\n\t\t//  Define Geometry\n\t\t//--------------------\n\n\t    switch( o.type ){\n\n\t    \tcase 'null': break;\n\n\t    \tcase 'compound':\n\n\t    \t    for ( i = 0; i < o.shapes.length; i ++ ) {\n\n\t\t\t\t\tn = o.shapes[ i ];\n\n\t\t\t\t\tn.type = n.type === undefined ? 'box' : n.type;\n\t\t\t\t\t//n.size = n.size === undefined ? [ 1, 1, 1 ] : math.correctSize( n.size );\n\t\t\t\t\tn.size = MathTool.autoSize( n.size, n.type );\n\n\t\t\t\t\tif( n.pos ) n.localPos = n.pos;\n\t\t\t\t\tif( n.rot !== undefined ) n.quat = MathTool.quatFromEuler(n.rot);\n\t\t\t\t\tif( n.quat ) n.localQuat = n.quat;\n\t\t\t\t\t\n\t\t\t\t\tn.debug = o.debug;// || root.debug;\n\t\t\t\t\tn.meshRemplace = o.meshRemplace || false;\n\n\t\t\t\t\tif( !o.instance ) this.geometry( n, b, material );\n\t\t\t\t\telse if( n.type === 'convex' ){ \n\t\t\t\t    \tn.v = MathTool.getVertex( n.shape, false );\n\t\t\t\t    }\n\t\t\t\t\tvolume += MathTool.getVolume( n.type, n.size, n.v );\n\t\t\t\t\t//console.log(n.type, n.size)\n\n\t\t\t\t}\n\n\t\t\t\t//console.log(volume, name)\n\n\t    \tbreak;\n\t    \tdefault:\n\n\t\t\t    if( !o.instance ) this.geometry( o, b, material );\n\t\t\t    // TODO fix that \n\t\t\t    else if( o.type === 'convex' ){ \n\t\t\t    \to.v = MathTool.getVertex( o.shape, false );\n\t\t\t    }\n\t\t\t    // TODO bug with instance !!!\n\t\t\t    //else o.size = MathTool.autoSize( o.size, o.type );\n\t\t\t    volume = MathTool.getVolume( o.type, o.size, o.v );\n\n\t\t\tbreak;\n\n\t    }\n\n\n\n\t    \n\t    b.type = this.type;\n\t    b.size = o.size;\n\t\tb.shapetype = o.type;\n\t\tb.isKinematic = o.kinematic || false;\n\t\tb.link = 0;\n\n\t\tb.meshSize = o.meshSize ? o.meshSize : 1;\n\n\n\t\t\n\n\t\t// for buttton only\n\t\tif( o.button ) b.isButton = true;\n\n\t    // enable or disable raycast\n\t    b.isRay = true;//b.type === 'body' || b.isButton ? true : false\n\t    //if( o.ray !== undefined ) b.isRay = o.ray; \n\t    if( o.ray !== undefined ) b.setRaycast( o.ray );\n\t    if( !o.instance ) b.setRaycast();\n\n\n\t    // NO NEED ??\n\t\t//if( !noMat ) b.material = material\n\t\tb.defMat = false;\n\t\t\n\t\tif( b.material && noMat ) b.defMat = b.material.name === 'body';\n\n\n\t    //--------------------\n\t\t//  Instance\n\t\t//--------------------\n\n\t\tif( o.instance ){ \n\n\t\t\tb.isInstance = true;\n\t\t\tb.instance = this.getInstance( o, material );\n\t\t\tb.instance.isRay = b.isRay;\n\n\t\t\tb.over = b.instance.over;\n\t\t\tb.isOver = false;\n\n\t\t\tb.speedMat = o.speedMat || false;\n\n\t\t\tb.defMat = b.instance.material.name === 'base';\n\t\t\t\n\t\t\tb.id = b.instance.count;\n\t\t\t//b.unicId = MathUtils.generateUUID();\n\n\t\t\t//b.mass = o.mass || 0\n\n\t\t\tb.refName = b.instance.name + b.id;\n\t\t\tb.name = b.instance.name + b.id;\n\n\t\t\tif( o.name ) b.name = o.name;\n\t\t\to.name = b.name;\n\n\t\t\tb.noScale = b.instance.noScale;//false//o.type!=='box' || o.type!=='ChamferBox' || o.type!=='sphere';\n\t\t\tif(o.sizeByInstance) b.noScale = false;\n\t\t\t//if(o.type === 'sphere') b.noScale = false\n\t\t    //if( o.type === 'capsule' ) b.noScale = true\n\t\t    //if( o.type === 'box' ) b.noScale = true\n\t\t\t//if(o.radius) b.noScale = true\n\n\t\t\tlet color = o.color;\n\t\t\tif( b.defMat ) color = o.sleep ? Colors.sleep : Colors.body;\n\n\t\t\tb.instance.add( b, o.pos, o.quat, b.noScale ? [1,1,1] : b.size, color );\n\n\t\t\tb.position = {x:o.pos[0], y:o.pos[1], z:o.pos[2]};\n\t\t\tb.quaternion = {_x:o.quat[0], _y:o.quat[1], _z:o.quat[2], _w:o.quat[3]};\n\t\t    b.velocity = {x:0, y:0, z:0};\n\t\t    b.angular = {x:0, y:0, z:0};\n\t\t    b.link = 0;\n\t\t    if( this.needMatrix ) b.matrixWorld = new Matrix4();\n\n\t\t\t// for convex\n\t\t\tif(b.instance.v) o.v = b.instance.v;\n\t\t\tif(b.instance.index) o.index = b.instance.index;\n\t\t    o.type = b.instance.type;\n\n\t\t    //console.log(o.v)\n\n\t\t\t/*if( this.extraConvex && ( o.type==='cylinder' || o.type==='cone') ){\n\t\t    \to.v = b.instance.v;\n\t\t    \to.type = 'convex';\n\t\t    }*/\n\n\n\t\t\t//console.log( b )\n\n\t\t} else {\n\n\t\t\tb.name = name;\n\n\t\t\tif( o.renderOrder ) b.renderOrder = o.renderOrder;\n\t\t\tif( o.visible === undefined ) o.visible = true;\n\t\t\tif( o.shadow === undefined ) o.shadow = o.visible;\n\n\t\t\tb.visible = o.visible !== undefined ? o.visible : true;\n\t\t    b.receiveShadow = o.shadow;\n\t\t    b.castShadow = o.shadow;\n\n\t\t    b.overMaterial = Mat.get( 'outline' );\n\n\t\t    // apply option\n\t\t\tthis.set( o, b );\n\n\t\t}\n\n\t\t//---------------------------\n\t\t//  Breakable\n\t\t//---------------------------\n\n    \tif( o.breakable ){\n\n    \t\troot.motor.addBreaker();\n\t\t\tlet child = b.children[0];\n\t\t\tb.remove(child);\n\t\t\tb = child;\n\t\t\tb.name = name;\n\t\t\tb.type = this.type;\n\t\t\t//b.density = o.density;\n\t\t\tb.breakable = true;\n\t\t\tb.breakOption = o.breakOption !== undefined ? o.breakOption : [ 250, 1, 2, 1 ];\n\t\t\t//b.userData.mass = o.mass;\n\t\t}\n\n\t\t// for skeleton mesh\n\n\t\t/*if( o.bone ){\n\n\t\t\tb.userData.decal = o.decal;\n            b.userData.decalinv = o.decalinv;\n            b.userData.bone = o.bone;\n\t\t    \n\n\t\t    delete o.bone\n\t\t    delete o.decal\n\t\t    delete o.decalinv\n\t\t}*/\n\n\t\t//o.volume = this.tmpVolume\n\n\t\t//---------------------------\n\t\t//  Mass and Density\n\t\t//---------------------------\n\n\t\tb.mass = o.mass || 0;\n\t\tb.density = o.density || 0;\n\n\t\tif( b.density && !b.mass ) b.mass = MathTool.massFromDensity( b.density, volume );\n\t\telse if( b.mass && !b.density ){ \n\t\t\tb.density = MathTool.densityFromMass( b.mass, volume );\n\t\t\t//  force density for engin don't have mass\n\t\t\tif( root.engine === 'RAPIER' || root.engine === 'OIMO') o.density = b.density;\n\t\t\t//if( root.engine === 'PHYSX') o.density = null;\n\t\t}\n\n\t\tif( o.massInfo ) console.log( '%c'+b.name+ ' %c' + 'density:' + b.density + ' mass:'+ b.mass, \"font-size:16px\", \"font-size:12px\" );\n\n\t\t//---------------------------\n\t\t// add to three world\n\t\t//---------------------------\n\n\t\tthis.addToWorld( b, o.id );\n\n\t\tif( o.onlyMakeMesh ) return b;\n\n\t\tif( o.phySize ) o.size = o.phySize;\n\t\tif( o.phyPos ) o.pos = o.phyPos;\n\n\t\t//---------------------------\n\t\t//  Clear uneed object value\n\t\t//---------------------------\n\n\t\tif( o.rot ) delete o.rot;\n\t\tif( o.mesh ) delete o.mesh;\n\t    if( o.meshRot ) delete o.meshRot;\n\t    if( o.instance ) delete o.instance;\n\t    if( o.material ) delete o.material;\n\t\tif( o.parent ) delete o.parent;\n\n\n\t\tif( o.solver && root.engine === 'PHYSX' ){\n\t\t\t// physx only have mass for solver bone\n\t\t\to.mass = b.mass;\n\t\t\t// keep name reference of bones\n\t\t\tconst solver = this.byName( o.solver );\n\t\t\tsolver.addBone( o.name );\n\n\t\t}\n\n\t    //---------------------------\n\t\t// send to physic engine \n\t\t//---------------------------\n\n\t\troot.post( { m:'add', o:o } );\n\n\t\t//---------------------------\n\t\t// return three object3d\n\t\t//---------------------------\n\n\t\treturn b;\n\n\t}\n\n\tset ( o = {}, b = null ) {\n\n\t\tif( b === null ) b = this.byName( o.name );\n\t\tif( b === null ) return;\n\n\t\t/*if(b.isInstance){\n\n\t\t\tb.instance.setTransformAt( b.id, o.pos, o.quat, b.noScale ? [1,1,1] : b.size )\n\t\t    b.position = {x:o.pos[0], y:o.pos[1], z:o.pos[2]}\n\n\t\t}else{*/\n\t\t\tif( o.pos ) b.position.fromArray( o.pos );\n\t\t    if( o.quat ) b.quaternion.fromArray( o.quat );\n\n\t\t    b.auto = o.auto || false;\n\n\t\t    if( !b.auto ) {\n\t\t    \tb.matrixAutoUpdate = false;\n\t\t\t    b.updateMatrix();\n\t\t\t} else {\n\t\t\t\tb.matrixAutoUpdate = true;\n\t\t\t}\n\t\t//}\n\n\t}\n\n\tclearInstance( name ){\n\n\t\t//console.log('need remove instance')\n\n\t\tlet instance = root.instanceMesh[name];\n\t\tlet bodyList = instance.getBodyList();\n\n\t\troot.motor.remove( bodyList );\n\t\tinstance.dispose();\n\t\tdelete root.instanceMesh[name];\n\n\t}\n\n\tgetInstance ( o, material ) {\n\n\t\tif( root.instanceMesh[o.instance] ) return root.instanceMesh[o.instance];\n\n\t\t// Create new instance \n\n\t\to = {...o};\n\n\t\tif( o.sizeByInstance ) o.size = [1,1,1];\n\t\tlet g = this.geometry( o );\n\n\t\tif( o.mesh ) {\n\t\t\tif( !o.material && o.mesh.material ) material = o.mesh.material;\n\t\t\tg = o.mesh.isObject3D ? o.mesh.geometry.clone() : o.mesh.clone();\n\t\t\tif( o.meshSize ) g.scale( o.meshSize, o.meshSize, o.meshSize );\n\t\t\tif( o.meshScale ) g.scale( o.meshScale[0], o.meshScale[1], o.meshScale[2] );\n\t\t\tg.noScale = true;\n\t\t}\n\n\t\tlet bb = new Instance( g, material, 0 );\n\n\t\tbb.type = o.type;\n\t\tbb.noScale = g.noScale;\n\n\t\tif( bb.type === 'convex' ) bb.v = o.v;\n\t\tif( o.index ) bb.index = o.index;\n\t\t\n\n\t\t//if( bb.type==='convex' ) bb.v = MathTool.getVertex( bb.geometry )\n\n    \t//bb.matrixAutoUpdate = false\n    \t//bb.instanceMatrix.setUsage( DynamicDrawUsage )\n    \tbb.receiveShadow = o.shadow !== undefined ? o.shadow : true;\n    \tbb.castShadow = o.shadow !== undefined ? o.shadow : true;\n\n    \tbb.overMaterial = Mat.get( 'outline' );\n\n    \tbb.name = o.instance;\n\t\troot.scene.add( bb );\n\t\troot.instanceMesh[ o.instance ] = bb;\n\n\t\t//console.log('add instance')\n\n    \treturn bb;\n\n\t}\n\n\tscaler (o, s) {\n\n\t    if(o.size) o.size = math.scaleArray( o.size, s );\n\t    if(o.pos) o.pos = math.scaleArray( o.pos, s );\n\t    if(o.type === 'convex') o.shapeScale = [s,s,s];\n\t    if(o.shapes){\n\t        let i = o.shapes.length, sh;\n\t        while(i--){\n\t            sh = o.shapes[i];\n\t            if(sh.size) sh.size = math.scaleArray( sh.size, s );\n\t            if(sh.pos) sh.pos = math.scaleArray( sh.pos, s );\n\t            if(sh.type === 'convex') sh.shapeScale = [s,s,s];\n\t        }\n\t    }\n\t    if(o.mesh) o.meshScale = [s,s,s];\n\t    return o;\n\n\t}\n\n}\n\nconst COLOR_SPACE_SVG = SRGBColorSpace;\n\nclass SVGLoader extends Loader {\n\n\tconstructor( manager ) {\n\n\t\tsuper( manager );\n\n\t\t// Default dots per inch\n\t\tthis.defaultDPI = 90;\n\n\t\t// Accepted units: 'mm', 'cm', 'in', 'pt', 'pc', 'px'\n\t\tthis.defaultUnit = 'px';\n\n\t}\n\n\tload( url, onLoad, onProgress, onError ) {\n\n\t\tconst scope = this;\n\n\t\tconst loader = new FileLoader( scope.manager );\n\t\tloader.setPath( scope.path );\n\t\tloader.setRequestHeader( scope.requestHeader );\n\t\tloader.setWithCredentials( scope.withCredentials );\n\t\tloader.load( url, function ( text ) {\n\n\t\t\ttry {\n\n\t\t\t\tonLoad( scope.parse( text ) );\n\n\t\t\t} catch ( e ) {\n\n\t\t\t\tif ( onError ) {\n\n\t\t\t\t\tonError( e );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.error( e );\n\n\t\t\t\t}\n\n\t\t\t\tscope.manager.itemError( url );\n\n\t\t\t}\n\n\t\t}, onProgress, onError );\n\n\t}\n\n\tparse( text ) {\n\n\t\tconst scope = this;\n\n\t\tfunction parseNode( node, style ) {\n\n\t\t\tif ( node.nodeType !== 1 ) return;\n\n\t\t\tconst transform = getNodeTransform( node );\n\n\t\t\tlet isDefsNode = false;\n\n\t\t\tlet path = null;\n\n\t\t\tswitch ( node.nodeName ) {\n\n\t\t\t\tcase 'svg':\n\t\t\t\t\tstyle = parseStyle( node, style );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'style':\n\t\t\t\t\tparseCSSStylesheet( node );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'g':\n\t\t\t\t\tstyle = parseStyle( node, style );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'path':\n\t\t\t\t\tstyle = parseStyle( node, style );\n\t\t\t\t\tif ( node.hasAttribute( 'd' ) ) path = parsePathNode( node );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'rect':\n\t\t\t\t\tstyle = parseStyle( node, style );\n\t\t\t\t\tpath = parseRectNode( node );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'polygon':\n\t\t\t\t\tstyle = parseStyle( node, style );\n\t\t\t\t\tpath = parsePolygonNode( node );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'polyline':\n\t\t\t\t\tstyle = parseStyle( node, style );\n\t\t\t\t\tpath = parsePolylineNode( node );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'circle':\n\t\t\t\t\tstyle = parseStyle( node, style );\n\t\t\t\t\tpath = parseCircleNode( node );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'ellipse':\n\t\t\t\t\tstyle = parseStyle( node, style );\n\t\t\t\t\tpath = parseEllipseNode( node );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'line':\n\t\t\t\t\tstyle = parseStyle( node, style );\n\t\t\t\t\tpath = parseLineNode( node );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'defs':\n\t\t\t\t\tisDefsNode = true;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'use':\n\t\t\t\t\tstyle = parseStyle( node, style );\n\n\t\t\t\t\tconst href = node.getAttributeNS( 'http://www.w3.org/1999/xlink', 'href' ) || '';\n\t\t\t\t\tconst usedNodeId = href.substring( 1 );\n\t\t\t\t\tconst usedNode = node.viewportElement.getElementById( usedNodeId );\n\t\t\t\t\tif ( usedNode ) {\n\n\t\t\t\t\t\tparseNode( usedNode, style );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tconsole.warn( 'SVGLoader: \\'use node\\' references non-existent node id: ' + usedNodeId );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\t\t\t\t\t// console.log( node );\n\n\t\t\t}\n\n\t\t\tif ( path ) {\n\n\t\t\t\tif ( style.fill !== undefined && style.fill !== 'none' ) {\n\n\t\t\t\t\tpath.color.setStyle( style.fill, COLOR_SPACE_SVG );\n\n\t\t\t\t}\n\n\t\t\t\ttransformPath( path, currentTransform );\n\n\t\t\t\tpaths.push( path );\n\n\t\t\t\tpath.userData = { node: node, style: style };\n\n\t\t\t}\n\n\t\t\tconst childNodes = node.childNodes;\n\n\t\t\tfor ( let i = 0; i < childNodes.length; i ++ ) {\n\n\t\t\t\tconst node = childNodes[ i ];\n\n\t\t\t\tif ( isDefsNode && node.nodeName !== 'style' && node.nodeName !== 'defs' ) {\n\n\t\t\t\t\t// Ignore everything in defs except CSS style definitions\n\t\t\t\t\t// and nested defs, because it is OK by the standard to have\n\t\t\t\t\t// <style/> there.\n\t\t\t\t\tcontinue;\n\n\t\t\t\t}\n\n\t\t\t\tparseNode( node, style );\n\n\t\t\t}\n\n\n\t\t\tif ( transform ) {\n\n\t\t\t\ttransformStack.pop();\n\n\t\t\t\tif ( transformStack.length > 0 ) {\n\n\t\t\t\t\tcurrentTransform.copy( transformStack[ transformStack.length - 1 ] );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tcurrentTransform.identity();\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction parsePathNode( node ) {\n\n\t\t\tconst path = new ShapePath();\n\n\t\t\tconst point = new Vector2();\n\t\t\tconst control = new Vector2();\n\n\t\t\tconst firstPoint = new Vector2();\n\t\t\tlet isFirstPoint = true;\n\t\t\tlet doSetFirstPoint = false;\n\n\t\t\tconst d = node.getAttribute( 'd' );\n\n\t\t\tif ( d === '' || d === 'none' ) return null;\n\n\t\t\t// console.log( d );\n\n\t\t\tconst commands = d.match( /[a-df-z][^a-df-z]*/ig );\n\n\t\t\tfor ( let i = 0, l = commands.length; i < l; i ++ ) {\n\n\t\t\t\tconst command = commands[ i ];\n\n\t\t\t\tconst type = command.charAt( 0 );\n\t\t\t\tconst data = command.slice( 1 ).trim();\n\n\t\t\t\tif ( isFirstPoint === true ) {\n\n\t\t\t\t\tdoSetFirstPoint = true;\n\t\t\t\t\tisFirstPoint = false;\n\n\t\t\t\t}\n\n\t\t\t\tlet numbers;\n\n\t\t\t\tswitch ( type ) {\n\n\t\t\t\t\tcase 'M':\n\t\t\t\t\t\tnumbers = parseFloats( data );\n\t\t\t\t\t\tfor ( let j = 0, jl = numbers.length; j < jl; j += 2 ) {\n\n\t\t\t\t\t\t\tpoint.x = numbers[ j + 0 ];\n\t\t\t\t\t\t\tpoint.y = numbers[ j + 1 ];\n\t\t\t\t\t\t\tcontrol.x = point.x;\n\t\t\t\t\t\t\tcontrol.y = point.y;\n\n\t\t\t\t\t\t\tif ( j === 0 ) {\n\n\t\t\t\t\t\t\t\tpath.moveTo( point.x, point.y );\n\n\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\tpath.lineTo( point.x, point.y );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif ( j === 0 ) firstPoint.copy( point );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'H':\n\t\t\t\t\t\tnumbers = parseFloats( data );\n\n\t\t\t\t\t\tfor ( let j = 0, jl = numbers.length; j < jl; j ++ ) {\n\n\t\t\t\t\t\t\tpoint.x = numbers[ j ];\n\t\t\t\t\t\t\tcontrol.x = point.x;\n\t\t\t\t\t\t\tcontrol.y = point.y;\n\t\t\t\t\t\t\tpath.lineTo( point.x, point.y );\n\n\t\t\t\t\t\t\tif ( j === 0 && doSetFirstPoint === true ) firstPoint.copy( point );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'V':\n\t\t\t\t\t\tnumbers = parseFloats( data );\n\n\t\t\t\t\t\tfor ( let j = 0, jl = numbers.length; j < jl; j ++ ) {\n\n\t\t\t\t\t\t\tpoint.y = numbers[ j ];\n\t\t\t\t\t\t\tcontrol.x = point.x;\n\t\t\t\t\t\t\tcontrol.y = point.y;\n\t\t\t\t\t\t\tpath.lineTo( point.x, point.y );\n\n\t\t\t\t\t\t\tif ( j === 0 && doSetFirstPoint === true ) firstPoint.copy( point );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'L':\n\t\t\t\t\t\tnumbers = parseFloats( data );\n\n\t\t\t\t\t\tfor ( let j = 0, jl = numbers.length; j < jl; j += 2 ) {\n\n\t\t\t\t\t\t\tpoint.x = numbers[ j + 0 ];\n\t\t\t\t\t\t\tpoint.y = numbers[ j + 1 ];\n\t\t\t\t\t\t\tcontrol.x = point.x;\n\t\t\t\t\t\t\tcontrol.y = point.y;\n\t\t\t\t\t\t\tpath.lineTo( point.x, point.y );\n\n\t\t\t\t\t\t\tif ( j === 0 && doSetFirstPoint === true ) firstPoint.copy( point );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'C':\n\t\t\t\t\t\tnumbers = parseFloats( data );\n\n\t\t\t\t\t\tfor ( let j = 0, jl = numbers.length; j < jl; j += 6 ) {\n\n\t\t\t\t\t\t\tpath.bezierCurveTo(\n\t\t\t\t\t\t\t\tnumbers[ j + 0 ],\n\t\t\t\t\t\t\t\tnumbers[ j + 1 ],\n\t\t\t\t\t\t\t\tnumbers[ j + 2 ],\n\t\t\t\t\t\t\t\tnumbers[ j + 3 ],\n\t\t\t\t\t\t\t\tnumbers[ j + 4 ],\n\t\t\t\t\t\t\t\tnumbers[ j + 5 ]\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tcontrol.x = numbers[ j + 2 ];\n\t\t\t\t\t\t\tcontrol.y = numbers[ j + 3 ];\n\t\t\t\t\t\t\tpoint.x = numbers[ j + 4 ];\n\t\t\t\t\t\t\tpoint.y = numbers[ j + 5 ];\n\n\t\t\t\t\t\t\tif ( j === 0 && doSetFirstPoint === true ) firstPoint.copy( point );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'S':\n\t\t\t\t\t\tnumbers = parseFloats( data );\n\n\t\t\t\t\t\tfor ( let j = 0, jl = numbers.length; j < jl; j += 4 ) {\n\n\t\t\t\t\t\t\tpath.bezierCurveTo(\n\t\t\t\t\t\t\t\tgetReflection( point.x, control.x ),\n\t\t\t\t\t\t\t\tgetReflection( point.y, control.y ),\n\t\t\t\t\t\t\t\tnumbers[ j + 0 ],\n\t\t\t\t\t\t\t\tnumbers[ j + 1 ],\n\t\t\t\t\t\t\t\tnumbers[ j + 2 ],\n\t\t\t\t\t\t\t\tnumbers[ j + 3 ]\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tcontrol.x = numbers[ j + 0 ];\n\t\t\t\t\t\t\tcontrol.y = numbers[ j + 1 ];\n\t\t\t\t\t\t\tpoint.x = numbers[ j + 2 ];\n\t\t\t\t\t\t\tpoint.y = numbers[ j + 3 ];\n\n\t\t\t\t\t\t\tif ( j === 0 && doSetFirstPoint === true ) firstPoint.copy( point );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'Q':\n\t\t\t\t\t\tnumbers = parseFloats( data );\n\n\t\t\t\t\t\tfor ( let j = 0, jl = numbers.length; j < jl; j += 4 ) {\n\n\t\t\t\t\t\t\tpath.quadraticCurveTo(\n\t\t\t\t\t\t\t\tnumbers[ j + 0 ],\n\t\t\t\t\t\t\t\tnumbers[ j + 1 ],\n\t\t\t\t\t\t\t\tnumbers[ j + 2 ],\n\t\t\t\t\t\t\t\tnumbers[ j + 3 ]\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tcontrol.x = numbers[ j + 0 ];\n\t\t\t\t\t\t\tcontrol.y = numbers[ j + 1 ];\n\t\t\t\t\t\t\tpoint.x = numbers[ j + 2 ];\n\t\t\t\t\t\t\tpoint.y = numbers[ j + 3 ];\n\n\t\t\t\t\t\t\tif ( j === 0 && doSetFirstPoint === true ) firstPoint.copy( point );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'T':\n\t\t\t\t\t\tnumbers = parseFloats( data );\n\n\t\t\t\t\t\tfor ( let j = 0, jl = numbers.length; j < jl; j += 2 ) {\n\n\t\t\t\t\t\t\tconst rx = getReflection( point.x, control.x );\n\t\t\t\t\t\t\tconst ry = getReflection( point.y, control.y );\n\t\t\t\t\t\t\tpath.quadraticCurveTo(\n\t\t\t\t\t\t\t\trx,\n\t\t\t\t\t\t\t\try,\n\t\t\t\t\t\t\t\tnumbers[ j + 0 ],\n\t\t\t\t\t\t\t\tnumbers[ j + 1 ]\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tcontrol.x = rx;\n\t\t\t\t\t\t\tcontrol.y = ry;\n\t\t\t\t\t\t\tpoint.x = numbers[ j + 0 ];\n\t\t\t\t\t\t\tpoint.y = numbers[ j + 1 ];\n\n\t\t\t\t\t\t\tif ( j === 0 && doSetFirstPoint === true ) firstPoint.copy( point );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'A':\n\t\t\t\t\t\tnumbers = parseFloats( data, [ 3, 4 ], 7 );\n\n\t\t\t\t\t\tfor ( let j = 0, jl = numbers.length; j < jl; j += 7 ) {\n\n\t\t\t\t\t\t\t// skip command if start point == end point\n\t\t\t\t\t\t\tif ( numbers[ j + 5 ] == point.x && numbers[ j + 6 ] == point.y ) continue;\n\n\t\t\t\t\t\t\tconst start = point.clone();\n\t\t\t\t\t\t\tpoint.x = numbers[ j + 5 ];\n\t\t\t\t\t\t\tpoint.y = numbers[ j + 6 ];\n\t\t\t\t\t\t\tcontrol.x = point.x;\n\t\t\t\t\t\t\tcontrol.y = point.y;\n\t\t\t\t\t\t\tparseArcCommand(\n\t\t\t\t\t\t\t\tpath, numbers[ j ], numbers[ j + 1 ], numbers[ j + 2 ], numbers[ j + 3 ], numbers[ j + 4 ], start, point\n\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t\tif ( j === 0 && doSetFirstPoint === true ) firstPoint.copy( point );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'm':\n\t\t\t\t\t\tnumbers = parseFloats( data );\n\n\t\t\t\t\t\tfor ( let j = 0, jl = numbers.length; j < jl; j += 2 ) {\n\n\t\t\t\t\t\t\tpoint.x += numbers[ j + 0 ];\n\t\t\t\t\t\t\tpoint.y += numbers[ j + 1 ];\n\t\t\t\t\t\t\tcontrol.x = point.x;\n\t\t\t\t\t\t\tcontrol.y = point.y;\n\n\t\t\t\t\t\t\tif ( j === 0 ) {\n\n\t\t\t\t\t\t\t\tpath.moveTo( point.x, point.y );\n\n\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\tpath.lineTo( point.x, point.y );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif ( j === 0 ) firstPoint.copy( point );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'h':\n\t\t\t\t\t\tnumbers = parseFloats( data );\n\n\t\t\t\t\t\tfor ( let j = 0, jl = numbers.length; j < jl; j ++ ) {\n\n\t\t\t\t\t\t\tpoint.x += numbers[ j ];\n\t\t\t\t\t\t\tcontrol.x = point.x;\n\t\t\t\t\t\t\tcontrol.y = point.y;\n\t\t\t\t\t\t\tpath.lineTo( point.x, point.y );\n\n\t\t\t\t\t\t\tif ( j === 0 && doSetFirstPoint === true ) firstPoint.copy( point );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'v':\n\t\t\t\t\t\tnumbers = parseFloats( data );\n\n\t\t\t\t\t\tfor ( let j = 0, jl = numbers.length; j < jl; j ++ ) {\n\n\t\t\t\t\t\t\tpoint.y += numbers[ j ];\n\t\t\t\t\t\t\tcontrol.x = point.x;\n\t\t\t\t\t\t\tcontrol.y = point.y;\n\t\t\t\t\t\t\tpath.lineTo( point.x, point.y );\n\n\t\t\t\t\t\t\tif ( j === 0 && doSetFirstPoint === true ) firstPoint.copy( point );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'l':\n\t\t\t\t\t\tnumbers = parseFloats( data );\n\n\t\t\t\t\t\tfor ( let j = 0, jl = numbers.length; j < jl; j += 2 ) {\n\n\t\t\t\t\t\t\tpoint.x += numbers[ j + 0 ];\n\t\t\t\t\t\t\tpoint.y += numbers[ j + 1 ];\n\t\t\t\t\t\t\tcontrol.x = point.x;\n\t\t\t\t\t\t\tcontrol.y = point.y;\n\t\t\t\t\t\t\tpath.lineTo( point.x, point.y );\n\n\t\t\t\t\t\t\tif ( j === 0 && doSetFirstPoint === true ) firstPoint.copy( point );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'c':\n\t\t\t\t\t\tnumbers = parseFloats( data );\n\n\t\t\t\t\t\tfor ( let j = 0, jl = numbers.length; j < jl; j += 6 ) {\n\n\t\t\t\t\t\t\tpath.bezierCurveTo(\n\t\t\t\t\t\t\t\tpoint.x + numbers[ j + 0 ],\n\t\t\t\t\t\t\t\tpoint.y + numbers[ j + 1 ],\n\t\t\t\t\t\t\t\tpoint.x + numbers[ j + 2 ],\n\t\t\t\t\t\t\t\tpoint.y + numbers[ j + 3 ],\n\t\t\t\t\t\t\t\tpoint.x + numbers[ j + 4 ],\n\t\t\t\t\t\t\t\tpoint.y + numbers[ j + 5 ]\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tcontrol.x = point.x + numbers[ j + 2 ];\n\t\t\t\t\t\t\tcontrol.y = point.y + numbers[ j + 3 ];\n\t\t\t\t\t\t\tpoint.x += numbers[ j + 4 ];\n\t\t\t\t\t\t\tpoint.y += numbers[ j + 5 ];\n\n\t\t\t\t\t\t\tif ( j === 0 && doSetFirstPoint === true ) firstPoint.copy( point );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 's':\n\t\t\t\t\t\tnumbers = parseFloats( data );\n\n\t\t\t\t\t\tfor ( let j = 0, jl = numbers.length; j < jl; j += 4 ) {\n\n\t\t\t\t\t\t\tpath.bezierCurveTo(\n\t\t\t\t\t\t\t\tgetReflection( point.x, control.x ),\n\t\t\t\t\t\t\t\tgetReflection( point.y, control.y ),\n\t\t\t\t\t\t\t\tpoint.x + numbers[ j + 0 ],\n\t\t\t\t\t\t\t\tpoint.y + numbers[ j + 1 ],\n\t\t\t\t\t\t\t\tpoint.x + numbers[ j + 2 ],\n\t\t\t\t\t\t\t\tpoint.y + numbers[ j + 3 ]\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tcontrol.x = point.x + numbers[ j + 0 ];\n\t\t\t\t\t\t\tcontrol.y = point.y + numbers[ j + 1 ];\n\t\t\t\t\t\t\tpoint.x += numbers[ j + 2 ];\n\t\t\t\t\t\t\tpoint.y += numbers[ j + 3 ];\n\n\t\t\t\t\t\t\tif ( j === 0 && doSetFirstPoint === true ) firstPoint.copy( point );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'q':\n\t\t\t\t\t\tnumbers = parseFloats( data );\n\n\t\t\t\t\t\tfor ( let j = 0, jl = numbers.length; j < jl; j += 4 ) {\n\n\t\t\t\t\t\t\tpath.quadraticCurveTo(\n\t\t\t\t\t\t\t\tpoint.x + numbers[ j + 0 ],\n\t\t\t\t\t\t\t\tpoint.y + numbers[ j + 1 ],\n\t\t\t\t\t\t\t\tpoint.x + numbers[ j + 2 ],\n\t\t\t\t\t\t\t\tpoint.y + numbers[ j + 3 ]\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tcontrol.x = point.x + numbers[ j + 0 ];\n\t\t\t\t\t\t\tcontrol.y = point.y + numbers[ j + 1 ];\n\t\t\t\t\t\t\tpoint.x += numbers[ j + 2 ];\n\t\t\t\t\t\t\tpoint.y += numbers[ j + 3 ];\n\n\t\t\t\t\t\t\tif ( j === 0 && doSetFirstPoint === true ) firstPoint.copy( point );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 't':\n\t\t\t\t\t\tnumbers = parseFloats( data );\n\n\t\t\t\t\t\tfor ( let j = 0, jl = numbers.length; j < jl; j += 2 ) {\n\n\t\t\t\t\t\t\tconst rx = getReflection( point.x, control.x );\n\t\t\t\t\t\t\tconst ry = getReflection( point.y, control.y );\n\t\t\t\t\t\t\tpath.quadraticCurveTo(\n\t\t\t\t\t\t\t\trx,\n\t\t\t\t\t\t\t\try,\n\t\t\t\t\t\t\t\tpoint.x + numbers[ j + 0 ],\n\t\t\t\t\t\t\t\tpoint.y + numbers[ j + 1 ]\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tcontrol.x = rx;\n\t\t\t\t\t\t\tcontrol.y = ry;\n\t\t\t\t\t\t\tpoint.x = point.x + numbers[ j + 0 ];\n\t\t\t\t\t\t\tpoint.y = point.y + numbers[ j + 1 ];\n\n\t\t\t\t\t\t\tif ( j === 0 && doSetFirstPoint === true ) firstPoint.copy( point );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'a':\n\t\t\t\t\t\tnumbers = parseFloats( data, [ 3, 4 ], 7 );\n\n\t\t\t\t\t\tfor ( let j = 0, jl = numbers.length; j < jl; j += 7 ) {\n\n\t\t\t\t\t\t\t// skip command if no displacement\n\t\t\t\t\t\t\tif ( numbers[ j + 5 ] == 0 && numbers[ j + 6 ] == 0 ) continue;\n\n\t\t\t\t\t\t\tconst start = point.clone();\n\t\t\t\t\t\t\tpoint.x += numbers[ j + 5 ];\n\t\t\t\t\t\t\tpoint.y += numbers[ j + 6 ];\n\t\t\t\t\t\t\tcontrol.x = point.x;\n\t\t\t\t\t\t\tcontrol.y = point.y;\n\t\t\t\t\t\t\tparseArcCommand(\n\t\t\t\t\t\t\t\tpath, numbers[ j ], numbers[ j + 1 ], numbers[ j + 2 ], numbers[ j + 3 ], numbers[ j + 4 ], start, point\n\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t\tif ( j === 0 && doSetFirstPoint === true ) firstPoint.copy( point );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'Z':\n\t\t\t\t\tcase 'z':\n\t\t\t\t\t\tpath.currentPath.autoClose = true;\n\n\t\t\t\t\t\tif ( path.currentPath.curves.length > 0 ) {\n\n\t\t\t\t\t\t\t// Reset point to beginning of Path\n\t\t\t\t\t\t\tpoint.copy( firstPoint );\n\t\t\t\t\t\t\tpath.currentPath.currentPoint.copy( point );\n\t\t\t\t\t\t\tisFirstPoint = true;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tconsole.warn( command );\n\n\t\t\t\t}\n\n\t\t\t\t// console.log( type, parseFloats( data ), parseFloats( data ).length  )\n\n\t\t\t\tdoSetFirstPoint = false;\n\n\t\t\t}\n\n\t\t\treturn path;\n\n\t\t}\n\n\t\tfunction parseCSSStylesheet( node ) {\n\n\t\t\tif ( ! node.sheet || ! node.sheet.cssRules || ! node.sheet.cssRules.length ) return;\n\n\t\t\tfor ( let i = 0; i < node.sheet.cssRules.length; i ++ ) {\n\n\t\t\t\tconst stylesheet = node.sheet.cssRules[ i ];\n\n\t\t\t\tif ( stylesheet.type !== 1 ) continue;\n\n\t\t\t\tconst selectorList = stylesheet.selectorText\n\t\t\t\t\t.split( /,/gm )\n\t\t\t\t\t.filter( Boolean )\n\t\t\t\t\t.map( i => i.trim() );\n\n\t\t\t\tfor ( let j = 0; j < selectorList.length; j ++ ) {\n\n\t\t\t\t\t// Remove empty rules\n\t\t\t\t\tconst definitions = Object.fromEntries(\n\t\t\t\t\t\tObject.entries( stylesheet.style ).filter( ( [ , v ] ) => v !== '' )\n\t\t\t\t\t);\n\n\t\t\t\t\tstylesheets[ selectorList[ j ] ] = Object.assign(\n\t\t\t\t\t\tstylesheets[ selectorList[ j ] ] || {},\n\t\t\t\t\t\tdefinitions\n\t\t\t\t\t);\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\t/**\n\t\t * https://www.w3.org/TR/SVG/implnote.html#ArcImplementationNotes\n\t\t * https://mortoray.com/2017/02/16/rendering-an-svg-elliptical-arc-as-bezier-curves/ Appendix: Endpoint to center arc conversion\n\t\t * From\n\t\t * rx ry x-axis-rotation large-arc-flag sweep-flag x y\n\t\t * To\n\t\t * aX, aY, xRadius, yRadius, aStartAngle, aEndAngle, aClockwise, aRotation\n\t\t */\n\n\t\tfunction parseArcCommand( path, rx, ry, x_axis_rotation, large_arc_flag, sweep_flag, start, end ) {\n\n\t\t\tif ( rx == 0 || ry == 0 ) {\n\n\t\t\t\t// draw a line if either of the radii == 0\n\t\t\t\tpath.lineTo( end.x, end.y );\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t\tx_axis_rotation = x_axis_rotation * Math.PI / 180;\n\n\t\t\t// Ensure radii are positive\n\t\t\trx = Math.abs( rx );\n\t\t\try = Math.abs( ry );\n\n\t\t\t// Compute (x1', y1')\n\t\t\tconst dx2 = ( start.x - end.x ) / 2.0;\n\t\t\tconst dy2 = ( start.y - end.y ) / 2.0;\n\t\t\tconst x1p = Math.cos( x_axis_rotation ) * dx2 + Math.sin( x_axis_rotation ) * dy2;\n\t\t\tconst y1p = - Math.sin( x_axis_rotation ) * dx2 + Math.cos( x_axis_rotation ) * dy2;\n\n\t\t\t// Compute (cx', cy')\n\t\t\tlet rxs = rx * rx;\n\t\t\tlet rys = ry * ry;\n\t\t\tconst x1ps = x1p * x1p;\n\t\t\tconst y1ps = y1p * y1p;\n\n\t\t\t// Ensure radii are large enough\n\t\t\tconst cr = x1ps / rxs + y1ps / rys;\n\n\t\t\tif ( cr > 1 ) {\n\n\t\t\t\t// scale up rx,ry equally so cr == 1\n\t\t\t\tconst s = Math.sqrt( cr );\n\t\t\t\trx = s * rx;\n\t\t\t\try = s * ry;\n\t\t\t\trxs = rx * rx;\n\t\t\t\trys = ry * ry;\n\n\t\t\t}\n\n\t\t\tconst dq = ( rxs * y1ps + rys * x1ps );\n\t\t\tconst pq = ( rxs * rys - dq ) / dq;\n\t\t\tlet q = Math.sqrt( Math.max( 0, pq ) );\n\t\t\tif ( large_arc_flag === sweep_flag ) q = - q;\n\t\t\tconst cxp = q * rx * y1p / ry;\n\t\t\tconst cyp = - q * ry * x1p / rx;\n\n\t\t\t// Step 3: Compute (cx, cy) from (cx', cy')\n\t\t\tconst cx = Math.cos( x_axis_rotation ) * cxp - Math.sin( x_axis_rotation ) * cyp + ( start.x + end.x ) / 2;\n\t\t\tconst cy = Math.sin( x_axis_rotation ) * cxp + Math.cos( x_axis_rotation ) * cyp + ( start.y + end.y ) / 2;\n\n\t\t\t// Step 4: Compute θ1 and Δθ\n\t\t\tconst theta = svgAngle( 1, 0, ( x1p - cxp ) / rx, ( y1p - cyp ) / ry );\n\t\t\tconst delta = svgAngle( ( x1p - cxp ) / rx, ( y1p - cyp ) / ry, ( - x1p - cxp ) / rx, ( - y1p - cyp ) / ry ) % ( Math.PI * 2 );\n\n\t\t\tpath.currentPath.absellipse( cx, cy, rx, ry, theta, theta + delta, sweep_flag === 0, x_axis_rotation );\n\n\t\t}\n\n\t\tfunction svgAngle( ux, uy, vx, vy ) {\n\n\t\t\tconst dot = ux * vx + uy * vy;\n\t\t\tconst len = Math.sqrt( ux * ux + uy * uy ) * Math.sqrt( vx * vx + vy * vy );\n\t\t\tlet ang = Math.acos( Math.max( -1, Math.min( 1, dot / len ) ) ); // floating point precision, slightly over values appear\n\t\t\tif ( ( ux * vy - uy * vx ) < 0 ) ang = - ang;\n\t\t\treturn ang;\n\n\t\t}\n\n\t\t/*\n\t\t* According to https://www.w3.org/TR/SVG/shapes.html#RectElementRXAttribute\n\t\t* rounded corner should be rendered to elliptical arc, but bezier curve does the job well enough\n\t\t*/\n\t\tfunction parseRectNode( node ) {\n\n\t\t\tconst x = parseFloatWithUnits( node.getAttribute( 'x' ) || 0 );\n\t\t\tconst y = parseFloatWithUnits( node.getAttribute( 'y' ) || 0 );\n\t\t\tconst rx = parseFloatWithUnits( node.getAttribute( 'rx' ) || node.getAttribute( 'ry' ) || 0 );\n\t\t\tconst ry = parseFloatWithUnits( node.getAttribute( 'ry' ) || node.getAttribute( 'rx' ) || 0 );\n\t\t\tconst w = parseFloatWithUnits( node.getAttribute( 'width' ) );\n\t\t\tconst h = parseFloatWithUnits( node.getAttribute( 'height' ) );\n\n\t\t\t// Ellipse arc to Bezier approximation Coefficient (Inversed). See:\n\t\t\t// https://spencermortensen.com/articles/bezier-circle/\n\t\t\tconst bci = 1 - 0.551915024494;\n\n\t\t\tconst path = new ShapePath();\n\n\t\t\t// top left\n\t\t\tpath.moveTo( x + rx, y );\n\n\t\t\t// top right\n\t\t\tpath.lineTo( x + w - rx, y );\n\t\t\tif ( rx !== 0 || ry !== 0 ) {\n\n\t\t\t\tpath.bezierCurveTo(\n\t\t\t\t\tx + w - rx * bci,\n\t\t\t\t\ty,\n\t\t\t\t\tx + w,\n\t\t\t\t\ty + ry * bci,\n\t\t\t\t\tx + w,\n\t\t\t\t\ty + ry\n\t\t\t\t);\n\n\t\t\t}\n\n\t\t\t// bottom right\n\t\t\tpath.lineTo( x + w, y + h - ry );\n\t\t\tif ( rx !== 0 || ry !== 0 ) {\n\n\t\t\t\tpath.bezierCurveTo(\n\t\t\t\t\tx + w,\n\t\t\t\t\ty + h - ry * bci,\n\t\t\t\t\tx + w - rx * bci,\n\t\t\t\t\ty + h,\n\t\t\t\t\tx + w - rx,\n\t\t\t\t\ty + h\n\t\t\t\t);\n\n\t\t\t}\n\n\t\t\t// bottom left\n\t\t\tpath.lineTo( x + rx, y + h );\n\t\t\tif ( rx !== 0 || ry !== 0 ) {\n\n\t\t\t\tpath.bezierCurveTo(\n\t\t\t\t\tx + rx * bci,\n\t\t\t\t\ty + h,\n\t\t\t\t\tx,\n\t\t\t\t\ty + h - ry * bci,\n\t\t\t\t\tx,\n\t\t\t\t\ty + h - ry\n\t\t\t\t);\n\n\t\t\t}\n\n\t\t\t// back to top left\n\t\t\tpath.lineTo( x, y + ry );\n\t\t\tif ( rx !== 0 || ry !== 0 ) {\n\n\t\t\t\tpath.bezierCurveTo( x, y + ry * bci, x + rx * bci, y, x + rx, y );\n\n\t\t\t}\n\n\t\t\treturn path;\n\n\t\t}\n\n\t\tfunction parsePolygonNode( node ) {\n\n\t\t\tfunction iterator( match, a, b ) {\n\n\t\t\t\tconst x = parseFloatWithUnits( a );\n\t\t\t\tconst y = parseFloatWithUnits( b );\n\n\t\t\t\tif ( index === 0 ) {\n\n\t\t\t\t\tpath.moveTo( x, y );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tpath.lineTo( x, y );\n\n\t\t\t\t}\n\n\t\t\t\tindex ++;\n\n\t\t\t}\n\n\t\t\tconst regex = /([+-]?\\d*\\.?\\d+(?:e[+-]?\\d+)?)(?:,|\\s)([+-]?\\d*\\.?\\d+(?:e[+-]?\\d+)?)/g;\n\n\t\t\tconst path = new ShapePath();\n\n\t\t\tlet index = 0;\n\n\t\t\tnode.getAttribute( 'points' ).replace( regex, iterator );\n\n\t\t\tpath.currentPath.autoClose = true;\n\n\t\t\treturn path;\n\n\t\t}\n\n\t\tfunction parsePolylineNode( node ) {\n\n\t\t\tfunction iterator( match, a, b ) {\n\n\t\t\t\tconst x = parseFloatWithUnits( a );\n\t\t\t\tconst y = parseFloatWithUnits( b );\n\n\t\t\t\tif ( index === 0 ) {\n\n\t\t\t\t\tpath.moveTo( x, y );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tpath.lineTo( x, y );\n\n\t\t\t\t}\n\n\t\t\t\tindex ++;\n\n\t\t\t}\n\n\t\t\tconst regex = /([+-]?\\d*\\.?\\d+(?:e[+-]?\\d+)?)(?:,|\\s)([+-]?\\d*\\.?\\d+(?:e[+-]?\\d+)?)/g;\n\n\t\t\tconst path = new ShapePath();\n\n\t\t\tlet index = 0;\n\n\t\t\tnode.getAttribute( 'points' ).replace( regex, iterator );\n\n\t\t\tpath.currentPath.autoClose = false;\n\n\t\t\treturn path;\n\n\t\t}\n\n\t\tfunction parseCircleNode( node ) {\n\n\t\t\tconst x = parseFloatWithUnits( node.getAttribute( 'cx' ) || 0 );\n\t\t\tconst y = parseFloatWithUnits( node.getAttribute( 'cy' ) || 0 );\n\t\t\tconst r = parseFloatWithUnits( node.getAttribute( 'r' ) || 0 );\n\n\t\t\tconst subpath = new Path();\n\t\t\tsubpath.absarc( x, y, r, 0, Math.PI * 2 );\n\n\t\t\tconst path = new ShapePath();\n\t\t\tpath.subPaths.push( subpath );\n\n\t\t\treturn path;\n\n\t\t}\n\n\t\tfunction parseEllipseNode( node ) {\n\n\t\t\tconst x = parseFloatWithUnits( node.getAttribute( 'cx' ) || 0 );\n\t\t\tconst y = parseFloatWithUnits( node.getAttribute( 'cy' ) || 0 );\n\t\t\tconst rx = parseFloatWithUnits( node.getAttribute( 'rx' ) || 0 );\n\t\t\tconst ry = parseFloatWithUnits( node.getAttribute( 'ry' ) || 0 );\n\n\t\t\tconst subpath = new Path();\n\t\t\tsubpath.absellipse( x, y, rx, ry, 0, Math.PI * 2 );\n\n\t\t\tconst path = new ShapePath();\n\t\t\tpath.subPaths.push( subpath );\n\n\t\t\treturn path;\n\n\t\t}\n\n\t\tfunction parseLineNode( node ) {\n\n\t\t\tconst x1 = parseFloatWithUnits( node.getAttribute( 'x1' ) || 0 );\n\t\t\tconst y1 = parseFloatWithUnits( node.getAttribute( 'y1' ) || 0 );\n\t\t\tconst x2 = parseFloatWithUnits( node.getAttribute( 'x2' ) || 0 );\n\t\t\tconst y2 = parseFloatWithUnits( node.getAttribute( 'y2' ) || 0 );\n\n\t\t\tconst path = new ShapePath();\n\t\t\tpath.moveTo( x1, y1 );\n\t\t\tpath.lineTo( x2, y2 );\n\t\t\tpath.currentPath.autoClose = false;\n\n\t\t\treturn path;\n\n\t\t}\n\n\t\t//\n\n\t\tfunction parseStyle( node, style ) {\n\n\t\t\tstyle = Object.assign( {}, style ); // clone style\n\n\t\t\tlet stylesheetStyles = {};\n\n\t\t\tif ( node.hasAttribute( 'class' ) ) {\n\n\t\t\t\tconst classSelectors = node.getAttribute( 'class' )\n\t\t\t\t\t.split( /\\s/ )\n\t\t\t\t\t.filter( Boolean )\n\t\t\t\t\t.map( i => i.trim() );\n\n\t\t\t\tfor ( let i = 0; i < classSelectors.length; i ++ ) {\n\n\t\t\t\t\tstylesheetStyles = Object.assign( stylesheetStyles, stylesheets[ '.' + classSelectors[ i ] ] );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( node.hasAttribute( 'id' ) ) {\n\n\t\t\t\tstylesheetStyles = Object.assign( stylesheetStyles, stylesheets[ '#' + node.getAttribute( 'id' ) ] );\n\n\t\t\t}\n\n\t\t\tfunction addStyle( svgName, jsName, adjustFunction ) {\n\n\t\t\t\tif ( adjustFunction === undefined ) adjustFunction = function copy( v ) {\n\n\t\t\t\t\tif ( v.startsWith( 'url' ) ) console.warn( 'SVGLoader: url access in attributes is not implemented.' );\n\n\t\t\t\t\treturn v;\n\n\t\t\t\t};\n\n\t\t\t\tif ( node.hasAttribute( svgName ) ) style[ jsName ] = adjustFunction( node.getAttribute( svgName ) );\n\t\t\t\tif ( stylesheetStyles[ svgName ] ) style[ jsName ] = adjustFunction( stylesheetStyles[ svgName ] );\n\t\t\t\tif ( node.style && node.style[ svgName ] !== '' ) style[ jsName ] = adjustFunction( node.style[ svgName ] );\n\n\t\t\t}\n\n\t\t\tfunction clamp( v ) {\n\n\t\t\t\treturn Math.max( 0, Math.min( 1, parseFloatWithUnits( v ) ) );\n\n\t\t\t}\n\n\t\t\tfunction positive( v ) {\n\n\t\t\t\treturn Math.max( 0, parseFloatWithUnits( v ) );\n\n\t\t\t}\n\n\t\t\taddStyle( 'fill', 'fill' );\n\t\t\taddStyle( 'fill-opacity', 'fillOpacity', clamp );\n\t\t\taddStyle( 'fill-rule', 'fillRule' );\n\t\t\taddStyle( 'opacity', 'opacity', clamp );\n\t\t\taddStyle( 'stroke', 'stroke' );\n\t\t\taddStyle( 'stroke-opacity', 'strokeOpacity', clamp );\n\t\t\taddStyle( 'stroke-width', 'strokeWidth', positive );\n\t\t\taddStyle( 'stroke-linejoin', 'strokeLineJoin' );\n\t\t\taddStyle( 'stroke-linecap', 'strokeLineCap' );\n\t\t\taddStyle( 'stroke-miterlimit', 'strokeMiterLimit', positive );\n\t\t\taddStyle( 'visibility', 'visibility' );\n\n\t\t\treturn style;\n\n\t\t}\n\n\t\t// http://www.w3.org/TR/SVG11/implnote.html#PathElementImplementationNotes\n\n\t\tfunction getReflection( a, b ) {\n\n\t\t\treturn a - ( b - a );\n\n\t\t}\n\n\t\t// from https://github.com/ppvg/svg-numbers (MIT License)\n\n\t\tfunction parseFloats( input, flags, stride ) {\n\n\t\t\tif ( typeof input !== 'string' ) {\n\n\t\t\t\tthrow new TypeError( 'Invalid input: ' + typeof input );\n\n\t\t\t}\n\n\t\t\t// Character groups\n\t\t\tconst RE = {\n\t\t\t\tWHITESPACE: /[ \\t\\r\\n]/,\n\t\t\t\tDIGIT: /[\\d]/,\n\t\t\t\tSIGN: /[-+]/,\n\t\t\t\tPOINT: /\\./,\n\t\t\t\tCOMMA: /,/,\n\t\t\t\tEXP: /e/i,\n\t\t\t\tFLAGS: /[01]/\n\t\t\t};\n\n\t\t\t// States\n\t\t\tconst SEP = 0;\n\t\t\tconst INT = 1;\n\t\t\tconst FLOAT = 2;\n\t\t\tconst EXP = 3;\n\n\t\t\tlet state = SEP;\n\t\t\tlet seenComma = true;\n\t\t\tlet number = '', exponent = '';\n\t\t\tconst result = [];\n\n\t\t\tfunction throwSyntaxError( current, i, partial ) {\n\n\t\t\t\tconst error = new SyntaxError( 'Unexpected character \"' + current + '\" at index ' + i + '.' );\n\t\t\t\terror.partial = partial;\n\t\t\t\tthrow error;\n\n\t\t\t}\n\n\t\t\tfunction newNumber() {\n\n\t\t\t\tif ( number !== '' ) {\n\n\t\t\t\t\tif ( exponent === '' ) result.push( Number( number ) );\n\t\t\t\t\telse result.push( Number( number ) * Math.pow( 10, Number( exponent ) ) );\n\n\t\t\t\t}\n\n\t\t\t\tnumber = '';\n\t\t\t\texponent = '';\n\n\t\t\t}\n\n\t\t\tlet current;\n\t\t\tconst length = input.length;\n\n\t\t\tfor ( let i = 0; i < length; i ++ ) {\n\n\t\t\t\tcurrent = input[ i ];\n\n\t\t\t\t// check for flags\n\t\t\t\tif ( Array.isArray( flags ) && flags.includes( result.length % stride ) && RE.FLAGS.test( current ) ) {\n\n\t\t\t\t\tstate = INT;\n\t\t\t\t\tnumber = current;\n\t\t\t\t\tnewNumber();\n\t\t\t\t\tcontinue;\n\n\t\t\t\t}\n\n\t\t\t\t// parse until next number\n\t\t\t\tif ( state === SEP ) {\n\n\t\t\t\t\t// eat whitespace\n\t\t\t\t\tif ( RE.WHITESPACE.test( current ) ) {\n\n\t\t\t\t\t\tcontinue;\n\n\t\t\t\t\t}\n\n\t\t\t\t\t// start new number\n\t\t\t\t\tif ( RE.DIGIT.test( current ) || RE.SIGN.test( current ) ) {\n\n\t\t\t\t\t\tstate = INT;\n\t\t\t\t\t\tnumber = current;\n\t\t\t\t\t\tcontinue;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( RE.POINT.test( current ) ) {\n\n\t\t\t\t\t\tstate = FLOAT;\n\t\t\t\t\t\tnumber = current;\n\t\t\t\t\t\tcontinue;\n\n\t\t\t\t\t}\n\n\t\t\t\t\t// throw on double commas (e.g. \"1, , 2\")\n\t\t\t\t\tif ( RE.COMMA.test( current ) ) {\n\n\t\t\t\t\t\tif ( seenComma ) {\n\n\t\t\t\t\t\t\tthrowSyntaxError( current, i, result );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tseenComma = true;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\t// parse integer part\n\t\t\t\tif ( state === INT ) {\n\n\t\t\t\t\tif ( RE.DIGIT.test( current ) ) {\n\n\t\t\t\t\t\tnumber += current;\n\t\t\t\t\t\tcontinue;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( RE.POINT.test( current ) ) {\n\n\t\t\t\t\t\tnumber += current;\n\t\t\t\t\t\tstate = FLOAT;\n\t\t\t\t\t\tcontinue;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( RE.EXP.test( current ) ) {\n\n\t\t\t\t\t\tstate = EXP;\n\t\t\t\t\t\tcontinue;\n\n\t\t\t\t\t}\n\n\t\t\t\t\t// throw on double signs (\"-+1\"), but not on sign as separator (\"-1-2\")\n\t\t\t\t\tif ( RE.SIGN.test( current )\n\t\t\t\t\t\t\t&& number.length === 1\n\t\t\t\t\t\t\t&& RE.SIGN.test( number[ 0 ] ) ) {\n\n\t\t\t\t\t\tthrowSyntaxError( current, i, result );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\t// parse decimal part\n\t\t\t\tif ( state === FLOAT ) {\n\n\t\t\t\t\tif ( RE.DIGIT.test( current ) ) {\n\n\t\t\t\t\t\tnumber += current;\n\t\t\t\t\t\tcontinue;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( RE.EXP.test( current ) ) {\n\n\t\t\t\t\t\tstate = EXP;\n\t\t\t\t\t\tcontinue;\n\n\t\t\t\t\t}\n\n\t\t\t\t\t// throw on double decimal points (e.g. \"1..2\")\n\t\t\t\t\tif ( RE.POINT.test( current ) && number[ number.length - 1 ] === '.' ) {\n\n\t\t\t\t\t\tthrowSyntaxError( current, i, result );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\t// parse exponent part\n\t\t\t\tif ( state === EXP ) {\n\n\t\t\t\t\tif ( RE.DIGIT.test( current ) ) {\n\n\t\t\t\t\t\texponent += current;\n\t\t\t\t\t\tcontinue;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( RE.SIGN.test( current ) ) {\n\n\t\t\t\t\t\tif ( exponent === '' ) {\n\n\t\t\t\t\t\t\texponent += current;\n\t\t\t\t\t\t\tcontinue;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif ( exponent.length === 1 && RE.SIGN.test( exponent ) ) {\n\n\t\t\t\t\t\t\tthrowSyntaxError( current, i, result );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\n\t\t\t\t// end of number\n\t\t\t\tif ( RE.WHITESPACE.test( current ) ) {\n\n\t\t\t\t\tnewNumber();\n\t\t\t\t\tstate = SEP;\n\t\t\t\t\tseenComma = false;\n\n\t\t\t\t} else if ( RE.COMMA.test( current ) ) {\n\n\t\t\t\t\tnewNumber();\n\t\t\t\t\tstate = SEP;\n\t\t\t\t\tseenComma = true;\n\n\t\t\t\t} else if ( RE.SIGN.test( current ) ) {\n\n\t\t\t\t\tnewNumber();\n\t\t\t\t\tstate = INT;\n\t\t\t\t\tnumber = current;\n\n\t\t\t\t} else if ( RE.POINT.test( current ) ) {\n\n\t\t\t\t\tnewNumber();\n\t\t\t\t\tstate = FLOAT;\n\t\t\t\t\tnumber = current;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tthrowSyntaxError( current, i, result );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// add the last number found (if any)\n\t\t\tnewNumber();\n\n\t\t\treturn result;\n\n\t\t}\n\n\t\t// Units\n\n\t\tconst units = [ 'mm', 'cm', 'in', 'pt', 'pc', 'px' ];\n\n\t\t// Conversion: [ fromUnit ][ toUnit ] (-1 means dpi dependent)\n\t\tconst unitConversion = {\n\n\t\t\t'mm': {\n\t\t\t\t'mm': 1,\n\t\t\t\t'cm': 0.1,\n\t\t\t\t'in': 1 / 25.4,\n\t\t\t\t'pt': 72 / 25.4,\n\t\t\t\t'pc': 6 / 25.4,\n\t\t\t\t'px': -1\n\t\t\t},\n\t\t\t'cm': {\n\t\t\t\t'mm': 10,\n\t\t\t\t'cm': 1,\n\t\t\t\t'in': 1 / 2.54,\n\t\t\t\t'pt': 72 / 2.54,\n\t\t\t\t'pc': 6 / 2.54,\n\t\t\t\t'px': -1\n\t\t\t},\n\t\t\t'in': {\n\t\t\t\t'mm': 25.4,\n\t\t\t\t'cm': 2.54,\n\t\t\t\t'in': 1,\n\t\t\t\t'pt': 72,\n\t\t\t\t'pc': 6,\n\t\t\t\t'px': -1\n\t\t\t},\n\t\t\t'pt': {\n\t\t\t\t'mm': 25.4 / 72,\n\t\t\t\t'cm': 2.54 / 72,\n\t\t\t\t'in': 1 / 72,\n\t\t\t\t'pt': 1,\n\t\t\t\t'pc': 6 / 72,\n\t\t\t\t'px': -1\n\t\t\t},\n\t\t\t'pc': {\n\t\t\t\t'mm': 25.4 / 6,\n\t\t\t\t'cm': 2.54 / 6,\n\t\t\t\t'in': 1 / 6,\n\t\t\t\t'pt': 72 / 6,\n\t\t\t\t'pc': 1,\n\t\t\t\t'px': -1\n\t\t\t},\n\t\t\t'px': {\n\t\t\t\t'px': 1\n\t\t\t}\n\n\t\t};\n\n\t\tfunction parseFloatWithUnits( string ) {\n\n\t\t\tlet theUnit = 'px';\n\n\t\t\tif ( typeof string === 'string' || string instanceof String ) {\n\n\t\t\t\tfor ( let i = 0, n = units.length; i < n; i ++ ) {\n\n\t\t\t\t\tconst u = units[ i ];\n\n\t\t\t\t\tif ( string.endsWith( u ) ) {\n\n\t\t\t\t\t\ttheUnit = u;\n\t\t\t\t\t\tstring = string.substring( 0, string.length - u.length );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tlet scale = undefined;\n\n\t\t\tif ( theUnit === 'px' && scope.defaultUnit !== 'px' ) {\n\n\t\t\t\t// Conversion scale from  pixels to inches, then to default units\n\n\t\t\t\tscale = unitConversion[ 'in' ][ scope.defaultUnit ] / scope.defaultDPI;\n\n\t\t\t} else {\n\n\t\t\t\tscale = unitConversion[ theUnit ][ scope.defaultUnit ];\n\n\t\t\t\tif ( scale < 0 ) {\n\n\t\t\t\t\t// Conversion scale to pixels\n\n\t\t\t\t\tscale = unitConversion[ theUnit ][ 'in' ] * scope.defaultDPI;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn scale * parseFloat( string );\n\n\t\t}\n\n\t\t// Transforms\n\n\t\tfunction getNodeTransform( node ) {\n\n\t\t\tif ( ! ( node.hasAttribute( 'transform' ) || ( node.nodeName === 'use' && ( node.hasAttribute( 'x' ) || node.hasAttribute( 'y' ) ) ) ) ) {\n\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t\tconst transform = parseNodeTransform( node );\n\n\t\t\tif ( transformStack.length > 0 ) {\n\n\t\t\t\ttransform.premultiply( transformStack[ transformStack.length - 1 ] );\n\n\t\t\t}\n\n\t\t\tcurrentTransform.copy( transform );\n\t\t\ttransformStack.push( transform );\n\n\t\t\treturn transform;\n\n\t\t}\n\n\t\tfunction parseNodeTransform( node ) {\n\n\t\t\tconst transform = new Matrix3();\n\t\t\tconst currentTransform = tempTransform0;\n\n\t\t\tif ( node.nodeName === 'use' && ( node.hasAttribute( 'x' ) || node.hasAttribute( 'y' ) ) ) {\n\n\t\t\t\tconst tx = parseFloatWithUnits( node.getAttribute( 'x' ) );\n\t\t\t\tconst ty = parseFloatWithUnits( node.getAttribute( 'y' ) );\n\n\t\t\t\ttransform.translate( tx, ty );\n\n\t\t\t}\n\n\t\t\tif ( node.hasAttribute( 'transform' ) ) {\n\n\t\t\t\tconst transformsTexts = node.getAttribute( 'transform' ).split( ')' );\n\n\t\t\t\tfor ( let tIndex = transformsTexts.length - 1; tIndex >= 0; tIndex -- ) {\n\n\t\t\t\t\tconst transformText = transformsTexts[ tIndex ].trim();\n\n\t\t\t\t\tif ( transformText === '' ) continue;\n\n\t\t\t\t\tconst openParPos = transformText.indexOf( '(' );\n\t\t\t\t\tconst closeParPos = transformText.length;\n\n\t\t\t\t\tif ( openParPos > 0 && openParPos < closeParPos ) {\n\n\t\t\t\t\t\tconst transformType = transformText.slice( 0, openParPos );\n\n\t\t\t\t\t\tconst array = parseFloats( transformText.slice( openParPos + 1 ) );\n\n\t\t\t\t\t\tcurrentTransform.identity();\n\n\t\t\t\t\t\tswitch ( transformType ) {\n\n\t\t\t\t\t\t\tcase 'translate':\n\n\t\t\t\t\t\t\t\tif ( array.length >= 1 ) {\n\n\t\t\t\t\t\t\t\t\tconst tx = array[ 0 ];\n\t\t\t\t\t\t\t\t\tlet ty = 0;\n\n\t\t\t\t\t\t\t\t\tif ( array.length >= 2 ) {\n\n\t\t\t\t\t\t\t\t\t\tty = array[ 1 ];\n\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\tcurrentTransform.translate( tx, ty );\n\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase 'rotate':\n\n\t\t\t\t\t\t\t\tif ( array.length >= 1 ) {\n\n\t\t\t\t\t\t\t\t\tlet angle = 0;\n\t\t\t\t\t\t\t\t\tlet cx = 0;\n\t\t\t\t\t\t\t\t\tlet cy = 0;\n\n\t\t\t\t\t\t\t\t\t// Angle\n\t\t\t\t\t\t\t\t\tangle = array[ 0 ] * Math.PI / 180;\n\n\t\t\t\t\t\t\t\t\tif ( array.length >= 3 ) {\n\n\t\t\t\t\t\t\t\t\t\t// Center x, y\n\t\t\t\t\t\t\t\t\t\tcx = array[ 1 ];\n\t\t\t\t\t\t\t\t\t\tcy = array[ 2 ];\n\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t// Rotate around center (cx, cy)\n\t\t\t\t\t\t\t\t\ttempTransform1.makeTranslation( - cx, - cy );\n\t\t\t\t\t\t\t\t\ttempTransform2.makeRotation( angle );\n\t\t\t\t\t\t\t\t\ttempTransform3.multiplyMatrices( tempTransform2, tempTransform1 );\n\t\t\t\t\t\t\t\t\ttempTransform1.makeTranslation( cx, cy );\n\t\t\t\t\t\t\t\t\tcurrentTransform.multiplyMatrices( tempTransform1, tempTransform3 );\n\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase 'scale':\n\n\t\t\t\t\t\t\t\tif ( array.length >= 1 ) {\n\n\t\t\t\t\t\t\t\t\tconst scaleX = array[ 0 ];\n\t\t\t\t\t\t\t\t\tlet scaleY = scaleX;\n\n\t\t\t\t\t\t\t\t\tif ( array.length >= 2 ) {\n\n\t\t\t\t\t\t\t\t\t\tscaleY = array[ 1 ];\n\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\tcurrentTransform.scale( scaleX, scaleY );\n\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase 'skewX':\n\n\t\t\t\t\t\t\t\tif ( array.length === 1 ) {\n\n\t\t\t\t\t\t\t\t\tcurrentTransform.set(\n\t\t\t\t\t\t\t\t\t\t1, Math.tan( array[ 0 ] * Math.PI / 180 ), 0,\n\t\t\t\t\t\t\t\t\t\t0, 1, 0,\n\t\t\t\t\t\t\t\t\t\t0, 0, 1\n\t\t\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase 'skewY':\n\n\t\t\t\t\t\t\t\tif ( array.length === 1 ) {\n\n\t\t\t\t\t\t\t\t\tcurrentTransform.set(\n\t\t\t\t\t\t\t\t\t\t1, 0, 0,\n\t\t\t\t\t\t\t\t\t\tMath.tan( array[ 0 ] * Math.PI / 180 ), 1, 0,\n\t\t\t\t\t\t\t\t\t\t0, 0, 1\n\t\t\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase 'matrix':\n\n\t\t\t\t\t\t\t\tif ( array.length === 6 ) {\n\n\t\t\t\t\t\t\t\t\tcurrentTransform.set(\n\t\t\t\t\t\t\t\t\t\tarray[ 0 ], array[ 2 ], array[ 4 ],\n\t\t\t\t\t\t\t\t\t\tarray[ 1 ], array[ 3 ], array[ 5 ],\n\t\t\t\t\t\t\t\t\t\t0, 0, 1\n\t\t\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\ttransform.premultiply( currentTransform );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn transform;\n\n\t\t}\n\n\t\tfunction transformPath( path, m ) {\n\n\t\t\tfunction transfVec2( v2 ) {\n\n\t\t\t\ttempV3.set( v2.x, v2.y, 1 ).applyMatrix3( m );\n\n\t\t\t\tv2.set( tempV3.x, tempV3.y );\n\n\t\t\t}\n\n\t\t\tfunction transfEllipseGeneric( curve ) {\n\n\t\t\t\t// For math description see:\n\t\t\t\t// https://math.stackexchange.com/questions/4544164\n\n\t\t\t\tconst a = curve.xRadius;\n\t\t\t\tconst b = curve.yRadius;\n\n\t\t\t\tconst cosTheta = Math.cos( curve.aRotation );\n\t\t\t\tconst sinTheta = Math.sin( curve.aRotation );\n\n\t\t\t\tconst v1 = new Vector3( a * cosTheta, a * sinTheta, 0 );\n\t\t\t\tconst v2 = new Vector3( - b * sinTheta, b * cosTheta, 0 );\n\n\t\t\t\tconst f1 = v1.applyMatrix3( m );\n\t\t\t\tconst f2 = v2.applyMatrix3( m );\n\n\t\t\t\tconst mF = tempTransform0.set(\n\t\t\t\t\tf1.x, f2.x, 0,\n\t\t\t\t\tf1.y, f2.y, 0,\n\t\t\t\t\t0, 0, 1,\n\t\t\t\t);\n\n\t\t\t\tconst mFInv = tempTransform1.copy( mF ).invert();\n\t\t\t\tconst mFInvT = tempTransform2.copy( mFInv ).transpose();\n\t\t\t\tconst mQ = mFInvT.multiply( mFInv );\n\t\t\t\tconst mQe = mQ.elements;\n\n\t\t\t\tconst ed = eigenDecomposition( mQe[ 0 ], mQe[ 1 ], mQe[ 4 ] );\n\t\t\t\tconst rt1sqrt = Math.sqrt( ed.rt1 );\n\t\t\t\tconst rt2sqrt = Math.sqrt( ed.rt2 );\n\n\t\t\t\tcurve.xRadius = 1 / rt1sqrt;\n\t\t\t\tcurve.yRadius = 1 / rt2sqrt;\n\t\t\t\tcurve.aRotation = Math.atan2( ed.sn, ed.cs );\n\n\t\t\t\tconst isFullEllipse =\n\t\t\t\t\t( curve.aEndAngle - curve.aStartAngle ) % ( 2 * Math.PI ) < Number.EPSILON;\n\n\t\t\t\t// Do not touch angles of a full ellipse because after transformation they\n\t\t\t\t// would converge to a sinle value effectively removing the whole curve\n\n\t\t\t\tif ( ! isFullEllipse ) {\n\n\t\t\t\t\tconst mDsqrt = tempTransform1.set(\n\t\t\t\t\t\trt1sqrt, 0, 0,\n\t\t\t\t\t\t0, rt2sqrt, 0,\n\t\t\t\t\t\t0, 0, 1,\n\t\t\t\t\t);\n\n\t\t\t\t\tconst mRT = tempTransform2.set(\n\t\t\t\t\t\ted.cs, ed.sn, 0,\n\t\t\t\t\t\t- ed.sn, ed.cs, 0,\n\t\t\t\t\t\t0, 0, 1,\n\t\t\t\t\t);\n\n\t\t\t\t\tconst mDRF = mDsqrt.multiply( mRT ).multiply( mF );\n\n\t\t\t\t\tconst transformAngle = phi => {\n\n\t\t\t\t\t\tconst { x: cosR, y: sinR } =\n\t\t\t\t\t\t\tnew Vector3( Math.cos( phi ), Math.sin( phi ), 0 ).applyMatrix3( mDRF );\n\n\t\t\t\t\t\treturn Math.atan2( sinR, cosR );\n\n\t\t\t\t\t};\n\n\t\t\t\t\tcurve.aStartAngle = transformAngle( curve.aStartAngle );\n\t\t\t\t\tcurve.aEndAngle = transformAngle( curve.aEndAngle );\n\n\t\t\t\t\tif ( isTransformFlipped( m ) ) {\n\n\t\t\t\t\t\tcurve.aClockwise = ! curve.aClockwise;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tfunction transfEllipseNoSkew( curve ) {\n\n\t\t\t\t// Faster shortcut if no skew is applied\n\t\t\t\t// (e.g, a euclidean transform of a group containing the ellipse)\n\n\t\t\t\tconst sx = getTransformScaleX( m );\n\t\t\t\tconst sy = getTransformScaleY( m );\n\n\t\t\t\tcurve.xRadius *= sx;\n\t\t\t\tcurve.yRadius *= sy;\n\n\t\t\t\t// Extract rotation angle from the matrix of form:\n\t\t\t\t//\n\t\t\t\t//  | cosθ sx   -sinθ sy |\n\t\t\t\t//  | sinθ sx    cosθ sy |\n\t\t\t\t//\n\t\t\t\t// Remembering that tanθ = sinθ / cosθ; and that\n\t\t\t\t// `sx`, `sy`, or both might be zero.\n\t\t\t\tconst theta =\n\t\t\t\t\tsx > Number.EPSILON\n\t\t\t\t\t\t? Math.atan2( m.elements[ 1 ], m.elements[ 0 ] )\n\t\t\t\t\t\t: Math.atan2( - m.elements[ 3 ], m.elements[ 4 ] );\n\n\t\t\t\tcurve.aRotation += theta;\n\n\t\t\t\tif ( isTransformFlipped( m ) ) {\n\n\t\t\t\t\tcurve.aStartAngle *= -1;\n\t\t\t\t\tcurve.aEndAngle *= -1;\n\t\t\t\t\tcurve.aClockwise = ! curve.aClockwise;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tconst subPaths = path.subPaths;\n\n\t\t\tfor ( let i = 0, n = subPaths.length; i < n; i ++ ) {\n\n\t\t\t\tconst subPath = subPaths[ i ];\n\t\t\t\tconst curves = subPath.curves;\n\n\t\t\t\tfor ( let j = 0; j < curves.length; j ++ ) {\n\n\t\t\t\t\tconst curve = curves[ j ];\n\n\t\t\t\t\tif ( curve.isLineCurve ) {\n\n\t\t\t\t\t\ttransfVec2( curve.v1 );\n\t\t\t\t\t\ttransfVec2( curve.v2 );\n\n\t\t\t\t\t} else if ( curve.isCubicBezierCurve ) {\n\n\t\t\t\t\t\ttransfVec2( curve.v0 );\n\t\t\t\t\t\ttransfVec2( curve.v1 );\n\t\t\t\t\t\ttransfVec2( curve.v2 );\n\t\t\t\t\t\ttransfVec2( curve.v3 );\n\n\t\t\t\t\t} else if ( curve.isQuadraticBezierCurve ) {\n\n\t\t\t\t\t\ttransfVec2( curve.v0 );\n\t\t\t\t\t\ttransfVec2( curve.v1 );\n\t\t\t\t\t\ttransfVec2( curve.v2 );\n\n\t\t\t\t\t} else if ( curve.isEllipseCurve ) {\n\n\t\t\t\t\t\t// Transform ellipse center point\n\n\t\t\t\t\t\ttempV2.set( curve.aX, curve.aY );\n\t\t\t\t\t\ttransfVec2( tempV2 );\n\t\t\t\t\t\tcurve.aX = tempV2.x;\n\t\t\t\t\t\tcurve.aY = tempV2.y;\n\n\t\t\t\t\t\t// Transform ellipse shape parameters\n\n\t\t\t\t\t\tif ( isTransformSkewed( m ) ) {\n\n\t\t\t\t\t\t\ttransfEllipseGeneric( curve );\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\ttransfEllipseNoSkew( curve );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction isTransformFlipped( m ) {\n\n\t\t\tconst te = m.elements;\n\t\t\treturn te[ 0 ] * te[ 4 ] - te[ 1 ] * te[ 3 ] < 0;\n\n\t\t}\n\n\t\tfunction isTransformSkewed( m ) {\n\n\t\t\tconst te = m.elements;\n\t\t\tconst basisDot = te[ 0 ] * te[ 3 ] + te[ 1 ] * te[ 4 ];\n\n\t\t\t// Shortcut for trivial rotations and transformations\n\t\t\tif ( basisDot === 0 ) return false;\n\n\t\t\tconst sx = getTransformScaleX( m );\n\t\t\tconst sy = getTransformScaleY( m );\n\n\t\t\treturn Math.abs( basisDot / ( sx * sy ) ) > Number.EPSILON;\n\n\t\t}\n\n\t\tfunction getTransformScaleX( m ) {\n\n\t\t\tconst te = m.elements;\n\t\t\treturn Math.sqrt( te[ 0 ] * te[ 0 ] + te[ 1 ] * te[ 1 ] );\n\n\t\t}\n\n\t\tfunction getTransformScaleY( m ) {\n\n\t\t\tconst te = m.elements;\n\t\t\treturn Math.sqrt( te[ 3 ] * te[ 3 ] + te[ 4 ] * te[ 4 ] );\n\n\t\t}\n\n\t\t// Calculates the eigensystem of a real symmetric 2x2 matrix\n\t\t//    [ A  B ]\n\t\t//    [ B  C ]\n\t\t// in the form\n\t\t//    [ A  B ]  =  [ cs  -sn ] [ rt1   0  ] [  cs  sn ]\n\t\t//    [ B  C ]     [ sn   cs ] [  0   rt2 ] [ -sn  cs ]\n\t\t// where rt1 >= rt2.\n\t\t//\n\t\t// Adapted from: https://www.mpi-hd.mpg.de/personalhomes/globes/3x3/index.html\n\t\t// -> Algorithms for real symmetric matrices -> Analytical (2x2 symmetric)\n\t\tfunction eigenDecomposition( A, B, C ) {\n\n\t\t\tlet rt1, rt2, cs, sn, t;\n\t\t\tconst sm = A + C;\n\t\t\tconst df = A - C;\n\t\t\tconst rt = Math.sqrt( df * df + 4 * B * B );\n\n\t\t\tif ( sm > 0 ) {\n\n\t\t\t\trt1 = 0.5 * ( sm + rt );\n\t\t\t\tt = 1 / rt1;\n\t\t\t\trt2 = A * t * C - B * t * B;\n\n\t\t\t} else if ( sm < 0 ) {\n\n\t\t\t\trt2 = 0.5 * ( sm - rt );\n\n\t\t\t} else {\n\n\t\t\t\t// This case needs to be treated separately to avoid div by 0\n\n\t\t\t\trt1 = 0.5 * rt;\n\t\t\t\trt2 = -0.5 * rt;\n\n\t\t\t}\n\n\t\t\t// Calculate eigenvectors\n\n\t\t\tif ( df > 0 ) {\n\n\t\t\t\tcs = df + rt;\n\n\t\t\t} else {\n\n\t\t\t\tcs = df - rt;\n\n\t\t\t}\n\n\t\t\tif ( Math.abs( cs ) > 2 * Math.abs( B ) ) {\n\n\t\t\t\tt = -2 * B / cs;\n\t\t\t\tsn = 1 / Math.sqrt( 1 + t * t );\n\t\t\t\tcs = t * sn;\n\n\t\t\t} else if ( Math.abs( B ) === 0 ) {\n\n\t\t\t\tcs = 1;\n\t\t\t\tsn = 0;\n\n\t\t\t} else {\n\n\t\t\t\tt = -0.5 * cs / B;\n\t\t\t\tcs = 1 / Math.sqrt( 1 + t * t );\n\t\t\t\tsn = t * cs;\n\n\t\t\t}\n\n\t\t\tif ( df > 0 ) {\n\n\t\t\t\tt = cs;\n\t\t\t\tcs = - sn;\n\t\t\t\tsn = t;\n\n\t\t\t}\n\n\t\t\treturn { rt1, rt2, cs, sn };\n\n\t\t}\n\n\t\t//\n\n\t\tconst paths = [];\n\t\tconst stylesheets = {};\n\n\t\tconst transformStack = [];\n\n\t\tconst tempTransform0 = new Matrix3();\n\t\tconst tempTransform1 = new Matrix3();\n\t\tconst tempTransform2 = new Matrix3();\n\t\tconst tempTransform3 = new Matrix3();\n\t\tconst tempV2 = new Vector2();\n\t\tconst tempV3 = new Vector3();\n\n\t\tconst currentTransform = new Matrix3();\n\n\t\tconst xml = new DOMParser().parseFromString( text, 'image/svg+xml' ); // application/xml\n\n\t\tparseNode( xml.documentElement, {\n\t\t\tfill: '#000',\n\t\t\tfillOpacity: 1,\n\t\t\tstrokeOpacity: 1,\n\t\t\tstrokeWidth: 1,\n\t\t\tstrokeLineJoin: 'miter',\n\t\t\tstrokeLineCap: 'butt',\n\t\t\tstrokeMiterLimit: 4\n\t\t} );\n\n\t\tconst data = { paths: paths, xml: xml.documentElement };\n\n\t\t// console.log( paths );\n\t\treturn data;\n\n\t}\n\n\tstatic createShapes( shapePath ) {\n\n\t\t// Param shapePath: a shapepath as returned by the parse function of this class\n\t\t// Returns Shape object\n\n\t\tconst BIGNUMBER = 999999999;\n\n\t\tconst IntersectionLocationType = {\n\t\t\tORIGIN: 0,\n\t\t\tDESTINATION: 1,\n\t\t\tBETWEEN: 2,\n\t\t\tLEFT: 3,\n\t\t\tRIGHT: 4,\n\t\t\tBEHIND: 5,\n\t\t\tBEYOND: 6\n\t\t};\n\n\t\tconst classifyResult = {\n\t\t\tloc: IntersectionLocationType.ORIGIN,\n\t\t\tt: 0\n\t\t};\n\n\t\tfunction findEdgeIntersection( a0, a1, b0, b1 ) {\n\n\t\t\tconst x1 = a0.x;\n\t\t\tconst x2 = a1.x;\n\t\t\tconst x3 = b0.x;\n\t\t\tconst x4 = b1.x;\n\t\t\tconst y1 = a0.y;\n\t\t\tconst y2 = a1.y;\n\t\t\tconst y3 = b0.y;\n\t\t\tconst y4 = b1.y;\n\t\t\tconst nom1 = ( x4 - x3 ) * ( y1 - y3 ) - ( y4 - y3 ) * ( x1 - x3 );\n\t\t\tconst nom2 = ( x2 - x1 ) * ( y1 - y3 ) - ( y2 - y1 ) * ( x1 - x3 );\n\t\t\tconst denom = ( y4 - y3 ) * ( x2 - x1 ) - ( x4 - x3 ) * ( y2 - y1 );\n\t\t\tconst t1 = nom1 / denom;\n\t\t\tconst t2 = nom2 / denom;\n\n\t\t\tif ( ( ( denom === 0 ) && ( nom1 !== 0 ) ) || ( t1 <= 0 ) || ( t1 >= 1 ) || ( t2 < 0 ) || ( t2 > 1 ) ) {\n\n\t\t\t\t//1. lines are parallel or edges don't intersect\n\n\t\t\t\treturn null;\n\n\t\t\t} else if ( ( nom1 === 0 ) && ( denom === 0 ) ) {\n\n\t\t\t\t//2. lines are colinear\n\n\t\t\t\t//check if endpoints of edge2 (b0-b1) lies on edge1 (a0-a1)\n\t\t\t\tfor ( let i = 0; i < 2; i ++ ) {\n\n\t\t\t\t\tclassifyPoint( i === 0 ? b0 : b1, a0, a1 );\n\t\t\t\t\t//find position of this endpoints relatively to edge1\n\t\t\t\t\tif ( classifyResult.loc == IntersectionLocationType.ORIGIN ) {\n\n\t\t\t\t\t\tconst point = ( i === 0 ? b0 : b1 );\n\t\t\t\t\t\treturn { x: point.x, y: point.y, t: classifyResult.t };\n\n\t\t\t\t\t} else if ( classifyResult.loc == IntersectionLocationType.BETWEEN ) {\n\n\t\t\t\t\t\tconst x = + ( ( x1 + classifyResult.t * ( x2 - x1 ) ).toPrecision( 10 ) );\n\t\t\t\t\t\tconst y = + ( ( y1 + classifyResult.t * ( y2 - y1 ) ).toPrecision( 10 ) );\n\t\t\t\t\t\treturn { x: x, y: y, t: classifyResult.t, };\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\treturn null;\n\n\t\t\t} else {\n\n\t\t\t\t//3. edges intersect\n\n\t\t\t\tfor ( let i = 0; i < 2; i ++ ) {\n\n\t\t\t\t\tclassifyPoint( i === 0 ? b0 : b1, a0, a1 );\n\n\t\t\t\t\tif ( classifyResult.loc == IntersectionLocationType.ORIGIN ) {\n\n\t\t\t\t\t\tconst point = ( i === 0 ? b0 : b1 );\n\t\t\t\t\t\treturn { x: point.x, y: point.y, t: classifyResult.t };\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tconst x = + ( ( x1 + t1 * ( x2 - x1 ) ).toPrecision( 10 ) );\n\t\t\t\tconst y = + ( ( y1 + t1 * ( y2 - y1 ) ).toPrecision( 10 ) );\n\t\t\t\treturn { x: x, y: y, t: t1 };\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction classifyPoint( p, edgeStart, edgeEnd ) {\n\n\t\t\tconst ax = edgeEnd.x - edgeStart.x;\n\t\t\tconst ay = edgeEnd.y - edgeStart.y;\n\t\t\tconst bx = p.x - edgeStart.x;\n\t\t\tconst by = p.y - edgeStart.y;\n\t\t\tconst sa = ax * by - bx * ay;\n\n\t\t\tif ( ( p.x === edgeStart.x ) && ( p.y === edgeStart.y ) ) {\n\n\t\t\t\tclassifyResult.loc = IntersectionLocationType.ORIGIN;\n\t\t\t\tclassifyResult.t = 0;\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t\tif ( ( p.x === edgeEnd.x ) && ( p.y === edgeEnd.y ) ) {\n\n\t\t\t\tclassifyResult.loc = IntersectionLocationType.DESTINATION;\n\t\t\t\tclassifyResult.t = 1;\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t\tif ( sa < - Number.EPSILON ) {\n\n\t\t\t\tclassifyResult.loc = IntersectionLocationType.LEFT;\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t\tif ( sa > Number.EPSILON ) {\n\n\t\t\t\tclassifyResult.loc = IntersectionLocationType.RIGHT;\n\t\t\t\treturn;\n\n\n\t\t\t}\n\n\t\t\tif ( ( ( ax * bx ) < 0 ) || ( ( ay * by ) < 0 ) ) {\n\n\t\t\t\tclassifyResult.loc = IntersectionLocationType.BEHIND;\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t\tif ( ( Math.sqrt( ax * ax + ay * ay ) ) < ( Math.sqrt( bx * bx + by * by ) ) ) {\n\n\t\t\t\tclassifyResult.loc = IntersectionLocationType.BEYOND;\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t\tlet t;\n\n\t\t\tif ( ax !== 0 ) {\n\n\t\t\t\tt = bx / ax;\n\n\t\t\t} else {\n\n\t\t\t\tt = by / ay;\n\n\t\t\t}\n\n\t\t\tclassifyResult.loc = IntersectionLocationType.BETWEEN;\n\t\t\tclassifyResult.t = t;\n\n\t\t}\n\n\t\tfunction getIntersections( path1, path2 ) {\n\n\t\t\tconst intersectionsRaw = [];\n\t\t\tconst intersections = [];\n\n\t\t\tfor ( let index = 1; index < path1.length; index ++ ) {\n\n\t\t\t\tconst path1EdgeStart = path1[ index - 1 ];\n\t\t\t\tconst path1EdgeEnd = path1[ index ];\n\n\t\t\t\tfor ( let index2 = 1; index2 < path2.length; index2 ++ ) {\n\n\t\t\t\t\tconst path2EdgeStart = path2[ index2 - 1 ];\n\t\t\t\t\tconst path2EdgeEnd = path2[ index2 ];\n\n\t\t\t\t\tconst intersection = findEdgeIntersection( path1EdgeStart, path1EdgeEnd, path2EdgeStart, path2EdgeEnd );\n\n\t\t\t\t\tif ( intersection !== null && intersectionsRaw.find( i => i.t <= intersection.t + Number.EPSILON && i.t >= intersection.t - Number.EPSILON ) === undefined ) {\n\n\t\t\t\t\t\tintersectionsRaw.push( intersection );\n\t\t\t\t\t\tintersections.push( new Vector2( intersection.x, intersection.y ) );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn intersections;\n\n\t\t}\n\n\t\tfunction getScanlineIntersections( scanline, boundingBox, paths ) {\n\n\t\t\tconst center = new Vector2();\n\t\t\tboundingBox.getCenter( center );\n\n\t\t\tconst allIntersections = [];\n\n\t\t\tpaths.forEach( path => {\n\n\t\t\t\t// check if the center of the bounding box is in the bounding box of the paths.\n\t\t\t\t// this is a pruning method to limit the search of intersections in paths that can't envelop of the current path.\n\t\t\t\t// if a path envelops another path. The center of that oter path, has to be inside the bounding box of the enveloping path.\n\t\t\t\tif ( path.boundingBox.containsPoint( center ) ) {\n\n\t\t\t\t\tconst intersections = getIntersections( scanline, path.points );\n\n\t\t\t\t\tintersections.forEach( p => {\n\n\t\t\t\t\t\tallIntersections.push( { identifier: path.identifier, isCW: path.isCW, point: p } );\n\n\t\t\t\t\t} );\n\n\t\t\t\t}\n\n\t\t\t} );\n\n\t\t\tallIntersections.sort( ( i1, i2 ) => {\n\n\t\t\t\treturn i1.point.x - i2.point.x;\n\n\t\t\t} );\n\n\t\t\treturn allIntersections;\n\n\t\t}\n\n\t\tfunction isHoleTo( simplePath, allPaths, scanlineMinX, scanlineMaxX, _fillRule ) {\n\n\t\t\tif ( _fillRule === null || _fillRule === undefined || _fillRule === '' ) {\n\n\t\t\t\t_fillRule = 'nonzero';\n\n\t\t\t}\n\n\t\t\tconst centerBoundingBox = new Vector2();\n\t\t\tsimplePath.boundingBox.getCenter( centerBoundingBox );\n\n\t\t\tconst scanline = [ new Vector2( scanlineMinX, centerBoundingBox.y ), new Vector2( scanlineMaxX, centerBoundingBox.y ) ];\n\n\t\t\tconst scanlineIntersections = getScanlineIntersections( scanline, simplePath.boundingBox, allPaths );\n\n\t\t\tscanlineIntersections.sort( ( i1, i2 ) => {\n\n\t\t\t\treturn i1.point.x - i2.point.x;\n\n\t\t\t} );\n\n\t\t\tconst baseIntersections = [];\n\t\t\tconst otherIntersections = [];\n\n\t\t\tscanlineIntersections.forEach( i => {\n\n\t\t\t\tif ( i.identifier === simplePath.identifier ) {\n\n\t\t\t\t\tbaseIntersections.push( i );\n\n\t\t\t\t} else {\n\n\t\t\t\t\totherIntersections.push( i );\n\n\t\t\t\t}\n\n\t\t\t} );\n\n\t\t\tconst firstXOfPath = baseIntersections[ 0 ].point.x;\n\n\t\t\t// build up the path hierarchy\n\t\t\tconst stack = [];\n\t\t\tlet i = 0;\n\n\t\t\twhile ( i < otherIntersections.length && otherIntersections[ i ].point.x < firstXOfPath ) {\n\n\t\t\t\tif ( stack.length > 0 && stack[ stack.length - 1 ] === otherIntersections[ i ].identifier ) {\n\n\t\t\t\t\tstack.pop();\n\n\t\t\t\t} else {\n\n\t\t\t\t\tstack.push( otherIntersections[ i ].identifier );\n\n\t\t\t\t}\n\n\t\t\t\ti ++;\n\n\t\t\t}\n\n\t\t\tstack.push( simplePath.identifier );\n\n\t\t\tif ( _fillRule === 'evenodd' ) {\n\n\t\t\t\tconst isHole = stack.length % 2 === 0 ? true : false;\n\t\t\t\tconst isHoleFor = stack[ stack.length - 2 ];\n\n\t\t\t\treturn { identifier: simplePath.identifier, isHole: isHole, for: isHoleFor };\n\n\t\t\t} else if ( _fillRule === 'nonzero' ) {\n\n\t\t\t\t// check if path is a hole by counting the amount of paths with alternating rotations it has to cross.\n\t\t\t\tlet isHole = true;\n\t\t\t\tlet isHoleFor = null;\n\t\t\t\tlet lastCWValue = null;\n\n\t\t\t\tfor ( let i = 0; i < stack.length; i ++ ) {\n\n\t\t\t\t\tconst identifier = stack[ i ];\n\t\t\t\t\tif ( isHole ) {\n\n\t\t\t\t\t\tlastCWValue = allPaths[ identifier ].isCW;\n\t\t\t\t\t\tisHole = false;\n\t\t\t\t\t\tisHoleFor = identifier;\n\n\t\t\t\t\t} else if ( lastCWValue !== allPaths[ identifier ].isCW ) {\n\n\t\t\t\t\t\tlastCWValue = allPaths[ identifier ].isCW;\n\t\t\t\t\t\tisHole = true;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\treturn { identifier: simplePath.identifier, isHole: isHole, for: isHoleFor };\n\n\t\t\t} else {\n\n\t\t\t\tconsole.warn( 'fill-rule: \"' + _fillRule + '\" is currently not implemented.' );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// check for self intersecting paths\n\t\t// TODO\n\n\t\t// check intersecting paths\n\t\t// TODO\n\n\t\t// prepare paths for hole detection\n\t\tlet scanlineMinX = BIGNUMBER;\n\t\tlet scanlineMaxX = -999999999;\n\n\t\tlet simplePaths = shapePath.subPaths.map( p => {\n\n\t\t\tconst points = p.getPoints();\n\t\t\tlet maxY = -999999999;\n\t\t\tlet minY = BIGNUMBER;\n\t\t\tlet maxX = -999999999;\n\t\t\tlet minX = BIGNUMBER;\n\n\t      \t//points.forEach(p => p.y *= -1);\n\n\t\t\tfor ( let i = 0; i < points.length; i ++ ) {\n\n\t\t\t\tconst p = points[ i ];\n\n\t\t\t\tif ( p.y > maxY ) {\n\n\t\t\t\t\tmaxY = p.y;\n\n\t\t\t\t}\n\n\t\t\t\tif ( p.y < minY ) {\n\n\t\t\t\t\tminY = p.y;\n\n\t\t\t\t}\n\n\t\t\t\tif ( p.x > maxX ) {\n\n\t\t\t\t\tmaxX = p.x;\n\n\t\t\t\t}\n\n\t\t\t\tif ( p.x < minX ) {\n\n\t\t\t\t\tminX = p.x;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t//\n\t\t\tif ( scanlineMaxX <= maxX ) {\n\n\t\t\t\tscanlineMaxX = maxX + 1;\n\n\t\t\t}\n\n\t\t\tif ( scanlineMinX >= minX ) {\n\n\t\t\t\tscanlineMinX = minX - 1;\n\n\t\t\t}\n\n\t\t\treturn { curves: p.curves, points: points, isCW: ShapeUtils.isClockWise( points ), identifier: -1, boundingBox: new Box2( new Vector2( minX, minY ), new Vector2( maxX, maxY ) ) };\n\n\t\t} );\n\n\t\tsimplePaths = simplePaths.filter( sp => sp.points.length > 1 );\n\n\t\tfor ( let identifier = 0; identifier < simplePaths.length; identifier ++ ) {\n\n\t\t\tsimplePaths[ identifier ].identifier = identifier;\n\n\t\t}\n\n\t\t// check if path is solid or a hole\n\t\tconst isAHole = simplePaths.map( p => isHoleTo( p, simplePaths, scanlineMinX, scanlineMaxX, ( shapePath.userData ? shapePath.userData.style.fillRule : undefined ) ) );\n\n\n\t\tconst shapesToReturn = [];\n\t\tsimplePaths.forEach( p => {\n\n\t\t\tconst amIAHole = isAHole[ p.identifier ];\n\n\t\t\tif ( ! amIAHole.isHole ) {\n\n\t\t\t\tconst shape = new Shape();\n\t\t\t\tshape.curves = p.curves;\n\t\t\t\tconst holes = isAHole.filter( h => h.isHole && h.for === p.identifier );\n\t\t\t\tholes.forEach( h => {\n\n\t\t\t\t\tconst hole = simplePaths[ h.identifier ];\n\t\t\t\t\tconst path = new Path();\n\t\t\t\t\tpath.curves = hole.curves;\n\t\t\t\t\tshape.holes.push( path );\n\n\t\t\t\t} );\n\t\t\t\tshapesToReturn.push( shape );\n\n\t\t\t}\n\n\t\t} );\n\n\t\treturn shapesToReturn;\n\n\t}\n\n\tstatic getStrokeStyle( width, color, lineJoin, lineCap, miterLimit ) {\n\n\t\t// Param width: Stroke width\n\t\t// Param color: As returned by THREE.Color.getStyle()\n\t\t// Param lineJoin: One of \"round\", \"bevel\", \"miter\" or \"miter-limit\"\n\t\t// Param lineCap: One of \"round\", \"square\" or \"butt\"\n\t\t// Param miterLimit: Maximum join length, in multiples of the \"width\" parameter (join is truncated if it exceeds that distance)\n\t\t// Returns style object\n\n\t\twidth = width !== undefined ? width : 1;\n\t\tcolor = color !== undefined ? color : '#000';\n\t\tlineJoin = lineJoin !== undefined ? lineJoin : 'miter';\n\t\tlineCap = lineCap !== undefined ? lineCap : 'butt';\n\t\tmiterLimit = miterLimit !== undefined ? miterLimit : 4;\n\n\t\treturn {\n\t\t\tstrokeColor: color,\n\t\t\tstrokeWidth: width,\n\t\t\tstrokeLineJoin: lineJoin,\n\t\t\tstrokeLineCap: lineCap,\n\t\t\tstrokeMiterLimit: miterLimit\n\t\t};\n\n\t}\n\n\tstatic pointsToStroke( points, style, arcDivisions, minDistance ) {\n\n\t\t// Generates a stroke with some width around the given path.\n\t\t// The path can be open or closed (last point equals to first point)\n\t\t// Param points: Array of Vector2D (the path). Minimum 2 points.\n\t\t// Param style: Object with SVG properties as returned by SVGLoader.getStrokeStyle(), or SVGLoader.parse() in the path.userData.style object\n\t\t// Params arcDivisions: Arc divisions for round joins and endcaps. (Optional)\n\t\t// Param minDistance: Points closer to this distance will be merged. (Optional)\n\t\t// Returns BufferGeometry with stroke triangles (In plane z = 0). UV coordinates are generated ('u' along path. 'v' across it, from left to right)\n\n\t\tconst vertices = [];\n\t\tconst normals = [];\n\t\tconst uvs = [];\n\n\t\tif ( SVGLoader.pointsToStrokeWithBuffers( points, style, arcDivisions, minDistance, vertices, normals, uvs ) === 0 ) {\n\n\t\t\treturn null;\n\n\t\t}\n\n\t\tconst geometry = new BufferGeometry();\n\t\tgeometry.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\t\tgeometry.setAttribute( 'normal', new Float32BufferAttribute( normals, 3 ) );\n\t\tgeometry.setAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\n\n\t\treturn geometry;\n\n\t}\n\n\tstatic pointsToStrokeWithBuffers( points, style, arcDivisions, minDistance, vertices, normals, uvs, vertexOffset ) {\n\n\t\t// This function can be called to update existing arrays or buffers.\n\t\t// Accepts same parameters as pointsToStroke, plus the buffers and optional offset.\n\t\t// Param vertexOffset: Offset vertices to start writing in the buffers (3 elements/vertex for vertices and normals, and 2 elements/vertex for uvs)\n\t\t// Returns number of written vertices / normals / uvs pairs\n\t\t// if 'vertices' parameter is undefined no triangles will be generated, but the returned vertices count will still be valid (useful to preallocate the buffers)\n\t\t// 'normals' and 'uvs' buffers are optional\n\n\t\tconst tempV2_1 = new Vector2();\n\t\tconst tempV2_2 = new Vector2();\n\t\tconst tempV2_3 = new Vector2();\n\t\tconst tempV2_4 = new Vector2();\n\t\tconst tempV2_5 = new Vector2();\n\t\tconst tempV2_6 = new Vector2();\n\t\tconst tempV2_7 = new Vector2();\n\t\tconst lastPointL = new Vector2();\n\t\tconst lastPointR = new Vector2();\n\t\tconst point0L = new Vector2();\n\t\tconst point0R = new Vector2();\n\t\tconst currentPointL = new Vector2();\n\t\tconst currentPointR = new Vector2();\n\t\tconst nextPointL = new Vector2();\n\t\tconst nextPointR = new Vector2();\n\t\tconst innerPoint = new Vector2();\n\t\tconst outerPoint = new Vector2();\n\n\t\tarcDivisions = arcDivisions !== undefined ? arcDivisions : 12;\n\t\tminDistance = minDistance !== undefined ? minDistance : 0.001;\n\t\tvertexOffset = vertexOffset !== undefined ? vertexOffset : 0;\n\n\t\t// First ensure there are no duplicated points\n\t\tpoints = removeDuplicatedPoints( points );\n\n\t\tconst numPoints = points.length;\n\n\t\tif ( numPoints < 2 ) return 0;\n\n\t\tconst isClosed = points[ 0 ].equals( points[ numPoints - 1 ] );\n\n\t\t\n\n\t\tlet currentPoint;\n\t\tlet previousPoint = points[ 0 ];\n\t\tlet nextPoint;\n\n\t\tconst strokeWidth2 = style.strokeWidth / 2;\n\n\t\tconst deltaU = 1 / ( numPoints - 1 );\n\t\tlet u0 = 0, u1;\n\n\t\tlet innerSideModified;\n\t\tlet joinIsOnLeftSide;\n\t\tlet isMiter;\n\t\tlet initialJoinIsOnLeftSide = false;\n\n\t\tlet numVertices = 0;\n\t\tlet currentCoordinate = vertexOffset * 3;\n\t\tlet currentCoordinateUV = vertexOffset * 2;\n\n\t\t// Get initial left and right stroke points\n\t\tgetNormal( points[ 0 ], points[ 1 ], tempV2_1 ).multiplyScalar( strokeWidth2 );\n\t\tlastPointL.copy( points[ 0 ] ).sub( tempV2_1 );\n\t\tlastPointR.copy( points[ 0 ] ).add( tempV2_1 );\n\t\tpoint0L.copy( lastPointL );\n\t\tpoint0R.copy( lastPointR );\n\n\t\tfor ( let iPoint = 1; iPoint < numPoints; iPoint ++ ) {\n\n\t\t\tcurrentPoint = points[ iPoint ];\n\n\t\t\t// Get next point\n\t\t\tif ( iPoint === numPoints - 1 ) {\n\n\t\t\t\tif ( isClosed ) {\n\n\t\t\t\t\t// Skip duplicated initial point\n\t\t\t\t\tnextPoint = points[ 1 ];\n\n\t\t\t\t} else nextPoint = undefined;\n\n\t\t\t} else {\n\n\t\t\t\tnextPoint = points[ iPoint + 1 ];\n\n\t\t\t}\n\n\t\t\t// Normal of previous segment in tempV2_1\n\t\t\tconst normal1 = tempV2_1;\n\t\t\tgetNormal( previousPoint, currentPoint, normal1 );\n\n\t\t\ttempV2_3.copy( normal1 ).multiplyScalar( strokeWidth2 );\n\t\t\tcurrentPointL.copy( currentPoint ).sub( tempV2_3 );\n\t\t\tcurrentPointR.copy( currentPoint ).add( tempV2_3 );\n\n\t\t\tu1 = u0 + deltaU;\n\n\t\t\tinnerSideModified = false;\n\n\t\t\tif ( nextPoint !== undefined ) {\n\n\t\t\t\t// Normal of next segment in tempV2_2\n\t\t\t\tgetNormal( currentPoint, nextPoint, tempV2_2 );\n\n\t\t\t\ttempV2_3.copy( tempV2_2 ).multiplyScalar( strokeWidth2 );\n\t\t\t\tnextPointL.copy( currentPoint ).sub( tempV2_3 );\n\t\t\t\tnextPointR.copy( currentPoint ).add( tempV2_3 );\n\n\t\t\t\tjoinIsOnLeftSide = true;\n\t\t\t\ttempV2_3.subVectors( nextPoint, previousPoint );\n\t\t\t\tif ( normal1.dot( tempV2_3 ) < 0 ) {\n\n\t\t\t\t\tjoinIsOnLeftSide = false;\n\n\t\t\t\t}\n\n\t\t\t\tif ( iPoint === 1 ) initialJoinIsOnLeftSide = joinIsOnLeftSide;\n\n\t\t\t\ttempV2_3.subVectors( nextPoint, currentPoint );\n\t\t\t\ttempV2_3.normalize();\n\t\t\t\tconst dot = Math.abs( normal1.dot( tempV2_3 ) );\n\n\t\t\t\t// If path is straight, don't create join\n\t\t\t\tif ( dot > Number.EPSILON ) {\n\n\t\t\t\t\t// Compute inner and outer segment intersections\n\t\t\t\t\tconst miterSide = strokeWidth2 / dot;\n\t\t\t\t\ttempV2_3.multiplyScalar( - miterSide );\n\t\t\t\t\ttempV2_4.subVectors( currentPoint, previousPoint );\n\t\t\t\t\ttempV2_5.copy( tempV2_4 ).setLength( miterSide ).add( tempV2_3 );\n\t\t\t\t\tinnerPoint.copy( tempV2_5 ).negate();\n\t\t\t\t\tconst miterLength2 = tempV2_5.length();\n\t\t\t\t\tconst segmentLengthPrev = tempV2_4.length();\n\t\t\t\t\ttempV2_4.divideScalar( segmentLengthPrev );\n\t\t\t\t\ttempV2_6.subVectors( nextPoint, currentPoint );\n\t\t\t\t\tconst segmentLengthNext = tempV2_6.length();\n\t\t\t\t\ttempV2_6.divideScalar( segmentLengthNext );\n\t\t\t\t\t// Check that previous and next segments doesn't overlap with the innerPoint of intersection\n\t\t\t\t\tif ( tempV2_4.dot( innerPoint ) < segmentLengthPrev && tempV2_6.dot( innerPoint ) < segmentLengthNext ) {\n\n\t\t\t\t\t\tinnerSideModified = true;\n\n\t\t\t\t\t}\n\n\t\t\t\t\touterPoint.copy( tempV2_5 ).add( currentPoint );\n\t\t\t\t\tinnerPoint.add( currentPoint );\n\n\t\t\t\t\tisMiter = false;\n\n\t\t\t\t\tif ( innerSideModified ) {\n\n\t\t\t\t\t\tif ( joinIsOnLeftSide ) {\n\n\t\t\t\t\t\t\tnextPointR.copy( innerPoint );\n\t\t\t\t\t\t\tcurrentPointR.copy( innerPoint );\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tnextPointL.copy( innerPoint );\n\t\t\t\t\t\t\tcurrentPointL.copy( innerPoint );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\t// The segment triangles are generated here if there was overlapping\n\n\t\t\t\t\t\tmakeSegmentTriangles();\n\n\t\t\t\t\t}\n\n\t\t\t\t\tswitch ( style.strokeLineJoin ) {\n\n\t\t\t\t\t\tcase 'bevel':\n\n\t\t\t\t\t\t\tmakeSegmentWithBevelJoin( joinIsOnLeftSide, innerSideModified, u1 );\n\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 'round':\n\n\t\t\t\t\t\t\t// Segment triangles\n\n\t\t\t\t\t\t\tcreateSegmentTrianglesWithMiddleSection( joinIsOnLeftSide, innerSideModified );\n\n\t\t\t\t\t\t\t// Join triangles\n\n\t\t\t\t\t\t\tif ( joinIsOnLeftSide ) {\n\n\t\t\t\t\t\t\t\tmakeCircularSector( currentPoint, currentPointL, nextPointL, u1, 0 );\n\n\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\tmakeCircularSector( currentPoint, nextPointR, currentPointR, u1, 1 );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 'miter':\n\t\t\t\t\t\tcase 'miter-clip':\n\t\t\t\t\t\tdefault:\n\n\t\t\t\t\t\t\tconst miterFraction = ( strokeWidth2 * style.strokeMiterLimit ) / miterLength2;\n\n\t\t\t\t\t\t\tif ( miterFraction < 1 ) {\n\n\t\t\t\t\t\t\t\t// The join miter length exceeds the miter limit\n\n\t\t\t\t\t\t\t\tif ( style.strokeLineJoin !== 'miter-clip' ) {\n\n\t\t\t\t\t\t\t\t\tmakeSegmentWithBevelJoin( joinIsOnLeftSide, innerSideModified, u1 );\n\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t\t// Segment triangles\n\n\t\t\t\t\t\t\t\t\tcreateSegmentTrianglesWithMiddleSection( joinIsOnLeftSide, innerSideModified );\n\n\t\t\t\t\t\t\t\t\t// Miter-clip join triangles\n\n\t\t\t\t\t\t\t\t\tif ( joinIsOnLeftSide ) {\n\n\t\t\t\t\t\t\t\t\t\ttempV2_6.subVectors( outerPoint, currentPointL ).multiplyScalar( miterFraction ).add( currentPointL );\n\t\t\t\t\t\t\t\t\t\ttempV2_7.subVectors( outerPoint, nextPointL ).multiplyScalar( miterFraction ).add( nextPointL );\n\n\t\t\t\t\t\t\t\t\t\taddVertex( currentPointL, u1, 0 );\n\t\t\t\t\t\t\t\t\t\taddVertex( tempV2_6, u1, 0 );\n\t\t\t\t\t\t\t\t\t\taddVertex( currentPoint, u1, 0.5 );\n\n\t\t\t\t\t\t\t\t\t\taddVertex( currentPoint, u1, 0.5 );\n\t\t\t\t\t\t\t\t\t\taddVertex( tempV2_6, u1, 0 );\n\t\t\t\t\t\t\t\t\t\taddVertex( tempV2_7, u1, 0 );\n\n\t\t\t\t\t\t\t\t\t\taddVertex( currentPoint, u1, 0.5 );\n\t\t\t\t\t\t\t\t\t\taddVertex( tempV2_7, u1, 0 );\n\t\t\t\t\t\t\t\t\t\taddVertex( nextPointL, u1, 0 );\n\n\t\t\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t\t\ttempV2_6.subVectors( outerPoint, currentPointR ).multiplyScalar( miterFraction ).add( currentPointR );\n\t\t\t\t\t\t\t\t\t\ttempV2_7.subVectors( outerPoint, nextPointR ).multiplyScalar( miterFraction ).add( nextPointR );\n\n\t\t\t\t\t\t\t\t\t\taddVertex( currentPointR, u1, 1 );\n\t\t\t\t\t\t\t\t\t\taddVertex( tempV2_6, u1, 1 );\n\t\t\t\t\t\t\t\t\t\taddVertex( currentPoint, u1, 0.5 );\n\n\t\t\t\t\t\t\t\t\t\taddVertex( currentPoint, u1, 0.5 );\n\t\t\t\t\t\t\t\t\t\taddVertex( tempV2_6, u1, 1 );\n\t\t\t\t\t\t\t\t\t\taddVertex( tempV2_7, u1, 1 );\n\n\t\t\t\t\t\t\t\t\t\taddVertex( currentPoint, u1, 0.5 );\n\t\t\t\t\t\t\t\t\t\taddVertex( tempV2_7, u1, 1 );\n\t\t\t\t\t\t\t\t\t\taddVertex( nextPointR, u1, 1 );\n\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t// Miter join segment triangles\n\n\t\t\t\t\t\t\t\tif ( innerSideModified ) {\n\n\t\t\t\t\t\t\t\t\t// Optimized segment + join triangles\n\n\t\t\t\t\t\t\t\t\tif ( joinIsOnLeftSide ) {\n\n\t\t\t\t\t\t\t\t\t\taddVertex( lastPointR, u0, 1 );\n\t\t\t\t\t\t\t\t\t\taddVertex( lastPointL, u0, 0 );\n\t\t\t\t\t\t\t\t\t\taddVertex( outerPoint, u1, 0 );\n\n\t\t\t\t\t\t\t\t\t\taddVertex( lastPointR, u0, 1 );\n\t\t\t\t\t\t\t\t\t\taddVertex( outerPoint, u1, 0 );\n\t\t\t\t\t\t\t\t\t\taddVertex( innerPoint, u1, 1 );\n\n\t\t\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t\t\taddVertex( lastPointR, u0, 1 );\n\t\t\t\t\t\t\t\t\t\taddVertex( lastPointL, u0, 0 );\n\t\t\t\t\t\t\t\t\t\taddVertex( outerPoint, u1, 1 );\n\n\t\t\t\t\t\t\t\t\t\taddVertex( lastPointL, u0, 0 );\n\t\t\t\t\t\t\t\t\t\taddVertex( innerPoint, u1, 0 );\n\t\t\t\t\t\t\t\t\t\taddVertex( outerPoint, u1, 1 );\n\n\t\t\t\t\t\t\t\t\t}\n\n\n\t\t\t\t\t\t\t\t\tif ( joinIsOnLeftSide ) {\n\n\t\t\t\t\t\t\t\t\t\tnextPointL.copy( outerPoint );\n\n\t\t\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t\t\tnextPointR.copy( outerPoint );\n\n\t\t\t\t\t\t\t\t\t}\n\n\n\t\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t\t// Add extra miter join triangles\n\n\t\t\t\t\t\t\t\t\tif ( joinIsOnLeftSide ) {\n\n\t\t\t\t\t\t\t\t\t\taddVertex( currentPointL, u1, 0 );\n\t\t\t\t\t\t\t\t\t\taddVertex( outerPoint, u1, 0 );\n\t\t\t\t\t\t\t\t\t\taddVertex( currentPoint, u1, 0.5 );\n\n\t\t\t\t\t\t\t\t\t\taddVertex( currentPoint, u1, 0.5 );\n\t\t\t\t\t\t\t\t\t\taddVertex( outerPoint, u1, 0 );\n\t\t\t\t\t\t\t\t\t\taddVertex( nextPointL, u1, 0 );\n\n\t\t\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t\t\taddVertex( currentPointR, u1, 1 );\n\t\t\t\t\t\t\t\t\t\taddVertex( outerPoint, u1, 1 );\n\t\t\t\t\t\t\t\t\t\taddVertex( currentPoint, u1, 0.5 );\n\n\t\t\t\t\t\t\t\t\t\taddVertex( currentPoint, u1, 0.5 );\n\t\t\t\t\t\t\t\t\t\taddVertex( outerPoint, u1, 1 );\n\t\t\t\t\t\t\t\t\t\taddVertex( nextPointR, u1, 1 );\n\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tisMiter = true;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// The segment triangles are generated here when two consecutive points are collinear\n\n\t\t\t\t\tmakeSegmentTriangles();\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\t// The segment triangles are generated here if it is the ending segment\n\n\t\t\t\tmakeSegmentTriangles();\n\n\t\t\t}\n\n\t\t\tif ( ! isClosed && iPoint === numPoints - 1 ) {\n\n\t\t\t\t// Start line endcap\n\t\t\t\taddCapGeometry( points[ 0 ], point0L, point0R, joinIsOnLeftSide, true, u0 );\n\n\t\t\t}\n\n\t\t\t// Increment loop variables\n\n\t\t\tu0 = u1;\n\n\t\t\tpreviousPoint = currentPoint;\n\n\t\t\tlastPointL.copy( nextPointL );\n\t\t\tlastPointR.copy( nextPointR );\n\n\t\t}\n\n\t\tif ( ! isClosed ) {\n\n\t\t\t// Ending line endcap\n\t\t\taddCapGeometry( currentPoint, currentPointL, currentPointR, joinIsOnLeftSide, false, u1 );\n\n\t\t} else if ( innerSideModified && vertices ) {\n\n\t\t\t// Modify path first segment vertices to adjust to the segments inner and outer intersections\n\n\t\t\tlet lastOuter = outerPoint;\n\t\t\tlet lastInner = innerPoint;\n\n\t\t\tif ( initialJoinIsOnLeftSide !== joinIsOnLeftSide ) {\n\n\t\t\t\tlastOuter = innerPoint;\n\t\t\t\tlastInner = outerPoint;\n\n\t\t\t}\n\n\t\t\tif ( joinIsOnLeftSide ) {\n\n\t\t\t\tif ( isMiter || initialJoinIsOnLeftSide ) {\n\n\t\t\t\t\tlastInner.toArray( vertices, 0 * 3 );\n\t\t\t\t\tlastInner.toArray( vertices, 3 * 3 );\n\n\t\t\t\t\tif ( isMiter ) {\n\n\t\t\t\t\t\tlastOuter.toArray( vertices, 1 * 3 );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tif ( isMiter || ! initialJoinIsOnLeftSide ) {\n\n\t\t\t\t\tlastInner.toArray( vertices, 1 * 3 );\n\t\t\t\t\tlastInner.toArray( vertices, 3 * 3 );\n\n\t\t\t\t\tif ( isMiter ) {\n\n\t\t\t\t\t\tlastOuter.toArray( vertices, 0 * 3 );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn numVertices;\n\n\t\t// -- End of algorithm\n\n\t\t// -- Functions\n\n\t\tfunction getNormal( p1, p2, result ) {\n\n\t\t\tresult.subVectors( p2, p1 );\n\t\t\treturn result.set( - result.y, result.x ).normalize();\n\n\t\t}\n\n\t\tfunction addVertex( position, u, v ) {\n\n\t\t\tif ( vertices ) {\n\n\t\t\t\tvertices[ currentCoordinate ] = position.x;\n\t\t\t\tvertices[ currentCoordinate + 1 ] = position.y;\n\t\t\t\tvertices[ currentCoordinate + 2 ] = 0;\n\n\t\t\t\tif ( normals ) {\n\n\t\t\t\t\tnormals[ currentCoordinate ] = 0;\n\t\t\t\t\tnormals[ currentCoordinate + 1 ] = 0;\n\t\t\t\t\tnormals[ currentCoordinate + 2 ] = 1;\n\n\t\t\t\t}\n\n\t\t\t\tcurrentCoordinate += 3;\n\n\t\t\t\tif ( uvs ) {\n\n\t\t\t\t\tuvs[ currentCoordinateUV ] = u;\n\t\t\t\t\tuvs[ currentCoordinateUV + 1 ] = v;\n\n\t\t\t\t\tcurrentCoordinateUV += 2;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tnumVertices += 3;\n\n\t\t}\n\n\t\tfunction makeCircularSector( center, p1, p2, u, v ) {\n\n\t\t\t// param p1, p2: Points in the circle arc.\n\t\t\t// p1 and p2 are in clockwise direction.\n\n\t\t\ttempV2_1.copy( p1 ).sub( center ).normalize();\n\t\t\ttempV2_2.copy( p2 ).sub( center ).normalize();\n\n\t\t\tlet angle = Math.PI;\n\t\t\tconst dot = tempV2_1.dot( tempV2_2 );\n\t\t\tif ( Math.abs( dot ) < 1 ) angle = Math.abs( Math.acos( dot ) );\n\n\t\t\tangle /= arcDivisions;\n\n\t\t\ttempV2_3.copy( p1 );\n\n\t\t\tfor ( let i = 0, il = arcDivisions - 1; i < il; i ++ ) {\n\n\t\t\t\ttempV2_4.copy( tempV2_3 ).rotateAround( center, angle );\n\n\t\t\t\taddVertex( tempV2_3, u, v );\n\t\t\t\taddVertex( tempV2_4, u, v );\n\t\t\t\taddVertex( center, u, 0.5 );\n\n\t\t\t\ttempV2_3.copy( tempV2_4 );\n\n\t\t\t}\n\n\t\t\taddVertex( tempV2_4, u, v );\n\t\t\taddVertex( p2, u, v );\n\t\t\taddVertex( center, u, 0.5 );\n\n\t\t}\n\n\t\tfunction makeSegmentTriangles() {\n\n\t\t\taddVertex( lastPointR, u0, 1 );\n\t\t\taddVertex( lastPointL, u0, 0 );\n\t\t\taddVertex( currentPointL, u1, 0 );\n\n\t\t\taddVertex( lastPointR, u0, 1 );\n\t\t\taddVertex( currentPointL, u1, 1 );\n\t\t\taddVertex( currentPointR, u1, 0 );\n\n\t\t}\n\n\t\tfunction makeSegmentWithBevelJoin( joinIsOnLeftSide, innerSideModified, u ) {\n\n\t\t\tif ( innerSideModified ) {\n\n\t\t\t\t// Optimized segment + bevel triangles\n\n\t\t\t\tif ( joinIsOnLeftSide ) {\n\n\t\t\t\t\t// Path segments triangles\n\n\t\t\t\t\taddVertex( lastPointR, u0, 1 );\n\t\t\t\t\taddVertex( lastPointL, u0, 0 );\n\t\t\t\t\taddVertex( currentPointL, u1, 0 );\n\n\t\t\t\t\taddVertex( lastPointR, u0, 1 );\n\t\t\t\t\taddVertex( currentPointL, u1, 0 );\n\t\t\t\t\taddVertex( innerPoint, u1, 1 );\n\n\t\t\t\t\t// Bevel join triangle\n\n\t\t\t\t\taddVertex( currentPointL, u, 0 );\n\t\t\t\t\taddVertex( nextPointL, u, 0 );\n\t\t\t\t\taddVertex( innerPoint, u, 0.5 );\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// Path segments triangles\n\n\t\t\t\t\taddVertex( lastPointR, u0, 1 );\n\t\t\t\t\taddVertex( lastPointL, u0, 0 );\n\t\t\t\t\taddVertex( currentPointR, u1, 1 );\n\n\t\t\t\t\taddVertex( lastPointL, u0, 0 );\n\t\t\t\t\taddVertex( innerPoint, u1, 0 );\n\t\t\t\t\taddVertex( currentPointR, u1, 1 );\n\n\t\t\t\t\t// Bevel join triangle\n\n\t\t\t\t\taddVertex( currentPointR, u, 1 );\n\t\t\t\t\taddVertex( nextPointR, u, 0 );\n\t\t\t\t\taddVertex( innerPoint, u, 0.5 );\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\t// Bevel join triangle. The segment triangles are done in the main loop\n\n\t\t\t\tif ( joinIsOnLeftSide ) {\n\n\t\t\t\t\taddVertex( currentPointL, u, 0 );\n\t\t\t\t\taddVertex( nextPointL, u, 0 );\n\t\t\t\t\taddVertex( currentPoint, u, 0.5 );\n\n\t\t\t\t} else {\n\n\t\t\t\t\taddVertex( currentPointR, u, 1 );\n\t\t\t\t\taddVertex( nextPointR, u, 0 );\n\t\t\t\t\taddVertex( currentPoint, u, 0.5 );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction createSegmentTrianglesWithMiddleSection( joinIsOnLeftSide, innerSideModified ) {\n\n\t\t\tif ( innerSideModified ) {\n\n\t\t\t\tif ( joinIsOnLeftSide ) {\n\n\t\t\t\t\taddVertex( lastPointR, u0, 1 );\n\t\t\t\t\taddVertex( lastPointL, u0, 0 );\n\t\t\t\t\taddVertex( currentPointL, u1, 0 );\n\n\t\t\t\t\taddVertex( lastPointR, u0, 1 );\n\t\t\t\t\taddVertex( currentPointL, u1, 0 );\n\t\t\t\t\taddVertex( innerPoint, u1, 1 );\n\n\t\t\t\t\taddVertex( currentPointL, u0, 0 );\n\t\t\t\t\taddVertex( currentPoint, u1, 0.5 );\n\t\t\t\t\taddVertex( innerPoint, u1, 1 );\n\n\t\t\t\t\taddVertex( currentPoint, u1, 0.5 );\n\t\t\t\t\taddVertex( nextPointL, u0, 0 );\n\t\t\t\t\taddVertex( innerPoint, u1, 1 );\n\n\t\t\t\t} else {\n\n\t\t\t\t\taddVertex( lastPointR, u0, 1 );\n\t\t\t\t\taddVertex( lastPointL, u0, 0 );\n\t\t\t\t\taddVertex( currentPointR, u1, 1 );\n\n\t\t\t\t\taddVertex( lastPointL, u0, 0 );\n\t\t\t\t\taddVertex( innerPoint, u1, 0 );\n\t\t\t\t\taddVertex( currentPointR, u1, 1 );\n\n\t\t\t\t\taddVertex( currentPointR, u0, 1 );\n\t\t\t\t\taddVertex( innerPoint, u1, 0 );\n\t\t\t\t\taddVertex( currentPoint, u1, 0.5 );\n\n\t\t\t\t\taddVertex( currentPoint, u1, 0.5 );\n\t\t\t\t\taddVertex( innerPoint, u1, 0 );\n\t\t\t\t\taddVertex( nextPointR, u0, 1 );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction addCapGeometry( center, p1, p2, joinIsOnLeftSide, start, u ) {\n\n\t\t\t// param center: End point of the path\n\t\t\t// param p1, p2: Left and right cap points\n\n\t\t\tswitch ( style.strokeLineCap ) {\n\n\t\t\t\tcase 'round':\n\n\t\t\t\t\tif ( start ) {\n\n\t\t\t\t\t\tmakeCircularSector( center, p2, p1, u, 0.5 );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tmakeCircularSector( center, p1, p2, u, 0.5 );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'square':\n\n\t\t\t\t\tif ( start ) {\n\n\t\t\t\t\t\ttempV2_1.subVectors( p1, center );\n\t\t\t\t\t\ttempV2_2.set( tempV2_1.y, - tempV2_1.x );\n\n\t\t\t\t\t\ttempV2_3.addVectors( tempV2_1, tempV2_2 ).add( center );\n\t\t\t\t\t\ttempV2_4.subVectors( tempV2_2, tempV2_1 ).add( center );\n\n\t\t\t\t\t\t// Modify already existing vertices\n\t\t\t\t\t\tif ( joinIsOnLeftSide ) {\n\n\t\t\t\t\t\t\ttempV2_3.toArray( vertices, 1 * 3 );\n\t\t\t\t\t\t\ttempV2_4.toArray( vertices, 0 * 3 );\n\t\t\t\t\t\t\ttempV2_4.toArray( vertices, 3 * 3 );\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\ttempV2_3.toArray( vertices, 1 * 3 );\n\t\t\t\t\t\t\ttempV2_3.toArray( vertices, 3 * 3 );\n\t\t\t\t\t\t\ttempV2_4.toArray( vertices, 0 * 3 );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\ttempV2_1.subVectors( p2, center );\n\t\t\t\t\t\ttempV2_2.set( tempV2_1.y, - tempV2_1.x );\n\n\t\t\t\t\t\ttempV2_3.addVectors( tempV2_1, tempV2_2 ).add( center );\n\t\t\t\t\t\ttempV2_4.subVectors( tempV2_2, tempV2_1 ).add( center );\n\n\t\t\t\t\t\tconst vl = vertices.length;\n\n\t\t\t\t\t\t// Modify already existing vertices\n\t\t\t\t\t\tif ( joinIsOnLeftSide ) {\n\n\t\t\t\t\t\t\ttempV2_3.toArray( vertices, vl - 1 * 3 );\n\t\t\t\t\t\t\ttempV2_4.toArray( vertices, vl - 2 * 3 );\n\t\t\t\t\t\t\ttempV2_4.toArray( vertices, vl - 4 * 3 );\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\ttempV2_3.toArray( vertices, vl - 2 * 3 );\n\t\t\t\t\t\t\ttempV2_4.toArray( vertices, vl - 1 * 3 );\n\t\t\t\t\t\t\ttempV2_4.toArray( vertices, vl - 4 * 3 );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction removeDuplicatedPoints( points ) {\n\n\t\t\t// Creates a new array if necessary with duplicated points removed.\n\t\t\t// This does not remove duplicated initial and ending points of a closed path.\n\n\t\t\tlet dupPoints = false;\n\t\t\tfor ( let i = 1, n = points.length - 1; i < n; i ++ ) {\n\n\t\t\t\tif ( points[ i ].distanceTo( points[ i + 1 ] ) < minDistance ) {\n\n\t\t\t\t\tdupPoints = true;\n\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( ! dupPoints ) return points;\n\n\t\t\tconst newPoints = [];\n\t\t\tnewPoints.push( points[ 0 ] );\n\n\t\t\tfor ( let i = 1, n = points.length - 1; i < n; i ++ ) {\n\n\t\t\t\tif ( points[ i ].distanceTo( points[ i + 1 ] ) >= minDistance ) {\n\n\t\t\t\t\tnewPoints.push( points[ i ] );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tnewPoints.push( points[ points.length - 1 ] );\n\n\t\t\treturn newPoints;\n\n\t\t}\n\n\t}\n\n\n}\n\nclass AutoSvg extends Mesh {\n\n\tconstructor ( model, option = {}, material = null  ) {\n\n\t\tsuper();\n\n\t\tthis.model = model;\n\n\t\tthis.material = material;\n\t\tthis.outMaterial = material ? true : false;\n\n\t\tthis.XML = new XMLSerializer();\n\t\tthis.color = new Color();\n\t\tthis.opacity = 1;\n\t\tthis.svgLoader = new SVGLoader();\n\t\tthis.base = \"http://www.w3.org/2000/svg\";\n\t\tthis.svg = document.createElementNS( this.base, 'svg' );\n\t\tthis.layerUp = 0.0001;\n\t\tthis.fill = true;\n\t\tthis.stroke = true;\n\n\t\tthis.size = option.size || 1;\n\t\tthis.scaler = 1/this.size;\n\n\t\t//let w = 10\n\t\t//this.set( { viewBox:'0 0 '+w+' '+w, width:w, height:w, preserveAspectRatio:'none' })\n\n\t\tif( !this.model ) return;\n\n\t\tlet o = {\n\t\t\tradius: 5, \n\t\t\tmin:90, \n\t\t\tmax:90, \n\t\t\tstrokeSize:0.25,\n\t\t\t...option\n\t\t};\n\n\t\tswitch( this.model ){\n\n\t\t\tcase 'angle':\n\t\t\tthis.fill = o.fill !== undefined ? o.fill : true;\n\t        this.stroke = o.stroke !== undefined ? o.stroke : true;\n\t        let min = Math.abs(o.min);\n\t\t\tthis.add( 'path', { d: this.circle(0,0, o.radius, 180,180+o.max, true ), stroke:'none', fill:'#FF0000', 'fill-opacity':0.1 } );\n\t\t\tthis.add( 'path', { d: this.circle(0,0, o.radius, 180,180+o.max, false, false, 0.3), stroke:'#FF0000', 'stroke-opacity':1, 'stroke-width':o.strokeSize, fill:'none', 'stroke-linecap':'round' } );\n\t\t\tthis.add( 'path', { d: this.circle(0,0, o.radius, 180-min,180, true ), stroke:'none', fill:'#0050FF', 'fill-opacity':0.1 } );\n\t        this.add( 'path', { d: this.circle(0,0, o.radius, 180-min,180, false, false, 0.3, true), stroke:'#0050FF', 'stroke-opacity':1, 'stroke-width':o.strokeSize, fill:'none', 'stroke-linecap':'round' } );\n\t\t\tbreak;\n\n\t\t\tcase 'liner':\n\t\t\tlet r = o.radius*0.5;\n\t\t\tlet y1 = o.max*this.scaler;\n\t\t\tlet y2 = o.min*this.scaler;\n\t\t\tthis.fill = o.fill !== undefined ? o.fill : true;\n\t        this.stroke = o.stroke !== undefined ? o.stroke : true;\n\t        this.add( 'path', { d: this.segment({x:-r, y:0}, {x:r, y:0} ), stroke:'#FFFFFF', 'stroke-opacity':1, 'stroke-width':o.strokeSize, fill:'none', 'stroke-linecap':'butt' } );\n\t        this.add( 'path', { d: this.segment({x:-r, y:y1}, {x:r, y:y1} ), stroke:'#FF0000', 'stroke-opacity':1, 'stroke-width':o.strokeSize, fill:'none', 'stroke-linecap':'butt' } );\n\t        this.add( 'path', { d: this.segment({x:-r, y:y2}, {x:r, y:y2} ), stroke:'#0050FF', 'stroke-opacity':1, 'stroke-width':o.strokeSize, fill:'none', 'stroke-linecap':'butt' } );\n\t        //\n\t        this.add( 'path', { d: this.segment({x:0, y:0}, {x:0, y:y1} ), stroke:'#FF0000', 'stroke-opacity':1, 'stroke-width':o.strokeSize, fill:'none', 'stroke-linecap':'butt' } );\n\t        this.add( 'path', { d: this.segment({x:0, y:0}, {x:0, y:y2} ), stroke:'#0050FF', 'stroke-opacity':1, 'stroke-width':o.strokeSize, fill:'none', 'stroke-linecap':'butt' } );\n\t        break;\n\n\t\t\tcase 'needle':\n\t\t\tthis.fill = o.fill !== undefined ? o.fill : true;\n\t        this.stroke = o.stroke !== undefined ? o.stroke : true;\n\t\t\tthis.add( 'path', { d: this.circle(0,0, 0.7, 0, 360, false, true, 0), stroke:'#FFFFFF', 'stroke-opacity':1, 'stroke-width':o.strokeSize, fill:'none', 'stroke-linecap':'butt' } );\n\t\t\tthis.add( 'path', { d: this.segment({x:0, y:0}, {x:0, y:4.4} ), stroke:'#FFFFFF', 'stroke-opacity':1, 'stroke-width':o.strokeSize, fill:'none', 'stroke-linecap':'round' } );\n\t\t\tbreak;\n\n\t\t\tcase 'middle':\n\t\t\tlet mm = o.radius*0.5;\n\t\t\tthis.fill = o.fill !== undefined ? o.fill : true;\n\t        this.stroke = o.stroke !== undefined ? o.stroke : true;\n\t\t\tthis.add( 'path', { d: this.circle(0,0, 0.7, 0, 360, false, true, 0), stroke:'#FFFFFF', 'stroke-opacity':1, 'stroke-width':o.strokeSize, fill:'none', 'stroke-linecap':'butt' } );\n\t\t\tthis.add( 'path', { d: this.segment({x:0, y:-mm}, {x:0, y:mm} ), stroke:'#FFFFFF', 'stroke-opacity':1, 'stroke-width':o.strokeSize, fill:'none', 'stroke-linecap':'butt' } );\n\t\t\tthis.add( 'path', { d: this.segment({x:-mm, y:0}, {x:mm, y:0} ), stroke:'#FFFFFF', 'stroke-opacity':1, 'stroke-width':o.strokeSize, fill:'none', 'stroke-linecap':'butt' } );\n\t\t\tbreak;\n\n\n\t\t}\n\n\t\tthis.toMesh();\n\n\t}\n\n\traycast(){\n\t\treturn false;\n\t}\n\n\tupdate( option = {} ){\n\n\t\tlet o = {};\n\n\t\tswitch( this.model ){\n\n\t\t\tcase 'angle':\n\n\t\t\to = {\n\t\t\t\tradius: 5,\n\t\t\t\tmin:-90,\n\t\t\t\tmax:90,\n\t\t\t\t...option\n\t\t\t};\n\n\t\t\tlet min = Math.abs(o.min);\n\n\t\t\tthis.change( 'd', this.circle(0,0, o.radius, 180,180+o.max, true ), 0 );\n\t\t\tthis.change( 'd', this.circle(0,0, o.radius, 180,180+o.max, false, false, 0.3), 1 );\n\n\t\t\tthis.change( 'd', this.circle(0,0, o.radius, 180-min,180, true ), 2 );\n\t        this.change( 'd', this.circle(0,0, o.radius, 180-min,180, false, false, 0.3, true), 3 );\n\n\n\n\t\t\tbreak;\n\n\t\t}\n\n\t\tif( option.wireframe !== undefined ) this.material.wireframe = option.wireframe;\n\n\t\t// redraw\n\t    this.fill = o.fill !== undefined ? o.fill : true;\n\t    this.stroke = o.stroke !== undefined ? o.stroke : true;\n\t\tthis.toMesh();\n\n\t}\n\n\t// SVG SIDE\n\n\tset( o = {}, parent ){\n\t\tfor( let t in o ){\n            if( parent ) parent.setAttributeNS( null, t, o[ t ] );\n            else this.svg.setAttributeNS( null, t, o[ t ] );\n        }\n\t}\n\n\tadd( type, o = {} ){\n\n\t\tlet g = document.createElementNS( this.base, type );\n\t\tthis.set( o, g );\n\t\tthis.svg.appendChild( g );\n\n\t}\n\n\tchange( type, value, id ){\n\n\t\tthis.svg.childNodes[ id ].setAttributeNS( null, type, value );\n\n\t}\n\n\tgetString(){\n\t\treturn this.XML.serializeToString(this.svg);\n\t}\n\n\tpolarToCartesian( x, y, radius, angleInDegrees ){\n\t    var rad = (angleInDegrees-90) * Math.PI / 180.0;\n\t    return { x: x + (radius * Math.cos(rad)), y: y + (radius * Math.sin(rad)) };\n\t}\n\n\tcircle( x, y, radius, startAngle = 0, endAngle = 360, tri = false, close = false, endTag = 0, over=false ){\n\n\t\tif( startAngle === 0 && endAngle === 360 ){ startAngle = 0.0001; close = true; }\n\t    let start = this.polarToCartesian(x, y, radius, endAngle);\n\t    let end = this.polarToCartesian(x, y, radius, startAngle);\n\t    let arcSweep = endAngle - startAngle <= 180 ? \"0\" : \"1\";\n\t    let d = [\n\t        \"M\", start.x, start.y, \n\t        \"A\", radius, radius, 0, arcSweep, 0, end.x, end.y,\n\t    ];\n\t    if( tri ) d.push(\n\t    \t\"L\", x,y,\n\t    \t\"L\", start.x, start.y\n\t    );\n\t    if( close ) d.push( 'Z');\n\n\t\tif( endTag!==0 ){\n\t\t\tlet p1 = this.polarToCartesian(x, y, radius-endTag, over ? startAngle:endAngle);\n\t\t\tlet p2 = this.polarToCartesian(x, y, radius+endTag, over ? startAngle:endAngle);\n\t\t\td.push( 'M', p1.x, p1.y,\"L\", p2.x, p2.y);\n\t\t}\n\n\t    return d.join(\" \");\n\n\t}\n\n\tsegment( p1, p2 ){\n\t\tlet d = [ 'M', p1.x, p1.y,\"L\", p2.x, p2.y ];\n\t\treturn d.join(\" \");\n\t}\n\n\t// THREE SIDE\n\n\tgeomColor( g, color, opacity = 1 ){\n\n\t\tlet i = g.attributes.position.count;\n\t\tlet cc = [];//, aa = []\n\t\twhile(i--){ \n\t\t\tcc.push( color.r, color.g, color.b, opacity );\n\t\t\t//aa.push( opacity )\n\t\t}\n\n\t\t//g.setAttribute( 'opacity', new Float32BufferAttribute( aa, 1 ) );\n\t\tg.setAttribute( 'color', new Float32BufferAttribute( cc, 4 ) );\n\n\t}\n\n\ttoGeometry(){\n\n\t\tif ( !this.fill && !this.stroke ) return null;\n\n\t\tlet geom = [];\n\t\tlet layer = 0;\n\t\tlet opacity = 1;\n\t\tlet data = this.svgLoader.parse( this.getString() );\n\t\t\n\t\tfor ( const path of data.paths ) {\n\n\t\t\t// FILL\n\t\t\tconst fillColor = path.userData.style.fill;\n\t\t\tif ( this.fill && fillColor !== undefined && fillColor !== 'none' ) {\n\n\t\t\t\tthis.color.setStyle( fillColor );\n\t\t\t\topacity = path.userData.style.fillOpacity;\n\t\t\t\tif( opacity < this.opacity ) this.opacity = opacity;\n\n\t\t\t\tconst shapes = SVGLoader.createShapes( path );\n\n\t\t\t\tfor ( const shape of shapes ) {\n\n\t\t\t\t\tconst geometry = new ShapeGeometry( shape );\n\t\t\t\t\tif ( geometry ) {\n\n\t\t\t\t\t\tthis.geomColor( geometry, this.color, opacity );\n\n\t\t\t\t\t\tlet gg = new BufferGeometry().copy(geometry).toNonIndexed();\n\t\t\t\t\t\tgg.translate( 0, 0, -layer*this.layerUp );\n\t\t\t\t\t\tgeom.push( gg );\n\n\t\t\t\t\t\tlayer++;\n\t\t\t\t\t}\n\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// STROKE\n\t\t\tconst strokeColor = path.userData.style.stroke;\n\t\t\tif ( this.stroke && strokeColor !== undefined && strokeColor !== 'none' ) {\n\n\t\t\t\tthis.color.setStyle( strokeColor );\n\t\t\t\topacity = path.userData.style.strokeOpacity;\n\t\t\t\tif( opacity < this.opacity ) this.opacity = opacity;\n\n\t\t\t\tfor ( const subPath of path.subPaths ) {\n\n\t\t\t\t\tconst geometry = SVGLoader.pointsToStroke( subPath.getPoints(), path.userData.style, 6 );\n\t\t\t\t\tif ( geometry ) {\n\t\t\t\t\t\tthis.geomColor( geometry, this.color, opacity );\n\n\t\t\t\t\t\tgeometry.translate( 0, 0, -layer*this.layerUp );\n\n\t\t\t\t\t\t//console.log(geometry)\n\t\t\t\t\t\tgeom.push( geometry );\n\n\t\t\t\t\t\tlayer++;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t}\n\n\t\treturn geom;\n\n\t}\n\n\ttoMesh(){\n\n\t\tlet s = this.size;\n\n\t\tif( this.geometry ) this.geometry.dispose();\n\t\t\n\t\tlet tmpG = this.toGeometry();\n        \n        if( tmpG ){\n\t\t    this.geometry = mergeGeometries( tmpG );\n\t\t\tthis.geometry.scale( s, -s, s );\n\t\t\tthis.geometry.rotateY( Math.PI );\n\t\t\tthis.geometry.rotateZ( -Math.PI*0.5 );\n\t\t\tthis.geometry.rotateY( Math.PI*0.5 );\n\t\t\tthis.geometry.computeBoundingSphere();\n\t\t} else {\n\t\t\tthis.geometry = new BufferGeometry();\n\t\t}\n\n\t\tif( this.material === null ){ \n\t\t\tthis.material = new MeshBasicMaterial({ vertexColors:true, transparent:this.opacity!==1, side:DoubleSide });\n\t\t\tthis.material.defines = { 'USE_COLOR_ALPHA': '' };\n\t\t}\n\n\t}\n\n\tdispose(){\n\t\t\n\t\tif( this.material && !this.outMaterial ) this.material.dispose();\n\t\tif( this.geometry ) this.geometry.dispose();\n\t}\n\n}\n\nclass JointDebug extends Basic3D {\n\n\tconstructor( o = {} ) {\n\n\t    super();\n\n\t    this.isJoint = true;\n\n\t    this.type = 'joint';\n\t    this.mode = o.mode || 'hinge';\n\t    this.visible = o.visible !== undefined ? o.visible : false;\n\t    \n\t    this.mtx = new Matrix4();\n\t    this.size = o.helperSize || 0.1;\n\n\t    let material = Mat.get('line');\n\t    let mat, dt;\n\n\t    switch( this.mode ){\n\t    \tcase 'prismatic':\n\t    \t    mat = Mat.get('svg');\n\t\t    \tdt = {\n\t\t\t\t\tmin:-180,\n\t\t\t\t\tmax:180,\n\t\t\t\t\tfill:false,\n\t\t\t\t\tstroke:true,\n\t\t\t\t\twireframe:false,\n\t\t\t\t\tsize:this.size*0.5\n\t\t\t\t};\n\n\t\t\t\tif(o.lm){\n\t\t\t\t\tdt.min = o.lm[0];\n\t\t\t\t\tdt.max = o.lm[1];\n\t\t\t\t}\n\t\t\t\tthis.m1 = new AutoSvg('liner', dt, mat );\n\t\t    \tthis.m2 = new AutoSvg('middle', dt, mat );\n\n\t\t    \tthis.m1.geometry.rotateY(90 * MathTool.torad);\n\n\t\t    \t//this.m3 = this.m1.clone()\n\t\t    \t//this.m3.rotation.x = 90 * MathTool.torad\n\n\t\t    \tthis.add( this.m1 );\n\t\t    \tthis.add( this.m2 );\n\t\t    \t//this.add( this.m3 );\n\n\t    \tbreak;\n\t    \tcase 'hinge': case 'cylindrical':\n\n\t\t    \tmat = Mat.get('svg');\n\t\t    \tdt = {\n\t\t\t\t\tmin:-180,\n\t\t\t\t\tmax:180,\n\t\t\t\t\tfill:false,\n\t\t\t\t\tstroke:true,\n\t\t\t\t\twireframe:false,\n\t\t\t\t\tsize:this.size*0.5\n\t\t\t\t};\n\n\t\t\t\tif(o.lm){\n\t\t\t\t\tdt.min = o.lm[0];\n\t\t\t\t\tdt.max = o.lm[1];\n\t\t\t\t}\n\n\t\t\t\tif(o.lmr){ // cylindrical\n\t\t\t\t\tdt.min = o.lmr[0];\n\t\t\t\t\tdt.max = o.lmr[1];\n\t\t\t\t}\n\n\t\t    \tthis.m1 = new AutoSvg('angle', dt, mat );\n\t\t    \tthis.m2 = new AutoSvg('needle', dt, mat );\n\n\t\t    \tthis.add( this.m1 );\n\t\t    \tthis.add( this.m2 );\n\n\t    \tbreak;\n\t    \tdefault:\n\n\t\t    \tconst geom = Geo.get('joint');\n\t\t\t    let g = geom.clone(); \n\t\t\t    g.scale( this.size, this.size, this.size);\n\t\t\t    this.m1 = new LineSegments( g, material );\n\t\t\t    \n\t\t\t    \n\t\t\t    this.add( this.m1 );\n\n\t\t\t    g = geom.clone(); \n\t\t\t    g.scale( this.size*0.8, this.size*0.8, this.size*0.8 );\n\t\t\t    this.m2 = new LineSegments( g, material );\n\t\t\t    //this.m2.scale.set( this.size, this.size, this.size)\n\t\t\t    this.add( this.m2 );\n\t\t    \n\t    \tbreak;\n\t    }\n\n\n\t    this.m1.matrixAutoUpdate = false;\n\t    this.m2.matrixAutoUpdate = false;\n\n\t\t//    this.m2.updateMatrix()\n\t\t//    this.m1.updateMatrix()\n\n\n\n\n\t    this.body1 = null;\n\t    this.body2 = null;\n\n\t    this.mat1 = new Matrix4();\n\t    this.mat2 = new Matrix4();\n\t    this.end = new Vector3();\n\n\t    // experimental rotation ?\n\t    //Utils.refAxis( this.mat1, o.axis1 )\n\t    //Utils.refAxis( this.mat2, o.axis2 )\n\n\t    let qq = new Quaternion();\n\t    if(o.quat1) this.mat1.makeRotationFromQuaternion(qq.fromArray(o.quat1));\n\t    if(o.quat2) this.mat2.makeRotationFromQuaternion(qq.fromArray(o.quat2));\n\n\t    this.mat1.setPosition( o.pos1[0], o.pos1[1], o.pos1[2] );\n\t    this.mat2.setPosition( o.pos2[0], o.pos2[1], o.pos2[2] );\n\t    \n\t    \n\t    const positions = [ 0, 0, 0, 0, 0, 0 ];\n\t    const colors = [ 1, 0, 0, 1, 0, 0 ];\n\t    const gline = new BufferGeometry();\n\t    gline.setAttribute( 'position', new Float32BufferAttribute( positions, 3 ) );\n\t    gline.setAttribute( 'color', new Float32BufferAttribute( colors, 3 ) );\n\t    gline.computeBoundingSphere();\n\n\n\t    this.m3 = new LineSegments( gline, material );\n\t    this.add( this.m3 );\n\t    this.m3.matrixAutoUpdate = false;\n\n\t    this.pp = this.m3.geometry.attributes.position;\n\n\t}\n\n\tupdate () {\n\n\t\tif( !this.visible ) return\n\n\t\tif( this.body1 ){\n\t\t\tthis.matrix.copy( this.body1.matrixWorld ).multiply( this.mat1 );\n\t\t} else {\n\t\t\tthis.matrix.copy( this.mat1 );\n\t\t}\n\n\t\tif( this.body2 ){\n\t\t\tthis.m2.matrix.copy( this.body2.matrixWorld ).multiply( this.mat2 );\n\t\t} else {\n\t\t\tthis.m2.matrix.copy( this.mat2 );\n\t\t}\n\n\t\tthis.m2.matrix.premultiply(this.matrix.clone().invert());\n\t\tthis.end.setFromMatrixPosition( this.m2.matrix );\n\n\n\n\n\n\t\t//m.matrix = b.matrixWorld;\n        //m.matrixAutoUpdate = false;\n\n\t\t//this.position.fromArray( r, n );\n\t\t//this.quaternion.fromArray( r, n + 3 );\n\n\t\t//this.updateMatrix();\n\n\t\t//this.m2.position.fromArray( r, n+7 );\n\t\t//this.m2.quaternion.fromArray( r, n+10 );\n\t\t//this.m2.matrix.compose( this.m2.position, this.m2.quaternion, {x:1,y:1,z:1} );\n\n\t\t//this.mtx.copy( this.matrix ).invert().multiply( this.m2.matrix );\n\t\t//this.mtx.decompose( this.m2.position, this.m2.quaternion, {x:1,y:1,z:1} );\n\t\t//this.m2.updateMatrix();\n\n\t\t//const position = this.m3.geometry.attributes.position;\n\t\t//position.setXYZ(1, this.m2.position.x, this.m2.position.y, this.m2.position.z)\n\n\t\tthis.pp.setXYZ(1, this.end.x, this.end.y, this.end.z);\n\t\tthis.pp.needsUpdate = true;\n\n\t\tif( this.mode === 'cylindrical' ){ \n\t\t\tthis.m1.position.copy( this.end );\n\t\t\tthis.m1.updateMatrix();\n\t\t}\n\n\t\tif( !this.visible ) this.visible = true;\n\n\t}\n\n\tupdateFromPhy ( r, n = 0 ) {\n\n\t\t//if( !this.isVisible ) return\n\t\tif( !this.visible ) return\n\n\n\t\t//m.matrix = b.matrixWorld;\n        //m.matrixAutoUpdate = false;\n\n\t\tthis.position.fromArray( r, n );\n\t\tthis.quaternion.fromArray( r, n + 3 );\n\n\t\tthis.updateMatrix();\n\n\t\tthis.m2.position.fromArray( r, n+7 );\n\t\tthis.m2.quaternion.fromArray( r, n+10 );\n\t\tthis.m2.matrix.compose( this.m2.position, this.m2.quaternion, {x:1,y:1,z:1} );\n\n\t\tthis.mtx.copy( this.matrix ).invert().multiply( this.m2.matrix );\n\t\tthis.mtx.decompose( this.m2.position, this.m2.quaternion, {x:1,y:1,z:1} );\n\t\tthis.m2.updateMatrix();\n\n\n\t\tthis.pp.setXYZ(1, this.m2.position.x, this.m2.position.y, this.m2.position.z);\n\t\tthis.pp.needsUpdate = true;\n\n\t\tif( this.mode === 'cylindrical' ){ \n\t\t\tthis.m1.position.copy( this.m2.position );\n\t\t\tthis.m1.updateMatrix();\n\t\t}\n\n\t\tif( !this.visible ) this.visible = true;\n\n\t}\n\n\tdispose (){\n\n\t\tif( this.body1 ) this.body1.link--;\n\t\tif( this.body2 ) this.body2.link--;\n\n\t\tthis.m1.geometry.dispose();\n\t\tthis.m2.geometry.dispose();\n\t\tthis.m3.geometry.dispose();\n\t\tthis.children = [];\n\n\t}\n\n}\n\n//----------------\n//  MOTOR JOINT \n//----------------\n\nclass Joint extends Item {\n\n\tconstructor () {\n\n\t\tsuper();\n\n\t\tthis.Utils = Utils;\n\n\t\tthis.type = 'joint';\n\n\t\tthis.v1 = new Vector3();\n\t\tthis.v2 = new Vector3();\n\n\t}\n\n\tstep () {\n\n\t\tconst AR = root.Ar;\n\t\tconst N = root.ArPos[this.type];\n\n\t\tlet i = this.list.length, j, n;\n\t\t\n\t\twhile( i-- ){\n\n\t\t\tj = this.list[i];\n\t\t\tn = N + ( i * Num.joint );\n\t\t\tif( Num.joint === 16 ) j.updateFromPhy( AR, n );\n\t\t\telse j.update();\n\n\t\t}\n\n\t}\n\n\t///\n\n\tadd ( o = {} ) {\n\n\t\tlet name = this.setName( o );\n\n\t\tlet body1 = null;\n\t\tlet body2 = null;\n\t\tlet isString;\n\n\t\tlet isWorldAxis = false;\n\n\t\tif( !o.axis1 ) o.axis1 = [1,0,0];\n\t\tif( !o.axis2 ) o.axis2 = [1,0,0];\n\n\t\tif( !o.pos1 ) o.pos1 = [0,0,0];\n\t\tif( !o.pos2 ) o.pos2 = [0,0,0];\n\n\t\tif( o.limit ) o.lm = o.limit;\n\t\telse if( o.lm ) o.limit = o.lm;\n\n\t\t// STRICT MODE\n\n\t\tif(o.mode==='universal'||o.mode==='dof'||o.mode==='d6') o.mode = 'generic';\n\t\tif(o.mode==='revolute') o.mode = 'hinge';\n\t\tif(o.mode==='slider') o.mode = 'cylindrical';\n\n\t\t// GET BODY REFERENCY\n\n\t\tif( o.b1 ) {\n\t\t\tisString = typeof o.b1 === 'string';\n\t\t\tbody1 = isString ? Utils.byName( o.b1 ) : o.b1;\n\t\t\tif( !isString ) o.b1 = o.b1.name;\n\t\t\tif( body1 ) body1.link ++;\n\t\t}\n\n\t\tif( o.b2 ) {\n\t\t\tisString = typeof o.b2 === 'string';\n\t\t\tbody2 = isString ? Utils.byName( o.b2 ) : o.b2;\n\t\t\tif( !isString ) o.b2 = o.b2.name;\n\t\t\tif( body2 ) body2.link ++;\n\t\t}\n\n\t\t// world to local\n\t\tif ( o.worldPos ) o.worldAnchor = o.worldPos;\n\t\tif ( o.worldAnchor ){\n\n\t\t\to.pos1 = body1 ? Utils.toLocal( this.v1.fromArray( o.worldAnchor ), body1 ).toArray() : o.worldAnchor;\n\t\t\to.pos2 = body2 ? Utils.toLocal( this.v2.fromArray( o.worldAnchor ), body2 ).toArray() : o.worldAnchor;\n\t\t\t/*if(body1){ \n\t\t\t\tthis.v1 = body1.worldToLocal(this.v2.fromArray( o.worldAnchor ));\n\t\t\t\to.pos1 = this.v1.toArray();\n\t\t\t}\n\t\t\tif(body2){ \n\t\t\t\tthis.v1 = body2.worldToLocal(this.v2.fromArray( o.worldAnchor ));\n\t\t\t\to.pos2 = this.v1.toArray();\n\t\t\t}*/\n\t\t\tdelete o.worldAnchor;\n\t\t}\n\n\t\tif ( o.worldAxis ){\n\n\t\t\t\n\t\t\t/*if( root.engine === 'JOLT'){\n\t\t\t\to.axis1 = o.worldAxis;\n\t\t\t\to.axis2 = o.worldAxis;\n\t\t\t}else{*/\n\t\t\t\to.axis1 = body1 ? Utils.toLocal( this.v1.fromArray( o.worldAxis ), body1, true ).toArray() : o.worldAxis;\n\t\t\t    o.axis2 = body2 ? Utils.toLocal( this.v2.fromArray( o.worldAxis ), body2, true ).toArray() : o.worldAxis;\n\t\t\t//}\n\t\t\t\n\t\t\t//o.quat1 = new Quaternion().setFromUnitVectors( new Vector3(1, 0, 0), new Vector3().fromArray(o.axis1).normalize() ).toArray();\n\t\t    //o.quat2 = new Quaternion().setFromUnitVectors( new Vector3(1, 0, 0), new Vector3().fromArray(o.axis2).normalize() ).toArray();\n\n\t\t\t//console.log(o.worldAxis, o.axis1, o.axis2)\n\t\t\tisWorldAxis = true;\n\n\t\t\tdelete o.worldAxis;\n\n\t\t}\n\n\t\tif ( o.worldQuat ){\n\n\t\t\to.quat1 = Utils.quatLocal(o.worldQuat, body1);\n\t\t\to.quat2 = Utils.quatLocal(o.worldQuat, body2);\n\n\n\n\t\t\tif( root.engine === 'OIMO' || root.engine === 'HAVOK' || root.engine === 'JOLT' ){\n\n\t\t\t\t//this.v1.fromArray( math.quadToAxisArray( o.worldQuat ) ).normalize()\n\t\t\t\t//this.v2.fromArray( math.quadToAxisArray( o.worldQuat ) ).normalize()\n\n\t\t\t\t//o.axis1 = Utils.axisLocal( math.quadToAxisArray( o.worldQuat ), body1)//this.v1.fromArray( math.quadToAxisArray( o.quat1 ) ).normalize().toArray()\n\t\t\t\t//o.axis2 = Utils.axisLocal( math.quadToAxisArray( o.worldQuat ), body2)//this.v2.fromArray( math.quadToAxisArray( o.quat2 ) ).normalize().toArray()\n\n\t\t\t\to.axis1 = Utils.axisLocal( MathTool.quatToAxis( o.worldQuat ), body1);\n\t\t\t\to.axis2 = Utils.axisLocal( MathTool.quatToAxis( o.worldQuat ), body2);\n\n\t\t\t\t//o.axis1 = body1 ? Utils.toLocal( this.v1, body1, true ).toArray():[1,0,0]\n\t\t\t\t//o.axis2 = body2 ? Utils.toLocal( this.v2, body2, true ).toArray():[1,0,0]\n\n\t\t\t}\n\t\t\t/*this.v1.fromArray( o.worldAxis ) \n\t\t\tthis.v2.fromArray( o.worldAxis )\n\n\t\t\to.axis1 = body1 ? Utils.toLocal( this.v1, body1, true ).normalize().toArray():o.worldAxis\n\t\t\to.axis2 = body2 ? Utils.toLocal( this.v2, body2, true ).normalize().toArray():o.worldAxis\n*/\n\t\t\t//o.quat1 = new Quaternion().setFromUnitVectors( new Vector3(1, 0, 0), new Vector3().fromArray(o.axis1).normalize() ).toArray();\n\t\t    //o.quat2 = new Quaternion().setFromUnitVectors( new Vector3(1, 0, 0), new Vector3().fromArray(o.axis2).normalize() ).toArray();\n\n\t\t\t//console.log(o.worldQuat, o.quat1, o.quat2)\n\n\t\t\tdelete o.worldQuat;\n\n\t\t}\n\n\t\t\n\n\t\t\n\n\t\t/*if( o.b2 ) body2 = typeof o.b2 !== 'string' ? o.b2 : Utils.byName(o.b2)\n\t\tif( o.b1 && typeof o.b1 !== 'string') o.b1 = o.b1.name;\n\t\tif( o.b2 && typeof o.b2 !== 'string') o.b2 = o.b2.name;*/\n\n\t\tif( o.rot1 !== undefined ){ o.quat1 = MathTool.quatFromEuler( o.rot1 ); delete ( o.rot1 ); }\n\t\tif( o.rot2 !== undefined ){ o.quat2 = MathTool.quatFromEuler( o.rot2 ); delete ( o.rot2 ); }\n\n\t\tif( !o.quat1 ) o.quat1 = new Quaternion().setFromUnitVectors( new Vector3(1, 0, 0), new Vector3().fromArray(o.axis1).normalize() ).toArray();\n\t\tif( !o.quat2 ) o.quat2 = new Quaternion().setFromUnitVectors( new Vector3(1, 0, 0), new Vector3().fromArray(o.axis2).normalize() ).toArray();\n\n\t\tif( root.engine === 'AMMO' && isWorldAxis && o.mode === 'hinge') {\n\t\t\tlet ee = new Euler(0, -90*torad$3, 0);\n\t\t\tlet qq = new Quaternion().setFromEuler(ee).toArray();\n\t\t\to.quatX = qq;\n\t\t\t//o.quat1 = MathTool.quatMultiply(o.quat1, qq);\n\t\t\t//o.quat2 = MathTool.quatMultiply(o.quat2, qq);\n\t\t}\n\n\t\tif( o.drivePosition ) if( o.drivePosition.rot !== undefined ){ o.drivePosition.quat = MathTool.quatFromEuler( o.drivePosition.rot ); delete ( o.drivePosition.rot ); }\n\n\t\tlet j = new JointDebug( o );\n\t\tj.name = name;\n\t\tj.body1 = body1;\n\t\tj.body2 = body2;\n\t\t\n\t\tif( o.visible === undefined ) o.visible = root.jointVisible || false;\n\n\t\t// apply option\n\t\tthis.set( o, j );\n\n\t\t// add to world\n\t\tthis.addToWorld( j, o.id );\n\n\t\t// add to worker \n\t\troot.post( { m:'add', o:o } );\n\n\t\treturn j;\n\n\t}\n\n\tset ( o = {}, j = null ) {\n\n\t\tif( j === null ) j = this.byName( o.name );\n\t\tif( j === null ) return;\n\t\tif( o.visible !== undefined ) j.visible = o.visible;\n\n\t}\n\n}\n\nclass Contact extends Item {\n\n\tconstructor () {\n\n\t\tsuper();\n\n\t\tthis.Utils = Utils;\n\t\tthis.type = 'contact';\n\n\t}\n\n\tstep () {\n\n\t\tconst AR = root.Ar;\n\t\tconst N = root.ArPos[this.type];\n\n\t\tlet i = this.list.length, c, n;\n\t\t\n\t\twhile( i-- ){\n\n\t\t\tc = this.list[i];\n\n\t\t\tn = N + ( i * Num.contact );\n\n\t\t\t//c.update( AR.slice( n, n+8 ) )\n\t\t\tc.update( AR, n );\n\n\t\t}\n\n\t}\n\n\tadd ( o = {} ) {\n\n\t\tthis.setName( o );\n\n\t\tlet c = new Pair( o );\n\n\t\tif( o.callback ) delete ( o.callback );\n\n\t\t// add to world\n\t\tthis.addToWorld( c, o.id );\n\n\t\t// add to worker \n\t\troot.post( { m:'add', o:o } );\n\n\t\treturn c;\n\n\t}\n\n\n}\n\n\nclass Pair {\n\n\tconstructor ( o = {} ) {\n\n\t\tthis.type = 'contact';\n\n\t\tthis.name = o.name;\n\t\tthis.callback = o.callback || function(){};\n\n\t\tthis.b1 = o.b1 || null;\n\t\tthis.b2 = o.b2 || null;\n\t\tthis.ignore = o.ignore || [];\n\n\t\tthis.always = o.always !== undefined ? o.always : true;\n\t\tthis.simple = o.simple || false;\n\n\t\tthis.data = {\n\n\t\t\thit:false,\n\t\t\tpoint: [0,0,0],\n\t\t\tnormal: [0,0,0],\n\t\t\t//object: null,\n\t\t};\n\n\t}\n\n\tupdate ( r, n = 0 ) {\n\n\t\tthis.data.hit = r[n] > 0 ? true : false;\n\n\t\tif( !this.simple ){\n\n\t\t\tthis.data.point = [ r[n+1], r[n+2], r[n+3] ];\n\t\t\tthis.data.normal = [ r[n+4], r[n+5], r[n+6] ];\n\n\t\t}\n\t\t\n\t\tif( this.data.hit || this.always ) this.callback( this.data );\n\n\t}\n\n\n}\n\n// THREE VEHICLE\n\nclass Vehicle extends Item {\n\n\tconstructor () {\n\n\t\tsuper();\n\n\t\tthis.Utils = Utils;\n\t\tthis.type = 'vehicle';\n\t\tthis.num = Num[this.type];\n\n\t}\n\n\tstep () {\n\n\t\tconst AR = root.Ar;\n\t\tconst N = root.ArPos[this.type];\n\n\t\tlet i = this.list.length, n, s;\n\n\t\twhile( i-- ){\n\n\t\t\ts = this.list[i];\n\t\t\tn = N + ( i * this.num );\n\t\t\ts.step( AR, n );\n\n\t\t}\n\n\t}\n\n\tadd ( o = {} ) {\n\n\t\tthis.setName( o );\n        const car = new Car( o );\n\n        // add to world\n\t\tthis.addToWorld( car, o.id );\n\n        // add to physics\n        root.post({ m:'add', o:car.o });\n\n        return car\n\n\t}\n\n\tset ( o = {}, b = null ) {\n\n\t\tif( b === null ) b = this.byName( o.name );\n\t\tif( b === null ) return\n\n\t}\n\n}\n\n\n\n// CAR\n\nclass Car extends Basic3D {//extends Object3D {\n\n\tconstructor( o ) {\n\n\t\tsuper();\n\n\t\t// extra function // ex car selection\n\t\tif(o.extra){\n\t\t\tthis.extra = o.extra;\n\t\t\tdelete o.extra;\n\t\t}\n\n\t\tthis.type = 'vehicle';\n\t\tthis.name = o.name || 'car';\n\t\tthis.isRay = o.ray || false;\n\t\t//this.withBody = false;\n\t\tthis.actif = false;\n\t\t//this.position = new THREE.Vector3();\n\t\tthis.steering = 0;\n\t\tthis.suspension = [];\n\t\tthis.rolling = [];\n\t\tthis.init( o );\n\n\t}\n\n\tdrive () {\n\n\t}\n\n\traycast(){\n\t\treturn\n\t}\n\n\tinit ( o ) {\n\n\t\tthis.mass = o.mass || 2000;\n\n\t\tthis.model = null;\n\n\t\t//this.decal = o.bodyDecalY || 0;\n\t\t//this.circum = (Math.PI * 2 * o.radius);// in metter\n\n        // CHASSIS\n\t\tthis.size = o.size || [0.85*2, 0.5*2, 2.5*2];\n\t\tthis.massCenter = o.massCenter || [0, 0.55, 1.594];\n\t\tthis.chassisPos = o.chassisPos || [0, 0.83, 0];\n\n\t\tthis.maxSteering = o.maxSteering || 24;\n\t\tthis.incSteering = o.incSteering || 2;\n\n\t\tthis.s_travel = o.s_travel || 0.4;\n\t\tthis.s_ratio = 1 / ( this.s_travel * 0.5 );\n\t\tthis.decaly = root.engine === 'PHYSX' ? this.s_travel * 0.5 : 0;\n\n\n\t\t//this.diff = math.vecSub( this.chassisPos, this.massCenter )\n\t\t//this.diff[2] = 0\n\n\t\t// WHEELS\n\t\tthis.numWheel = o.numWheel || 4;\n\t\tthis.radius = o.radius || 0.35;\n\t\tthis.radiusBack = o.radiusBack || this.radius;\n\t\tthis.deep = o.deep || 0.3;\n\t\tthis.deepBack = o.deepBack || this.deep;\n\n\t\tlet byAxe = this.numWheel < 4 ? 1 : 2;\n\n\t\tif(!o.wPos) o.wPos = [0.8, 0.1, 1.4];\n\n\t\tif( o.wPos ){\n\n\t\t\tthis.wPos = o.wPos;\n\n\t\t\tvar p, wp = o.wPos, axe, pp = [], s=1, back=0, y, x, z, pzz;\n\t\t\twp.length === 3 ? true : false;\n\t\t\twp.length === 4 ? true : false;\n\n\t\t\tfor( let i=0; i < this.numWheel; i++ ){\n\n\t\t\t\ts = i%2 === 0 ? -1 : 1;\n\t\t\t\taxe = Math.floor(i * 0.5);\n\t\t\t\tback = i >= byAxe ? true: false;\n\t\t\t\t\n\t\t\t\ty = wp[ 1 ];\n\t\t\t\tif( y===0 ) y = back ? this.radiusBack : this.radius;\n\n\t\t\t\tx = wp[ 0 ];\n\t\t\t\t//if( x === 0 ) x = (back ? this.deepBack : this.deep)*0.5\n\t\t\t\tif( x instanceof Array ) x = wp[0][axe];\n\n\t\t\t\tz = back ? -wp[2] : wp[2];\n\t\t\t    if( wp[2] instanceof Array ) z = wp[2][axe];\n\n\t\t\t    \t\n\n\n\t\t\t\tp = [ x * s, y, z ];\n\n\t\t\t\tpp.push( p );\n\n\t\t\t}\n\n\t\t\t//console.log(this.name, pp)\n\n\t\t\tthis.wheelsPosition = pp;\n\t\t\tdelete o.wPos;\n\n\t\t}\n\n\t\tif( o.wheelsPosition ) this.wheelsPosition = o.wheelsPosition;\n\n\t\t//console.log(this.wheelsPosition)\n\n\t\tconst scale = o.meshScale || 1;\n\n\n\t\tconst chassisShapes = [];// { type:'convex', shape:bodyShape, pos:[0,0,0], flag:8|2|1 } ];//, isExclusive:true\n\n\t\t//if( o.chassisShape ) chassisShapes.push( { type:'convex', shape:o.chassisShape, pos:[0,0,0], flag:8|2|1 } );\n\t\t//else chassisShapes.push( { type:'box', size:this.size, pos:[0,0,0], flag:8|2|1 } );\n\n\t\tif( o.chassisShape ) chassisShapes.push( { type:'convex', shape:o.chassisShape, size:[scale], pos:this.chassisPos, filter:[1, -1, 0, 0], isExclusive:true, ray:this.isRay  } );\n\t\telse chassisShapes.push( { type:'box', size:this.size, pos:this.chassisPos } ); \n\n\t\tfor( let i=0; i < this.numWheel; i++ ){\n\t    \tif( i < byAxe ) chassisShapes.push({ type:'cylinder', size:[ this.radius, this.deep ], isWheel:true, radius:o.rad || 0.05 , shadow:false, ray:false });\n\t    \telse chassisShapes.push({ type:'cylinder', size:[ this.radiusBack, this.deepBack ], isWheel:true, radius:o.rad || 0.05 , shadow:false, ray:false  });\n\t    \t\n\t    }\n\n\t    /*for( var i=0; i < o.numWheel; i++ ){\n\n\t    \tif( this.radiusBack !== this.radius ){\n\t    \t\tif(i<2) chassisShapes.push( { type:'convex', shape:wheelShape, pos:[0,0,0] } );\n\t    \t\telse chassisShapes.push(  { type:'convex', shape:wheelShapeBack, pos:[0,0,0] } );\n\t    \t} else {\n\t    \t\tchassisShapes.push(  { type:'convex', shape:wheelShape, pos:[0,0,0] } );\n\t    \t}\n\n\t    }*/\n\n\t    var material = Mat.get( o.debug ? 'debug' : (o.chassisMesh === undefined ? 'body' : 'hide'));\n\t    //if( o.body === undefined ) material = 'move';\n\n\t    let n;\n\n\t    for ( let i = 0; i < chassisShapes.length; i ++ ) {\n\t    \tn = chassisShapes[i];\n\t    \tif( n.pos ) n.localPos = n.pos;\n\t    \tn.size = MathTool.autoSize( n.size, n.type );\n\t    \troot.items.body.geometry( n, this, material );\n\t    }\n\n\t    //if( o.chassisShape ) console.log(  )\n\n\n\t\tlet m;\n\n\t\tif(o.chassisMesh){\n\t\t\tm = o.noClone ? o.chassisMesh : o.chassisMesh.clone();\n\t\t\tm.position.set( 0, 0, 0 );\n\t\t\tUtils.noRay( m );\n\t\t\tm.scale.set( scale, scale, scale );\n\t\t\tthis.children[0].add( m );\n\t\t\tthis.model = m;\n\t\t\tdelete o.chassisMesh;\n\n\t\t\t//this.chassis.children[0].castShadow = false;\n\t\t\t//this.chassis.children[0].receiveShadow = false;\n\t\t}\n\n\n\t\t//let back = false, \n\n\t\t// wheel model\n\t\tif( o.wheelMesh ){\n\t\t\t\n\t\t\t\n\t\t\tfor( let i = 1; i<this.numWheel+1; i++ ) {\n\t\t\t\tback = i >= byAxe+1;\n\t\t\t\tif( o.wheelMeshBack ) m = back ? o.wheelMeshBack.clone() : o.wheelMesh.clone();\n\t\t\t\telse m = o.wheelMesh.clone();\n\t\t\t\tUtils.noRay( m );\n\t\t\t\tm.position.set( 0, 0, 0 );\n\t\t\t\tif(i==2 || i ==4) m.scale.set( -scale, scale, scale );\n\t\t\t\telse m.scale.set( scale, scale, scale );\n\t\t\t\tthis.children[i].add( m );\n\n\t\t\t    //this.chassis.children[i].castShadow = false;\n\t\t\t    //this.chassis.children[i].receiveShadow = false;\n\t\t\t}\n\t\t\tdelete o.wheelMesh;\n\t\t}\n\n\t\t\n\n\t\t// suspension model\n\t\tif( o.suspensionMesh ){\n\n\t\t\tthis.suspensionMesh = [];\n\n\t\t\tfor( let i = 1; i<this.numWheel+1; i++ ) {\n\n\t\t\t\tm = o.suspensionMesh.clone();\n\t\t\t\tUtils.noRay( m );\n\t\t\t\tm.position.set( 0, 0, 0 );\n\t\t\t\tm.position.fromArray(this.wheelsPosition[i-1]);\n\t\t\t\tm.position.x = 0;\n\t\t\t\tif(i==2 || i ==4) m.scale.set( scale, scale, scale );\n\t\t\t\telse m.scale.set( -scale, scale, scale );\n\t\t\t\tthis.children[0].add( m );\n\t\t\t    this.suspensionMesh.push( m );\n\n\t\t\t}\n\t\t\tdelete o.suspensionMesh;\n\n\t\t}\n\n\t\t// suspension model\n\t\tif( o.brakeMesh ){\n\n\t\t\tthis.brake = [];\n\n\t\t\tfor( let i = 1; i<this.numWheel+1; i++ ) {\n\t\t\t\tback = i > 2;\n\t\t\t\tif( o.brakeMeshBack ) m = back ? o.brakeMeshBack.clone() : o.brakeMesh.clone();\n\t\t\t\telse m = o.brakeMesh.clone();\n\t\t\t\tUtils.noRay( m );\n\t\t\t\tm.position.set( 0, 0, 0 );\n\t\t\t\tm.position.fromArray(this.wheelsPosition[i-1]);\n\t\t\t\tif( o.brakeMeshBack ) pzz = scale;\n\t\t\t\telse pzz = back ? scale : -scale;\n\t\t\t\tif(i==2 || i ==4) m.scale.set( -scale, scale, pzz );\n\t\t\t\telse m.scale.set( scale, scale, pzz );\n\t\t\t\tthis.children[0].add( m );\n\t\t\t    this.brake.push( m );\n\n\t\t\t}\n\t\t\tdelete o.brakeMesh;\n\n\t\t}\n\n\t\to.mass = this.mass;\n\n\t\to.size = o.chassisShape ? chassisShapes[0].boxSize : this.size;\n\t\to.numWheel = this.numWheel;\n\t\to.wheelsPosition = this.wheelsPosition;\n\t\to.radius = this.radius;\n\t\to.radiusBack = this.radiusBack;\n\t\to.deep = this.deep;\n\t\to.deepBack = this.deepBack;\n\n\t\to.chassisShape = chassisShapes[0];\n\n\t\to.maxSteering = this.maxSteering;\n\t\to.incSteering = this.incSteering;\n\t\to.s_travel = this.s_travel;\n\n\t\to.massCenter = this.massCenter;\n\t\to.chassisPos = this.chassisPos;\n\n\t\tthis.o = o;\n\n\t}\n\n\tset ( o ) {\n\t\to.name = this.name;\n\t\troot.motor.change( o );\n\t}\n\n\trespawn ( o ) {\n\n\t\t//{ pos:[0,0,0], rot:[0,0,0], keepVelocity:false }\n\n\t\to = o || {};\n\t\to.respawn = true;\n\t\to.name = this.name;\n\n\t\tif( o.keepRotation ) o.quat = this.quaternion.toArray();\n\n\n\t\t//root.view.up( o );\n\t\troot.motor.change( o );\n\n\t}\n\n\tmove(){\n\n\t\t/*phy.update({ \n\t\t    name:this.name,\n\t\t    key: key\n\t\t});*/\n\t}\n\n\tdispose (){\n\n\t\t/*if(this.withBody){\n\t\t\troot.content.remove( this.body );\n\t\t}*/\n\n\t\t//root.remove( this.name + '_chassis' );\n\t}\n\n\tstep ( AR, n ) {\n\n\t\tif( !this.actif ){\n\t\t\tlet a = AR[n+0]+AR[n+1]+AR[n+2]+AR[n+3]+ AR[n+4]+AR[n+5]+AR[n+6]+AR[n+7];\n\t\t\tif( a===0 ) return;\n\t\t\telse this.actif = true;\n\t\t}\n\n\t\t\n\n\t\tthis.position.fromArray( AR, n + 1 );\n\t\tthis.quaternion.fromArray( AR, n + 4 );\n\t\tthis.updateMatrix();\n\n\t\tlet num = this.numWheel+1;\n\t\tlet mesh;\n\t\tlet s1 = 0, s2 = 0;\n\t\tlet sp = [];\n\t\tlet k = 0;\n\n\t\tfor( let i = 0; i<num; i++ ){\n\n\t\t\tk = (i*8) + n;\n\n\t\t\tif(i===0) ( ( AR[ k ] ) / this.circum );\n\t\t\tif(i===1) s1 = AR[ k ];\n\t\t\tif(i===2) s2 = AR[ k ]; \n\t\t\t\n\t\t\tmesh = this.children[i];\n\t\t\t\n\n\t\t\tif( mesh && i>0 ){\n\n\t\t\t\t//sp[i-1] = this.wheelsPosition[i-1][1] - AR[k+2]\n\t\t\t\tsp[i-1] = (this.wheelsPosition[i-1][1] - this.decaly ) - AR[k+2];\n\n\t\t\t\t// local\n\t\t\t\t\n\t\t\t\tmesh.position.fromArray( AR, k + 1 );\n\t\t\t\t//mesh.position.y += this.massCenter[1]\n\t\t\t\tmesh.quaternion.fromArray( AR, k + 4 );\n\n\t\t\t\tthis.rolling[i-1] = mesh.rotation.x;\n\n\t\t\t\tif(this.brake){\n\t\t\t\t\tthis.brake[i-1].position.copy( mesh.position );\n\t\t\t\t\tif(i==1 || i==2) this.brake[i-1].rotation.y = AR[k];\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\t\n\t\tk = 4;\n\t\twhile(k--){\n\n\t\t\tthis.suspension[k] = MathTool.clamp( sp[k]*this.s_ratio, -1, 1 );\n\t\t\t\n\t\t\tif(this.suspensionMesh ){\n\t\t\t\tif ( this.suspension[k] > 0 ) {\n\t\t\t\t\tUtils.morph( this.suspensionMesh[k].children[0], 'low', this.suspension[k] );\n\t\t\t\t\tUtils.morph( this.suspensionMesh[k].children[0], 'top', 0 );\n\t\t\t\t} else {\n\t\t\t\t\tUtils.morph( this.suspensionMesh[k].children[0], 'low', 0 );\n\t\t\t\t\tUtils.morph( this.suspensionMesh[k].children[0], 'top', -this.suspension[k] );\n\t\t\t\t}\n\t\t\t}\n\n\t\t} \n\n\t\tthis.steering = Math.round(((s1+s2)*0.5)*todeg$1) / this.maxSteering;\n\t\t\n\t\t//console.log(this.steering)\n\t\t//console.log(acc)\n\n\t}\n}\n\nconst _endMatrix = /*@__PURE__*/ new Matrix4();\nconst _p = /*@__PURE__*/ new Vector3();\nconst _q$1 = /*@__PURE__*/ new Quaternion();\nconst _s = /*@__PURE__*/ new Vector3();\n\n\nconst _matrixWorldInv = /*@__PURE__*/ new Matrix4();\nconst _boneMatrix = /*@__PURE__*/ new Matrix4();\nconst Spine = [ 'hip', 'abdomen', 'chest', 'neck', 'head', 'rCollar', 'lCollar', 'lShldr', 'rShldr', 'lThigh', 'rThigh', 'rBreast', 'lBreast' ];\n\nclass SkeletonBody extends Object3D {\n\n\tconstructor ( name, model, bones, mass = null, option = {} ) {\n\n\t\tsuper();\n\n\t\tthis.prefix = name || 'yoo_';\n\n        this.mode = 'follow';\n\n        this.withFinger = false;\n\n        this.nodes = [];\n\t\tthis.bones = bones;//character.model.skeleton.bones;\n\t\tthis.model = model;//character.model.root;\n       \n        this.scaler = this.model.scale.x; \n        this.posRef = {};\n        this.quatRef = {};\n\n        this.useSolver = false; \n        if( root.engine !== 'PHYSX' ) this.useSolver = false;\n\n        this.nameList = [];\n        this.jointList = [];\n\n        this.breast = false;\n        this.ready = false;\n\n        this.matrixAutoUpdate = false;\n\n        this.mass = mass; \n        this.friction = 0.5; \n        this.restitution = 0;\n        this.option = option;\n        this.useDrive = option.useDrive !== undefined ?  option.useDrive : true;\n        this.showJoint = option.showJoint !== undefined ?  option.showJoint : false;\n\n\t\tthis.init();\n\n\t}\n\n    setMass( mass ){\n\n        if( mass === this.mass ) return\n        this.mass = mass;\n        const d = [];\n        let i = this.nodes.length;\n        let m = this.mass/i;\n        while( i-- ) d.push( { name:this.nodes[i].name, mass:m } );\n        root.motor.change( d );\n\n    }\n\n    setMode( mode ){\n\n        if( mode === this.mode ) return\n\n        this.mode = mode;\n        const data = [];\n\n        let kinematic = this.mode === 'follow';\n\n        let i = this.nodes.length, node;\n\n        while( i-- ){\n\n            node = this.nodes[i];\n            data.push( { name:node.name, kinematic:kinematic } );\n            node.kinematic = kinematic;\n            node.bone.isPhysics = !kinematic;\n            \n        }\n\n        root.motor.change( data );\n\n    }\n\n    freeBone( node ){\n\n        if(!node.kinematic) return\n        node.cc++;\n        if(node.cc=== 20 ){\n            node.cc = 0;\n            node.kinematic = false;\n            node.bone.isPhysics = true;\n            root.motor.change( { name : node.name, kinematic:false } );\n        }\n        \n    }\n\n    isVisible( v ){\n\n        //let i = this.nodes.length, node\n        //while( i-- ) Utils.byName( this.nodes[i].name ).visible = v\n\n        let i = this.nameList.length;\n        while( i-- ) Utils.byName( this.nameList[i] ).visible = v;\n        /*let data = []\n        i = this.jointList.length;\n        while( i-- ) data.push( { name:this.jointList[i], visible:v } );\n        root.motor.change( data );*/\n\n    }\n\n\n\tinit(){\n\n        if( this.useSolver ) this.solver = root.motor.add({ \n            type:'solver', name:this.prefix+'_solver', iteration:32,\n            fix:true, needData:true\n        });\n\n        this.useAggregate = root.engine === 'PHYSX';// && this.option.useAggregate\n\n\t\tconst data = [];\n        \n       \n\n        // get character bones var bones = character.skeleton.bones;\n\n        let scaleMatrix = new Matrix4().makeScale(this.scaler, this.scaler, this.scaler);\n        \n\n        let p = new Vector3();\n        let s = new Vector3();\n        let q = new Quaternion();\n        let e = new Euler();\n        let mtx = new Matrix4();\n\n        let tmpMtx = new Matrix4();\n        let tmpMtxR = new Matrix4();\n\n        //this.model.updateWorldMatrix( true, false );\n        _matrixWorldInv.copy( this.model.matrixWorld ).invert();\n\n        let p1 = new Vector3();\n        let p2 = new Vector3();\n\n        let sizer  =  [1,1,1,1,1,1,1];\n        if(this.option.sizer){\n            sizer = this.option.sizer;\n        }\n\n        //let headDone = false\n\n        let i, lng = this.bones.length, name, n, bone, parent;///, child, o, parentName;\n        let size, dist, rot, type, kinematic, translate, phyName, motion;\n\n        let averageMass = 0;\n        if(this.mass) averageMass = this.mass / lng;\n\n        for( i = 0; i < lng; i++ ){\n\n        \ttype = null;\n            bone = this.bones[i];\n            name = bone.name;\n            parent = bone.parent;\n\n            if( parent ) {\n\n            \tn = parent.name;\n\n                _boneMatrix.multiplyMatrices( _matrixWorldInv, bone.matrixWorld );\n                p1.setFromMatrixPosition( _boneMatrix );\n\n                _boneMatrix.multiplyMatrices( _matrixWorldInv, parent.matrixWorld );\n                p2.setFromMatrixPosition( _boneMatrix );\n\n\n            \t//p1.setFromMatrixPosition( parent.matrixWorld );\n            \t//p2.setFromMatrixPosition( bone.matrixWorld );\n                dist = p1.distanceTo( p2 );// * this.scaler;\n\n                //if( n==='hip' && name==='abdomen' ) console.log( dist )\n\n\t            //translate = [ -dist * 0.5, 0, 0 ];\n\t            translate = [ 0, 0, dist * 0.5 ];\n                size = [ dist, 1, 1 ];\n                rot = null;//[0,0,0];\n                kinematic = true;\n                motion = false;\n\n                //type = 'capsule'\n                \n\n                //if( n==='hip' && name==='abdomen' ){ type = 'capsule'; size = [  0.1,dist*1.8 ]; translate = [ 0, 0, -(dist*1.8) * 0.5 ]; rot = [0,0,90]; link='null';}\n                \n                // body\n                //if( n==='hip' && name==='abdomen' ){ type = 'capsule'; size = [  0.1,dist*1.8 ]; translate = [ 0, 0, -(dist*1.8) * 0.5 ]; rot = [0,0,90]; link='null';}\n                \n                //if( n==='hip' && name==='abdomen' ){ type = 'capsule'; size = [  dist*1.8, 0.08 ]; translate = [ 0, 0, -dist * 0.5 ]; rot = [0,0,90]; link='null';}\n                if( n==='hip' && name==='abdomen' ){ type = 'capsule'; size = [  dist*sizer[0], 0.08 ]; translate = [ 0, 0, -dist*sizer[0] ]; rot = [0,0,90];}\n                if( n==='abdomen' && name==='chest'  ){ type = 'capsule'; size = [ dist*0.7*sizer[1], 0.08   ]; translate = [ 0, 0, (-dist * 0.5)-0.06 ]; rot = [90,0,0];}\n                if( n==='chest' && name==='neck' ){ type = 'capsule'; size = [  dist*0.4*sizer[2], 0.04 ]; translate = [ 0, 0, (-dist * 0.5)-0.02 ]; rot = [0,0,90];}\n                if( n==='neck' && name === 'head' ){ type = 'capsule'; size = [ 0.06*sizer[3], dist ]; translate = [ 0, 0, -dist * 0.5 ]; rot = [90,0,0]; }\n                if( n==='head' && name === 'End_head' ){ type = 'capsule'; size = [ 0.1*sizer[4], dist-0.17 ]; translate = [ 0, 0.02, (-dist * 0.5)+0.02 ]; rot = [90,0,0]; }\n                \n                //if( n==='head' && !headDone ){ console.log(name); headDone = true; type = 'sphere'; dist=0.08; size = [ 0.08, 0.2, dist ]; translate = [ 0, 0.025, -0.08 ]; }\n\t            //if( n==='chest' && name==='neck' ){ type = 'box'; size = [  0.28, 0.24, dist ]; translate = [ 0, 0, -dist * 0.5 ]; }\n\t            //if( n==='abdomen' && name==='chest'  ){ type = 'box'; size = [ 0.24, 0.20,  dist ]; translate = [ 0, 0, -dist * 0.5 ]; }\n              \n                \n\n\n                if( n==='chest' && name==='rBreast' && root.engine!=='HAVOK' ){ n='rBreast'; parent = bone; type = 'sphere'; size = [ 0.065 ]; translate = [ 0.065,0,0 ]; this.breast=true; motion = true; }\n                if( n==='chest' && name==='lBreast' && root.engine!=='HAVOK' ){ n='lBreast'; parent = bone; type = 'sphere'; size = [ 0.065 ]; translate = [ 0.065,0,0 ]; this.breast=true; motion = true; }\n                \n\n                // arm\n\n                let r = 0.04*sizer[5];\n                let w = dist-r;\n\n                if( n==='lCollar' && name==='lShldr'){ type = 'capsule'; size = [  r, dist*0.3 ]; translate = [dist*0.6 , 0, 0 ]; rot = [0,0,90]; }\n                if( n==='lShldr' && name==='lForeArm'){ type = 'capsule'; size = [  r, w ]; translate = [w * 0.5, 0, 0 ]; rot = [0,0,90]; }\n                if( n==='lForeArm' && name==='lHand'){ type = 'capsule'; size = [ r, w ]; translate = [w * 0.5, 0, 0 ]; rot = [0,0,90]; }\n                if( n==='lHand' && name==='lMid1'){ type = 'box'; size = [ dist*2, 0.09, 0.05 ]; translate = [dist, 0, 0 ]; }\n\n                if( n==='rCollar' && name==='rShldr'){ type = 'capsule'; size = [  r, dist*0.3 ]; translate = [-dist*0.6, 0, 0 ]; rot = [0,0,90]; }\n                if( n==='rShldr' && name==='rForeArm'){ type = 'capsule'; size = [  r, w ]; translate = [-w * 0.5, 0, 0 ]; rot = [0,0,90]; }\n                if( n==='rForeArm' && name==='rHand' ){ type = 'capsule'; size = [ r, w ]; translate = [-w * 0.5, 0, 0 ]; rot = [0,0,90]; }\n                if( n==='rHand' && name==='rMid1'){ type = 'box'; size = [ dist*2, 0.09, 0.05 ]; translate = [-dist, 0, 0 ]; }\n\n\t            // legs\n\n                r = 0.06*sizer[6];\n                w = dist-r;\n\n                if( n==='lThigh' ){ type = 'capsule'; size = [  r, dist ]; rot = [90,0,0]; translate = [ 0, 0, w * 0.5 ]; }\n                if( n==='lShin' ){ type = 'capsule'; size = [  r, dist ]; rot = [90,0,0]; translate = [ 0, 0, w * 0.5 ]; }\n                //if( n==='lFoot' ){ type = 'box'; size = [  0.1, dist*1.4, 0.06 ]; translate = [0, (dist * 0.5)-0.025, 0.06 ]; link:'lShin'; }\n                if( n==='lFoot' ){ type = 'capsule'; size = [  0.05, dist ]; translate = [0, (dist * 0.5)-0.025, 0.04 ]; }\n\n                if( n==='rThigh' ){ type = 'capsule'; size = [  r, dist ]; rot = [90,0,0]; translate = [ 0, 0, w * 0.5 ]; }\n                if( n==='rShin' ){ type = 'capsule'; size = [  r, dist ]; rot = [90,0,0]; translate = [ 0, 0, w * 0.5 ]; }\n                //if( n==='rFoot' ){ type = 'box'; size = [  0.1, dist*1.4, 0.06 ]; translate = [0, (dist * 0.5)-0.025, 0.06 ]; link:'rShin';}\n                if( n==='rFoot' ){ type = 'capsule'; size = [  0.05, dist ]; translate = [0, (dist * 0.5)-0.025, 0.04 ]; }\n\n                // extra ear\n                r = 0.04;\n                w = dist-r;\n                \n                \n                if( n==='rEar_0'){ type = 'capsule'; size = [  r, dist ]; rot = [0,0,90]; translate = [ w * 0.5, 0, 0 ]; Spine.push('rEar_0'); }\n                if( n==='rEar_1'){ type = 'capsule'; size = [  r, dist ]; rot = [0,0,90]; translate = [ w * 0.5, 0, 0 ]; Spine.push('rEar_1');}\n                if( n==='rEar_2' ){ type = 'capsule'; size = [  r, dist ]; rot = [0,0,90]; translate = [ w * 0.5, 0, 0 ]; Spine.push('rEar_2');}\n                if( n==='rEar_3' ){ type = 'capsule'; size = [  r, dist ]; rot = [0,0,90]; translate = [ w * 0.5, 0, 0 ]; }\n\n                if( n==='lEar_0'){ type = 'capsule'; size = [  r, dist ]; rot = [0,0,90]; translate = [ w * 0.5, 0, 0 ]; Spine.push('lEar_0');}\n                if( n==='lEar_1'){ type = 'capsule'; size = [  r, dist ]; rot = [0,0,90]; translate = [ w * 0.5, 0, 0 ]; Spine.push('lEar_1');}\n                if( n==='lEar_2' ){ type = 'capsule'; size = [  r, dist ]; rot = [0,0,90]; translate = [ w * 0.5, 0, 0 ]; Spine.push('lEar_2');}   \n                if( n==='lEar_3' ){ type = 'capsule'; size = [  r, dist ]; rot = [0,0,90]; translate = [ w * 0.5, 0, 0 ]; }\n\n                //if( n==='rFoot' && name==='lToes' ){ n='lToes'; parent = bone; type = 'capsule'; size = [  0.05, 0.1 ]; translate = [0, 0, 0 ]; link='rFoot'; rot = [0,0,0]; }\n                //if( n==='lFoot' && name==='rToes' ){ n='rToes'; parent = bone; type = 'capsule'; size = [  0.05, 0.1 ]; translate = [0, 0, 0 ]; link='rFoot'; rot = [0,0,0]; }\n\n                if( this.withFinger ) {\n\n                    if( n==='lHand' && name==='lMid1'){ type = 'box'; size = [ dist, 0.09, 0.05 ]; translate = [dist*0.5, 0, 0 ]; }\n                    if( n==='rHand' && name==='rMid1'){ type = 'box'; size = [ dist, 0.09, 0.05 ]; translate = [-dist*0.5, 0, 0 ]; }\n\n\n                    if( n==='rThumb1' && name==='rThumb2' ){ type = 'capsule'; size = [  0.02, dist ]; rot = [0,0,90]; }\n                    if( n==='rThumb2' && name==='rThumb3' ){ type = 'capsule'; size = [  0.02, dist ]; rot = [0,0,90]; }\n\n\n                    if( n==='rHand' && name==='rMid1' ){ type = 'capsule'; size = [  0.02, dist ]; rot = [0,0,90]; translate = [-dist*0.6, 0, 0 ]; }\n                    if( n==='rMid1' && name==='rMid2' ){ type = 'capsule'; size = [  0.02, dist ]; rot = [0,0,90]; translate = [-dist*0.6, 0, 0 ]; }\n                    if( n==='rMid2' && name==='rMid3' ){ type = 'capsule'; size = [  0.02, dist ]; rot = [0,0,90]; translate = [-dist*0.6, 0, 0 ]; }\n\n                }\n\n                if( type !== null ){\n\n                    phyName = this.prefix +'_bone_'+n;\n\n                \t// translation\n                    //translate = MathTool.scaleArray(translate,this.scaler,3);\n                    tmpMtx.makeTranslation( translate[0], translate[1], translate[2] );\n\n                    // rotation\n                    if( rot ){\n                        tmpMtxR.makeRotationFromEuler( e.set( rot[0]*torad$3, rot[1]*torad$3, rot[2]*torad$3 ) );\n                        tmpMtx.multiply( tmpMtxR );\n                    }\n\n                    //_boneMatrix.multiplyMatrices( _matrixWorldInv, parent.matrixWorld );\n                    \n                    //parent.matrixWorld );\n                    parent.updateWorldMatrix( true, false );\n                    _boneMatrix.multiplyMatrices( _matrixWorldInv, parent.matrixWorld );\n                    mtx.copy( _boneMatrix );\n                    //mtx.multiplyMatrices( _matrixWorldInv, parent.matrixWorld )\n                    //_tmpMatrix2.makeScale(this.scaler,this.scaler,this.scaler)\n                   // mtx.multiply(_tmpMatrix2)//Matrices( _matrixWorldInv, bone.matrixWorld );\n                    //p\n                    //mtx.copy( parent.matrixWorld )//.multiply(tmpMtx)//parent.matrixWorld );\n                    mtx.decompose( p, q, s );\n\n                    //p.copy(parent.position)\n\n                    //p.copy(p2)\n\n                    this.posRef[phyName] = p.toArray();\n                    //this.posRef[phyName] = p2.toArray()\n                    // if( n==='lForeArm'  )console.log(this.posRef[phyName])\n                    //this.posRef[phyName] = MathTool.scaleArray(p.toArray(),this.scaler,3)\n\n                    if( n==='lForeArm' || n==='rForeArm' ){\n                        _q$1.setFromAxisAngle( {x:0, y:1, z:0}, -90*torad$3 );\n                        q.multiply( _q$1 );\n                    } \n\n                    this.quatRef[phyName] = q.toArray();\n                     \n                    //mtx.multiplyMatrices( parent.matrixWorld, tmpMtx );\n                    mtx.multiplyMatrices( _boneMatrix, tmpMtx );\n                    mtx.decompose( p, q, s );\n\n\n                    //this.posRef[phyName] = p.toArray()\n                    // collection\n\n                    this.nameList.push( phyName );\n\n                    \n\n                    \n\n\n\n                \t// for physic body\n                    let bb = {\n\n                        name: phyName,\n\n                        friction: this.friction,\n                        restitution: this.restitution,\n                        \n                        type: type,\n                        size: MathTool.scaleArray(size,this.scaler,3),\n                        pos: p.toArray(),\n                        //rot: rot,\n                        quat: q.toArray(),\n                        kinematic: kinematic,\n                        \n                        //group:16,\n                        //mask:mask,\n                        //mask:0,\n                        material:'hide',\n                        //material:'debug',\n                        shadow:false,\n                        neverSleep: true,\n                        helper: true,\n                        hcolor:[0.0, 0.5, 1],\n                        hcolor2:[0.0, 0.2, 1],\n                        //hcolor:[0.87, 0.76, 0.65],\n                        //hcolor2:[0.9, 0.77, 0.64],\n\n                        penetrationVelocity:3,\n                        stabilization:0.1,\n                        //maxVelocity:[100,10],\n                        damping:[0.25,0.5],\n                        //maxAngularVelocity:3,\n\n                        //linked:link,\n                        //iterations:[4,4],\n                        //inertiaScale:[20,20,20],\n                        //iterations:[4,2],\n\n\n                        /*bone:parent,\n                        decal:tmpMtx.clone(),\n                        decalinv:tmpMtx.clone().invert(),*/\n\n                        ...this.option\n                        \n                    };\n\n\n\n                    if( this.useAggregate ){\n\n                        // aggregate test\n                        if( Spine.indexOf(n)!==-1 ){ \n                            bb['aggregate'] = this.prefix +'__Group';\n                            bb['aggregateMax'] = 21;\n                        }\n                        bb['mask'] = 1|2;\n\n                    } else {\n                        let mask =  1|2;\n                        if( n==='lForeArm' || n==='rForeArm' || n==='lShin' || n==='rShin'  ) mask = 1|2|32;\n                        if( n==='rEar_1' || n==='rEar_2' || n==='rEar_3' || n==='lEar_1'|| n==='lEar_2'|| n==='lEar_3' ) mask = 1|2|32;\n                        if( n==='rEar_0' || n==='rEar_0') mask = 0;\n\n                        bb['group'] = 32;\n                        bb['mask'] = mask;\n                    }\n                    \n\n                    //\n                    \n\n\n                    if( this.mass !== null ) bb['mass'] = averageMass;\n                    else bb['density'] = 1;\n\n                    data.push(bb);\n\n\n\n                    /*if( this.useSolver ){\n                        physicData['solver'] = this.prefix+'_solver'\n                        physicData['linked'] = this.prefix+'_bone_'+link\n                        physicData['kinematic'] = false\n                    }*/\n\n                     //physicData )\n\n                    let inv = tmpMtx.clone().invert().premultiply(scaleMatrix);\n\n                    this.nodes.push({\n                    \tname: phyName,\n                        kinematic: kinematic,\n                        motion:motion,// auto move\n                    \tbone:parent,\n                        decal:tmpMtx.clone(),\n                        decalinv:inv,\n                        quat:q.toArray(),\n                        pos:p.toArray(),\n                        //scaler:this.scaler,\n                        cc:0,\n                    });\n                }\n\n            }\n        }\n\n        //console.log( data )\n\n        root.motor.add( data );\n\n        //if( this.useSolver ) this.solver.start();\n       \n        this.addLink();\n\n        \n        this.dispatchEvent( { type: 'start', message: 'go !' } );\n        this.ready = true;\n\n\t}\n\n    existe( name ){\n        return this.nameList.indexOf(name) !== -1 ? true : false\n    }\n\n    addLink () {\n\n        // Stiffness / Damping\n        // raideur / amortissement\n        //let sp = [0.05,1]\n        let sp = [0.05, 1, 0];\n        if(root.engine==='PHYSX'){\n            // stiffness / damping / restitution / bounceThreshold / contactDistance\n            //[0,0, 0, 0.5]\n            // raideur / amortissement\n            sp = [50,10, 0, 0.5];\n        }\n\n        let driveSetting = {\n            stiffness:2,\n            damping:0.1,\n            forceLimit:10000000,\n            isAcceleration:false,\n        };\n\n        /*driveSetting = {\n            stiffness:10000,\n            damping:500,\n            forceLimit:100,\n            isAcceleration:true,\n        }*/\n\n\n\n\n        let p = this.prefix+'_bone_';\n        let data = [];\n        let sett = {\n            type:'joint', \n            mode:'d6',\n            \n            lm:[  ['ry',-180,180,...sp], ['rz',-180,180,...sp] ],\n\n            collision:false,\n            helperSize:0.05,\n            visible:this.showJoint,\n\n            //acc:true,\n\n            //worldAxis:[1,0,0],\n\n            //autoDrive: true,\n\n            /*drives: [\n            ['rx', driveSetting.stiffness, driveSetting.damping, driveSetting.forceLimit, driveSetting.isAcceleration ],\n            ['ry', driveSetting.stiffness, driveSetting.damping, driveSetting.forceLimit, driveSetting.isAcceleration ],\n            ['rz', driveSetting.stiffness, driveSetting.damping, driveSetting.forceLimit, driveSetting.isAcceleration ]\n            ],*/\n\n        };\n\n        if( this.useDrive ){\n            sett['drives'] = [\n            ['rx', driveSetting.stiffness, driveSetting.damping, driveSetting.forceLimit, driveSetting.isAcceleration ],\n            ['ry', driveSetting.stiffness, driveSetting.damping, driveSetting.forceLimit, driveSetting.isAcceleration ],\n            ['rz', driveSetting.stiffness, driveSetting.damping, driveSetting.forceLimit, driveSetting.isAcceleration ]\n            ];\n        }\n\n        let breastMotion = [-1e-3, 0.001, 100, 0.2, 0.5];\n        \n\n        data.push({ ...sett, b1:p+'hip', b2:p+'abdomen', worldPos:this.posRef[p+'abdomen'], worldQuat:this.quatRef[p+'hip'], lm:[ ['rx',-20,20,...sp], ['ry',-20,20,...sp], ['rz',-20,20,...sp]] });\n        data.push({ ...sett, b1:p+'abdomen', b2:p+'chest', worldPos:this.posRef[p+'chest'], worldQuat:this.quatRef[p+'chest'], lm:[ ['rx',-20,20,...sp], ['ry',-20,20,...sp], ['rz',-20,20,...sp]] });\n        //data.push({ ...sett, b1:p+'chest', b2:p+'neck', worldPos:this.posRef[p+'neck'], worldQuat:this.quatRef[p+'neck'], lm:[ ['rx',-60,60,...sp], ['ry',-1,1,...sp], ['rz',-30,30,...sp]] })\n        //data.push({ ...sett, b1:p+'neck', b2:p+'head', worldPos:this.posRef[p+'head'], worldQuat:this.quatRef[p+'head'], lm:[ ['rx',-60,60,...sp], ['ry',-1,1,...sp], ['rz',-30,30,...sp]] })\n        data.push({ ...sett, b1:p+'chest', b2:p+'neck', worldPos:this.posRef[p+'neck'], worldQuat:this.quatRef[p+'neck'], lm:[ ['rx',0,30,...sp], ['ry',-1,1,...sp], ['rz',-30,30,...sp]] });\n        data.push({ ...sett, b1:p+'neck', b2:p+'head', worldPos:this.posRef[p+'head'], worldQuat:this.quatRef[p+'head'], lm:[ ['rx',0,30,...sp], ['ry',-1,1,...sp], ['rz',-30,30,...sp]] });\n        //data.push({ type:'joint', mode:'d6', b1:this.prefix*'chest', b2:this.prefix*'abdomen' })\n\n        // arm\n\n        //data.push({ ...sett, b1:p+'chest', b2:p+'rCollar', worldPos:this.posRef[p+'rCollar'],  worldQuat:this.quatRef[p+'rCollar'], lm:[ ['rx',-10,10,...sp], ['ry',-10,10,...sp], ['rz',-10,10,...sp]] })\n        //data.push({ ...sett, b1:p+'chest', b2:p+'lCollar', worldPos:this.posRef[p+'lCollar'],  worldQuat:this.quatRef[p+'lCollar'], lm:[ ['rx',-10,10,...sp], ['ry',-10,10,...sp], ['rz',-10,10,...sp]] })\n        data.push({ ...sett, b1:p+'chest', b2:p+'rCollar', worldPos:this.posRef[p+'rCollar'],  worldQuat:this.quatRef[p+'rCollar'], mode:'fixe' });\n        data.push({ ...sett, b1:p+'chest', b2:p+'lCollar', worldPos:this.posRef[p+'lCollar'],  worldQuat:this.quatRef[p+'lCollar'], mode:'fixe' });\n\n        data.push({ ...sett, b1:p+'rCollar', b2:p+'rShldr', worldPos:this.posRef[p+'rShldr'],  worldQuat:this.quatRef[p+'rShldr'] });\n        data.push({ ...sett, b1:p+'lCollar', b2:p+'lShldr', worldPos:this.posRef[p+'lShldr'],  worldQuat:this.quatRef[p+'lShldr'] });\n\n       //data.push({ ...sett, b1:p+'chest', b2:p+'rShldr', worldPos:this.posRef[p+'rShldr'], worldQuat:this.quatRef[p+'rShldr'] })\n        //data.push({ ...sett, b1:p+'chest', b2:p+'lShldr', worldPos:this.posRef[p+'lShldr'], worldQuat:this.quatRef[p+'lShldr'] })\n\n        if( this.existe(p+'rForeArm') ) data.push({ ...sett, b1:p+'rShldr', b2:p+'rForeArm', worldPos:this.posRef[p+'rForeArm'], worldQuat:this.quatRef[p+'rForeArm'], lm:[['rx',0,160,...sp]] });\n        if( this.existe(p+'lForeArm') ) data.push({ ...sett, b1:p+'lShldr', b2:p+'lForeArm', worldPos:this.posRef[p+'lForeArm'], worldQuat:this.quatRef[p+'lForeArm'], lm:[['rx',0,160,...sp]] });\n\n        if( this.existe(p+'rHand') ) data.push({ ...sett, b1:p+'rForeArm', b2:p+'rHand', worldPos:this.posRef[p+'rHand'], worldQuat:this.quatRef[p+'rHand'], lm:[['rx',0,160,...sp], ['ry',-10,10,...sp]] });\n        if( this.existe(p+'lHand') ) data.push({ ...sett, b1:p+'lForeArm', b2:p+'lHand', worldPos:this.posRef[p+'lHand'], worldQuat:this.quatRef[p+'lHand'], lm:[['rx',0,160,...sp], ['ry',-10,10,...sp]] });\n\n        //data.push({ ...sett, b1:p+'rShldr', b2:p+'rForeArm', worldPos:this.posRef[p+'rForeArm'], worldAxis:[1,0,0], lm:[['rx',-120, 0]] })\n        //data.push({ ...sett, b1:p+'lShldr', b2:p+'lForeArm', worldPos:this.posRef[p+'lForeArm'], worldAxis:[1,0,0], lm:[['rx',-120, 0]] })\n\n        // leg\n\n        data.push({ ...sett, b1:p+'hip', b2:p+'rThigh', worldPos:this.posRef[p+'rThigh'],  worldQuat:this.quatRef[p+'rThigh'] });\n        data.push({ ...sett, b1:p+'hip', b2:p+'lThigh', worldPos:this.posRef[p+'lThigh'],  worldQuat:this.quatRef[p+'lThigh'] });\n\n        if( this.existe(p+'rShin') )data.push({ ...sett, b1:p+'rThigh', b2:p+'rShin', worldPos:this.posRef[p+'rShin'], lm:[['rx',0,160,...sp]], worldQuat:this.quatRef[p+'rShin'] });\n        if( this.existe(p+'lShin') )data.push({ ...sett, b1:p+'lThigh', b2:p+'lShin', worldPos:this.posRef[p+'lShin'], lm:[['rx',0,160,...sp]], worldQuat:this.quatRef[p+'lShin'] });\n\n        if( this.existe(p+'rFoot') ) data.push({ ...sett, b1:p+'rShin', b2:p+'rFoot', worldPos:this.posRef[p+'rFoot'], lm:[['rx',-10,30,...sp], ['rz',-10,10,...sp]], worldQuat:this.quatRef[p+'rFoot'] });\n        if( this.existe(p+'lFoot') ) data.push({ ...sett, b1:p+'lShin', b2:p+'lFoot', worldPos:this.posRef[p+'lFoot'], lm:[['rx',-10,30,...sp], ['rz',-10,10,...sp]], worldQuat:this.quatRef[p+'lFoot'] });\n\n        if(this.breast){\n            if( this.existe(p+'rBreast') ) data.push({ ...sett, b1:p+'chest', b2:p+'rBreast', worldPos:this.posRef[p+'rBreast'], worldQuat:this.quatRef[p+'rBreast'], lm:[['x',...breastMotion], ['y',...breastMotion], ['z',...breastMotion]] });\n            if( this.existe(p+'lBreast') ) data.push({ ...sett, b1:p+'chest', b2:p+'lBreast', worldPos:this.posRef[p+'lBreast'], worldQuat:this.quatRef[p+'lBreast'], lm:[['x',...breastMotion], ['y',...breastMotion], ['z',...breastMotion]] });\n        }\n\n        // EAR\n\n        if( this.existe(p+'lEar_0') ) data.push({ ...sett, b1:p+'head',   b2:p+'lEar_0', worldPos:this.posRef[p+'lEar_0'], worldQuat:this.quatRef[p+'lEar_0'], lm:[['rx',-10,30,...sp], ['rz',-10,10,...sp]] }); \n        if( this.existe(p+'lEar_1') ) data.push({ ...sett, b1:p+'lEar_0', b2:p+'lEar_1', worldPos:this.posRef[p+'lEar_1'], worldQuat:this.quatRef[p+'lEar_1'], lm:[['rx',-10,30,...sp], ['rz',-10,10,...sp]] });\n        if( this.existe(p+'lEar_2') ) data.push({ ...sett, b1:p+'lEar_1', b2:p+'lEar_2', worldPos:this.posRef[p+'lEar_2'], worldQuat:this.quatRef[p+'lEar_2'], lm:[['rx',-10,30,...sp], ['rz',-10,10,...sp]] });\n        if( this.existe(p+'lEar_3') ) data.push({ ...sett, b1:p+'lEar_2', b2:p+'lEar_3', worldPos:this.posRef[p+'lEar_3'], worldQuat:this.quatRef[p+'lEar_3'], lm:[['rx',-10,30,...sp], ['rz',-10,10,...sp]] });\n        \n        if( this.existe(p+'rEar_0') ) data.push({ ...sett, b1:p+'head',   b2:p+'rEar_0', worldPos:this.posRef[p+'rEar_0'], worldQuat:this.quatRef[p+'rEar_0'], lm:[['rx',-10,30,...sp], ['rz',-10,10,...sp]] });\n        if( this.existe(p+'rEar_1') ) data.push({ ...sett, b1:p+'rEar_0', b2:p+'rEar_1', worldPos:this.posRef[p+'rEar_1'], worldQuat:this.quatRef[p+'rEar_1'], lm:[['rx',-10,30,...sp], ['rz',-10,10,...sp]] });\n        if( this.existe(p+'rEar_2') ) data.push({ ...sett, b1:p+'rEar_1', b2:p+'rEar_2', worldPos:this.posRef[p+'rEar_2'], worldQuat:this.quatRef[p+'rEar_2'], lm:[['rx',-10,30,...sp], ['rz',-10,10,...sp]] });\n        if( this.existe(p+'rEar_3') ) data.push({ ...sett, b1:p+'rEar_2', b2:p+'rEar_3', worldPos:this.posRef[p+'rEar_3'], worldQuat:this.quatRef[p+'rEar_3'], lm:[['rx',-10,30,...sp], ['rz',-10,10,...sp]] });\n\n\n        let x = 0;\n        for( let j in data ){\n            data[j].name = this.prefix + '_joint_'+ x;\n            //this.nameList.push( data[j].name )\n            this.jointList.push( data[j].name );\n            x++;\n        }\n\n\n        root.motor.add( data );\n\n    }\n\n\n\n\n\n    /*makeLink () {\n\n        let p = this.prefix;\n        let data = []\n        data.push({ type:'joint', mode:'d6', b1:p+'hip', b2:p+'abdomen', visible:true })\n        data.push({ type:'joint', mode:'d6', b1:p+'abdomen', b2:p+'chest', visible:true })\n        //data.push({ type:'joint', mode:'d6', b1:this.prefix*'chest', b2:this.prefix*'abdomen' })\n\n        //console.log(this.prefix, data)\n\n        root.motor.add( data )\n\n    }*/\n\n\tupdateMatrixWorld( force ){\n\n        if(!this.ready) return\n\n\t\tlet up = [];\n\n\t\tconst nodes = this.nodes;\n\t\tlet i = nodes.length, node, bone, body, n=0;\n\n\n\t\twhile( i-- ){\n\n            node = nodes[n];\n            bone = node.bone;\n            n++;\n\n            if( node.kinematic ){\n\n                _endMatrix.multiplyMatrices( bone.matrixWorld, node.decal );\n                _endMatrix.decompose( _p, _q$1, _s );\n\n                node.pos = _p.toArray();\n                node.quat = _q$1.toArray();\n\n                up.push({ name:node.name, pos:node.pos, quat:node.quat });\n\n                if( node.motion ) this.freeBone(node);\n\n            } else {\n\n                body = Utils.byName( node.name );\n\n                if(body){\n                    _endMatrix.copy( body.matrixWorld ).multiply( node.decalinv );\n                    bone.phyMtx.copy( _endMatrix );\n                    bone.isPhysics = true;\n                }\n            }\n\n        }\n\n        if( up.length !== 0 ) root.motor.change( up, true );\n\n\t}\n\n\tdispose(){\n\n        root.motor.remove( this.jointList );\n        root.motor.remove( this.nameList );\n\n        //if( this.useAggregate ) root.motor.remove(this.prefix +'__Group')\n\n        this.nodes = [];\n        this.posRef = {};\n        this.quatRef = {};\n\t\tthis.parent.remove( this );\n\n        this.nameList = [];\n        this.jointList = [];\n\t\t\n\t}\n\n}\n\nlet _renderer;\nlet fullscreenQuadGeometry;\nlet fullscreenQuadMaterial;\nlet fullscreenQuad;\n\nfunction decompress( texture, maxTextureSize = Infinity, renderer = null ) {\n\n\tif ( ! fullscreenQuadGeometry ) fullscreenQuadGeometry = new PlaneGeometry( 2, 2, 1, 1 );\n\tif ( ! fullscreenQuadMaterial ) fullscreenQuadMaterial = new ShaderMaterial( {\n\t\tuniforms: { blitTexture: new Uniform( texture ) },\n\t\tvertexShader: `\n\t\t\tvarying vec2 vUv;\n\t\t\tvoid main(){\n\t\t\t\tvUv = uv;\n\t\t\t\tgl_Position = vec4(position.xy * 1.0,0.,.999999);\n\t\t\t}`,\n\t\tfragmentShader: `\n\t\t\tuniform sampler2D blitTexture; \n\t\t\tvarying vec2 vUv;\n\n\t\t\tvoid main(){ \n\t\t\t\tgl_FragColor = vec4(vUv.xy, 0, 1);\n\t\t\t\t\n\t\t\t\t#ifdef IS_SRGB\n\t\t\t\tgl_FragColor = LinearTosRGB( texture2D( blitTexture, vUv) );\n\t\t\t\t#else\n\t\t\t\tgl_FragColor = texture2D( blitTexture, vUv);\n\t\t\t\t#endif\n\t\t\t}`\n\t} );\n\n\tfullscreenQuadMaterial.uniforms.blitTexture.value = texture;\n\tfullscreenQuadMaterial.defines.IS_SRGB = texture.colorSpace == SRGBColorSpace;\n\tfullscreenQuadMaterial.needsUpdate = true;\n\n\tif ( ! fullscreenQuad ) {\n\n\t\tfullscreenQuad = new Mesh( fullscreenQuadGeometry, fullscreenQuadMaterial );\n\t\tfullscreenQuad.frustrumCulled = false;\n\n\t}\n\n\tconst _camera = new PerspectiveCamera();\n\tconst _scene = new Scene();\n\t_scene.add( fullscreenQuad );\n\n\tif ( renderer === null ) {\n\n\t\trenderer = _renderer = new WebGLRenderer( { antialias: false } );\n\n\t}\n\n\tconst width = Math.min( texture.image.width, maxTextureSize );\n\tconst height = Math.min( texture.image.height, maxTextureSize );\n\n\trenderer.setSize( width, height );\n\trenderer.clear();\n\trenderer.render( _scene, _camera );\n\n\tconst canvas = document.createElement( 'canvas' );\n\tconst context = canvas.getContext( '2d' );\n\n\tcanvas.width = width;\n\tcanvas.height = height;\n\n\tcontext.drawImage( renderer.domElement, 0, 0, width, height );\n\n\tconst readableTexture = new CanvasTexture( canvas );\n\n\treadableTexture.minFilter = texture.minFilter;\n\treadableTexture.magFilter = texture.magFilter;\n\treadableTexture.wrapS = texture.wrapS;\n\treadableTexture.wrapT = texture.wrapT;\n\treadableTexture.name = texture.name;\n\n\tif ( _renderer ) {\n\n\t\t_renderer.forceContextLoss();\n\t\t_renderer.dispose();\n\t\t_renderer = null;\n\n\t}\n\n\treturn readableTexture;\n\n}\n\n/**\n * The KHR_mesh_quantization extension allows these extra attribute component types\n *\n * @see https://github.com/KhronosGroup/glTF/blob/main/extensions/2.0/Khronos/KHR_mesh_quantization/README.md#extending-mesh-attributes\n */\nconst KHR_mesh_quantization_ExtraAttrTypes = {\n\tPOSITION: [\n\t\t'byte',\n\t\t'byte normalized',\n\t\t'unsigned byte',\n\t\t'unsigned byte normalized',\n\t\t'short',\n\t\t'short normalized',\n\t\t'unsigned short',\n\t\t'unsigned short normalized',\n\t],\n\tNORMAL: [\n\t\t'byte normalized',\n\t\t'short normalized',\n\t],\n\tTANGENT: [\n\t\t'byte normalized',\n\t\t'short normalized',\n\t],\n\tTEXCOORD: [\n\t\t'byte',\n\t\t'byte normalized',\n\t\t'unsigned byte',\n\t\t'short',\n\t\t'short normalized',\n\t\t'unsigned short',\n\t],\n};\n\n\nclass GLTFExporter {\n\n\tconstructor() {\n\n\t\tthis.pluginCallbacks = [];\n\n\t\tthis.register( function ( writer ) {\n\n\t\t\treturn new GLTFLightExtension( writer );\n\n\t\t} );\n\n\t\tthis.register( function ( writer ) {\n\n\t\t\treturn new GLTFMaterialsUnlitExtension$1( writer );\n\n\t\t} );\n\n\t\tthis.register( function ( writer ) {\n\n\t\t\treturn new GLTFMaterialsTransmissionExtension$1( writer );\n\n\t\t} );\n\n\t\tthis.register( function ( writer ) {\n\n\t\t\treturn new GLTFMaterialsVolumeExtension$1( writer );\n\n\t\t} );\n\n\t\tthis.register( function ( writer ) {\n\n\t\t\treturn new GLTFMaterialsIorExtension$1( writer );\n\n\t\t} );\n\n\t\tthis.register( function ( writer ) {\n\n\t\t\treturn new GLTFMaterialsSpecularExtension$1( writer );\n\n\t\t} );\n\n\t\tthis.register( function ( writer ) {\n\n\t\t\treturn new GLTFMaterialsClearcoatExtension$1( writer );\n\n\t\t} );\n\n\t\tthis.register( function ( writer ) {\n\n\t\t\treturn new GLTFMaterialsIridescenceExtension$1( writer );\n\n\t\t} );\n\n\t\tthis.register( function ( writer ) {\n\n\t\t\treturn new GLTFMaterialsSheenExtension$1( writer );\n\n\t\t} );\n\n\t\tthis.register( function ( writer ) {\n\n\t\t\treturn new GLTFMaterialsAnisotropyExtension$1( writer );\n\n\t\t} );\n\n\t\tthis.register( function ( writer ) {\n\n\t\t\treturn new GLTFMaterialsEmissiveStrengthExtension$1( writer );\n\n\t\t} );\n\n\t\tthis.register( function ( writer ) {\n\n\t\t\treturn new GLTFMaterialsBumpExtension$1( writer );\n\n\t\t} );\n\n\t\tthis.register( function ( writer ) {\n\n\t\t\treturn new GLTFMeshGpuInstancing$1( writer );\n\n\t\t} );\n\n\t}\n\n\tregister( callback ) {\n\n\t\tif ( this.pluginCallbacks.indexOf( callback ) === -1 ) {\n\n\t\t\tthis.pluginCallbacks.push( callback );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tunregister( callback ) {\n\n\t\tif ( this.pluginCallbacks.indexOf( callback ) !== -1 ) {\n\n\t\t\tthis.pluginCallbacks.splice( this.pluginCallbacks.indexOf( callback ), 1 );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\t/**\n\t * Parse scenes and generate GLTF output\n\t * @param  {Scene or [THREE.Scenes]} input   Scene or Array of THREE.Scenes\n\t * @param  {Function} onDone  Callback on completed\n\t * @param  {Function} onError  Callback on errors\n\t * @param  {Object} options options\n\t */\n\tparse( input, onDone, onError, options ) {\n\n\t\tconst writer = new GLTFWriter();\n\t\tconst plugins = [];\n\n\t\tfor ( let i = 0, il = this.pluginCallbacks.length; i < il; i ++ ) {\n\n\t\t\tplugins.push( this.pluginCallbacks[ i ]( writer ) );\n\n\t\t}\n\n\t\twriter.setPlugins( plugins );\n\t\twriter.write( input, onDone, options ).catch( onError );\n\n\t}\n\n\tparseAsync( input, options ) {\n\n\t\tconst scope = this;\n\n\t\treturn new Promise( function ( resolve, reject ) {\n\n\t\t\tscope.parse( input, resolve, reject, options );\n\n\t\t} );\n\n\t}\n\n}\n\n//------------------------------------------------------------------------------\n// Constants\n//------------------------------------------------------------------------------\n\nconst WEBGL_CONSTANTS$1 = {\n\tPOINTS: 0x0000,\n\tLINES: 0x0001,\n\tLINE_LOOP: 0x0002,\n\tLINE_STRIP: 0x0003,\n\tTRIANGLES: 0x0004,\n\tBYTE: 0x1400,\n\tUNSIGNED_BYTE: 0x1401,\n\tSHORT: 0x1402,\n\tUNSIGNED_SHORT: 0x1403,\n\tINT: 0x1404,\n\tUNSIGNED_INT: 0x1405,\n\tFLOAT: 0x1406,\n\n\tARRAY_BUFFER: 0x8892,\n\tELEMENT_ARRAY_BUFFER: 0x8893,\n\n\tNEAREST: 0x2600,\n\tLINEAR: 0x2601,\n\tNEAREST_MIPMAP_NEAREST: 0x2700,\n\tLINEAR_MIPMAP_NEAREST: 0x2701,\n\tNEAREST_MIPMAP_LINEAR: 0x2702,\n\tLINEAR_MIPMAP_LINEAR: 0x2703,\n\n\tCLAMP_TO_EDGE: 33071,\n\tMIRRORED_REPEAT: 33648,\n\tREPEAT: 10497\n};\n\nconst KHR_MESH_QUANTIZATION = 'KHR_mesh_quantization';\n\nconst THREE_TO_WEBGL = {};\n\nTHREE_TO_WEBGL[ NearestFilter ] = WEBGL_CONSTANTS$1.NEAREST;\nTHREE_TO_WEBGL[ NearestMipmapNearestFilter ] = WEBGL_CONSTANTS$1.NEAREST_MIPMAP_NEAREST;\nTHREE_TO_WEBGL[ NearestMipmapLinearFilter ] = WEBGL_CONSTANTS$1.NEAREST_MIPMAP_LINEAR;\nTHREE_TO_WEBGL[ LinearFilter ] = WEBGL_CONSTANTS$1.LINEAR;\nTHREE_TO_WEBGL[ LinearMipmapNearestFilter ] = WEBGL_CONSTANTS$1.LINEAR_MIPMAP_NEAREST;\nTHREE_TO_WEBGL[ LinearMipmapLinearFilter ] = WEBGL_CONSTANTS$1.LINEAR_MIPMAP_LINEAR;\n\nTHREE_TO_WEBGL[ ClampToEdgeWrapping ] = WEBGL_CONSTANTS$1.CLAMP_TO_EDGE;\nTHREE_TO_WEBGL[ RepeatWrapping ] = WEBGL_CONSTANTS$1.REPEAT;\nTHREE_TO_WEBGL[ MirroredRepeatWrapping ] = WEBGL_CONSTANTS$1.MIRRORED_REPEAT;\n\nconst PATH_PROPERTIES$1 = {\n\tscale: 'scale',\n\tposition: 'translation',\n\tquaternion: 'rotation',\n\tmorphTargetInfluences: 'weights'\n};\n\nconst DEFAULT_SPECULAR_COLOR = new Color();\n\n// GLB constants\n// https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#glb-file-format-specification\n\nconst GLB_HEADER_BYTES = 12;\nconst GLB_HEADER_MAGIC = 0x46546C67;\nconst GLB_VERSION = 2;\n\nconst GLB_CHUNK_PREFIX_BYTES = 8;\nconst GLB_CHUNK_TYPE_JSON = 0x4E4F534A;\nconst GLB_CHUNK_TYPE_BIN = 0x004E4942;\n\n//------------------------------------------------------------------------------\n// Utility functions\n//------------------------------------------------------------------------------\n\n/**\n * Compare two arrays\n * @param  {Array} array1 Array 1 to compare\n * @param  {Array} array2 Array 2 to compare\n * @return {Boolean}        Returns true if both arrays are equal\n */\nfunction equalArray( array1, array2 ) {\n\n\treturn ( array1.length === array2.length ) && array1.every( function ( element, index ) {\n\n\t\treturn element === array2[ index ];\n\n\t} );\n\n}\n\n/**\n * Converts a string to an ArrayBuffer.\n * @param  {string} text\n * @return {ArrayBuffer}\n */\nfunction stringToArrayBuffer( text ) {\n\n\treturn new TextEncoder().encode( text ).buffer;\n\n}\n\n/**\n * Is identity matrix\n *\n * @param {Matrix4} matrix\n * @returns {Boolean} Returns true, if parameter is identity matrix\n */\nfunction isIdentityMatrix( matrix ) {\n\n\treturn equalArray( matrix.elements, [ 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1 ] );\n\n}\n\n/**\n * Get the min and max vectors from the given attribute\n * @param  {BufferAttribute} attribute Attribute to find the min/max in range from start to start + count\n * @param  {Integer} start\n * @param  {Integer} count\n * @return {Object} Object containing the `min` and `max` values (As an array of attribute.itemSize components)\n */\nfunction getMinMax( attribute, start, count ) {\n\n\tconst output = {\n\n\t\tmin: new Array( attribute.itemSize ).fill( Number.POSITIVE_INFINITY ),\n\t\tmax: new Array( attribute.itemSize ).fill( Number.NEGATIVE_INFINITY )\n\n\t};\n\n\tfor ( let i = start; i < start + count; i ++ ) {\n\n\t\tfor ( let a = 0; a < attribute.itemSize; a ++ ) {\n\n\t\t\tlet value;\n\n\t\t\tif ( attribute.itemSize > 4 ) {\n\n\t\t\t\t // no support for interleaved data for itemSize > 4\n\n\t\t\t\tvalue = attribute.array[ i * attribute.itemSize + a ];\n\n\t\t\t} else {\n\n\t\t\t\tif ( a === 0 ) value = attribute.getX( i );\n\t\t\t\telse if ( a === 1 ) value = attribute.getY( i );\n\t\t\t\telse if ( a === 2 ) value = attribute.getZ( i );\n\t\t\t\telse if ( a === 3 ) value = attribute.getW( i );\n\n\t\t\t\tif ( attribute.normalized === true ) {\n\n\t\t\t\t\tvalue = MathUtils.normalize( value, attribute.array );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\toutput.min[ a ] = Math.min( output.min[ a ], value );\n\t\t\toutput.max[ a ] = Math.max( output.max[ a ], value );\n\n\t\t}\n\n\t}\n\n\treturn output;\n\n}\n\n/**\n * Get the required size + padding for a buffer, rounded to the next 4-byte boundary.\n * https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#data-alignment\n *\n * @param {Integer} bufferSize The size the original buffer.\n * @returns {Integer} new buffer size with required padding.\n *\n */\nfunction getPaddedBufferSize( bufferSize ) {\n\n\treturn Math.ceil( bufferSize / 4 ) * 4;\n\n}\n\n/**\n * Returns a buffer aligned to 4-byte boundary.\n *\n * @param {ArrayBuffer} arrayBuffer Buffer to pad\n * @param {Integer} paddingByte (Optional)\n * @returns {ArrayBuffer} The same buffer if it's already aligned to 4-byte boundary or a new buffer\n */\nfunction getPaddedArrayBuffer( arrayBuffer, paddingByte = 0 ) {\n\n\tconst paddedLength = getPaddedBufferSize( arrayBuffer.byteLength );\n\n\tif ( paddedLength !== arrayBuffer.byteLength ) {\n\n\t\tconst array = new Uint8Array( paddedLength );\n\t\tarray.set( new Uint8Array( arrayBuffer ) );\n\n\t\tif ( paddingByte !== 0 ) {\n\n\t\t\tfor ( let i = arrayBuffer.byteLength; i < paddedLength; i ++ ) {\n\n\t\t\t\tarray[ i ] = paddingByte;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn array.buffer;\n\n\t}\n\n\treturn arrayBuffer;\n\n}\n\nfunction getCanvas() {\n\n\tif ( typeof document === 'undefined' && typeof OffscreenCanvas !== 'undefined' ) {\n\n\t\treturn new OffscreenCanvas( 1, 1 );\n\n\t}\n\n\treturn document.createElement( 'canvas' );\n\n}\n\nfunction getToBlobPromise( canvas, mimeType ) {\n\n\tif ( canvas.toBlob !== undefined ) {\n\n\t\treturn new Promise( ( resolve ) => canvas.toBlob( resolve, mimeType ) );\n\n\t}\n\n\tlet quality;\n\n\t// Blink's implementation of convertToBlob seems to default to a quality level of 100%\n\t// Use the Blink default quality levels of toBlob instead so that file sizes are comparable.\n\tif ( mimeType === 'image/jpeg' ) {\n\n\t\tquality = 0.92;\n\n\t} else if ( mimeType === 'image/webp' ) {\n\n\t\tquality = 0.8;\n\n\t}\n\n\treturn canvas.convertToBlob( {\n\n\t\ttype: mimeType,\n\t\tquality: quality\n\n\t} );\n\n}\n\n/**\n * Writer\n */\nclass GLTFWriter {\n\n\tconstructor() {\n\n\t\tthis.plugins = [];\n\n\t\tthis.options = {};\n\t\tthis.pending = [];\n\t\tthis.buffers = [];\n\n\t\tthis.byteOffset = 0;\n\t\tthis.buffers = [];\n\t\tthis.nodeMap = new Map();\n\t\tthis.skins = [];\n\n\t\tthis.extensionsUsed = {};\n\t\tthis.extensionsRequired = {};\n\n\t\tthis.uids = new Map();\n\t\tthis.uid = 0;\n\n\t\tthis.json = {\n\t\t\tasset: {\n\t\t\t\tversion: '2.0',\n\t\t\t\tgenerator: 'THREE.GLTFExporter'\n\t\t\t}\n\t\t};\n\n\t\tthis.cache = {\n\t\t\tmeshes: new Map(),\n\t\t\tattributes: new Map(),\n\t\t\tattributesNormalized: new Map(),\n\t\t\tmaterials: new Map(),\n\t\t\ttextures: new Map(),\n\t\t\timages: new Map()\n\t\t};\n\n\t}\n\n\tsetPlugins( plugins ) {\n\n\t\tthis.plugins = plugins;\n\n\t}\n\n\t/**\n\t * Parse scenes and generate GLTF output\n\t * @param  {Scene or [THREE.Scenes]} input   Scene or Array of THREE.Scenes\n\t * @param  {Function} onDone  Callback on completed\n\t * @param  {Object} options options\n\t */\n\tasync write( input, onDone, options = {} ) {\n\n\t\tthis.options = Object.assign( {\n\t\t\t// default options\n\t\t\tbinary: false,\n\t\t\ttrs: false,\n\t\t\tonlyVisible: true,\n\t\t\tmaxTextureSize: Infinity,\n\t\t\tanimations: [],\n\t\t\tincludeCustomExtensions: false\n\t\t}, options );\n\n\t\tif ( this.options.animations.length > 0 ) {\n\n\t\t\t// Only TRS properties, and not matrices, may be targeted by animation.\n\t\t\tthis.options.trs = true;\n\n\t\t}\n\n\t\tthis.processInput( input );\n\n\t\tawait Promise.all( this.pending );\n\n\t\tconst writer = this;\n\t\tconst buffers = writer.buffers;\n\t\tconst json = writer.json;\n\t\toptions = writer.options;\n\n\t\tconst extensionsUsed = writer.extensionsUsed;\n\t\tconst extensionsRequired = writer.extensionsRequired;\n\n\t\t// Merge buffers.\n\t\tconst blob = new Blob( buffers, { type: 'application/octet-stream' } );\n\n\t\t// Declare extensions.\n\t\tconst extensionsUsedList = Object.keys( extensionsUsed );\n\t\tconst extensionsRequiredList = Object.keys( extensionsRequired );\n\n\t\tif ( extensionsUsedList.length > 0 ) json.extensionsUsed = extensionsUsedList;\n\t\tif ( extensionsRequiredList.length > 0 ) json.extensionsRequired = extensionsRequiredList;\n\n\t\t// Update bytelength of the single buffer.\n\t\tif ( json.buffers && json.buffers.length > 0 ) json.buffers[ 0 ].byteLength = blob.size;\n\n\t\tif ( options.binary === true ) {\n\n\t\t\t// https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#glb-file-format-specification\n\n\t\t\tconst reader = new FileReader();\n\t\t\treader.readAsArrayBuffer( blob );\n\t\t\treader.onloadend = function () {\n\n\t\t\t\t// Binary chunk.\n\t\t\t\tconst binaryChunk = getPaddedArrayBuffer( reader.result );\n\t\t\t\tconst binaryChunkPrefix = new DataView( new ArrayBuffer( GLB_CHUNK_PREFIX_BYTES ) );\n\t\t\t\tbinaryChunkPrefix.setUint32( 0, binaryChunk.byteLength, true );\n\t\t\t\tbinaryChunkPrefix.setUint32( 4, GLB_CHUNK_TYPE_BIN, true );\n\n\t\t\t\t// JSON chunk.\n\t\t\t\tconst jsonChunk = getPaddedArrayBuffer( stringToArrayBuffer( JSON.stringify( json ) ), 0x20 );\n\t\t\t\tconst jsonChunkPrefix = new DataView( new ArrayBuffer( GLB_CHUNK_PREFIX_BYTES ) );\n\t\t\t\tjsonChunkPrefix.setUint32( 0, jsonChunk.byteLength, true );\n\t\t\t\tjsonChunkPrefix.setUint32( 4, GLB_CHUNK_TYPE_JSON, true );\n\n\t\t\t\t// GLB header.\n\t\t\t\tconst header = new ArrayBuffer( GLB_HEADER_BYTES );\n\t\t\t\tconst headerView = new DataView( header );\n\t\t\t\theaderView.setUint32( 0, GLB_HEADER_MAGIC, true );\n\t\t\t\theaderView.setUint32( 4, GLB_VERSION, true );\n\t\t\t\tconst totalByteLength = GLB_HEADER_BYTES\n\t\t\t\t\t+ jsonChunkPrefix.byteLength + jsonChunk.byteLength\n\t\t\t\t\t+ binaryChunkPrefix.byteLength + binaryChunk.byteLength;\n\t\t\t\theaderView.setUint32( 8, totalByteLength, true );\n\n\t\t\t\tconst glbBlob = new Blob( [\n\t\t\t\t\theader,\n\t\t\t\t\tjsonChunkPrefix,\n\t\t\t\t\tjsonChunk,\n\t\t\t\t\tbinaryChunkPrefix,\n\t\t\t\t\tbinaryChunk\n\t\t\t\t], { type: 'application/octet-stream' } );\n\n\t\t\t\tconst glbReader = new FileReader();\n\t\t\t\tglbReader.readAsArrayBuffer( glbBlob );\n\t\t\t\tglbReader.onloadend = function () {\n\n\t\t\t\t\tonDone( glbReader.result );\n\n\t\t\t\t};\n\n\t\t\t};\n\n\t\t} else {\n\n\t\t\tif ( json.buffers && json.buffers.length > 0 ) {\n\n\t\t\t\tconst reader = new FileReader();\n\t\t\t\treader.readAsDataURL( blob );\n\t\t\t\treader.onloadend = function () {\n\n\t\t\t\t\tconst base64data = reader.result;\n\t\t\t\t\tjson.buffers[ 0 ].uri = base64data;\n\t\t\t\t\tonDone( json );\n\n\t\t\t\t};\n\n\t\t\t} else {\n\n\t\t\t\tonDone( json );\n\n\t\t\t}\n\n\t\t}\n\n\n\t}\n\n\t/**\n\t * Serializes a userData.\n\t *\n\t * @param {THREE.Object3D|THREE.Material} object\n\t * @param {Object} objectDef\n\t */\n\tserializeUserData( object, objectDef ) {\n\n\t\tif ( Object.keys( object.userData ).length === 0 ) return;\n\n\t\tconst options = this.options;\n\t\tconst extensionsUsed = this.extensionsUsed;\n\n\t\ttry {\n\n\t\t\tconst json = JSON.parse( JSON.stringify( object.userData ) );\n\n\t\t\tif ( options.includeCustomExtensions && json.gltfExtensions ) {\n\n\t\t\t\tif ( objectDef.extensions === undefined ) objectDef.extensions = {};\n\n\t\t\t\tfor ( const extensionName in json.gltfExtensions ) {\n\n\t\t\t\t\tobjectDef.extensions[ extensionName ] = json.gltfExtensions[ extensionName ];\n\t\t\t\t\textensionsUsed[ extensionName ] = true;\n\n\t\t\t\t}\n\n\t\t\t\tdelete json.gltfExtensions;\n\n\t\t\t}\n\n\t\t\tif ( Object.keys( json ).length > 0 ) objectDef.extras = json;\n\n\t\t} catch ( error ) {\n\n\t\t\tconsole.warn( 'THREE.GLTFExporter: userData of \\'' + object.name + '\\' ' +\n\t\t\t\t'won\\'t be serialized because of JSON.stringify error - ' + error.message );\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Returns ids for buffer attributes.\n\t * @param  {Object} object\n\t * @return {Integer}\n\t */\n\tgetUID( attribute, isRelativeCopy = false ) {\n\n\t\tif ( this.uids.has( attribute ) === false ) {\n\n\t\t\tconst uids = new Map();\n\n\t\t\tuids.set( true, this.uid ++ );\n\t\t\tuids.set( false, this.uid ++ );\n\n\t\t\tthis.uids.set( attribute, uids );\n\n\t\t}\n\n\t\tconst uids = this.uids.get( attribute );\n\n\t\treturn uids.get( isRelativeCopy );\n\n\t}\n\n\t/**\n\t * Checks if normal attribute values are normalized.\n\t *\n\t * @param {BufferAttribute} normal\n\t * @returns {Boolean}\n\t */\n\tisNormalizedNormalAttribute( normal ) {\n\n\t\tconst cache = this.cache;\n\n\t\tif ( cache.attributesNormalized.has( normal ) ) return false;\n\n\t\tconst v = new Vector3();\n\n\t\tfor ( let i = 0, il = normal.count; i < il; i ++ ) {\n\n\t\t\t// 0.0005 is from glTF-validator\n\t\t\tif ( Math.abs( v.fromBufferAttribute( normal, i ).length() - 1.0 ) > 0.0005 ) return false;\n\n\t\t}\n\n\t\treturn true;\n\n\t}\n\n\t/**\n\t * Creates normalized normal buffer attribute.\n\t *\n\t * @param {BufferAttribute} normal\n\t * @returns {BufferAttribute}\n\t *\n\t */\n\tcreateNormalizedNormalAttribute( normal ) {\n\n\t\tconst cache = this.cache;\n\n\t\tif ( cache.attributesNormalized.has( normal ) )\treturn cache.attributesNormalized.get( normal );\n\n\t\tconst attribute = normal.clone();\n\t\tconst v = new Vector3();\n\n\t\tfor ( let i = 0, il = attribute.count; i < il; i ++ ) {\n\n\t\t\tv.fromBufferAttribute( attribute, i );\n\n\t\t\tif ( v.x === 0 && v.y === 0 && v.z === 0 ) {\n\n\t\t\t\t// if values can't be normalized set (1, 0, 0)\n\t\t\t\tv.setX( 1.0 );\n\n\t\t\t} else {\n\n\t\t\t\tv.normalize();\n\n\t\t\t}\n\n\t\t\tattribute.setXYZ( i, v.x, v.y, v.z );\n\n\t\t}\n\n\t\tcache.attributesNormalized.set( normal, attribute );\n\n\t\treturn attribute;\n\n\t}\n\n\t/**\n\t * Applies a texture transform, if present, to the map definition. Requires\n\t * the KHR_texture_transform extension.\n\t *\n\t * @param {Object} mapDef\n\t * @param {THREE.Texture} texture\n\t */\n\tapplyTextureTransform( mapDef, texture ) {\n\n\t\tlet didTransform = false;\n\t\tconst transformDef = {};\n\n\t\tif ( texture.offset.x !== 0 || texture.offset.y !== 0 ) {\n\n\t\t\ttransformDef.offset = texture.offset.toArray();\n\t\t\tdidTransform = true;\n\n\t\t}\n\n\t\tif ( texture.rotation !== 0 ) {\n\n\t\t\ttransformDef.rotation = texture.rotation;\n\t\t\tdidTransform = true;\n\n\t\t}\n\n\t\tif ( texture.repeat.x !== 1 || texture.repeat.y !== 1 ) {\n\n\t\t\ttransformDef.scale = texture.repeat.toArray();\n\t\t\tdidTransform = true;\n\n\t\t}\n\n\t\tif ( didTransform ) {\n\n\t\t\tmapDef.extensions = mapDef.extensions || {};\n\t\t\tmapDef.extensions[ 'KHR_texture_transform' ] = transformDef;\n\t\t\tthis.extensionsUsed[ 'KHR_texture_transform' ] = true;\n\n\t\t}\n\n\t}\n\n\tbuildMetalRoughTexture( metalnessMap, roughnessMap ) {\n\n\t\tif ( metalnessMap === roughnessMap ) return metalnessMap;\n\n\t\tfunction getEncodingConversion( map ) {\n\n\t\t\tif ( map.colorSpace === SRGBColorSpace ) {\n\n\t\t\t\treturn function SRGBToLinear( c ) {\n\n\t\t\t\t\treturn ( c < 0.04045 ) ? c * 0.0773993808 : Math.pow( c * 0.9478672986 + 0.0521327014, 2.4 );\n\n\t\t\t\t};\n\n\t\t\t}\n\n\t\t\treturn function LinearToLinear( c ) {\n\n\t\t\t\treturn c;\n\n\t\t\t};\n\n\t\t}\n\n\t\tconsole.warn( 'THREE.GLTFExporter: Merged metalnessMap and roughnessMap textures.' );\n\n\t\tif ( metalnessMap instanceof CompressedTexture ) {\n\n\t\t\tmetalnessMap = decompress( metalnessMap );\n\n\t\t}\n\n\t\tif ( roughnessMap instanceof CompressedTexture ) {\n\n\t\t\troughnessMap = decompress( roughnessMap );\n\n\t\t}\n\n\t\tconst metalness = metalnessMap ? metalnessMap.image : null;\n\t\tconst roughness = roughnessMap ? roughnessMap.image : null;\n\n\t\tconst width = Math.max( metalness ? metalness.width : 0, roughness ? roughness.width : 0 );\n\t\tconst height = Math.max( metalness ? metalness.height : 0, roughness ? roughness.height : 0 );\n\n\t\tconst canvas = getCanvas();\n\t\tcanvas.width = width;\n\t\tcanvas.height = height;\n\n\t\tconst context = canvas.getContext( '2d' );\n\t\tcontext.fillStyle = '#00ffff';\n\t\tcontext.fillRect( 0, 0, width, height );\n\n\t\tconst composite = context.getImageData( 0, 0, width, height );\n\n\t\tif ( metalness ) {\n\n\t\t\tcontext.drawImage( metalness, 0, 0, width, height );\n\n\t\t\tconst convert = getEncodingConversion( metalnessMap );\n\t\t\tconst data = context.getImageData( 0, 0, width, height ).data;\n\n\t\t\tfor ( let i = 2; i < data.length; i += 4 ) {\n\n\t\t\t\tcomposite.data[ i ] = convert( data[ i ] / 256 ) * 256;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( roughness ) {\n\n\t\t\tcontext.drawImage( roughness, 0, 0, width, height );\n\n\t\t\tconst convert = getEncodingConversion( roughnessMap );\n\t\t\tconst data = context.getImageData( 0, 0, width, height ).data;\n\n\t\t\tfor ( let i = 1; i < data.length; i += 4 ) {\n\n\t\t\t\tcomposite.data[ i ] = convert( data[ i ] / 256 ) * 256;\n\n\t\t\t}\n\n\t\t}\n\n\t\tcontext.putImageData( composite, 0, 0 );\n\n\t\t//\n\n\t\tconst reference = metalnessMap || roughnessMap;\n\n\t\tconst texture = reference.clone();\n\n\t\ttexture.source = new Source( canvas );\n\t\ttexture.colorSpace = NoColorSpace;\n\t\ttexture.channel = ( metalnessMap || roughnessMap ).channel;\n\n\t\tif ( metalnessMap && roughnessMap && metalnessMap.channel !== roughnessMap.channel ) {\n\n\t\t\tconsole.warn( 'THREE.GLTFExporter: UV channels for metalnessMap and roughnessMap textures must match.' );\n\n\t\t}\n\n\t\treturn texture;\n\n\t}\n\n\t/**\n\t * Process a buffer to append to the default one.\n\t * @param  {ArrayBuffer} buffer\n\t * @return {Integer}\n\t */\n\tprocessBuffer( buffer ) {\n\n\t\tconst json = this.json;\n\t\tconst buffers = this.buffers;\n\n\t\tif ( ! json.buffers ) json.buffers = [ { byteLength: 0 } ];\n\n\t\t// All buffers are merged before export.\n\t\tbuffers.push( buffer );\n\n\t\treturn 0;\n\n\t}\n\n\t/**\n\t * Process and generate a BufferView\n\t * @param  {BufferAttribute} attribute\n\t * @param  {number} componentType\n\t * @param  {number} start\n\t * @param  {number} count\n\t * @param  {number} target (Optional) Target usage of the BufferView\n\t * @return {Object}\n\t */\n\tprocessBufferView( attribute, componentType, start, count, target ) {\n\n\t\tconst json = this.json;\n\n\t\tif ( ! json.bufferViews ) json.bufferViews = [];\n\n\t\t// Create a new dataview and dump the attribute's array into it\n\n\t\tlet componentSize;\n\n\t\tswitch ( componentType ) {\n\n\t\t\tcase WEBGL_CONSTANTS$1.BYTE:\n\t\t\tcase WEBGL_CONSTANTS$1.UNSIGNED_BYTE:\n\n\t\t\t\tcomponentSize = 1;\n\n\t\t\t\tbreak;\n\n\t\t\tcase WEBGL_CONSTANTS$1.SHORT:\n\t\t\tcase WEBGL_CONSTANTS$1.UNSIGNED_SHORT:\n\n\t\t\t\tcomponentSize = 2;\n\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\n\t\t\t\tcomponentSize = 4;\n\n\t\t}\n\n\t\tconst byteLength = getPaddedBufferSize( count * attribute.itemSize * componentSize );\n\t\tconst dataView = new DataView( new ArrayBuffer( byteLength ) );\n\t\tlet offset = 0;\n\n\t\tfor ( let i = start; i < start + count; i ++ ) {\n\n\t\t\tfor ( let a = 0; a < attribute.itemSize; a ++ ) {\n\n\t\t\t\tlet value;\n\n\t\t\t\tif ( attribute.itemSize > 4 ) {\n\n\t\t\t\t\t // no support for interleaved data for itemSize > 4\n\n\t\t\t\t\tvalue = attribute.array[ i * attribute.itemSize + a ];\n\n\t\t\t\t} else {\n\n\t\t\t\t\tif ( a === 0 ) value = attribute.getX( i );\n\t\t\t\t\telse if ( a === 1 ) value = attribute.getY( i );\n\t\t\t\t\telse if ( a === 2 ) value = attribute.getZ( i );\n\t\t\t\t\telse if ( a === 3 ) value = attribute.getW( i );\n\n\t\t\t\t\tif ( attribute.normalized === true ) {\n\n\t\t\t\t\t\tvalue = MathUtils.normalize( value, attribute.array );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tif ( componentType === WEBGL_CONSTANTS$1.FLOAT ) {\n\n\t\t\t\t\tdataView.setFloat32( offset, value, true );\n\n\t\t\t\t} else if ( componentType === WEBGL_CONSTANTS$1.INT ) {\n\n\t\t\t\t\tdataView.setInt32( offset, value, true );\n\n\t\t\t\t} else if ( componentType === WEBGL_CONSTANTS$1.UNSIGNED_INT ) {\n\n\t\t\t\t\tdataView.setUint32( offset, value, true );\n\n\t\t\t\t} else if ( componentType === WEBGL_CONSTANTS$1.SHORT ) {\n\n\t\t\t\t\tdataView.setInt16( offset, value, true );\n\n\t\t\t\t} else if ( componentType === WEBGL_CONSTANTS$1.UNSIGNED_SHORT ) {\n\n\t\t\t\t\tdataView.setUint16( offset, value, true );\n\n\t\t\t\t} else if ( componentType === WEBGL_CONSTANTS$1.BYTE ) {\n\n\t\t\t\t\tdataView.setInt8( offset, value );\n\n\t\t\t\t} else if ( componentType === WEBGL_CONSTANTS$1.UNSIGNED_BYTE ) {\n\n\t\t\t\t\tdataView.setUint8( offset, value );\n\n\t\t\t\t}\n\n\t\t\t\toffset += componentSize;\n\n\t\t\t}\n\n\t\t}\n\n\t\tconst bufferViewDef = {\n\n\t\t\tbuffer: this.processBuffer( dataView.buffer ),\n\t\t\tbyteOffset: this.byteOffset,\n\t\t\tbyteLength: byteLength\n\n\t\t};\n\n\t\tif ( target !== undefined ) bufferViewDef.target = target;\n\n\t\tif ( target === WEBGL_CONSTANTS$1.ARRAY_BUFFER ) {\n\n\t\t\t// Only define byteStride for vertex attributes.\n\t\t\tbufferViewDef.byteStride = attribute.itemSize * componentSize;\n\n\t\t}\n\n\t\tthis.byteOffset += byteLength;\n\n\t\tjson.bufferViews.push( bufferViewDef );\n\n\t\t// @TODO Merge bufferViews where possible.\n\t\tconst output = {\n\n\t\t\tid: json.bufferViews.length - 1,\n\t\t\tbyteLength: 0\n\n\t\t};\n\n\t\treturn output;\n\n\t}\n\n\t/**\n\t * Process and generate a BufferView from an image Blob.\n\t * @param {Blob} blob\n\t * @return {Promise<Integer>}\n\t */\n\tprocessBufferViewImage( blob ) {\n\n\t\tconst writer = this;\n\t\tconst json = writer.json;\n\n\t\tif ( ! json.bufferViews ) json.bufferViews = [];\n\n\t\treturn new Promise( function ( resolve ) {\n\n\t\t\tconst reader = new FileReader();\n\t\t\treader.readAsArrayBuffer( blob );\n\t\t\treader.onloadend = function () {\n\n\t\t\t\tconst buffer = getPaddedArrayBuffer( reader.result );\n\n\t\t\t\tconst bufferViewDef = {\n\t\t\t\t\tbuffer: writer.processBuffer( buffer ),\n\t\t\t\t\tbyteOffset: writer.byteOffset,\n\t\t\t\t\tbyteLength: buffer.byteLength\n\t\t\t\t};\n\n\t\t\t\twriter.byteOffset += buffer.byteLength;\n\t\t\t\tresolve( json.bufferViews.push( bufferViewDef ) - 1 );\n\n\t\t\t};\n\n\t\t} );\n\n\t}\n\n\t/**\n\t * Process attribute to generate an accessor\n\t * @param  {BufferAttribute} attribute Attribute to process\n\t * @param  {THREE.BufferGeometry} geometry (Optional) Geometry used for truncated draw range\n\t * @param  {Integer} start (Optional)\n\t * @param  {Integer} count (Optional)\n\t * @return {Integer|null} Index of the processed accessor on the \"accessors\" array\n\t */\n\tprocessAccessor( attribute, geometry, start, count ) {\n\n\t\tconst json = this.json;\n\n\t\tconst types = {\n\n\t\t\t1: 'SCALAR',\n\t\t\t2: 'VEC2',\n\t\t\t3: 'VEC3',\n\t\t\t4: 'VEC4',\n\t\t\t9: 'MAT3',\n\t\t\t16: 'MAT4'\n\n\t\t};\n\n\t\tlet componentType;\n\n\t\t// Detect the component type of the attribute array\n\t\tif ( attribute.array.constructor === Float32Array ) {\n\n\t\t\tcomponentType = WEBGL_CONSTANTS$1.FLOAT;\n\n\t\t} else if ( attribute.array.constructor === Int32Array ) {\n\n\t\t\tcomponentType = WEBGL_CONSTANTS$1.INT;\n\n\t\t} else if ( attribute.array.constructor === Uint32Array ) {\n\n\t\t\tcomponentType = WEBGL_CONSTANTS$1.UNSIGNED_INT;\n\n\t\t} else if ( attribute.array.constructor === Int16Array ) {\n\n\t\t\tcomponentType = WEBGL_CONSTANTS$1.SHORT;\n\n\t\t} else if ( attribute.array.constructor === Uint16Array ) {\n\n\t\t\tcomponentType = WEBGL_CONSTANTS$1.UNSIGNED_SHORT;\n\n\t\t} else if ( attribute.array.constructor === Int8Array ) {\n\n\t\t\tcomponentType = WEBGL_CONSTANTS$1.BYTE;\n\n\t\t} else if ( attribute.array.constructor === Uint8Array ) {\n\n\t\t\tcomponentType = WEBGL_CONSTANTS$1.UNSIGNED_BYTE;\n\n\t\t} else {\n\n\t\t\tthrow new Error( 'THREE.GLTFExporter: Unsupported bufferAttribute component type: ' + attribute.array.constructor.name );\n\n\t\t}\n\n\t\tif ( start === undefined ) start = 0;\n\t\tif ( count === undefined || count === Infinity ) count = attribute.count;\n\n\t\t// Skip creating an accessor if the attribute doesn't have data to export\n\t\tif ( count === 0 ) return null;\n\n\t\tconst minMax = getMinMax( attribute, start, count );\n\t\tlet bufferViewTarget;\n\n\t\t// If geometry isn't provided, don't infer the target usage of the bufferView. For\n\t\t// animation samplers, target must not be set.\n\t\tif ( geometry !== undefined ) {\n\n\t\t\tbufferViewTarget = attribute === geometry.index ? WEBGL_CONSTANTS$1.ELEMENT_ARRAY_BUFFER : WEBGL_CONSTANTS$1.ARRAY_BUFFER;\n\n\t\t}\n\n\t\tconst bufferView = this.processBufferView( attribute, componentType, start, count, bufferViewTarget );\n\n\t\tconst accessorDef = {\n\n\t\t\tbufferView: bufferView.id,\n\t\t\tbyteOffset: bufferView.byteOffset,\n\t\t\tcomponentType: componentType,\n\t\t\tcount: count,\n\t\t\tmax: minMax.max,\n\t\t\tmin: minMax.min,\n\t\t\ttype: types[ attribute.itemSize ]\n\n\t\t};\n\n\t\tif ( attribute.normalized === true ) accessorDef.normalized = true;\n\t\tif ( ! json.accessors ) json.accessors = [];\n\n\t\treturn json.accessors.push( accessorDef ) - 1;\n\n\t}\n\n\t/**\n\t * Process image\n\t * @param  {Image} image to process\n\t * @param  {Integer} format of the image (RGBAFormat)\n\t * @param  {Boolean} flipY before writing out the image\n\t * @param  {String} mimeType export format\n\t * @return {Integer}     Index of the processed texture in the \"images\" array\n\t */\n\tprocessImage( image, format, flipY, mimeType = 'image/png' ) {\n\n\t\tif ( image !== null ) {\n\n\t\t\tconst writer = this;\n\t\t\tconst cache = writer.cache;\n\t\t\tconst json = writer.json;\n\t\t\tconst options = writer.options;\n\t\t\tconst pending = writer.pending;\n\n\t\t\tif ( ! cache.images.has( image ) ) cache.images.set( image, {} );\n\n\t\t\tconst cachedImages = cache.images.get( image );\n\n\t\t\tconst key = mimeType + ':flipY/' + flipY.toString();\n\n\t\t\tif ( cachedImages[ key ] !== undefined ) return cachedImages[ key ];\n\n\t\t\tif ( ! json.images ) json.images = [];\n\n\t\t\tconst imageDef = { mimeType: mimeType };\n\n\t\t\tconst canvas = getCanvas();\n\n\t\t\tcanvas.width = Math.min( image.width, options.maxTextureSize );\n\t\t\tcanvas.height = Math.min( image.height, options.maxTextureSize );\n\n\t\t\tconst ctx = canvas.getContext( '2d' );\n\n\t\t\tif ( flipY === true ) {\n\n\t\t\t\tctx.translate( 0, canvas.height );\n\t\t\t\tctx.scale( 1, -1 );\n\n\t\t\t}\n\n\t\t\tif ( image.data !== undefined ) { // THREE.DataTexture\n\n\t\t\t\tif ( format !== RGBAFormat ) {\n\n\t\t\t\t\tconsole.error( 'GLTFExporter: Only RGBAFormat is supported.', format );\n\n\t\t\t\t}\n\n\t\t\t\tif ( image.width > options.maxTextureSize || image.height > options.maxTextureSize ) {\n\n\t\t\t\t\tconsole.warn( 'GLTFExporter: Image size is bigger than maxTextureSize', image );\n\n\t\t\t\t}\n\n\t\t\t\tconst data = new Uint8ClampedArray( image.height * image.width * 4 );\n\n\t\t\t\tfor ( let i = 0; i < data.length; i += 4 ) {\n\n\t\t\t\t\tdata[ i + 0 ] = image.data[ i + 0 ];\n\t\t\t\t\tdata[ i + 1 ] = image.data[ i + 1 ];\n\t\t\t\t\tdata[ i + 2 ] = image.data[ i + 2 ];\n\t\t\t\t\tdata[ i + 3 ] = image.data[ i + 3 ];\n\n\t\t\t\t}\n\n\t\t\t\tctx.putImageData( new ImageData( data, image.width, image.height ), 0, 0 );\n\n\t\t\t} else {\n\n\t\t\t\tif ( ( typeof HTMLImageElement !== 'undefined' && image instanceof HTMLImageElement ) ||\n\t\t\t\t\t( typeof HTMLCanvasElement !== 'undefined' && image instanceof HTMLCanvasElement ) ||\n\t\t\t\t\t( typeof ImageBitmap !== 'undefined' && image instanceof ImageBitmap ) ) {\n\n\t\t\t\t\tctx.drawImage( image, 0, 0, canvas.width, canvas.height );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tthrow new Error( 'THREE.GLTFExporter: Invalid image type. Use HTMLImageElement, HTMLCanvasElement or ImageBitmap.' );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( options.binary === true ) {\n\n\t\t\t\tpending.push(\n\n\t\t\t\t\tgetToBlobPromise( canvas, mimeType )\n\t\t\t\t\t\t.then( blob => writer.processBufferViewImage( blob ) )\n\t\t\t\t\t\t.then( bufferViewIndex => {\n\n\t\t\t\t\t\t\timageDef.bufferView = bufferViewIndex;\n\n\t\t\t\t\t\t} )\n\n\t\t\t\t);\n\n\t\t\t} else {\n\n\t\t\t\tif ( canvas.toDataURL !== undefined ) {\n\n\t\t\t\t\timageDef.uri = canvas.toDataURL( mimeType );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tpending.push(\n\n\t\t\t\t\t\tgetToBlobPromise( canvas, mimeType )\n\t\t\t\t\t\t\t.then( blob => new FileReader().readAsDataURL( blob ) )\n\t\t\t\t\t\t\t.then( dataURL => {\n\n\t\t\t\t\t\t\t\timageDef.uri = dataURL;\n\n\t\t\t\t\t\t\t} )\n\n\t\t\t\t\t);\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tconst index = json.images.push( imageDef ) - 1;\n\t\t\tcachedImages[ key ] = index;\n\t\t\treturn index;\n\n\t\t} else {\n\n\t\t\tthrow new Error( 'THREE.GLTFExporter: No valid image data found. Unable to process texture.' );\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Process sampler\n\t * @param  {Texture} map Texture to process\n\t * @return {Integer}     Index of the processed texture in the \"samplers\" array\n\t */\n\tprocessSampler( map ) {\n\n\t\tconst json = this.json;\n\n\t\tif ( ! json.samplers ) json.samplers = [];\n\n\t\tconst samplerDef = {\n\t\t\tmagFilter: THREE_TO_WEBGL[ map.magFilter ],\n\t\t\tminFilter: THREE_TO_WEBGL[ map.minFilter ],\n\t\t\twrapS: THREE_TO_WEBGL[ map.wrapS ],\n\t\t\twrapT: THREE_TO_WEBGL[ map.wrapT ]\n\t\t};\n\n\t\treturn json.samplers.push( samplerDef ) - 1;\n\n\t}\n\n\t/**\n\t * Process texture\n\t * @param  {Texture} map Map to process\n\t * @return {Integer} Index of the processed texture in the \"textures\" array\n\t */\n\tprocessTexture( map ) {\n\n\t\tconst writer = this;\n\t\tconst options = writer.options;\n\t\tconst cache = this.cache;\n\t\tconst json = this.json;\n\n\t\tif ( cache.textures.has( map ) ) return cache.textures.get( map );\n\n\t\tif ( ! json.textures ) json.textures = [];\n\n\t\t// make non-readable textures (e.g. CompressedTexture) readable by blitting them into a new texture\n\t\tif ( map instanceof CompressedTexture ) {\n\n\t\t\tmap = decompress( map, options.maxTextureSize );\n\n\t\t}\n\n\t\tlet mimeType = map.userData.mimeType;\n\n\t\tif ( mimeType === 'image/webp' ) mimeType = 'image/png';\n\n\t\tconst textureDef = {\n\t\t\tsampler: this.processSampler( map ),\n\t\t\tsource: this.processImage( map.image, map.format, map.flipY, mimeType )\n\t\t};\n\n\t\tif ( map.name ) textureDef.name = map.name;\n\n\t\tthis._invokeAll( function ( ext ) {\n\n\t\t\text.writeTexture && ext.writeTexture( map, textureDef );\n\n\t\t} );\n\n\t\tconst index = json.textures.push( textureDef ) - 1;\n\t\tcache.textures.set( map, index );\n\t\treturn index;\n\n\t}\n\n\t/**\n\t * Process material\n\t * @param  {THREE.Material} material Material to process\n\t * @return {Integer|null} Index of the processed material in the \"materials\" array\n\t */\n\tprocessMaterial( material ) {\n\n\t\tconst cache = this.cache;\n\t\tconst json = this.json;\n\n\t\tif ( cache.materials.has( material ) ) return cache.materials.get( material );\n\n\t\tif ( material.isShaderMaterial ) {\n\n\t\t\tconsole.warn( 'GLTFExporter: THREE.ShaderMaterial not supported.' );\n\t\t\treturn null;\n\n\t\t}\n\n\t\tif ( ! json.materials ) json.materials = [];\n\n\t\t// @QUESTION Should we avoid including any attribute that has the default value?\n\t\tconst materialDef = {\tpbrMetallicRoughness: {} };\n\n\t\tif ( material.isMeshStandardMaterial !== true && material.isMeshBasicMaterial !== true ) {\n\n\t\t\tconsole.warn( 'GLTFExporter: Use MeshStandardMaterial or MeshBasicMaterial for best results.' );\n\n\t\t}\n\n\t\t// pbrMetallicRoughness.baseColorFactor\n\t\tconst color = material.color.toArray().concat( [ material.opacity ] );\n\n\t\tif ( ! equalArray( color, [ 1, 1, 1, 1 ] ) ) {\n\n\t\t\tmaterialDef.pbrMetallicRoughness.baseColorFactor = color;\n\n\t\t}\n\n\t\tif ( material.isMeshStandardMaterial ) {\n\n\t\t\tmaterialDef.pbrMetallicRoughness.metallicFactor = material.metalness;\n\t\t\tmaterialDef.pbrMetallicRoughness.roughnessFactor = material.roughness;\n\n\t\t} else {\n\n\t\t\tmaterialDef.pbrMetallicRoughness.metallicFactor = 0.5;\n\t\t\tmaterialDef.pbrMetallicRoughness.roughnessFactor = 0.5;\n\n\t\t}\n\n\t\t// pbrMetallicRoughness.metallicRoughnessTexture\n\t\tif ( material.metalnessMap || material.roughnessMap ) {\n\n\t\t\tconst metalRoughTexture = this.buildMetalRoughTexture( material.metalnessMap, material.roughnessMap );\n\n\t\t\tconst metalRoughMapDef = {\n\t\t\t\tindex: this.processTexture( metalRoughTexture ),\n\t\t\t\tchannel: metalRoughTexture.channel\n\t\t\t};\n\t\t\tthis.applyTextureTransform( metalRoughMapDef, metalRoughTexture );\n\t\t\tmaterialDef.pbrMetallicRoughness.metallicRoughnessTexture = metalRoughMapDef;\n\n\t\t}\n\n\t\t// pbrMetallicRoughness.baseColorTexture\n\t\tif ( material.map ) {\n\n\t\t\tconst baseColorMapDef = {\n\t\t\t\tindex: this.processTexture( material.map ),\n\t\t\t\ttexCoord: material.map.channel\n\t\t\t};\n\t\t\tthis.applyTextureTransform( baseColorMapDef, material.map );\n\t\t\tmaterialDef.pbrMetallicRoughness.baseColorTexture = baseColorMapDef;\n\n\t\t}\n\n\t\tif ( material.emissive ) {\n\n\t\t\tconst emissive = material.emissive;\n\t\t\tconst maxEmissiveComponent = Math.max( emissive.r, emissive.g, emissive.b );\n\n\t\t\tif ( maxEmissiveComponent > 0 ) {\n\n\t\t\t\tmaterialDef.emissiveFactor = material.emissive.toArray();\n\n\t\t\t}\n\n\t\t\t// emissiveTexture\n\t\t\tif ( material.emissiveMap ) {\n\n\t\t\t\tconst emissiveMapDef = {\n\t\t\t\t\tindex: this.processTexture( material.emissiveMap ),\n\t\t\t\t\ttexCoord: material.emissiveMap.channel\n\t\t\t\t};\n\t\t\t\tthis.applyTextureTransform( emissiveMapDef, material.emissiveMap );\n\t\t\t\tmaterialDef.emissiveTexture = emissiveMapDef;\n\n\t\t\t}\n\n\t\t}\n\n\t\t// normalTexture\n\t\tif ( material.normalMap ) {\n\n\t\t\tconst normalMapDef = {\n\t\t\t\tindex: this.processTexture( material.normalMap ),\n\t\t\t\ttexCoord: material.normalMap.channel\n\t\t\t};\n\n\t\t\tif ( material.normalScale && material.normalScale.x !== 1 ) {\n\n\t\t\t\t// glTF normal scale is univariate. Ignore `y`, which may be flipped.\n\t\t\t\t// Context: https://github.com/mrdoob/three.js/issues/11438#issuecomment-507003995\n\t\t\t\tnormalMapDef.scale = material.normalScale.x;\n\n\t\t\t}\n\n\t\t\tthis.applyTextureTransform( normalMapDef, material.normalMap );\n\t\t\tmaterialDef.normalTexture = normalMapDef;\n\n\t\t}\n\n\t\t// occlusionTexture\n\t\tif ( material.aoMap ) {\n\n\t\t\tconst occlusionMapDef = {\n\t\t\t\tindex: this.processTexture( material.aoMap ),\n\t\t\t\ttexCoord: material.aoMap.channel\n\t\t\t};\n\n\t\t\tif ( material.aoMapIntensity !== 1.0 ) {\n\n\t\t\t\tocclusionMapDef.strength = material.aoMapIntensity;\n\n\t\t\t}\n\n\t\t\tthis.applyTextureTransform( occlusionMapDef, material.aoMap );\n\t\t\tmaterialDef.occlusionTexture = occlusionMapDef;\n\n\t\t}\n\n\t\t// alphaMode\n\t\tif ( material.transparent ) {\n\n\t\t\tmaterialDef.alphaMode = 'BLEND';\n\n\t\t} else {\n\n\t\t\tif ( material.alphaTest > 0.0 ) {\n\n\t\t\t\tmaterialDef.alphaMode = 'MASK';\n\t\t\t\tmaterialDef.alphaCutoff = material.alphaTest;\n\n\t\t\t}\n\n\t\t}\n\n\t\t// doubleSided\n\t\tif ( material.side === DoubleSide ) materialDef.doubleSided = true;\n\t\tif ( material.name !== '' ) materialDef.name = material.name;\n\n\t\tthis.serializeUserData( material, materialDef );\n\n\t\tthis._invokeAll( function ( ext ) {\n\n\t\t\text.writeMaterial && ext.writeMaterial( material, materialDef );\n\n\t\t} );\n\n\t\tconst index = json.materials.push( materialDef ) - 1;\n\t\tcache.materials.set( material, index );\n\t\treturn index;\n\n\t}\n\n\t/**\n\t * Process mesh\n\t * @param  {THREE.Mesh} mesh Mesh to process\n\t * @return {Integer|null} Index of the processed mesh in the \"meshes\" array\n\t */\n\tprocessMesh( mesh ) {\n\n\t\tconst cache = this.cache;\n\t\tconst json = this.json;\n\n\t\tconst meshCacheKeyParts = [ mesh.geometry.uuid ];\n\n\t\tif ( Array.isArray( mesh.material ) ) {\n\n\t\t\tfor ( let i = 0, l = mesh.material.length; i < l; i ++ ) {\n\n\t\t\t\tmeshCacheKeyParts.push( mesh.material[ i ].uuid\t);\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tmeshCacheKeyParts.push( mesh.material.uuid );\n\n\t\t}\n\n\t\tconst meshCacheKey = meshCacheKeyParts.join( ':' );\n\n\t\tif ( cache.meshes.has( meshCacheKey ) ) return cache.meshes.get( meshCacheKey );\n\n\t\tconst geometry = mesh.geometry;\n\n\t\tlet mode;\n\n\t\t// Use the correct mode\n\t\tif ( mesh.isLineSegments ) {\n\n\t\t\tmode = WEBGL_CONSTANTS$1.LINES;\n\n\t\t} else if ( mesh.isLineLoop ) {\n\n\t\t\tmode = WEBGL_CONSTANTS$1.LINE_LOOP;\n\n\t\t} else if ( mesh.isLine ) {\n\n\t\t\tmode = WEBGL_CONSTANTS$1.LINE_STRIP;\n\n\t\t} else if ( mesh.isPoints ) {\n\n\t\t\tmode = WEBGL_CONSTANTS$1.POINTS;\n\n\t\t} else {\n\n\t\t\tmode = mesh.material.wireframe ? WEBGL_CONSTANTS$1.LINES : WEBGL_CONSTANTS$1.TRIANGLES;\n\n\t\t}\n\n\t\tconst meshDef = {};\n\t\tconst attributes = {};\n\t\tconst primitives = [];\n\t\tconst targets = [];\n\n\t\t// Conversion between attributes names in threejs and gltf spec\n\t\tconst nameConversion = {\n\t\t\tuv: 'TEXCOORD_0',\n\t\t\tuv1: 'TEXCOORD_1',\n\t\t\tuv2: 'TEXCOORD_2',\n\t\t\tuv3: 'TEXCOORD_3',\n\t\t\tcolor: 'COLOR_0',\n\t\t\tskinWeight: 'WEIGHTS_0',\n\t\t\tskinIndex: 'JOINTS_0'\n\t\t};\n\n\t\tconst originalNormal = geometry.getAttribute( 'normal' );\n\n\t\tif ( originalNormal !== undefined && ! this.isNormalizedNormalAttribute( originalNormal ) ) {\n\n\t\t\tconsole.warn( 'THREE.GLTFExporter: Creating normalized normal attribute from the non-normalized one.' );\n\n\t\t\tgeometry.setAttribute( 'normal', this.createNormalizedNormalAttribute( originalNormal ) );\n\n\t\t}\n\n\t\t// @QUESTION Detect if .vertexColors = true?\n\t\t// For every attribute create an accessor\n\t\tlet modifiedAttribute = null;\n\n\t\tfor ( let attributeName in geometry.attributes ) {\n\n\t\t\t// Ignore morph target attributes, which are exported later.\n\t\t\tif ( attributeName.slice( 0, 5 ) === 'morph' ) continue;\n\n\t\t\tconst attribute = geometry.attributes[ attributeName ];\n\t\t\tattributeName = nameConversion[ attributeName ] || attributeName.toUpperCase();\n\n\t\t\t// Prefix all geometry attributes except the ones specifically\n\t\t\t// listed in the spec; non-spec attributes are considered custom.\n\t\t\tconst validVertexAttributes =\n\t\t\t\t\t/^(POSITION|NORMAL|TANGENT|TEXCOORD_\\d+|COLOR_\\d+|JOINTS_\\d+|WEIGHTS_\\d+)$/;\n\n\t\t\tif ( ! validVertexAttributes.test( attributeName ) ) attributeName = '_' + attributeName;\n\n\t\t\tif ( cache.attributes.has( this.getUID( attribute ) ) ) {\n\n\t\t\t\tattributes[ attributeName ] = cache.attributes.get( this.getUID( attribute ) );\n\t\t\t\tcontinue;\n\n\t\t\t}\n\n\t\t\t// JOINTS_0 must be UNSIGNED_BYTE or UNSIGNED_SHORT.\n\t\t\tmodifiedAttribute = null;\n\t\t\tconst array = attribute.array;\n\n\t\t\tif ( attributeName === 'JOINTS_0' &&\n\t\t\t\t! ( array instanceof Uint16Array ) &&\n\t\t\t\t! ( array instanceof Uint8Array ) ) {\n\n\t\t\t\tconsole.warn( 'GLTFExporter: Attribute \"skinIndex\" converted to type UNSIGNED_SHORT.' );\n\t\t\t\tmodifiedAttribute = new BufferAttribute( new Uint16Array( array ), attribute.itemSize, attribute.normalized );\n\n\t\t\t}\n\n\t\t\tconst accessor = this.processAccessor( modifiedAttribute || attribute, geometry );\n\n\t\t\tif ( accessor !== null ) {\n\n\t\t\t\tif ( ! attributeName.startsWith( '_' ) ) {\n\n\t\t\t\t\tthis.detectMeshQuantization( attributeName, attribute );\n\n\t\t\t\t}\n\n\t\t\t\tattributes[ attributeName ] = accessor;\n\t\t\t\tcache.attributes.set( this.getUID( attribute ), accessor );\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( originalNormal !== undefined ) geometry.setAttribute( 'normal', originalNormal );\n\n\t\t// Skip if no exportable attributes found\n\t\tif ( Object.keys( attributes ).length === 0 ) return null;\n\n\t\t// Morph targets\n\t\tif ( mesh.morphTargetInfluences !== undefined && mesh.morphTargetInfluences.length > 0 ) {\n\n\t\t\tconst weights = [];\n\t\t\tconst targetNames = [];\n\t\t\tconst reverseDictionary = {};\n\n\t\t\tif ( mesh.morphTargetDictionary !== undefined ) {\n\n\t\t\t\tfor ( const key in mesh.morphTargetDictionary ) {\n\n\t\t\t\t\treverseDictionary[ mesh.morphTargetDictionary[ key ] ] = key;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tfor ( let i = 0; i < mesh.morphTargetInfluences.length; ++ i ) {\n\n\t\t\t\tconst target = {};\n\t\t\t\tlet warned = false;\n\n\t\t\t\tfor ( const attributeName in geometry.morphAttributes ) {\n\n\t\t\t\t\t// glTF 2.0 morph supports only POSITION/NORMAL/TANGENT.\n\t\t\t\t\t// Three.js doesn't support TANGENT yet.\n\n\t\t\t\t\tif ( attributeName !== 'position' && attributeName !== 'normal' ) {\n\n\t\t\t\t\t\tif ( ! warned ) {\n\n\t\t\t\t\t\t\tconsole.warn( 'GLTFExporter: Only POSITION and NORMAL morph are supported.' );\n\t\t\t\t\t\t\twarned = true;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tcontinue;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tconst attribute = geometry.morphAttributes[ attributeName ][ i ];\n\t\t\t\t\tconst gltfAttributeName = attributeName.toUpperCase();\n\n\t\t\t\t\t// Three.js morph attribute has absolute values while the one of glTF has relative values.\n\t\t\t\t\t//\n\t\t\t\t\t// glTF 2.0 Specification:\n\t\t\t\t\t// https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#morph-targets\n\n\t\t\t\t\tconst baseAttribute = geometry.attributes[ attributeName ];\n\n\t\t\t\t\tif ( cache.attributes.has( this.getUID( attribute, true ) ) ) {\n\n\t\t\t\t\t\ttarget[ gltfAttributeName ] = cache.attributes.get( this.getUID( attribute, true ) );\n\t\t\t\t\t\tcontinue;\n\n\t\t\t\t\t}\n\n\t\t\t\t\t// Clones attribute not to override\n\t\t\t\t\tconst relativeAttribute = attribute.clone();\n\n\t\t\t\t\tif ( ! geometry.morphTargetsRelative ) {\n\n\t\t\t\t\t\tfor ( let j = 0, jl = attribute.count; j < jl; j ++ ) {\n\n\t\t\t\t\t\t\tfor ( let a = 0; a < attribute.itemSize; a ++ ) {\n\n\t\t\t\t\t\t\t\tif ( a === 0 ) relativeAttribute.setX( j, attribute.getX( j ) - baseAttribute.getX( j ) );\n\t\t\t\t\t\t\t\tif ( a === 1 ) relativeAttribute.setY( j, attribute.getY( j ) - baseAttribute.getY( j ) );\n\t\t\t\t\t\t\t\tif ( a === 2 ) relativeAttribute.setZ( j, attribute.getZ( j ) - baseAttribute.getZ( j ) );\n\t\t\t\t\t\t\t\tif ( a === 3 ) relativeAttribute.setW( j, attribute.getW( j ) - baseAttribute.getW( j ) );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\ttarget[ gltfAttributeName ] = this.processAccessor( relativeAttribute, geometry );\n\t\t\t\t\tcache.attributes.set( this.getUID( baseAttribute, true ), target[ gltfAttributeName ] );\n\n\t\t\t\t}\n\n\t\t\t\ttargets.push( target );\n\n\t\t\t\tweights.push( mesh.morphTargetInfluences[ i ] );\n\n\t\t\t\tif ( mesh.morphTargetDictionary !== undefined ) targetNames.push( reverseDictionary[ i ] );\n\n\t\t\t}\n\n\t\t\tmeshDef.weights = weights;\n\n\t\t\tif ( targetNames.length > 0 ) {\n\n\t\t\t\tmeshDef.extras = {};\n\t\t\t\tmeshDef.extras.targetNames = targetNames;\n\n\t\t\t}\n\n\t\t}\n\n\t\tconst isMultiMaterial = Array.isArray( mesh.material );\n\n\t\tif ( isMultiMaterial && geometry.groups.length === 0 ) return null;\n\n\t\tlet didForceIndices = false;\n\n\t\tif ( isMultiMaterial && geometry.index === null ) {\n\n\t\t\tconst indices = [];\n\n\t\t\tfor ( let i = 0, il = geometry.attributes.position.count; i < il; i ++ ) {\n\n\t\t\t\tindices[ i ] = i;\n\n\t\t\t}\n\n\t\t\tgeometry.setIndex( indices );\n\n\t\t\tdidForceIndices = true;\n\n\t\t}\n\n\t\tconst materials = isMultiMaterial ? mesh.material : [ mesh.material ];\n\t\tconst groups = isMultiMaterial ? geometry.groups : [ { materialIndex: 0, start: undefined, count: undefined } ];\n\n\t\tfor ( let i = 0, il = groups.length; i < il; i ++ ) {\n\n\t\t\tconst primitive = {\n\t\t\t\tmode: mode,\n\t\t\t\tattributes: attributes,\n\t\t\t};\n\n\t\t\tthis.serializeUserData( geometry, primitive );\n\n\t\t\tif ( targets.length > 0 ) primitive.targets = targets;\n\n\t\t\tif ( geometry.index !== null ) {\n\n\t\t\t\tlet cacheKey = this.getUID( geometry.index );\n\n\t\t\t\tif ( groups[ i ].start !== undefined || groups[ i ].count !== undefined ) {\n\n\t\t\t\t\tcacheKey += ':' + groups[ i ].start + ':' + groups[ i ].count;\n\n\t\t\t\t}\n\n\t\t\t\tif ( cache.attributes.has( cacheKey ) ) {\n\n\t\t\t\t\tprimitive.indices = cache.attributes.get( cacheKey );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tprimitive.indices = this.processAccessor( geometry.index, geometry, groups[ i ].start, groups[ i ].count );\n\t\t\t\t\tcache.attributes.set( cacheKey, primitive.indices );\n\n\t\t\t\t}\n\n\t\t\t\tif ( primitive.indices === null ) delete primitive.indices;\n\n\t\t\t}\n\n\t\t\tconst material = this.processMaterial( materials[ groups[ i ].materialIndex ] );\n\n\t\t\tif ( material !== null ) primitive.material = material;\n\n\t\t\tprimitives.push( primitive );\n\n\t\t}\n\n\t\tif ( didForceIndices === true ) {\n\n\t\t\tgeometry.setIndex( null );\n\n\t\t}\n\n\t\tmeshDef.primitives = primitives;\n\n\t\tif ( ! json.meshes ) json.meshes = [];\n\n\t\tthis._invokeAll( function ( ext ) {\n\n\t\t\text.writeMesh && ext.writeMesh( mesh, meshDef );\n\n\t\t} );\n\n\t\tconst index = json.meshes.push( meshDef ) - 1;\n\t\tcache.meshes.set( meshCacheKey, index );\n\t\treturn index;\n\n\t}\n\n\t/**\n\t * If a vertex attribute with a\n\t * [non-standard data type](https://registry.khronos.org/glTF/specs/2.0/glTF-2.0.html#meshes-overview)\n\t * is used, it is checked whether it is a valid data type according to the\n\t * [KHR_mesh_quantization](https://github.com/KhronosGroup/glTF/blob/main/extensions/2.0/Khronos/KHR_mesh_quantization/README.md)\n\t * extension.\n\t * In this case the extension is automatically added to the list of used extensions.\n\t *\n\t * @param {string} attributeName\n\t * @param {THREE.BufferAttribute} attribute\n\t */\n\tdetectMeshQuantization( attributeName, attribute ) {\n\n\t\tif ( this.extensionsUsed[ KHR_MESH_QUANTIZATION ] ) return;\n\n\t\tlet attrType = undefined;\n\n\t\tswitch ( attribute.array.constructor ) {\n\n\t\t\tcase Int8Array:\n\n\t\t\t\tattrType = 'byte';\n\n\t\t\t\tbreak;\n\n\t\t\tcase Uint8Array:\n\n\t\t\t\tattrType = 'unsigned byte';\n\n\t\t\t\tbreak;\n\n\t\t\tcase Int16Array:\n\n\t\t\t\tattrType = 'short';\n\n\t\t\t\tbreak;\n\n\t\t\tcase Uint16Array:\n\n\t\t\t\tattrType = 'unsigned short';\n\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\n\t\t\t\treturn;\n\n\t\t}\n\n\t\tif ( attribute.normalized ) attrType += ' normalized';\n\n\t\tconst attrNamePrefix = attributeName.split( '_', 1 )[ 0 ];\n\n\t\tif ( KHR_mesh_quantization_ExtraAttrTypes[ attrNamePrefix ] && KHR_mesh_quantization_ExtraAttrTypes[ attrNamePrefix ].includes( attrType ) ) {\n\n\t\t\tthis.extensionsUsed[ KHR_MESH_QUANTIZATION ] = true;\n\t\t\tthis.extensionsRequired[ KHR_MESH_QUANTIZATION ] = true;\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Process camera\n\t * @param  {THREE.Camera} camera Camera to process\n\t * @return {Integer}      Index of the processed mesh in the \"camera\" array\n\t */\n\tprocessCamera( camera ) {\n\n\t\tconst json = this.json;\n\n\t\tif ( ! json.cameras ) json.cameras = [];\n\n\t\tconst isOrtho = camera.isOrthographicCamera;\n\n\t\tconst cameraDef = {\n\t\t\ttype: isOrtho ? 'orthographic' : 'perspective'\n\t\t};\n\n\t\tif ( isOrtho ) {\n\n\t\t\tcameraDef.orthographic = {\n\t\t\t\txmag: camera.right * 2,\n\t\t\t\tymag: camera.top * 2,\n\t\t\t\tzfar: camera.far <= 0 ? 0.001 : camera.far,\n\t\t\t\tznear: camera.near < 0 ? 0 : camera.near\n\t\t\t};\n\n\t\t} else {\n\n\t\t\tcameraDef.perspective = {\n\t\t\t\taspectRatio: camera.aspect,\n\t\t\t\tyfov: MathUtils.degToRad( camera.fov ),\n\t\t\t\tzfar: camera.far <= 0 ? 0.001 : camera.far,\n\t\t\t\tznear: camera.near < 0 ? 0 : camera.near\n\t\t\t};\n\n\t\t}\n\n\t\t// Question: Is saving \"type\" as name intentional?\n\t\tif ( camera.name !== '' ) cameraDef.name = camera.type;\n\n\t\treturn json.cameras.push( cameraDef ) - 1;\n\n\t}\n\n\t/**\n\t * Creates glTF animation entry from AnimationClip object.\n\t *\n\t * Status:\n\t * - Only properties listed in PATH_PROPERTIES may be animated.\n\t *\n\t * @param {THREE.AnimationClip} clip\n\t * @param {THREE.Object3D} root\n\t * @return {number|null}\n\t */\n\tprocessAnimation( clip, root ) {\n\n\t\tconst json = this.json;\n\t\tconst nodeMap = this.nodeMap;\n\n\t\tif ( ! json.animations ) json.animations = [];\n\n\t\tclip = GLTFExporter.Utils.mergeMorphTargetTracks( clip.clone(), root );\n\n\t\tconst tracks = clip.tracks;\n\t\tconst channels = [];\n\t\tconst samplers = [];\n\n\t\tfor ( let i = 0; i < tracks.length; ++ i ) {\n\n\t\t\tconst track = tracks[ i ];\n\t\t\tconst trackBinding = PropertyBinding.parseTrackName( track.name );\n\t\t\tlet trackNode = PropertyBinding.findNode( root, trackBinding.nodeName );\n\t\t\tconst trackProperty = PATH_PROPERTIES$1[ trackBinding.propertyName ];\n\n\t\t\tif ( trackBinding.objectName === 'bones' ) {\n\n\t\t\t\tif ( trackNode.isSkinnedMesh === true ) {\n\n\t\t\t\t\ttrackNode = trackNode.skeleton.getBoneByName( trackBinding.objectIndex );\n\n\t\t\t\t} else {\n\n\t\t\t\t\ttrackNode = undefined;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( ! trackNode || ! trackProperty ) {\n\n\t\t\t\tconsole.warn( 'THREE.GLTFExporter: Could not export animation track \"%s\".', track.name );\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t\tconst inputItemSize = 1;\n\t\t\tlet outputItemSize = track.values.length / track.times.length;\n\n\t\t\tif ( trackProperty === PATH_PROPERTIES$1.morphTargetInfluences ) {\n\n\t\t\t\toutputItemSize /= trackNode.morphTargetInfluences.length;\n\n\t\t\t}\n\n\t\t\tlet interpolation;\n\n\t\t\t// @TODO export CubicInterpolant(InterpolateSmooth) as CUBICSPLINE\n\n\t\t\t// Detecting glTF cubic spline interpolant by checking factory method's special property\n\t\t\t// GLTFCubicSplineInterpolant is a custom interpolant and track doesn't return\n\t\t\t// valid value from .getInterpolation().\n\t\t\tif ( track.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline === true ) {\n\n\t\t\t\tinterpolation = 'CUBICSPLINE';\n\n\t\t\t\t// itemSize of CUBICSPLINE keyframe is 9\n\t\t\t\t// (VEC3 * 3: inTangent, splineVertex, and outTangent)\n\t\t\t\t// but needs to be stored as VEC3 so dividing by 3 here.\n\t\t\t\toutputItemSize /= 3;\n\n\t\t\t} else if ( track.getInterpolation() === InterpolateDiscrete ) {\n\n\t\t\t\tinterpolation = 'STEP';\n\n\t\t\t} else {\n\n\t\t\t\tinterpolation = 'LINEAR';\n\n\t\t\t}\n\n\t\t\tsamplers.push( {\n\t\t\t\tinput: this.processAccessor( new BufferAttribute( track.times, inputItemSize ) ),\n\t\t\t\toutput: this.processAccessor( new BufferAttribute( track.values, outputItemSize ) ),\n\t\t\t\tinterpolation: interpolation\n\t\t\t} );\n\n\t\t\tchannels.push( {\n\t\t\t\tsampler: samplers.length - 1,\n\t\t\t\ttarget: {\n\t\t\t\t\tnode: nodeMap.get( trackNode ),\n\t\t\t\t\tpath: trackProperty\n\t\t\t\t}\n\t\t\t} );\n\n\t\t}\n\n\t\tjson.animations.push( {\n\t\t\tname: clip.name || 'clip_' + json.animations.length,\n\t\t\tsamplers: samplers,\n\t\t\tchannels: channels\n\t\t} );\n\n\t\treturn json.animations.length - 1;\n\n\t}\n\n\t/**\n\t * @param {THREE.Object3D} object\n\t * @return {number|null}\n\t */\n\t processSkin( object ) {\n\n\t\tconst json = this.json;\n\t\tconst nodeMap = this.nodeMap;\n\n\t\tconst node = json.nodes[ nodeMap.get( object ) ];\n\n\t\tconst skeleton = object.skeleton;\n\n\t\tif ( skeleton === undefined ) return null;\n\n\t\tconst rootJoint = object.skeleton.bones[ 0 ];\n\n\t\tif ( rootJoint === undefined ) return null;\n\n\t\tconst joints = [];\n\t\tconst inverseBindMatrices = new Float32Array( skeleton.bones.length * 16 );\n\t\tconst temporaryBoneInverse = new Matrix4();\n\n\t\tfor ( let i = 0; i < skeleton.bones.length; ++ i ) {\n\n\t\t\tjoints.push( nodeMap.get( skeleton.bones[ i ] ) );\n\t\t\ttemporaryBoneInverse.copy( skeleton.boneInverses[ i ] );\n\t\t\ttemporaryBoneInverse.multiply( object.bindMatrix ).toArray( inverseBindMatrices, i * 16 );\n\n\t\t}\n\n\t\tif ( json.skins === undefined ) json.skins = [];\n\n\t\tjson.skins.push( {\n\t\t\tinverseBindMatrices: this.processAccessor( new BufferAttribute( inverseBindMatrices, 16 ) ),\n\t\t\tjoints: joints,\n\t\t\tskeleton: nodeMap.get( rootJoint )\n\t\t} );\n\n\t\tconst skinIndex = node.skin = json.skins.length - 1;\n\n\t\treturn skinIndex;\n\n\t}\n\n\t/**\n\t * Process Object3D node\n\t * @param  {THREE.Object3D} node Object3D to processNode\n\t * @return {Integer} Index of the node in the nodes list\n\t */\n\tprocessNode( object ) {\n\n\t\tconst json = this.json;\n\t\tconst options = this.options;\n\t\tconst nodeMap = this.nodeMap;\n\n\t\tif ( ! json.nodes ) json.nodes = [];\n\n\t\tconst nodeDef = {};\n\n\t\tif ( options.trs ) {\n\n\t\t\tconst rotation = object.quaternion.toArray();\n\t\t\tconst position = object.position.toArray();\n\t\t\tconst scale = object.scale.toArray();\n\n\t\t\tif ( ! equalArray( rotation, [ 0, 0, 0, 1 ] ) ) {\n\n\t\t\t\tnodeDef.rotation = rotation;\n\n\t\t\t}\n\n\t\t\tif ( ! equalArray( position, [ 0, 0, 0 ] ) ) {\n\n\t\t\t\tnodeDef.translation = position;\n\n\t\t\t}\n\n\t\t\tif ( ! equalArray( scale, [ 1, 1, 1 ] ) ) {\n\n\t\t\t\tnodeDef.scale = scale;\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tif ( object.matrixAutoUpdate ) {\n\n\t\t\t\tobject.updateMatrix();\n\n\t\t\t}\n\n\t\t\tif ( isIdentityMatrix( object.matrix ) === false ) {\n\n\t\t\t\tnodeDef.matrix = object.matrix.elements;\n\n\t\t\t}\n\n\t\t}\n\n\t\t// We don't export empty strings name because it represents no-name in Three.js.\n\t\tif ( object.name !== '' ) nodeDef.name = String( object.name );\n\n\t\tthis.serializeUserData( object, nodeDef );\n\n\t\tif ( object.isMesh || object.isLine || object.isPoints ) {\n\n\t\t\tconst meshIndex = this.processMesh( object );\n\n\t\t\tif ( meshIndex !== null ) nodeDef.mesh = meshIndex;\n\n\t\t} else if ( object.isCamera ) {\n\n\t\t\tnodeDef.camera = this.processCamera( object );\n\n\t\t}\n\n\t\tif ( object.isSkinnedMesh ) this.skins.push( object );\n\n\t\tif ( object.children.length > 0 ) {\n\n\t\t\tconst children = [];\n\n\t\t\tfor ( let i = 0, l = object.children.length; i < l; i ++ ) {\n\n\t\t\t\tconst child = object.children[ i ];\n\n\t\t\t\tif ( child.visible || options.onlyVisible === false ) {\n\n\t\t\t\t\tconst nodeIndex = this.processNode( child );\n\n\t\t\t\t\tif ( nodeIndex !== null ) children.push( nodeIndex );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( children.length > 0 ) nodeDef.children = children;\n\n\t\t}\n\n\t\tthis._invokeAll( function ( ext ) {\n\n\t\t\text.writeNode && ext.writeNode( object, nodeDef );\n\n\t\t} );\n\n\t\tconst nodeIndex = json.nodes.push( nodeDef ) - 1;\n\t\tnodeMap.set( object, nodeIndex );\n\t\treturn nodeIndex;\n\n\t}\n\n\t/**\n\t * Process Scene\n\t * @param  {Scene} node Scene to process\n\t */\n\tprocessScene( scene ) {\n\n\t\tconst json = this.json;\n\t\tconst options = this.options;\n\n\t\tif ( ! json.scenes ) {\n\n\t\t\tjson.scenes = [];\n\t\t\tjson.scene = 0;\n\n\t\t}\n\n\t\tconst sceneDef = {};\n\n\t\tif ( scene.name !== '' ) sceneDef.name = scene.name;\n\n\t\tjson.scenes.push( sceneDef );\n\n\t\tconst nodes = [];\n\n\t\tfor ( let i = 0, l = scene.children.length; i < l; i ++ ) {\n\n\t\t\tconst child = scene.children[ i ];\n\n\t\t\tif ( child.visible || options.onlyVisible === false ) {\n\n\t\t\t\tconst nodeIndex = this.processNode( child );\n\n\t\t\t\tif ( nodeIndex !== null ) nodes.push( nodeIndex );\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( nodes.length > 0 ) sceneDef.nodes = nodes;\n\n\t\tthis.serializeUserData( scene, sceneDef );\n\n\t}\n\n\t/**\n\t * Creates a Scene to hold a list of objects and parse it\n\t * @param  {Array} objects List of objects to process\n\t */\n\tprocessObjects( objects ) {\n\n\t\tconst scene = new Scene();\n\t\tscene.name = 'AuxScene';\n\n\t\tfor ( let i = 0; i < objects.length; i ++ ) {\n\n\t\t\t// We push directly to children instead of calling `add` to prevent\n\t\t\t// modify the .parent and break its original scene and hierarchy\n\t\t\tscene.children.push( objects[ i ] );\n\n\t\t}\n\n\t\tthis.processScene( scene );\n\n\t}\n\n\t/**\n\t * @param {THREE.Object3D|Array<THREE.Object3D>} input\n\t */\n\tprocessInput( input ) {\n\n\t\tconst options = this.options;\n\n\t\tinput = input instanceof Array ? input : [ input ];\n\n\t\tthis._invokeAll( function ( ext ) {\n\n\t\t\text.beforeParse && ext.beforeParse( input );\n\n\t\t} );\n\n\t\tconst objectsWithoutScene = [];\n\n\t\tfor ( let i = 0; i < input.length; i ++ ) {\n\n\t\t\tif ( input[ i ] instanceof Scene ) {\n\n\t\t\t\tthis.processScene( input[ i ] );\n\n\t\t\t} else {\n\n\t\t\t\tobjectsWithoutScene.push( input[ i ] );\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( objectsWithoutScene.length > 0 ) this.processObjects( objectsWithoutScene );\n\n\t\tfor ( let i = 0; i < this.skins.length; ++ i ) {\n\n\t\t\tthis.processSkin( this.skins[ i ] );\n\n\t\t}\n\n\t\tfor ( let i = 0; i < options.animations.length; ++ i ) {\n\n\t\t\tthis.processAnimation( options.animations[ i ], input[ 0 ] );\n\n\t\t}\n\n\t\tthis._invokeAll( function ( ext ) {\n\n\t\t\text.afterParse && ext.afterParse( input );\n\n\t\t} );\n\n\t}\n\n\t_invokeAll( func ) {\n\n\t\tfor ( let i = 0, il = this.plugins.length; i < il; i ++ ) {\n\n\t\t\tfunc( this.plugins[ i ] );\n\n\t\t}\n\n\t}\n\n}\n\n/**\n * Punctual Lights Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_lights_punctual\n */\nclass GLTFLightExtension {\n\n\tconstructor( writer ) {\n\n\t\tthis.writer = writer;\n\t\tthis.name = 'KHR_lights_punctual';\n\n\t}\n\n\twriteNode( light, nodeDef ) {\n\n\t\tif ( ! light.isLight ) return;\n\n\t\tif ( ! light.isDirectionalLight && ! light.isPointLight && ! light.isSpotLight ) {\n\n\t\t\tconsole.warn( 'THREE.GLTFExporter: Only directional, point, and spot lights are supported.', light );\n\t\t\treturn;\n\n\t\t}\n\n\t\tconst writer = this.writer;\n\t\tconst json = writer.json;\n\t\tconst extensionsUsed = writer.extensionsUsed;\n\n\t\tconst lightDef = {};\n\n\t\tif ( light.name ) lightDef.name = light.name;\n\n\t\tlightDef.color = light.color.toArray();\n\n\t\tlightDef.intensity = light.intensity;\n\n\t\tif ( light.isDirectionalLight ) {\n\n\t\t\tlightDef.type = 'directional';\n\n\t\t} else if ( light.isPointLight ) {\n\n\t\t\tlightDef.type = 'point';\n\n\t\t\tif ( light.distance > 0 ) lightDef.range = light.distance;\n\n\t\t} else if ( light.isSpotLight ) {\n\n\t\t\tlightDef.type = 'spot';\n\n\t\t\tif ( light.distance > 0 ) lightDef.range = light.distance;\n\n\t\t\tlightDef.spot = {};\n\t\t\tlightDef.spot.innerConeAngle = ( 1.0 - light.penumbra ) * light.angle;\n\t\t\tlightDef.spot.outerConeAngle = light.angle;\n\n\t\t}\n\n\t\tif ( light.decay !== undefined && light.decay !== 2 ) {\n\n\t\t\tconsole.warn( 'THREE.GLTFExporter: Light decay may be lost. glTF is physically-based, '\n\t\t\t\t+ 'and expects light.decay=2.' );\n\n\t\t}\n\n\t\tif ( light.target\n\t\t\t\t&& ( light.target.parent !== light\n\t\t\t\t|| light.target.position.x !== 0\n\t\t\t\t|| light.target.position.y !== 0\n\t\t\t\t|| light.target.position.z !== -1 ) ) {\n\n\t\t\tconsole.warn( 'THREE.GLTFExporter: Light direction may be lost. For best results, '\n\t\t\t\t+ 'make light.target a child of the light with position 0,0,-1.' );\n\n\t\t}\n\n\t\tif ( ! extensionsUsed[ this.name ] ) {\n\n\t\t\tjson.extensions = json.extensions || {};\n\t\t\tjson.extensions[ this.name ] = { lights: [] };\n\t\t\textensionsUsed[ this.name ] = true;\n\n\t\t}\n\n\t\tconst lights = json.extensions[ this.name ].lights;\n\t\tlights.push( lightDef );\n\n\t\tnodeDef.extensions = nodeDef.extensions || {};\n\t\tnodeDef.extensions[ this.name ] = { light: lights.length - 1 };\n\n\t}\n\n}\n\n/**\n * Unlit Materials Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_unlit\n */\nlet GLTFMaterialsUnlitExtension$1 = class GLTFMaterialsUnlitExtension {\n\n\tconstructor( writer ) {\n\n\t\tthis.writer = writer;\n\t\tthis.name = 'KHR_materials_unlit';\n\n\t}\n\n\twriteMaterial( material, materialDef ) {\n\n\t\tif ( ! material.isMeshBasicMaterial ) return;\n\n\t\tconst writer = this.writer;\n\t\tconst extensionsUsed = writer.extensionsUsed;\n\n\t\tmaterialDef.extensions = materialDef.extensions || {};\n\t\tmaterialDef.extensions[ this.name ] = {};\n\n\t\textensionsUsed[ this.name ] = true;\n\n\t\tmaterialDef.pbrMetallicRoughness.metallicFactor = 0.0;\n\t\tmaterialDef.pbrMetallicRoughness.roughnessFactor = 0.9;\n\n\t}\n\n};\n\n/**\n * Clearcoat Materials Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_clearcoat\n */\nlet GLTFMaterialsClearcoatExtension$1 = class GLTFMaterialsClearcoatExtension {\n\n\tconstructor( writer ) {\n\n\t\tthis.writer = writer;\n\t\tthis.name = 'KHR_materials_clearcoat';\n\n\t}\n\n\twriteMaterial( material, materialDef ) {\n\n\t\tif ( ! material.isMeshPhysicalMaterial || material.clearcoat === 0 ) return;\n\n\t\tconst writer = this.writer;\n\t\tconst extensionsUsed = writer.extensionsUsed;\n\n\t\tconst extensionDef = {};\n\n\t\textensionDef.clearcoatFactor = material.clearcoat;\n\n\t\tif ( material.clearcoatMap ) {\n\n\t\t\tconst clearcoatMapDef = {\n\t\t\t\tindex: writer.processTexture( material.clearcoatMap ),\n\t\t\t\ttexCoord: material.clearcoatMap.channel\n\t\t\t};\n\t\t\twriter.applyTextureTransform( clearcoatMapDef, material.clearcoatMap );\n\t\t\textensionDef.clearcoatTexture = clearcoatMapDef;\n\n\t\t}\n\n\t\textensionDef.clearcoatRoughnessFactor = material.clearcoatRoughness;\n\n\t\tif ( material.clearcoatRoughnessMap ) {\n\n\t\t\tconst clearcoatRoughnessMapDef = {\n\t\t\t\tindex: writer.processTexture( material.clearcoatRoughnessMap ),\n\t\t\t\ttexCoord: material.clearcoatRoughnessMap.channel\n\t\t\t};\n\t\t\twriter.applyTextureTransform( clearcoatRoughnessMapDef, material.clearcoatRoughnessMap );\n\t\t\textensionDef.clearcoatRoughnessTexture = clearcoatRoughnessMapDef;\n\n\t\t}\n\n\t\tif ( material.clearcoatNormalMap ) {\n\n\t\t\tconst clearcoatNormalMapDef = {\n\t\t\t\tindex: writer.processTexture( material.clearcoatNormalMap ),\n\t\t\t\ttexCoord: material.clearcoatNormalMap.channel\n\t\t\t};\n\t\t\twriter.applyTextureTransform( clearcoatNormalMapDef, material.clearcoatNormalMap );\n\t\t\textensionDef.clearcoatNormalTexture = clearcoatNormalMapDef;\n\n\t\t}\n\n\t\tmaterialDef.extensions = materialDef.extensions || {};\n\t\tmaterialDef.extensions[ this.name ] = extensionDef;\n\n\t\textensionsUsed[ this.name ] = true;\n\n\n\t}\n\n};\n\n/**\n * Iridescence Materials Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_iridescence\n */\nlet GLTFMaterialsIridescenceExtension$1 = class GLTFMaterialsIridescenceExtension {\n\n\tconstructor( writer ) {\n\n\t\tthis.writer = writer;\n\t\tthis.name = 'KHR_materials_iridescence';\n\n\t}\n\n\twriteMaterial( material, materialDef ) {\n\n\t\tif ( ! material.isMeshPhysicalMaterial || material.iridescence === 0 ) return;\n\n\t\tconst writer = this.writer;\n\t\tconst extensionsUsed = writer.extensionsUsed;\n\n\t\tconst extensionDef = {};\n\n\t\textensionDef.iridescenceFactor = material.iridescence;\n\n\t\tif ( material.iridescenceMap ) {\n\n\t\t\tconst iridescenceMapDef = {\n\t\t\t\tindex: writer.processTexture( material.iridescenceMap ),\n\t\t\t\ttexCoord: material.iridescenceMap.channel\n\t\t\t};\n\t\t\twriter.applyTextureTransform( iridescenceMapDef, material.iridescenceMap );\n\t\t\textensionDef.iridescenceTexture = iridescenceMapDef;\n\n\t\t}\n\n\t\textensionDef.iridescenceIor = material.iridescenceIOR;\n\t\textensionDef.iridescenceThicknessMinimum = material.iridescenceThicknessRange[ 0 ];\n\t\textensionDef.iridescenceThicknessMaximum = material.iridescenceThicknessRange[ 1 ];\n\n\t\tif ( material.iridescenceThicknessMap ) {\n\n\t\t\tconst iridescenceThicknessMapDef = {\n\t\t\t\tindex: writer.processTexture( material.iridescenceThicknessMap ),\n\t\t\t\ttexCoord: material.iridescenceThicknessMap.channel\n\t\t\t};\n\t\t\twriter.applyTextureTransform( iridescenceThicknessMapDef, material.iridescenceThicknessMap );\n\t\t\textensionDef.iridescenceThicknessTexture = iridescenceThicknessMapDef;\n\n\t\t}\n\n\t\tmaterialDef.extensions = materialDef.extensions || {};\n\t\tmaterialDef.extensions[ this.name ] = extensionDef;\n\n\t\textensionsUsed[ this.name ] = true;\n\n\t}\n\n};\n\n/**\n * Transmission Materials Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_transmission\n */\nlet GLTFMaterialsTransmissionExtension$1 = class GLTFMaterialsTransmissionExtension {\n\n\tconstructor( writer ) {\n\n\t\tthis.writer = writer;\n\t\tthis.name = 'KHR_materials_transmission';\n\n\t}\n\n\twriteMaterial( material, materialDef ) {\n\n\t\tif ( ! material.isMeshPhysicalMaterial || material.transmission === 0 ) return;\n\n\t\tconst writer = this.writer;\n\t\tconst extensionsUsed = writer.extensionsUsed;\n\n\t\tconst extensionDef = {};\n\n\t\textensionDef.transmissionFactor = material.transmission;\n\n\t\tif ( material.transmissionMap ) {\n\n\t\t\tconst transmissionMapDef = {\n\t\t\t\tindex: writer.processTexture( material.transmissionMap ),\n\t\t\t\ttexCoord: material.transmissionMap.channel\n\t\t\t};\n\t\t\twriter.applyTextureTransform( transmissionMapDef, material.transmissionMap );\n\t\t\textensionDef.transmissionTexture = transmissionMapDef;\n\n\t\t}\n\n\t\tmaterialDef.extensions = materialDef.extensions || {};\n\t\tmaterialDef.extensions[ this.name ] = extensionDef;\n\n\t\textensionsUsed[ this.name ] = true;\n\n\t}\n\n};\n\n/**\n * Materials Volume Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_volume\n */\nlet GLTFMaterialsVolumeExtension$1 = class GLTFMaterialsVolumeExtension {\n\n\tconstructor( writer ) {\n\n\t\tthis.writer = writer;\n\t\tthis.name = 'KHR_materials_volume';\n\n\t}\n\n\twriteMaterial( material, materialDef ) {\n\n\t\tif ( ! material.isMeshPhysicalMaterial || material.transmission === 0 ) return;\n\n\t\tconst writer = this.writer;\n\t\tconst extensionsUsed = writer.extensionsUsed;\n\n\t\tconst extensionDef = {};\n\n\t\textensionDef.thicknessFactor = material.thickness;\n\n\t\tif ( material.thicknessMap ) {\n\n\t\t\tconst thicknessMapDef = {\n\t\t\t\tindex: writer.processTexture( material.thicknessMap ),\n\t\t\t\ttexCoord: material.thicknessMap.channel\n\t\t\t};\n\t\t\twriter.applyTextureTransform( thicknessMapDef, material.thicknessMap );\n\t\t\textensionDef.thicknessTexture = thicknessMapDef;\n\n\t\t}\n\n\t\textensionDef.attenuationDistance = material.attenuationDistance;\n\t\textensionDef.attenuationColor = material.attenuationColor.toArray();\n\n\t\tmaterialDef.extensions = materialDef.extensions || {};\n\t\tmaterialDef.extensions[ this.name ] = extensionDef;\n\n\t\textensionsUsed[ this.name ] = true;\n\n\t}\n\n};\n\n/**\n * Materials ior Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_ior\n */\nlet GLTFMaterialsIorExtension$1 = class GLTFMaterialsIorExtension {\n\n\tconstructor( writer ) {\n\n\t\tthis.writer = writer;\n\t\tthis.name = 'KHR_materials_ior';\n\n\t}\n\n\twriteMaterial( material, materialDef ) {\n\n\t\tif ( ! material.isMeshPhysicalMaterial || material.ior === 1.5 ) return;\n\n\t\tconst writer = this.writer;\n\t\tconst extensionsUsed = writer.extensionsUsed;\n\n\t\tconst extensionDef = {};\n\n\t\textensionDef.ior = material.ior;\n\n\t\tmaterialDef.extensions = materialDef.extensions || {};\n\t\tmaterialDef.extensions[ this.name ] = extensionDef;\n\n\t\textensionsUsed[ this.name ] = true;\n\n\t}\n\n};\n\n/**\n * Materials specular Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_specular\n */\nlet GLTFMaterialsSpecularExtension$1 = class GLTFMaterialsSpecularExtension {\n\n\tconstructor( writer ) {\n\n\t\tthis.writer = writer;\n\t\tthis.name = 'KHR_materials_specular';\n\n\t}\n\n\twriteMaterial( material, materialDef ) {\n\n\t\tif ( ! material.isMeshPhysicalMaterial || ( material.specularIntensity === 1.0 &&\n\t\t       material.specularColor.equals( DEFAULT_SPECULAR_COLOR ) &&\n\t\t     ! material.specularIntensityMap && ! material.specularColorMap ) ) return;\n\n\t\tconst writer = this.writer;\n\t\tconst extensionsUsed = writer.extensionsUsed;\n\n\t\tconst extensionDef = {};\n\n\t\tif ( material.specularIntensityMap ) {\n\n\t\t\tconst specularIntensityMapDef = {\n\t\t\t\tindex: writer.processTexture( material.specularIntensityMap ),\n\t\t\t\ttexCoord: material.specularIntensityMap.channel\n\t\t\t};\n\t\t\twriter.applyTextureTransform( specularIntensityMapDef, material.specularIntensityMap );\n\t\t\textensionDef.specularTexture = specularIntensityMapDef;\n\n\t\t}\n\n\t\tif ( material.specularColorMap ) {\n\n\t\t\tconst specularColorMapDef = {\n\t\t\t\tindex: writer.processTexture( material.specularColorMap ),\n\t\t\t\ttexCoord: material.specularColorMap.channel\n\t\t\t};\n\t\t\twriter.applyTextureTransform( specularColorMapDef, material.specularColorMap );\n\t\t\textensionDef.specularColorTexture = specularColorMapDef;\n\n\t\t}\n\n\t\textensionDef.specularFactor = material.specularIntensity;\n\t\textensionDef.specularColorFactor = material.specularColor.toArray();\n\n\t\tmaterialDef.extensions = materialDef.extensions || {};\n\t\tmaterialDef.extensions[ this.name ] = extensionDef;\n\n\t\textensionsUsed[ this.name ] = true;\n\n\t}\n\n};\n\n/**\n * Sheen Materials Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/main/extensions/2.0/Khronos/KHR_materials_sheen\n */\nlet GLTFMaterialsSheenExtension$1 = class GLTFMaterialsSheenExtension {\n\n\tconstructor( writer ) {\n\n\t\tthis.writer = writer;\n\t\tthis.name = 'KHR_materials_sheen';\n\n\t}\n\n\twriteMaterial( material, materialDef ) {\n\n\t\tif ( ! material.isMeshPhysicalMaterial || material.sheen == 0.0 ) return;\n\n\t\tconst writer = this.writer;\n\t\tconst extensionsUsed = writer.extensionsUsed;\n\n\t\tconst extensionDef = {};\n\n\t\tif ( material.sheenRoughnessMap ) {\n\n\t\t\tconst sheenRoughnessMapDef = {\n\t\t\t\tindex: writer.processTexture( material.sheenRoughnessMap ),\n\t\t\t\ttexCoord: material.sheenRoughnessMap.channel\n\t\t\t};\n\t\t\twriter.applyTextureTransform( sheenRoughnessMapDef, material.sheenRoughnessMap );\n\t\t\textensionDef.sheenRoughnessTexture = sheenRoughnessMapDef;\n\n\t\t}\n\n\t\tif ( material.sheenColorMap ) {\n\n\t\t\tconst sheenColorMapDef = {\n\t\t\t\tindex: writer.processTexture( material.sheenColorMap ),\n\t\t\t\ttexCoord: material.sheenColorMap.channel\n\t\t\t};\n\t\t\twriter.applyTextureTransform( sheenColorMapDef, material.sheenColorMap );\n\t\t\textensionDef.sheenColorTexture = sheenColorMapDef;\n\n\t\t}\n\n\t\textensionDef.sheenRoughnessFactor = material.sheenRoughness;\n\t\textensionDef.sheenColorFactor = material.sheenColor.toArray();\n\n\t\tmaterialDef.extensions = materialDef.extensions || {};\n\t\tmaterialDef.extensions[ this.name ] = extensionDef;\n\n\t\textensionsUsed[ this.name ] = true;\n\n\t}\n\n};\n\n/**\n * Anisotropy Materials Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/main/extensions/2.0/Khronos/KHR_materials_anisotropy\n */\nlet GLTFMaterialsAnisotropyExtension$1 = class GLTFMaterialsAnisotropyExtension {\n\n\tconstructor( writer ) {\n\n\t\tthis.writer = writer;\n\t\tthis.name = 'KHR_materials_anisotropy';\n\n\t}\n\n\twriteMaterial( material, materialDef ) {\n\n\t\tif ( ! material.isMeshPhysicalMaterial || material.anisotropy == 0.0 ) return;\n\n\t\tconst writer = this.writer;\n\t\tconst extensionsUsed = writer.extensionsUsed;\n\n\t\tconst extensionDef = {};\n\n\t\tif ( material.anisotropyMap ) {\n\n\t\t\tconst anisotropyMapDef = { index: writer.processTexture( material.anisotropyMap ) };\n\t\t\twriter.applyTextureTransform( anisotropyMapDef, material.anisotropyMap );\n\t\t\textensionDef.anisotropyTexture = anisotropyMapDef;\n\n\t\t}\n\n\t\textensionDef.anisotropyStrength = material.anisotropy;\n\t\textensionDef.anisotropyRotation = material.anisotropyRotation;\n\n\t\tmaterialDef.extensions = materialDef.extensions || {};\n\t\tmaterialDef.extensions[ this.name ] = extensionDef;\n\n\t\textensionsUsed[ this.name ] = true;\n\n\t}\n\n};\n\n/**\n * Materials Emissive Strength Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/blob/5768b3ce0ef32bc39cdf1bef10b948586635ead3/extensions/2.0/Khronos/KHR_materials_emissive_strength/README.md\n */\nlet GLTFMaterialsEmissiveStrengthExtension$1 = class GLTFMaterialsEmissiveStrengthExtension {\n\n\tconstructor( writer ) {\n\n\t\tthis.writer = writer;\n\t\tthis.name = 'KHR_materials_emissive_strength';\n\n\t}\n\n\twriteMaterial( material, materialDef ) {\n\n\t\tif ( ! material.isMeshStandardMaterial || material.emissiveIntensity === 1.0 ) return;\n\n\t\tconst writer = this.writer;\n\t\tconst extensionsUsed = writer.extensionsUsed;\n\n\t\tconst extensionDef = {};\n\n\t\textensionDef.emissiveStrength = material.emissiveIntensity;\n\n\t\tmaterialDef.extensions = materialDef.extensions || {};\n\t\tmaterialDef.extensions[ this.name ] = extensionDef;\n\n\t\textensionsUsed[ this.name ] = true;\n\n\t}\n\n};\n\n\n/**\n * Materials bump Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/EXT_materials_bump\n */\nlet GLTFMaterialsBumpExtension$1 = class GLTFMaterialsBumpExtension {\n\n\tconstructor( writer ) {\n\n\t\tthis.writer = writer;\n\t\tthis.name = 'EXT_materials_bump';\n\n\t}\n\n\twriteMaterial( material, materialDef ) {\n\n\t\tif ( ! material.isMeshStandardMaterial || (\n\t\t       material.bumpScale === 1 &&\n\t\t     ! material.bumpMap ) ) return;\n\n\t\tconst writer = this.writer;\n\t\tconst extensionsUsed = writer.extensionsUsed;\n\n\t\tconst extensionDef = {};\n\n\t\tif ( material.bumpMap ) {\n\n\t\t\tconst bumpMapDef = {\n\t\t\t\tindex: writer.processTexture( material.bumpMap ),\n\t\t\t\ttexCoord: material.bumpMap.channel\n\t\t\t};\n\t\t\twriter.applyTextureTransform( bumpMapDef, material.bumpMap );\n\t\t\textensionDef.bumpTexture = bumpMapDef;\n\n\t\t}\n\n\t\textensionDef.bumpFactor = material.bumpScale;\n\n\t\tmaterialDef.extensions = materialDef.extensions || {};\n\t\tmaterialDef.extensions[ this.name ] = extensionDef;\n\n\t\textensionsUsed[ this.name ] = true;\n\n\t}\n\n};\n\n/**\n * GPU Instancing Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Vendor/EXT_mesh_gpu_instancing\n */\nlet GLTFMeshGpuInstancing$1 = class GLTFMeshGpuInstancing {\n\n\tconstructor( writer ) {\n\n\t\tthis.writer = writer;\n\t\tthis.name = 'EXT_mesh_gpu_instancing';\n\n\t}\n\n\twriteNode( object, nodeDef ) {\n\n\t\tif ( ! object.isInstancedMesh ) return;\n\n\t\tconst writer = this.writer;\n\n\t\tconst mesh = object;\n\n\t\tconst translationAttr = new Float32Array( mesh.count * 3 );\n\t\tconst rotationAttr = new Float32Array( mesh.count * 4 );\n\t\tconst scaleAttr = new Float32Array( mesh.count * 3 );\n\n\t\tconst matrix = new Matrix4();\n\t\tconst position = new Vector3();\n\t\tconst quaternion = new Quaternion();\n\t\tconst scale = new Vector3();\n\n\t\tfor ( let i = 0; i < mesh.count; i ++ ) {\n\n\t\t\tmesh.getMatrixAt( i, matrix );\n\t\t\tmatrix.decompose( position, quaternion, scale );\n\n\t\t\tposition.toArray( translationAttr, i * 3 );\n\t\t\tquaternion.toArray( rotationAttr, i * 4 );\n\t\t\tscale.toArray( scaleAttr, i * 3 );\n\n\t\t}\n\n\t\tconst attributes = {\n\t\t\tTRANSLATION: writer.processAccessor( new BufferAttribute( translationAttr, 3 ) ),\n\t\t\tROTATION: writer.processAccessor( new BufferAttribute( rotationAttr, 4 ) ),\n\t\t\tSCALE: writer.processAccessor( new BufferAttribute( scaleAttr, 3 ) ),\n\t\t};\n\n\t\tif ( mesh.instanceColor )\n\t\t\tattributes._COLOR_0 = writer.processAccessor( mesh.instanceColor );\n\n\t\tnodeDef.extensions = nodeDef.extensions || {};\n\t\tnodeDef.extensions[ this.name ] = { attributes };\n\n\t\twriter.extensionsUsed[ this.name ] = true;\n\t\twriter.extensionsRequired[ this.name ] = true;\n\n\t}\n\n};\n\n/**\n * Static utility functions\n */\nGLTFExporter.Utils = {\n\n\tinsertKeyframe: function ( track, time ) {\n\n\t\tconst tolerance = 0.001; // 1ms\n\t\tconst valueSize = track.getValueSize();\n\n\t\tconst times = new track.TimeBufferType( track.times.length + 1 );\n\t\tconst values = new track.ValueBufferType( track.values.length + valueSize );\n\t\tconst interpolant = track.createInterpolant( new track.ValueBufferType( valueSize ) );\n\n\t\tlet index;\n\n\t\tif ( track.times.length === 0 ) {\n\n\t\t\ttimes[ 0 ] = time;\n\n\t\t\tfor ( let i = 0; i < valueSize; i ++ ) {\n\n\t\t\t\tvalues[ i ] = 0;\n\n\t\t\t}\n\n\t\t\tindex = 0;\n\n\t\t} else if ( time < track.times[ 0 ] ) {\n\n\t\t\tif ( Math.abs( track.times[ 0 ] - time ) < tolerance ) return 0;\n\n\t\t\ttimes[ 0 ] = time;\n\t\t\ttimes.set( track.times, 1 );\n\n\t\t\tvalues.set( interpolant.evaluate( time ), 0 );\n\t\t\tvalues.set( track.values, valueSize );\n\n\t\t\tindex = 0;\n\n\t\t} else if ( time > track.times[ track.times.length - 1 ] ) {\n\n\t\t\tif ( Math.abs( track.times[ track.times.length - 1 ] - time ) < tolerance ) {\n\n\t\t\t\treturn track.times.length - 1;\n\n\t\t\t}\n\n\t\t\ttimes[ times.length - 1 ] = time;\n\t\t\ttimes.set( track.times, 0 );\n\n\t\t\tvalues.set( track.values, 0 );\n\t\t\tvalues.set( interpolant.evaluate( time ), track.values.length );\n\n\t\t\tindex = times.length - 1;\n\n\t\t} else {\n\n\t\t\tfor ( let i = 0; i < track.times.length; i ++ ) {\n\n\t\t\t\tif ( Math.abs( track.times[ i ] - time ) < tolerance ) return i;\n\n\t\t\t\tif ( track.times[ i ] < time && track.times[ i + 1 ] > time ) {\n\n\t\t\t\t\ttimes.set( track.times.slice( 0, i + 1 ), 0 );\n\t\t\t\t\ttimes[ i + 1 ] = time;\n\t\t\t\t\ttimes.set( track.times.slice( i + 1 ), i + 2 );\n\n\t\t\t\t\tvalues.set( track.values.slice( 0, ( i + 1 ) * valueSize ), 0 );\n\t\t\t\t\tvalues.set( interpolant.evaluate( time ), ( i + 1 ) * valueSize );\n\t\t\t\t\tvalues.set( track.values.slice( ( i + 1 ) * valueSize ), ( i + 2 ) * valueSize );\n\n\t\t\t\t\tindex = i + 1;\n\n\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\ttrack.times = times;\n\t\ttrack.values = values;\n\n\t\treturn index;\n\n\t},\n\n\tmergeMorphTargetTracks: function ( clip, root ) {\n\n\t\tconst tracks = [];\n\t\tconst mergedTracks = {};\n\t\tconst sourceTracks = clip.tracks;\n\n\t\tfor ( let i = 0; i < sourceTracks.length; ++ i ) {\n\n\t\t\tlet sourceTrack = sourceTracks[ i ];\n\t\t\tconst sourceTrackBinding = PropertyBinding.parseTrackName( sourceTrack.name );\n\t\t\tconst sourceTrackNode = PropertyBinding.findNode( root, sourceTrackBinding.nodeName );\n\n\t\t\tif ( sourceTrackBinding.propertyName !== 'morphTargetInfluences' || sourceTrackBinding.propertyIndex === undefined ) {\n\n\t\t\t\t// Tracks that don't affect morph targets, or that affect all morph targets together, can be left as-is.\n\t\t\t\ttracks.push( sourceTrack );\n\t\t\t\tcontinue;\n\n\t\t\t}\n\n\t\t\tif ( sourceTrack.createInterpolant !== sourceTrack.InterpolantFactoryMethodDiscrete\n\t\t\t\t&& sourceTrack.createInterpolant !== sourceTrack.InterpolantFactoryMethodLinear ) {\n\n\t\t\t\tif ( sourceTrack.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline ) {\n\n\t\t\t\t\t// This should never happen, because glTF morph target animations\n\t\t\t\t\t// affect all targets already.\n\t\t\t\t\tthrow new Error( 'THREE.GLTFExporter: Cannot merge tracks with glTF CUBICSPLINE interpolation.' );\n\n\t\t\t\t}\n\n\t\t\t\tconsole.warn( 'THREE.GLTFExporter: Morph target interpolation mode not yet supported. Using LINEAR instead.' );\n\n\t\t\t\tsourceTrack = sourceTrack.clone();\n\t\t\t\tsourceTrack.setInterpolation( InterpolateLinear );\n\n\t\t\t}\n\n\t\t\tconst targetCount = sourceTrackNode.morphTargetInfluences.length;\n\t\t\tconst targetIndex = sourceTrackNode.morphTargetDictionary[ sourceTrackBinding.propertyIndex ];\n\n\t\t\tif ( targetIndex === undefined ) {\n\n\t\t\t\tthrow new Error( 'THREE.GLTFExporter: Morph target name not found: ' + sourceTrackBinding.propertyIndex );\n\n\t\t\t}\n\n\t\t\tlet mergedTrack;\n\n\t\t\t// If this is the first time we've seen this object, create a new\n\t\t\t// track to store merged keyframe data for each morph target.\n\t\t\tif ( mergedTracks[ sourceTrackNode.uuid ] === undefined ) {\n\n\t\t\t\tmergedTrack = sourceTrack.clone();\n\n\t\t\t\tconst values = new mergedTrack.ValueBufferType( targetCount * mergedTrack.times.length );\n\n\t\t\t\tfor ( let j = 0; j < mergedTrack.times.length; j ++ ) {\n\n\t\t\t\t\tvalues[ j * targetCount + targetIndex ] = mergedTrack.values[ j ];\n\n\t\t\t\t}\n\n\t\t\t\t// We need to take into consideration the intended target node\n\t\t\t\t// of our original un-merged morphTarget animation.\n\t\t\t\tmergedTrack.name = ( sourceTrackBinding.nodeName || '' ) + '.morphTargetInfluences';\n\t\t\t\tmergedTrack.values = values;\n\n\t\t\t\tmergedTracks[ sourceTrackNode.uuid ] = mergedTrack;\n\t\t\t\ttracks.push( mergedTrack );\n\n\t\t\t\tcontinue;\n\n\t\t\t}\n\n\t\t\tconst sourceInterpolant = sourceTrack.createInterpolant( new sourceTrack.ValueBufferType( 1 ) );\n\n\t\t\tmergedTrack = mergedTracks[ sourceTrackNode.uuid ];\n\n\t\t\t// For every existing keyframe of the merged track, write a (possibly\n\t\t\t// interpolated) value from the source track.\n\t\t\tfor ( let j = 0; j < mergedTrack.times.length; j ++ ) {\n\n\t\t\t\tmergedTrack.values[ j * targetCount + targetIndex ] = sourceInterpolant.evaluate( mergedTrack.times[ j ] );\n\n\t\t\t}\n\n\t\t\t// For every existing keyframe of the source track, write a (possibly\n\t\t\t// new) keyframe to the merged track. Values from the previous loop may\n\t\t\t// be written again, but keyframes are de-duplicated.\n\t\t\tfor ( let j = 0; j < sourceTrack.times.length; j ++ ) {\n\n\t\t\t\tconst keyframeIndex = this.insertKeyframe( mergedTrack, sourceTrack.times[ j ] );\n\t\t\t\tmergedTrack.values[ keyframeIndex * targetCount + targetIndex ] = sourceTrack.values[ j ];\n\n\t\t\t}\n\n\t\t}\n\n\t\tclip.tracks = tracks;\n\n\t\treturn clip;\n\n\t}\n\n};\n\nfunction clone( source ) {\n\n\tconst sourceLookup = new Map();\n\tconst cloneLookup = new Map();\n\n\tconst clone = source.clone();\n\n\tparallelTraverse( source, clone, function ( sourceNode, clonedNode ) {\n\n\t\tsourceLookup.set( clonedNode, sourceNode );\n\t\tcloneLookup.set( sourceNode, clonedNode );\n\n\t} );\n\n\tclone.traverse( function ( node ) {\n\n\t\tif ( ! node.isSkinnedMesh ) return;\n\n\t\tconst clonedMesh = node;\n\t\tconst sourceMesh = sourceLookup.get( node );\n\t\tconst sourceBones = sourceMesh.skeleton.bones;\n\n\t\tclonedMesh.skeleton = sourceMesh.skeleton.clone();\n\t\tclonedMesh.bindMatrix.copy( sourceMesh.bindMatrix );\n\n\t\tclonedMesh.skeleton.bones = sourceBones.map( function ( bone ) {\n\n\t\t\treturn cloneLookup.get( bone );\n\n\t\t} );\n\n\t\tclonedMesh.bind( clonedMesh.skeleton, clonedMesh.bindMatrix );\n\n\t} );\n\n\treturn clone;\n\n}\n\nfunction parallelTraverse( a, b, callback ) {\n\n\tcallback( a, b );\n\n\tfor ( let i = 0; i < a.children.length; i ++ ) {\n\n\t\tparallelTraverse( a.children[ i ], b.children[ i ], callback );\n\n\t}\n\n}\n\nclass GLTFLoader extends Loader {\n\n\tconstructor( manager ) {\n\n\t\tsuper( manager );\n\n\t\tthis.dracoLoader = null;\n\t\tthis.ktx2Loader = null;\n\t\tthis.meshoptDecoder = null;\n\n\t\tthis.pluginCallbacks = [];\n\n\t\tthis.register( function ( parser ) {\n\n\t\t\treturn new GLTFMaterialsClearcoatExtension( parser );\n\n\t\t} );\n\n\t\tthis.register( function ( parser ) {\n\n\t\t\treturn new GLTFMaterialsDispersionExtension( parser );\n\n\t\t} );\n\n\t\tthis.register( function ( parser ) {\n\n\t\t\treturn new GLTFTextureBasisUExtension( parser );\n\n\t\t} );\n\n\t\tthis.register( function ( parser ) {\n\n\t\t\treturn new GLTFTextureWebPExtension( parser );\n\n\t\t} );\n\n\t\tthis.register( function ( parser ) {\n\n\t\t\treturn new GLTFTextureAVIFExtension( parser );\n\n\t\t} );\n\n\t\tthis.register( function ( parser ) {\n\n\t\t\treturn new GLTFMaterialsSheenExtension( parser );\n\n\t\t} );\n\n\t\tthis.register( function ( parser ) {\n\n\t\t\treturn new GLTFMaterialsTransmissionExtension( parser );\n\n\t\t} );\n\n\t\tthis.register( function ( parser ) {\n\n\t\t\treturn new GLTFMaterialsVolumeExtension( parser );\n\n\t\t} );\n\n\t\tthis.register( function ( parser ) {\n\n\t\t\treturn new GLTFMaterialsIorExtension( parser );\n\n\t\t} );\n\n\t\tthis.register( function ( parser ) {\n\n\t\t\treturn new GLTFMaterialsEmissiveStrengthExtension( parser );\n\n\t\t} );\n\n\t\tthis.register( function ( parser ) {\n\n\t\t\treturn new GLTFMaterialsSpecularExtension( parser );\n\n\t\t} );\n\n\t\tthis.register( function ( parser ) {\n\n\t\t\treturn new GLTFMaterialsIridescenceExtension( parser );\n\n\t\t} );\n\n\t\tthis.register( function ( parser ) {\n\n\t\t\treturn new GLTFMaterialsAnisotropyExtension( parser );\n\n\t\t} );\n\n\t\tthis.register( function ( parser ) {\n\n\t\t\treturn new GLTFMaterialsBumpExtension( parser );\n\n\t\t} );\n\n\t\tthis.register( function ( parser ) {\n\n\t\t\treturn new GLTFLightsExtension( parser );\n\n\t\t} );\n\n\t\tthis.register( function ( parser ) {\n\n\t\t\treturn new GLTFMeshoptCompression( parser );\n\n\t\t} );\n\n\t\tthis.register( function ( parser ) {\n\n\t\t\treturn new GLTFMeshGpuInstancing( parser );\n\n\t\t} );\n\n\t}\n\n\tload( url, onLoad, onProgress, onError ) {\n\n\t\tconst scope = this;\n\n\t\tlet resourcePath;\n\n\t\tif ( this.resourcePath !== '' ) {\n\n\t\t\tresourcePath = this.resourcePath;\n\n\t\t} else if ( this.path !== '' ) {\n\n\t\t\t// If a base path is set, resources will be relative paths from that plus the relative path of the gltf file\n\t\t\t// Example  path = 'https://my-cnd-server.com/', url = 'assets/models/model.gltf'\n\t\t\t// resourcePath = 'https://my-cnd-server.com/assets/models/'\n\t\t\t// referenced resource 'model.bin' will be loaded from 'https://my-cnd-server.com/assets/models/model.bin'\n\t\t\t// referenced resource '../textures/texture.png' will be loaded from 'https://my-cnd-server.com/assets/textures/texture.png'\n\t\t\tconst relativeUrl = LoaderUtils.extractUrlBase( url );\n\t\t\tresourcePath = LoaderUtils.resolveURL( relativeUrl, this.path );\n\n\t\t} else {\n\n\t\t\tresourcePath = LoaderUtils.extractUrlBase( url );\n\n\t\t}\n\n\t\t// Tells the LoadingManager to track an extra item, which resolves after\n\t\t// the model is fully loaded. This means the count of items loaded will\n\t\t// be incorrect, but ensures manager.onLoad() does not fire early.\n\t\tthis.manager.itemStart( url );\n\n\t\tconst _onError = function ( e ) {\n\n\t\t\tif ( onError ) {\n\n\t\t\t\tonError( e );\n\n\t\t\t} else {\n\n\t\t\t\tconsole.error( e );\n\n\t\t\t}\n\n\t\t\tscope.manager.itemError( url );\n\t\t\tscope.manager.itemEnd( url );\n\n\t\t};\n\n\t\tconst loader = new FileLoader( this.manager );\n\n\t\tloader.setPath( this.path );\n\t\tloader.setResponseType( 'arraybuffer' );\n\t\tloader.setRequestHeader( this.requestHeader );\n\t\tloader.setWithCredentials( this.withCredentials );\n\n\t\tloader.load( url, function ( data ) {\n\n\t\t\ttry {\n\n\t\t\t\tscope.parse( data, resourcePath, function ( gltf ) {\n\n\t\t\t\t\tonLoad( gltf );\n\n\t\t\t\t\tscope.manager.itemEnd( url );\n\n\t\t\t\t}, _onError );\n\n\t\t\t} catch ( e ) {\n\n\t\t\t\t_onError( e );\n\n\t\t\t}\n\n\t\t}, onProgress, _onError );\n\n\t}\n\n\tsetDRACOLoader( dracoLoader ) {\n\n\t\tthis.dracoLoader = dracoLoader;\n\t\treturn this;\n\n\t}\n\n\tsetKTX2Loader( ktx2Loader ) {\n\n\t\tthis.ktx2Loader = ktx2Loader;\n\t\treturn this;\n\n\t}\n\n\tsetMeshoptDecoder( meshoptDecoder ) {\n\n\t\tthis.meshoptDecoder = meshoptDecoder;\n\t\treturn this;\n\n\t}\n\n\tregister( callback ) {\n\n\t\tif ( this.pluginCallbacks.indexOf( callback ) === -1 ) {\n\n\t\t\tthis.pluginCallbacks.push( callback );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tunregister( callback ) {\n\n\t\tif ( this.pluginCallbacks.indexOf( callback ) !== -1 ) {\n\n\t\t\tthis.pluginCallbacks.splice( this.pluginCallbacks.indexOf( callback ), 1 );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tparse( data, path, onLoad, onError ) {\n\n\t\tlet json;\n\t\tconst extensions = {};\n\t\tconst plugins = {};\n\t\tconst textDecoder = new TextDecoder();\n\n\t\tif ( typeof data === 'string' ) {\n\n\t\t\tjson = JSON.parse( data );\n\n\t\t} else if ( data instanceof ArrayBuffer ) {\n\n\t\t\tconst magic = textDecoder.decode( new Uint8Array( data, 0, 4 ) );\n\n\t\t\tif ( magic === BINARY_EXTENSION_HEADER_MAGIC ) {\n\n\t\t\t\ttry {\n\n\t\t\t\t\textensions[ EXTENSIONS.KHR_BINARY_GLTF ] = new GLTFBinaryExtension( data );\n\n\t\t\t\t} catch ( error ) {\n\n\t\t\t\t\tif ( onError ) onError( error );\n\t\t\t\t\treturn;\n\n\t\t\t\t}\n\n\t\t\t\tjson = JSON.parse( extensions[ EXTENSIONS.KHR_BINARY_GLTF ].content );\n\n\t\t\t} else {\n\n\t\t\t\tjson = JSON.parse( textDecoder.decode( data ) );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tjson = data;\n\n\t\t}\n\n\t\tif ( json.asset === undefined || json.asset.version[ 0 ] < 2 ) {\n\n\t\t\tif ( onError ) onError( new Error( 'THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported.' ) );\n\t\t\treturn;\n\n\t\t}\n\n\t\tconst parser = new GLTFParser( json, {\n\n\t\t\tpath: path || this.resourcePath || '',\n\t\t\tcrossOrigin: this.crossOrigin,\n\t\t\trequestHeader: this.requestHeader,\n\t\t\tmanager: this.manager,\n\t\t\tktx2Loader: this.ktx2Loader,\n\t\t\tmeshoptDecoder: this.meshoptDecoder\n\n\t\t} );\n\n\t\tparser.fileLoader.setRequestHeader( this.requestHeader );\n\n\t\tfor ( let i = 0; i < this.pluginCallbacks.length; i ++ ) {\n\n\t\t\tconst plugin = this.pluginCallbacks[ i ]( parser );\n\n\t\t\tif ( ! plugin.name ) console.error( 'THREE.GLTFLoader: Invalid plugin found: missing name' );\n\n\t\t\tplugins[ plugin.name ] = plugin;\n\n\t\t\t// Workaround to avoid determining as unknown extension\n\t\t\t// in addUnknownExtensionsToUserData().\n\t\t\t// Remove this workaround if we move all the existing\n\t\t\t// extension handlers to plugin system\n\t\t\textensions[ plugin.name ] = true;\n\n\t\t}\n\n\t\tif ( json.extensionsUsed ) {\n\n\t\t\tfor ( let i = 0; i < json.extensionsUsed.length; ++ i ) {\n\n\t\t\t\tconst extensionName = json.extensionsUsed[ i ];\n\t\t\t\tconst extensionsRequired = json.extensionsRequired || [];\n\n\t\t\t\tswitch ( extensionName ) {\n\n\t\t\t\t\tcase EXTENSIONS.KHR_MATERIALS_UNLIT:\n\t\t\t\t\t\textensions[ extensionName ] = new GLTFMaterialsUnlitExtension();\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase EXTENSIONS.KHR_DRACO_MESH_COMPRESSION:\n\t\t\t\t\t\textensions[ extensionName ] = new GLTFDracoMeshCompressionExtension( json, this.dracoLoader );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase EXTENSIONS.KHR_TEXTURE_TRANSFORM:\n\t\t\t\t\t\textensions[ extensionName ] = new GLTFTextureTransformExtension();\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase EXTENSIONS.KHR_MESH_QUANTIZATION:\n\t\t\t\t\t\textensions[ extensionName ] = new GLTFMeshQuantizationExtension();\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault:\n\n\t\t\t\t\t\tif ( extensionsRequired.indexOf( extensionName ) >= 0 && plugins[ extensionName ] === undefined ) {\n\n\t\t\t\t\t\t\tconsole.warn( 'THREE.GLTFLoader: Unknown extension \"' + extensionName + '\".' );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tparser.setExtensions( extensions );\n\t\tparser.setPlugins( plugins );\n\t\tparser.parse( onLoad, onError );\n\n\t}\n\n\tparseAsync( data, path ) {\n\n\t\tconst scope = this;\n\n\t\treturn new Promise( function ( resolve, reject ) {\n\n\t\t\tscope.parse( data, path, resolve, reject );\n\n\t\t} );\n\n\t}\n\n}\n\n/* GLTFREGISTRY */\n\nfunction GLTFRegistry() {\n\n\tlet objects = {};\n\n\treturn\t{\n\n\t\tget: function ( key ) {\n\n\t\t\treturn objects[ key ];\n\n\t\t},\n\n\t\tadd: function ( key, object ) {\n\n\t\t\tobjects[ key ] = object;\n\n\t\t},\n\n\t\tremove: function ( key ) {\n\n\t\t\tdelete objects[ key ];\n\n\t\t},\n\n\t\tremoveAll: function () {\n\n\t\t\tobjects = {};\n\n\t\t}\n\n\t};\n\n}\n\n/*********************************/\n/********** EXTENSIONS ***********/\n/*********************************/\n\nconst EXTENSIONS = {\n\tKHR_BINARY_GLTF: 'KHR_binary_glTF',\n\tKHR_DRACO_MESH_COMPRESSION: 'KHR_draco_mesh_compression',\n\tKHR_LIGHTS_PUNCTUAL: 'KHR_lights_punctual',\n\tKHR_MATERIALS_CLEARCOAT: 'KHR_materials_clearcoat',\n\tKHR_MATERIALS_DISPERSION: 'KHR_materials_dispersion',\n\tKHR_MATERIALS_IOR: 'KHR_materials_ior',\n\tKHR_MATERIALS_SHEEN: 'KHR_materials_sheen',\n\tKHR_MATERIALS_SPECULAR: 'KHR_materials_specular',\n\tKHR_MATERIALS_TRANSMISSION: 'KHR_materials_transmission',\n\tKHR_MATERIALS_IRIDESCENCE: 'KHR_materials_iridescence',\n\tKHR_MATERIALS_ANISOTROPY: 'KHR_materials_anisotropy',\n\tKHR_MATERIALS_UNLIT: 'KHR_materials_unlit',\n\tKHR_MATERIALS_VOLUME: 'KHR_materials_volume',\n\tKHR_TEXTURE_BASISU: 'KHR_texture_basisu',\n\tKHR_TEXTURE_TRANSFORM: 'KHR_texture_transform',\n\tKHR_MESH_QUANTIZATION: 'KHR_mesh_quantization',\n\tKHR_MATERIALS_EMISSIVE_STRENGTH: 'KHR_materials_emissive_strength',\n\tEXT_MATERIALS_BUMP: 'EXT_materials_bump',\n\tEXT_TEXTURE_WEBP: 'EXT_texture_webp',\n\tEXT_TEXTURE_AVIF: 'EXT_texture_avif',\n\tEXT_MESHOPT_COMPRESSION: 'EXT_meshopt_compression',\n\tEXT_MESH_GPU_INSTANCING: 'EXT_mesh_gpu_instancing'\n};\n\n/**\n * Punctual Lights Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_lights_punctual\n */\nclass GLTFLightsExtension {\n\n\tconstructor( parser ) {\n\n\t\tthis.parser = parser;\n\t\tthis.name = EXTENSIONS.KHR_LIGHTS_PUNCTUAL;\n\n\t\t// Object3D instance caches\n\t\tthis.cache = { refs: {}, uses: {} };\n\n\t}\n\n\t_markDefs() {\n\n\t\tconst parser = this.parser;\n\t\tconst nodeDefs = this.parser.json.nodes || [];\n\n\t\tfor ( let nodeIndex = 0, nodeLength = nodeDefs.length; nodeIndex < nodeLength; nodeIndex ++ ) {\n\n\t\t\tconst nodeDef = nodeDefs[ nodeIndex ];\n\n\t\t\tif ( nodeDef.extensions\n\t\t\t\t\t&& nodeDef.extensions[ this.name ]\n\t\t\t\t\t&& nodeDef.extensions[ this.name ].light !== undefined ) {\n\n\t\t\t\tparser._addNodeRef( this.cache, nodeDef.extensions[ this.name ].light );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\t_loadLight( lightIndex ) {\n\n\t\tconst parser = this.parser;\n\t\tconst cacheKey = 'light:' + lightIndex;\n\t\tlet dependency = parser.cache.get( cacheKey );\n\n\t\tif ( dependency ) return dependency;\n\n\t\tconst json = parser.json;\n\t\tconst extensions = ( json.extensions && json.extensions[ this.name ] ) || {};\n\t\tconst lightDefs = extensions.lights || [];\n\t\tconst lightDef = lightDefs[ lightIndex ];\n\t\tlet lightNode;\n\n\t\tconst color = new Color( 0xffffff );\n\n\t\tif ( lightDef.color !== undefined ) color.setRGB( lightDef.color[ 0 ], lightDef.color[ 1 ], lightDef.color[ 2 ], LinearSRGBColorSpace );\n\n\t\tconst range = lightDef.range !== undefined ? lightDef.range : 0;\n\n\t\tswitch ( lightDef.type ) {\n\n\t\t\tcase 'directional':\n\t\t\t\tlightNode = new DirectionalLight( color );\n\t\t\t\tlightNode.target.position.set( 0, 0, -1 );\n\t\t\t\tlightNode.add( lightNode.target );\n\t\t\t\tbreak;\n\n\t\t\tcase 'point':\n\t\t\t\tlightNode = new PointLight( color );\n\t\t\t\tlightNode.distance = range;\n\t\t\t\tbreak;\n\n\t\t\tcase 'spot':\n\t\t\t\tlightNode = new SpotLight( color );\n\t\t\t\tlightNode.distance = range;\n\t\t\t\t// Handle spotlight properties.\n\t\t\t\tlightDef.spot = lightDef.spot || {};\n\t\t\t\tlightDef.spot.innerConeAngle = lightDef.spot.innerConeAngle !== undefined ? lightDef.spot.innerConeAngle : 0;\n\t\t\t\tlightDef.spot.outerConeAngle = lightDef.spot.outerConeAngle !== undefined ? lightDef.spot.outerConeAngle : Math.PI / 4.0;\n\t\t\t\tlightNode.angle = lightDef.spot.outerConeAngle;\n\t\t\t\tlightNode.penumbra = 1.0 - lightDef.spot.innerConeAngle / lightDef.spot.outerConeAngle;\n\t\t\t\tlightNode.target.position.set( 0, 0, -1 );\n\t\t\t\tlightNode.add( lightNode.target );\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\tthrow new Error( 'THREE.GLTFLoader: Unexpected light type: ' + lightDef.type );\n\n\t\t}\n\n\t\t// Some lights (e.g. spot) default to a position other than the origin. Reset the position\n\t\t// here, because node-level parsing will only override position if explicitly specified.\n\t\tlightNode.position.set( 0, 0, 0 );\n\n\t\tassignExtrasToUserData( lightNode, lightDef );\n\n\t\tif ( lightDef.intensity !== undefined ) lightNode.intensity = lightDef.intensity;\n\n\t\tlightNode.name = parser.createUniqueName( lightDef.name || ( 'light_' + lightIndex ) );\n\n\t\tdependency = Promise.resolve( lightNode );\n\n\t\tparser.cache.add( cacheKey, dependency );\n\n\t\treturn dependency;\n\n\t}\n\n\tgetDependency( type, index ) {\n\n\t\tif ( type !== 'light' ) return;\n\n\t\treturn this._loadLight( index );\n\n\t}\n\n\tcreateNodeAttachment( nodeIndex ) {\n\n\t\tconst self = this;\n\t\tconst parser = this.parser;\n\t\tconst json = parser.json;\n\t\tconst nodeDef = json.nodes[ nodeIndex ];\n\t\tconst lightDef = ( nodeDef.extensions && nodeDef.extensions[ this.name ] ) || {};\n\t\tconst lightIndex = lightDef.light;\n\n\t\tif ( lightIndex === undefined ) return null;\n\n\t\treturn this._loadLight( lightIndex ).then( function ( light ) {\n\n\t\t\treturn parser._getNodeRef( self.cache, lightIndex, light );\n\n\t\t} );\n\n\t}\n\n}\n\n/**\n * Unlit Materials Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_unlit\n */\nclass GLTFMaterialsUnlitExtension {\n\n\tconstructor() {\n\n\t\tthis.name = EXTENSIONS.KHR_MATERIALS_UNLIT;\n\n\t}\n\n\tgetMaterialType() {\n\n\t\treturn MeshBasicMaterial;\n\n\t}\n\n\textendParams( materialParams, materialDef, parser ) {\n\n\t\tconst pending = [];\n\n\t\tmaterialParams.color = new Color( 1.0, 1.0, 1.0 );\n\t\tmaterialParams.opacity = 1.0;\n\n\t\tconst metallicRoughness = materialDef.pbrMetallicRoughness;\n\n\t\tif ( metallicRoughness ) {\n\n\t\t\tif ( Array.isArray( metallicRoughness.baseColorFactor ) ) {\n\n\t\t\t\tconst array = metallicRoughness.baseColorFactor;\n\n\t\t\t\tmaterialParams.color.setRGB( array[ 0 ], array[ 1 ], array[ 2 ], LinearSRGBColorSpace );\n\t\t\t\tmaterialParams.opacity = array[ 3 ];\n\n\t\t\t}\n\n\t\t\tif ( metallicRoughness.baseColorTexture !== undefined ) {\n\n\t\t\t\tpending.push( parser.assignTexture( materialParams, 'map', metallicRoughness.baseColorTexture, SRGBColorSpace ) );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn Promise.all( pending );\n\n\t}\n\n}\n\n/**\n * Materials Emissive Strength Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/blob/5768b3ce0ef32bc39cdf1bef10b948586635ead3/extensions/2.0/Khronos/KHR_materials_emissive_strength/README.md\n */\nclass GLTFMaterialsEmissiveStrengthExtension {\n\n\tconstructor( parser ) {\n\n\t\tthis.parser = parser;\n\t\tthis.name = EXTENSIONS.KHR_MATERIALS_EMISSIVE_STRENGTH;\n\n\t}\n\n\textendMaterialParams( materialIndex, materialParams ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) {\n\n\t\t\treturn Promise.resolve();\n\n\t\t}\n\n\t\tconst emissiveStrength = materialDef.extensions[ this.name ].emissiveStrength;\n\n\t\tif ( emissiveStrength !== undefined ) {\n\n\t\t\tmaterialParams.emissiveIntensity = emissiveStrength;\n\n\t\t}\n\n\t\treturn Promise.resolve();\n\n\t}\n\n}\n\n/**\n * Clearcoat Materials Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_clearcoat\n */\nclass GLTFMaterialsClearcoatExtension {\n\n\tconstructor( parser ) {\n\n\t\tthis.parser = parser;\n\t\tthis.name = EXTENSIONS.KHR_MATERIALS_CLEARCOAT;\n\n\t}\n\n\tgetMaterialType( materialIndex ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) return null;\n\n\t\treturn MeshPhysicalMaterial;\n\n\t}\n\n\textendMaterialParams( materialIndex, materialParams ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) {\n\n\t\t\treturn Promise.resolve();\n\n\t\t}\n\n\t\tconst pending = [];\n\n\t\tconst extension = materialDef.extensions[ this.name ];\n\n\t\tif ( extension.clearcoatFactor !== undefined ) {\n\n\t\t\tmaterialParams.clearcoat = extension.clearcoatFactor;\n\n\t\t}\n\n\t\tif ( extension.clearcoatTexture !== undefined ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'clearcoatMap', extension.clearcoatTexture ) );\n\n\t\t}\n\n\t\tif ( extension.clearcoatRoughnessFactor !== undefined ) {\n\n\t\t\tmaterialParams.clearcoatRoughness = extension.clearcoatRoughnessFactor;\n\n\t\t}\n\n\t\tif ( extension.clearcoatRoughnessTexture !== undefined ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'clearcoatRoughnessMap', extension.clearcoatRoughnessTexture ) );\n\n\t\t}\n\n\t\tif ( extension.clearcoatNormalTexture !== undefined ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'clearcoatNormalMap', extension.clearcoatNormalTexture ) );\n\n\t\t\tif ( extension.clearcoatNormalTexture.scale !== undefined ) {\n\n\t\t\t\tconst scale = extension.clearcoatNormalTexture.scale;\n\n\t\t\t\tmaterialParams.clearcoatNormalScale = new Vector2( scale, scale );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn Promise.all( pending );\n\n\t}\n\n}\n\n/**\n * Materials dispersion Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/main/extensions/2.0/Khronos/KHR_materials_dispersion\n */\nclass GLTFMaterialsDispersionExtension {\n\n\tconstructor( parser ) {\n\n\t\tthis.parser = parser;\n\t\tthis.name = EXTENSIONS.KHR_MATERIALS_DISPERSION;\n\n\t}\n\n\tgetMaterialType( materialIndex ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) return null;\n\n\t\treturn MeshPhysicalMaterial;\n\n\t}\n\n\textendMaterialParams( materialIndex, materialParams ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) {\n\n\t\t\treturn Promise.resolve();\n\n\t\t}\n\n\t\tconst extension = materialDef.extensions[ this.name ];\n\n\t\tmaterialParams.dispersion = extension.dispersion !== undefined ? extension.dispersion : 0;\n\n\t\treturn Promise.resolve();\n\n\t}\n\n}\n\n/**\n * Iridescence Materials Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_iridescence\n */\nclass GLTFMaterialsIridescenceExtension {\n\n\tconstructor( parser ) {\n\n\t\tthis.parser = parser;\n\t\tthis.name = EXTENSIONS.KHR_MATERIALS_IRIDESCENCE;\n\n\t}\n\n\tgetMaterialType( materialIndex ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) return null;\n\n\t\treturn MeshPhysicalMaterial;\n\n\t}\n\n\textendMaterialParams( materialIndex, materialParams ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) {\n\n\t\t\treturn Promise.resolve();\n\n\t\t}\n\n\t\tconst pending = [];\n\n\t\tconst extension = materialDef.extensions[ this.name ];\n\n\t\tif ( extension.iridescenceFactor !== undefined ) {\n\n\t\t\tmaterialParams.iridescence = extension.iridescenceFactor;\n\n\t\t}\n\n\t\tif ( extension.iridescenceTexture !== undefined ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'iridescenceMap', extension.iridescenceTexture ) );\n\n\t\t}\n\n\t\tif ( extension.iridescenceIor !== undefined ) {\n\n\t\t\tmaterialParams.iridescenceIOR = extension.iridescenceIor;\n\n\t\t}\n\n\t\tif ( materialParams.iridescenceThicknessRange === undefined ) {\n\n\t\t\tmaterialParams.iridescenceThicknessRange = [ 100, 400 ];\n\n\t\t}\n\n\t\tif ( extension.iridescenceThicknessMinimum !== undefined ) {\n\n\t\t\tmaterialParams.iridescenceThicknessRange[ 0 ] = extension.iridescenceThicknessMinimum;\n\n\t\t}\n\n\t\tif ( extension.iridescenceThicknessMaximum !== undefined ) {\n\n\t\t\tmaterialParams.iridescenceThicknessRange[ 1 ] = extension.iridescenceThicknessMaximum;\n\n\t\t}\n\n\t\tif ( extension.iridescenceThicknessTexture !== undefined ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'iridescenceThicknessMap', extension.iridescenceThicknessTexture ) );\n\n\t\t}\n\n\t\treturn Promise.all( pending );\n\n\t}\n\n}\n\n/**\n * Sheen Materials Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/main/extensions/2.0/Khronos/KHR_materials_sheen\n */\nclass GLTFMaterialsSheenExtension {\n\n\tconstructor( parser ) {\n\n\t\tthis.parser = parser;\n\t\tthis.name = EXTENSIONS.KHR_MATERIALS_SHEEN;\n\n\t}\n\n\tgetMaterialType( materialIndex ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) return null;\n\n\t\treturn MeshPhysicalMaterial;\n\n\t}\n\n\textendMaterialParams( materialIndex, materialParams ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) {\n\n\t\t\treturn Promise.resolve();\n\n\t\t}\n\n\t\tconst pending = [];\n\n\t\tmaterialParams.sheenColor = new Color( 0, 0, 0 );\n\t\tmaterialParams.sheenRoughness = 0;\n\t\tmaterialParams.sheen = 1;\n\n\t\tconst extension = materialDef.extensions[ this.name ];\n\n\t\tif ( extension.sheenColorFactor !== undefined ) {\n\n\t\t\tconst colorFactor = extension.sheenColorFactor;\n\t\t\tmaterialParams.sheenColor.setRGB( colorFactor[ 0 ], colorFactor[ 1 ], colorFactor[ 2 ], LinearSRGBColorSpace );\n\n\t\t}\n\n\t\tif ( extension.sheenRoughnessFactor !== undefined ) {\n\n\t\t\tmaterialParams.sheenRoughness = extension.sheenRoughnessFactor;\n\n\t\t}\n\n\t\tif ( extension.sheenColorTexture !== undefined ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'sheenColorMap', extension.sheenColorTexture, SRGBColorSpace ) );\n\n\t\t}\n\n\t\tif ( extension.sheenRoughnessTexture !== undefined ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'sheenRoughnessMap', extension.sheenRoughnessTexture ) );\n\n\t\t}\n\n\t\treturn Promise.all( pending );\n\n\t}\n\n}\n\n/**\n * Transmission Materials Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_transmission\n * Draft: https://github.com/KhronosGroup/glTF/pull/1698\n */\nclass GLTFMaterialsTransmissionExtension {\n\n\tconstructor( parser ) {\n\n\t\tthis.parser = parser;\n\t\tthis.name = EXTENSIONS.KHR_MATERIALS_TRANSMISSION;\n\n\t}\n\n\tgetMaterialType( materialIndex ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) return null;\n\n\t\treturn MeshPhysicalMaterial;\n\n\t}\n\n\textendMaterialParams( materialIndex, materialParams ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) {\n\n\t\t\treturn Promise.resolve();\n\n\t\t}\n\n\t\tconst pending = [];\n\n\t\tconst extension = materialDef.extensions[ this.name ];\n\n\t\tif ( extension.transmissionFactor !== undefined ) {\n\n\t\t\tmaterialParams.transmission = extension.transmissionFactor;\n\n\t\t}\n\n\t\tif ( extension.transmissionTexture !== undefined ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'transmissionMap', extension.transmissionTexture ) );\n\n\t\t}\n\n\t\treturn Promise.all( pending );\n\n\t}\n\n}\n\n/**\n * Materials Volume Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_volume\n */\nclass GLTFMaterialsVolumeExtension {\n\n\tconstructor( parser ) {\n\n\t\tthis.parser = parser;\n\t\tthis.name = EXTENSIONS.KHR_MATERIALS_VOLUME;\n\n\t}\n\n\tgetMaterialType( materialIndex ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) return null;\n\n\t\treturn MeshPhysicalMaterial;\n\n\t}\n\n\textendMaterialParams( materialIndex, materialParams ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) {\n\n\t\t\treturn Promise.resolve();\n\n\t\t}\n\n\t\tconst pending = [];\n\n\t\tconst extension = materialDef.extensions[ this.name ];\n\n\t\tmaterialParams.thickness = extension.thicknessFactor !== undefined ? extension.thicknessFactor : 0;\n\n\t\tif ( extension.thicknessTexture !== undefined ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'thicknessMap', extension.thicknessTexture ) );\n\n\t\t}\n\n\t\tmaterialParams.attenuationDistance = extension.attenuationDistance || Infinity;\n\n\t\tconst colorArray = extension.attenuationColor || [ 1, 1, 1 ];\n\t\tmaterialParams.attenuationColor = new Color().setRGB( colorArray[ 0 ], colorArray[ 1 ], colorArray[ 2 ], LinearSRGBColorSpace );\n\n\t\treturn Promise.all( pending );\n\n\t}\n\n}\n\n/**\n * Materials ior Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_ior\n */\nclass GLTFMaterialsIorExtension {\n\n\tconstructor( parser ) {\n\n\t\tthis.parser = parser;\n\t\tthis.name = EXTENSIONS.KHR_MATERIALS_IOR;\n\n\t}\n\n\tgetMaterialType( materialIndex ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) return null;\n\n\t\treturn MeshPhysicalMaterial;\n\n\t}\n\n\textendMaterialParams( materialIndex, materialParams ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) {\n\n\t\t\treturn Promise.resolve();\n\n\t\t}\n\n\t\tconst extension = materialDef.extensions[ this.name ];\n\n\t\tmaterialParams.ior = extension.ior !== undefined ? extension.ior : 1.5;\n\n\t\treturn Promise.resolve();\n\n\t}\n\n}\n\n/**\n * Materials specular Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_specular\n */\nclass GLTFMaterialsSpecularExtension {\n\n\tconstructor( parser ) {\n\n\t\tthis.parser = parser;\n\t\tthis.name = EXTENSIONS.KHR_MATERIALS_SPECULAR;\n\n\t}\n\n\tgetMaterialType( materialIndex ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) return null;\n\n\t\treturn MeshPhysicalMaterial;\n\n\t}\n\n\textendMaterialParams( materialIndex, materialParams ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) {\n\n\t\t\treturn Promise.resolve();\n\n\t\t}\n\n\t\tconst pending = [];\n\n\t\tconst extension = materialDef.extensions[ this.name ];\n\n\t\tmaterialParams.specularIntensity = extension.specularFactor !== undefined ? extension.specularFactor : 1.0;\n\n\t\tif ( extension.specularTexture !== undefined ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'specularIntensityMap', extension.specularTexture ) );\n\n\t\t}\n\n\t\tconst colorArray = extension.specularColorFactor || [ 1, 1, 1 ];\n\t\tmaterialParams.specularColor = new Color().setRGB( colorArray[ 0 ], colorArray[ 1 ], colorArray[ 2 ], LinearSRGBColorSpace );\n\n\t\tif ( extension.specularColorTexture !== undefined ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'specularColorMap', extension.specularColorTexture, SRGBColorSpace ) );\n\n\t\t}\n\n\t\treturn Promise.all( pending );\n\n\t}\n\n}\n\n\n/**\n * Materials bump Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/EXT_materials_bump\n */\nclass GLTFMaterialsBumpExtension {\n\n\tconstructor( parser ) {\n\n\t\tthis.parser = parser;\n\t\tthis.name = EXTENSIONS.EXT_MATERIALS_BUMP;\n\n\t}\n\n\tgetMaterialType( materialIndex ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) return null;\n\n\t\treturn MeshPhysicalMaterial;\n\n\t}\n\n\textendMaterialParams( materialIndex, materialParams ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) {\n\n\t\t\treturn Promise.resolve();\n\n\t\t}\n\n\t\tconst pending = [];\n\n\t\tconst extension = materialDef.extensions[ this.name ];\n\n\t\tmaterialParams.bumpScale = extension.bumpFactor !== undefined ? extension.bumpFactor : 1.0;\n\n\t\tif ( extension.bumpTexture !== undefined ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'bumpMap', extension.bumpTexture ) );\n\n\t\t}\n\n\t\treturn Promise.all( pending );\n\n\t}\n\n}\n\n/**\n * Materials anisotropy Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_anisotropy\n */\nclass GLTFMaterialsAnisotropyExtension {\n\n\tconstructor( parser ) {\n\n\t\tthis.parser = parser;\n\t\tthis.name = EXTENSIONS.KHR_MATERIALS_ANISOTROPY;\n\n\t}\n\n\tgetMaterialType( materialIndex ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) return null;\n\n\t\treturn MeshPhysicalMaterial;\n\n\t}\n\n\textendMaterialParams( materialIndex, materialParams ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) {\n\n\t\t\treturn Promise.resolve();\n\n\t\t}\n\n\t\tconst pending = [];\n\n\t\tconst extension = materialDef.extensions[ this.name ];\n\n\t\tif ( extension.anisotropyStrength !== undefined ) {\n\n\t\t\tmaterialParams.anisotropy = extension.anisotropyStrength;\n\n\t\t}\n\n\t\tif ( extension.anisotropyRotation !== undefined ) {\n\n\t\t\tmaterialParams.anisotropyRotation = extension.anisotropyRotation;\n\n\t\t}\n\n\t\tif ( extension.anisotropyTexture !== undefined ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'anisotropyMap', extension.anisotropyTexture ) );\n\n\t\t}\n\n\t\treturn Promise.all( pending );\n\n\t}\n\n}\n\n/**\n * BasisU Texture Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_texture_basisu\n */\nclass GLTFTextureBasisUExtension {\n\n\tconstructor( parser ) {\n\n\t\tthis.parser = parser;\n\t\tthis.name = EXTENSIONS.KHR_TEXTURE_BASISU;\n\n\t}\n\n\tloadTexture( textureIndex ) {\n\n\t\tconst parser = this.parser;\n\t\tconst json = parser.json;\n\n\t\tconst textureDef = json.textures[ textureIndex ];\n\n\t\tif ( ! textureDef.extensions || ! textureDef.extensions[ this.name ] ) {\n\n\t\t\treturn null;\n\n\t\t}\n\n\t\tconst extension = textureDef.extensions[ this.name ];\n\t\tconst loader = parser.options.ktx2Loader;\n\n\t\tif ( ! loader ) {\n\n\t\t\tif ( json.extensionsRequired && json.extensionsRequired.indexOf( this.name ) >= 0 ) {\n\n\t\t\t\tthrow new Error( 'THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures' );\n\n\t\t\t} else {\n\n\t\t\t\t// Assumes that the extension is optional and that a fallback texture is present\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn parser.loadTextureImage( textureIndex, extension.source, loader );\n\n\t}\n\n}\n\n/**\n * WebP Texture Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Vendor/EXT_texture_webp\n */\nclass GLTFTextureWebPExtension {\n\n\tconstructor( parser ) {\n\n\t\tthis.parser = parser;\n\t\tthis.name = EXTENSIONS.EXT_TEXTURE_WEBP;\n\t\tthis.isSupported = null;\n\n\t}\n\n\tloadTexture( textureIndex ) {\n\n\t\tconst name = this.name;\n\t\tconst parser = this.parser;\n\t\tconst json = parser.json;\n\n\t\tconst textureDef = json.textures[ textureIndex ];\n\n\t\tif ( ! textureDef.extensions || ! textureDef.extensions[ name ] ) {\n\n\t\t\treturn null;\n\n\t\t}\n\n\t\tconst extension = textureDef.extensions[ name ];\n\t\tconst source = json.images[ extension.source ];\n\n\t\tlet loader = parser.textureLoader;\n\t\tif ( source.uri ) {\n\n\t\t\tconst handler = parser.options.manager.getHandler( source.uri );\n\t\t\tif ( handler !== null ) loader = handler;\n\n\t\t}\n\n\t\treturn this.detectSupport().then( function ( isSupported ) {\n\n\t\t\tif ( isSupported ) return parser.loadTextureImage( textureIndex, extension.source, loader );\n\n\t\t\tif ( json.extensionsRequired && json.extensionsRequired.indexOf( name ) >= 0 ) {\n\n\t\t\t\tthrow new Error( 'THREE.GLTFLoader: WebP required by asset but unsupported.' );\n\n\t\t\t}\n\n\t\t\t// Fall back to PNG or JPEG.\n\t\t\treturn parser.loadTexture( textureIndex );\n\n\t\t} );\n\n\t}\n\n\tdetectSupport() {\n\n\t\tif ( ! this.isSupported ) {\n\n\t\t\tthis.isSupported = new Promise( function ( resolve ) {\n\n\t\t\t\tconst image = new Image();\n\n\t\t\t\t// Lossy test image. Support for lossy images doesn't guarantee support for all\n\t\t\t\t// WebP images, unfortunately.\n\t\t\t\timage.src = 'data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA';\n\n\t\t\t\timage.onload = image.onerror = function () {\n\n\t\t\t\t\tresolve( image.height === 1 );\n\n\t\t\t\t};\n\n\t\t\t} );\n\n\t\t}\n\n\t\treturn this.isSupported;\n\n\t}\n\n}\n\n/**\n * AVIF Texture Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Vendor/EXT_texture_avif\n */\nclass GLTFTextureAVIFExtension {\n\n\tconstructor( parser ) {\n\n\t\tthis.parser = parser;\n\t\tthis.name = EXTENSIONS.EXT_TEXTURE_AVIF;\n\t\tthis.isSupported = null;\n\n\t}\n\n\tloadTexture( textureIndex ) {\n\n\t\tconst name = this.name;\n\t\tconst parser = this.parser;\n\t\tconst json = parser.json;\n\n\t\tconst textureDef = json.textures[ textureIndex ];\n\n\t\tif ( ! textureDef.extensions || ! textureDef.extensions[ name ] ) {\n\n\t\t\treturn null;\n\n\t\t}\n\n\t\tconst extension = textureDef.extensions[ name ];\n\t\tconst source = json.images[ extension.source ];\n\n\t\tlet loader = parser.textureLoader;\n\t\tif ( source.uri ) {\n\n\t\t\tconst handler = parser.options.manager.getHandler( source.uri );\n\t\t\tif ( handler !== null ) loader = handler;\n\n\t\t}\n\n\t\treturn this.detectSupport().then( function ( isSupported ) {\n\n\t\t\tif ( isSupported ) return parser.loadTextureImage( textureIndex, extension.source, loader );\n\n\t\t\tif ( json.extensionsRequired && json.extensionsRequired.indexOf( name ) >= 0 ) {\n\n\t\t\t\tthrow new Error( 'THREE.GLTFLoader: AVIF required by asset but unsupported.' );\n\n\t\t\t}\n\n\t\t\t// Fall back to PNG or JPEG.\n\t\t\treturn parser.loadTexture( textureIndex );\n\n\t\t} );\n\n\t}\n\n\tdetectSupport() {\n\n\t\tif ( ! this.isSupported ) {\n\n\t\t\tthis.isSupported = new Promise( function ( resolve ) {\n\n\t\t\t\tconst image = new Image();\n\n\t\t\t\t// Lossy test image.\n\t\t\t\timage.src = 'data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=';\n\t\t\t\timage.onload = image.onerror = function () {\n\n\t\t\t\t\tresolve( image.height === 1 );\n\n\t\t\t\t};\n\n\t\t\t} );\n\n\t\t}\n\n\t\treturn this.isSupported;\n\n\t}\n\n}\n\n/**\n * meshopt BufferView Compression Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Vendor/EXT_meshopt_compression\n */\nclass GLTFMeshoptCompression {\n\n\tconstructor( parser ) {\n\n\t\tthis.name = EXTENSIONS.EXT_MESHOPT_COMPRESSION;\n\t\tthis.parser = parser;\n\n\t}\n\n\tloadBufferView( index ) {\n\n\t\tconst json = this.parser.json;\n\t\tconst bufferView = json.bufferViews[ index ];\n\n\t\tif ( bufferView.extensions && bufferView.extensions[ this.name ] ) {\n\n\t\t\tconst extensionDef = bufferView.extensions[ this.name ];\n\n\t\t\tconst buffer = this.parser.getDependency( 'buffer', extensionDef.buffer );\n\t\t\tconst decoder = this.parser.options.meshoptDecoder;\n\n\t\t\tif ( ! decoder || ! decoder.supported ) {\n\n\t\t\t\tif ( json.extensionsRequired && json.extensionsRequired.indexOf( this.name ) >= 0 ) {\n\n\t\t\t\t\tthrow new Error( 'THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files' );\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// Assumes that the extension is optional and that fallback buffer data is present\n\t\t\t\t\treturn null;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn buffer.then( function ( res ) {\n\n\t\t\t\tconst byteOffset = extensionDef.byteOffset || 0;\n\t\t\t\tconst byteLength = extensionDef.byteLength || 0;\n\n\t\t\t\tconst count = extensionDef.count;\n\t\t\t\tconst stride = extensionDef.byteStride;\n\n\t\t\t\tconst source = new Uint8Array( res, byteOffset, byteLength );\n\n\t\t\t\tif ( decoder.decodeGltfBufferAsync ) {\n\n\t\t\t\t\treturn decoder.decodeGltfBufferAsync( count, stride, source, extensionDef.mode, extensionDef.filter ).then( function ( res ) {\n\n\t\t\t\t\t\treturn res.buffer;\n\n\t\t\t\t\t} );\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// Support for MeshoptDecoder 0.18 or earlier, without decodeGltfBufferAsync\n\t\t\t\t\treturn decoder.ready.then( function () {\n\n\t\t\t\t\t\tconst result = new ArrayBuffer( count * stride );\n\t\t\t\t\t\tdecoder.decodeGltfBuffer( new Uint8Array( result ), count, stride, source, extensionDef.mode, extensionDef.filter );\n\t\t\t\t\t\treturn result;\n\n\t\t\t\t\t} );\n\n\t\t\t\t}\n\n\t\t\t} );\n\n\t\t} else {\n\n\t\t\treturn null;\n\n\t\t}\n\n\t}\n\n}\n\n/**\n * GPU Instancing Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Vendor/EXT_mesh_gpu_instancing\n *\n */\nclass GLTFMeshGpuInstancing {\n\n\tconstructor( parser ) {\n\n\t\tthis.name = EXTENSIONS.EXT_MESH_GPU_INSTANCING;\n\t\tthis.parser = parser;\n\n\t}\n\n\tcreateNodeMesh( nodeIndex ) {\n\n\t\tconst json = this.parser.json;\n\t\tconst nodeDef = json.nodes[ nodeIndex ];\n\n\t\tif ( ! nodeDef.extensions || ! nodeDef.extensions[ this.name ] ||\n\t\t\tnodeDef.mesh === undefined ) {\n\n\t\t\treturn null;\n\n\t\t}\n\n\t\tconst meshDef = json.meshes[ nodeDef.mesh ];\n\n\t\t// No Points or Lines + Instancing support yet\n\n\t\tfor ( const primitive of meshDef.primitives ) {\n\n\t\t\tif ( primitive.mode !== WEBGL_CONSTANTS.TRIANGLES &&\n\t\t\t\t primitive.mode !== WEBGL_CONSTANTS.TRIANGLE_STRIP &&\n\t\t\t\t primitive.mode !== WEBGL_CONSTANTS.TRIANGLE_FAN &&\n\t\t\t\t primitive.mode !== undefined ) {\n\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t}\n\n\t\tconst extensionDef = nodeDef.extensions[ this.name ];\n\t\tconst attributesDef = extensionDef.attributes;\n\n\t\t// @TODO: Can we support InstancedMesh + SkinnedMesh?\n\n\t\tconst pending = [];\n\t\tconst attributes = {};\n\n\t\tfor ( const key in attributesDef ) {\n\n\t\t\tpending.push( this.parser.getDependency( 'accessor', attributesDef[ key ] ).then( accessor => {\n\n\t\t\t\tattributes[ key ] = accessor;\n\t\t\t\treturn attributes[ key ];\n\n\t\t\t} ) );\n\n\t\t}\n\n\t\tif ( pending.length < 1 ) {\n\n\t\t\treturn null;\n\n\t\t}\n\n\t\tpending.push( this.parser.createNodeMesh( nodeIndex ) );\n\n\t\treturn Promise.all( pending ).then( results => {\n\n\t\t\tconst nodeObject = results.pop();\n\t\t\tconst meshes = nodeObject.isGroup ? nodeObject.children : [ nodeObject ];\n\t\t\tconst count = results[ 0 ].count; // All attribute counts should be same\n\t\t\tconst instancedMeshes = [];\n\n\t\t\tfor ( const mesh of meshes ) {\n\n\t\t\t\t// Temporal variables\n\t\t\t\tconst m = new Matrix4();\n\t\t\t\tconst p = new Vector3();\n\t\t\t\tconst q = new Quaternion();\n\t\t\t\tconst s = new Vector3( 1, 1, 1 );\n\n\t\t\t\tconst instancedMesh = new InstancedMesh( mesh.geometry, mesh.material, count );\n\n\t\t\t\tfor ( let i = 0; i < count; i ++ ) {\n\n\t\t\t\t\tif ( attributes.TRANSLATION ) {\n\n\t\t\t\t\t\tp.fromBufferAttribute( attributes.TRANSLATION, i );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( attributes.ROTATION ) {\n\n\t\t\t\t\t\tq.fromBufferAttribute( attributes.ROTATION, i );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( attributes.SCALE ) {\n\n\t\t\t\t\t\ts.fromBufferAttribute( attributes.SCALE, i );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tinstancedMesh.setMatrixAt( i, m.compose( p, q, s ) );\n\n\t\t\t\t}\n\n\t\t\t\t// Add instance attributes to the geometry, excluding TRS.\n\t\t\t\tfor ( const attributeName in attributes ) {\n\n\t\t\t\t\tif ( attributeName === '_COLOR_0' ) {\n\n\t\t\t\t\t\tconst attr = attributes[ attributeName ];\n\t\t\t\t\t\tinstancedMesh.instanceColor = new InstancedBufferAttribute( attr.array, attr.itemSize, attr.normalized );\n\n\t\t\t\t\t} else if ( attributeName !== 'TRANSLATION' &&\n\t\t\t\t\t\t attributeName !== 'ROTATION' &&\n\t\t\t\t\t\t attributeName !== 'SCALE' ) {\n\n\t\t\t\t\t\tmesh.geometry.setAttribute( attributeName, attributes[ attributeName ] );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\t// Just in case\n\t\t\t\tObject3D.prototype.copy.call( instancedMesh, mesh );\n\n\t\t\t\tthis.parser.assignFinalMaterial( instancedMesh );\n\n\t\t\t\tinstancedMeshes.push( instancedMesh );\n\n\t\t\t}\n\n\t\t\tif ( nodeObject.isGroup ) {\n\n\t\t\t\tnodeObject.clear();\n\n\t\t\t\tnodeObject.add( ... instancedMeshes );\n\n\t\t\t\treturn nodeObject;\n\n\t\t\t}\n\n\t\t\treturn instancedMeshes[ 0 ];\n\n\t\t} );\n\n\t}\n\n}\n\n/* BINARY EXTENSION */\nconst BINARY_EXTENSION_HEADER_MAGIC = 'glTF';\nconst BINARY_EXTENSION_HEADER_LENGTH = 12;\nconst BINARY_EXTENSION_CHUNK_TYPES = { JSON: 0x4E4F534A, BIN: 0x004E4942 };\n\nclass GLTFBinaryExtension {\n\n\tconstructor( data ) {\n\n\t\tthis.name = EXTENSIONS.KHR_BINARY_GLTF;\n\t\tthis.content = null;\n\t\tthis.body = null;\n\n\t\tconst headerView = new DataView( data, 0, BINARY_EXTENSION_HEADER_LENGTH );\n\t\tconst textDecoder = new TextDecoder();\n\n\t\tthis.header = {\n\t\t\tmagic: textDecoder.decode( new Uint8Array( data.slice( 0, 4 ) ) ),\n\t\t\tversion: headerView.getUint32( 4, true ),\n\t\t\tlength: headerView.getUint32( 8, true )\n\t\t};\n\n\t\tif ( this.header.magic !== BINARY_EXTENSION_HEADER_MAGIC ) {\n\n\t\t\tthrow new Error( 'THREE.GLTFLoader: Unsupported glTF-Binary header.' );\n\n\t\t} else if ( this.header.version < 2.0 ) {\n\n\t\t\tthrow new Error( 'THREE.GLTFLoader: Legacy binary file detected.' );\n\n\t\t}\n\n\t\tconst chunkContentsLength = this.header.length - BINARY_EXTENSION_HEADER_LENGTH;\n\t\tconst chunkView = new DataView( data, BINARY_EXTENSION_HEADER_LENGTH );\n\t\tlet chunkIndex = 0;\n\n\t\twhile ( chunkIndex < chunkContentsLength ) {\n\n\t\t\tconst chunkLength = chunkView.getUint32( chunkIndex, true );\n\t\t\tchunkIndex += 4;\n\n\t\t\tconst chunkType = chunkView.getUint32( chunkIndex, true );\n\t\t\tchunkIndex += 4;\n\n\t\t\tif ( chunkType === BINARY_EXTENSION_CHUNK_TYPES.JSON ) {\n\n\t\t\t\tconst contentArray = new Uint8Array( data, BINARY_EXTENSION_HEADER_LENGTH + chunkIndex, chunkLength );\n\t\t\t\tthis.content = textDecoder.decode( contentArray );\n\n\t\t\t} else if ( chunkType === BINARY_EXTENSION_CHUNK_TYPES.BIN ) {\n\n\t\t\t\tconst byteOffset = BINARY_EXTENSION_HEADER_LENGTH + chunkIndex;\n\t\t\t\tthis.body = data.slice( byteOffset, byteOffset + chunkLength );\n\n\t\t\t}\n\n\t\t\t// Clients must ignore chunks with unknown types.\n\n\t\t\tchunkIndex += chunkLength;\n\n\t\t}\n\n\t\tif ( this.content === null ) {\n\n\t\t\tthrow new Error( 'THREE.GLTFLoader: JSON content not found.' );\n\n\t\t}\n\n\t}\n\n}\n\n/**\n * DRACO Mesh Compression Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_draco_mesh_compression\n */\nclass GLTFDracoMeshCompressionExtension {\n\n\tconstructor( json, dracoLoader ) {\n\n\t\tif ( ! dracoLoader ) {\n\n\t\t\tthrow new Error( 'THREE.GLTFLoader: No DRACOLoader instance provided.' );\n\n\t\t}\n\n\t\tthis.name = EXTENSIONS.KHR_DRACO_MESH_COMPRESSION;\n\t\tthis.json = json;\n\t\tthis.dracoLoader = dracoLoader;\n\t\tthis.dracoLoader.preload();\n\n\t}\n\n\tdecodePrimitive( primitive, parser ) {\n\n\t\tconst json = this.json;\n\t\tconst dracoLoader = this.dracoLoader;\n\t\tconst bufferViewIndex = primitive.extensions[ this.name ].bufferView;\n\t\tconst gltfAttributeMap = primitive.extensions[ this.name ].attributes;\n\t\tconst threeAttributeMap = {};\n\t\tconst attributeNormalizedMap = {};\n\t\tconst attributeTypeMap = {};\n\n\t\tfor ( const attributeName in gltfAttributeMap ) {\n\n\t\t\tconst threeAttributeName = ATTRIBUTES[ attributeName ] || attributeName.toLowerCase();\n\n\t\t\tthreeAttributeMap[ threeAttributeName ] = gltfAttributeMap[ attributeName ];\n\n\t\t}\n\n\t\tfor ( const attributeName in primitive.attributes ) {\n\n\t\t\tconst threeAttributeName = ATTRIBUTES[ attributeName ] || attributeName.toLowerCase();\n\n\t\t\tif ( gltfAttributeMap[ attributeName ] !== undefined ) {\n\n\t\t\t\tconst accessorDef = json.accessors[ primitive.attributes[ attributeName ] ];\n\t\t\t\tconst componentType = WEBGL_COMPONENT_TYPES[ accessorDef.componentType ];\n\n\t\t\t\tattributeTypeMap[ threeAttributeName ] = componentType.name;\n\t\t\t\tattributeNormalizedMap[ threeAttributeName ] = accessorDef.normalized === true;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn parser.getDependency( 'bufferView', bufferViewIndex ).then( function ( bufferView ) {\n\n\t\t\treturn new Promise( function ( resolve, reject ) {\n\n\t\t\t\tdracoLoader.decodeDracoFile( bufferView, function ( geometry ) {\n\n\t\t\t\t\tfor ( const attributeName in geometry.attributes ) {\n\n\t\t\t\t\t\tconst attribute = geometry.attributes[ attributeName ];\n\t\t\t\t\t\tconst normalized = attributeNormalizedMap[ attributeName ];\n\n\t\t\t\t\t\tif ( normalized !== undefined ) attribute.normalized = normalized;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tresolve( geometry );\n\n\t\t\t\t}, threeAttributeMap, attributeTypeMap, LinearSRGBColorSpace, reject );\n\n\t\t\t} );\n\n\t\t} );\n\n\t}\n\n}\n\n/**\n * Texture Transform Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_texture_transform\n */\nclass GLTFTextureTransformExtension {\n\n\tconstructor() {\n\n\t\tthis.name = EXTENSIONS.KHR_TEXTURE_TRANSFORM;\n\n\t}\n\n\textendTexture( texture, transform ) {\n\n\t\tif ( ( transform.texCoord === undefined || transform.texCoord === texture.channel )\n\t\t\t&& transform.offset === undefined\n\t\t\t&& transform.rotation === undefined\n\t\t\t&& transform.scale === undefined ) {\n\n\t\t\t// See https://github.com/mrdoob/three.js/issues/21819.\n\t\t\treturn texture;\n\n\t\t}\n\n\t\ttexture = texture.clone();\n\n\t\tif ( transform.texCoord !== undefined ) {\n\n\t\t\ttexture.channel = transform.texCoord;\n\n\t\t}\n\n\t\tif ( transform.offset !== undefined ) {\n\n\t\t\ttexture.offset.fromArray( transform.offset );\n\n\t\t}\n\n\t\tif ( transform.rotation !== undefined ) {\n\n\t\t\ttexture.rotation = transform.rotation;\n\n\t\t}\n\n\t\tif ( transform.scale !== undefined ) {\n\n\t\t\ttexture.repeat.fromArray( transform.scale );\n\n\t\t}\n\n\t\ttexture.needsUpdate = true;\n\n\t\treturn texture;\n\n\t}\n\n}\n\n/**\n * Mesh Quantization Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_mesh_quantization\n */\nclass GLTFMeshQuantizationExtension {\n\n\tconstructor() {\n\n\t\tthis.name = EXTENSIONS.KHR_MESH_QUANTIZATION;\n\n\t}\n\n}\n\n/*********************************/\n/********** INTERPOLATION ********/\n/*********************************/\n\n// Spline Interpolation\n// Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#appendix-c-spline-interpolation\nclass GLTFCubicSplineInterpolant extends Interpolant {\n\n\tconstructor( parameterPositions, sampleValues, sampleSize, resultBuffer ) {\n\n\t\tsuper( parameterPositions, sampleValues, sampleSize, resultBuffer );\n\n\t}\n\n\tcopySampleValue_( index ) {\n\n\t\t// Copies a sample value to the result buffer. See description of glTF\n\t\t// CUBICSPLINE values layout in interpolate_() function below.\n\n\t\tconst result = this.resultBuffer,\n\t\t\tvalues = this.sampleValues,\n\t\t\tvalueSize = this.valueSize,\n\t\t\toffset = index * valueSize * 3 + valueSize;\n\n\t\tfor ( let i = 0; i !== valueSize; i ++ ) {\n\n\t\t\tresult[ i ] = values[ offset + i ];\n\n\t\t}\n\n\t\treturn result;\n\n\t}\n\n\tinterpolate_( i1, t0, t, t1 ) {\n\n\t\tconst result = this.resultBuffer;\n\t\tconst values = this.sampleValues;\n\t\tconst stride = this.valueSize;\n\n\t\tconst stride2 = stride * 2;\n\t\tconst stride3 = stride * 3;\n\n\t\tconst td = t1 - t0;\n\n\t\tconst p = ( t - t0 ) / td;\n\t\tconst pp = p * p;\n\t\tconst ppp = pp * p;\n\n\t\tconst offset1 = i1 * stride3;\n\t\tconst offset0 = offset1 - stride3;\n\n\t\tconst s2 = -2 * ppp + 3 * pp;\n\t\tconst s3 = ppp - pp;\n\t\tconst s0 = 1 - s2;\n\t\tconst s1 = s3 - pp + p;\n\n\t\t// Layout of keyframe output values for CUBICSPLINE animations:\n\t\t//   [ inTangent_1, splineVertex_1, outTangent_1, inTangent_2, splineVertex_2, ... ]\n\t\tfor ( let i = 0; i !== stride; i ++ ) {\n\n\t\t\tconst p0 = values[ offset0 + i + stride ]; // splineVertex_k\n\t\t\tconst m0 = values[ offset0 + i + stride2 ] * td; // outTangent_k * (t_k+1 - t_k)\n\t\t\tconst p1 = values[ offset1 + i + stride ]; // splineVertex_k+1\n\t\t\tconst m1 = values[ offset1 + i ] * td; // inTangent_k+1 * (t_k+1 - t_k)\n\n\t\t\tresult[ i ] = s0 * p0 + s1 * m0 + s2 * p1 + s3 * m1;\n\n\t\t}\n\n\t\treturn result;\n\n\t}\n\n}\n\nconst _q = new Quaternion();\n\nclass GLTFCubicSplineQuaternionInterpolant extends GLTFCubicSplineInterpolant {\n\n\tinterpolate_( i1, t0, t, t1 ) {\n\n\t\tconst result = super.interpolate_( i1, t0, t, t1 );\n\n\t\t_q.fromArray( result ).normalize().toArray( result );\n\n\t\treturn result;\n\n\t}\n\n}\n\n\n/*********************************/\n/********** INTERNALS ************/\n/*********************************/\n\n/* CONSTANTS */\n\nconst WEBGL_CONSTANTS = {\n\tPOINTS: 0,\n\tLINES: 1,\n\tLINE_LOOP: 2,\n\tLINE_STRIP: 3,\n\tTRIANGLES: 4,\n\tTRIANGLE_STRIP: 5,\n\tTRIANGLE_FAN: 6};\n\nconst WEBGL_COMPONENT_TYPES = {\n\t5120: Int8Array,\n\t5121: Uint8Array,\n\t5122: Int16Array,\n\t5123: Uint16Array,\n\t5125: Uint32Array,\n\t5126: Float32Array\n};\n\nconst WEBGL_FILTERS = {\n\t9728: NearestFilter,\n\t9729: LinearFilter,\n\t9984: NearestMipmapNearestFilter,\n\t9985: LinearMipmapNearestFilter,\n\t9986: NearestMipmapLinearFilter,\n\t9987: LinearMipmapLinearFilter\n};\n\nconst WEBGL_WRAPPINGS = {\n\t33071: ClampToEdgeWrapping,\n\t33648: MirroredRepeatWrapping,\n\t10497: RepeatWrapping\n};\n\nconst WEBGL_TYPE_SIZES = {\n\t'SCALAR': 1,\n\t'VEC2': 2,\n\t'VEC3': 3,\n\t'VEC4': 4,\n\t'MAT2': 4,\n\t'MAT3': 9,\n\t'MAT4': 16\n};\n\nconst ATTRIBUTES = {\n\tPOSITION: 'position',\n\tNORMAL: 'normal',\n\tTANGENT: 'tangent',\n\tTEXCOORD_0: 'uv',\n\tTEXCOORD_1: 'uv1',\n\tTEXCOORD_2: 'uv2',\n\tTEXCOORD_3: 'uv3',\n\tCOLOR_0: 'color',\n\tWEIGHTS_0: 'skinWeight',\n\tJOINTS_0: 'skinIndex',\n};\n\nconst PATH_PROPERTIES = {\n\tscale: 'scale',\n\ttranslation: 'position',\n\trotation: 'quaternion',\n\tweights: 'morphTargetInfluences'\n};\n\nconst INTERPOLATION = {\n\tCUBICSPLINE: undefined, // We use a custom interpolant (GLTFCubicSplineInterpolation) for CUBICSPLINE tracks. Each\n\t\t                        // keyframe track will be initialized with a default interpolation type, then modified.\n\tLINEAR: InterpolateLinear,\n\tSTEP: InterpolateDiscrete\n};\n\nconst ALPHA_MODES = {\n\tOPAQUE: 'OPAQUE',\n\tMASK: 'MASK',\n\tBLEND: 'BLEND'\n};\n\n/**\n * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#default-material\n *\n * @param {Object<String, Material>} cache\n * @return {Material}\n */\nfunction createDefaultMaterial( cache ) {\n\n\tif ( cache[ 'DefaultMaterial' ] === undefined ) {\n\n\t\tcache[ 'DefaultMaterial' ] = new MeshStandardMaterial( {\n\t\t\tcolor: 0xFFFFFF,\n\t\t\temissive: 0x000000,\n\t\t\tmetalness: 1,\n\t\t\troughness: 1,\n\t\t\ttransparent: false,\n\t\t\tdepthTest: true,\n\t\t\tside: FrontSide\n\t\t} );\n\n\t}\n\n\treturn cache[ 'DefaultMaterial' ];\n\n}\n\nfunction addUnknownExtensionsToUserData( knownExtensions, object, objectDef ) {\n\n\t// Add unknown glTF extensions to an object's userData.\n\n\tfor ( const name in objectDef.extensions ) {\n\n\t\tif ( knownExtensions[ name ] === undefined ) {\n\n\t\t\tobject.userData.gltfExtensions = object.userData.gltfExtensions || {};\n\t\t\tobject.userData.gltfExtensions[ name ] = objectDef.extensions[ name ];\n\n\t\t}\n\n\t}\n\n}\n\n/**\n * @param {Object3D|Material|BufferGeometry} object\n * @param {GLTF.definition} gltfDef\n */\nfunction assignExtrasToUserData( object, gltfDef ) {\n\n\tif ( gltfDef.extras !== undefined ) {\n\n\t\tif ( typeof gltfDef.extras === 'object' ) {\n\n\t\t\tObject.assign( object.userData, gltfDef.extras );\n\n\t\t} else {\n\n\t\t\tconsole.warn( 'THREE.GLTFLoader: Ignoring primitive type .extras, ' + gltfDef.extras );\n\n\t\t}\n\n\t}\n\n}\n\n/**\n * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#morph-targets\n *\n * @param {BufferGeometry} geometry\n * @param {Array<GLTF.Target>} targets\n * @param {GLTFParser} parser\n * @return {Promise<BufferGeometry>}\n */\nfunction addMorphTargets( geometry, targets, parser ) {\n\n\tlet hasMorphPosition = false;\n\tlet hasMorphNormal = false;\n\tlet hasMorphColor = false;\n\n\tfor ( let i = 0, il = targets.length; i < il; i ++ ) {\n\n\t\tconst target = targets[ i ];\n\n\t\tif ( target.POSITION !== undefined ) hasMorphPosition = true;\n\t\tif ( target.NORMAL !== undefined ) hasMorphNormal = true;\n\t\tif ( target.COLOR_0 !== undefined ) hasMorphColor = true;\n\n\t\tif ( hasMorphPosition && hasMorphNormal && hasMorphColor ) break;\n\n\t}\n\n\tif ( ! hasMorphPosition && ! hasMorphNormal && ! hasMorphColor ) return Promise.resolve( geometry );\n\n\tconst pendingPositionAccessors = [];\n\tconst pendingNormalAccessors = [];\n\tconst pendingColorAccessors = [];\n\n\tfor ( let i = 0, il = targets.length; i < il; i ++ ) {\n\n\t\tconst target = targets[ i ];\n\n\t\tif ( hasMorphPosition ) {\n\n\t\t\tconst pendingAccessor = target.POSITION !== undefined\n\t\t\t\t? parser.getDependency( 'accessor', target.POSITION )\n\t\t\t\t: geometry.attributes.position;\n\n\t\t\tpendingPositionAccessors.push( pendingAccessor );\n\n\t\t}\n\n\t\tif ( hasMorphNormal ) {\n\n\t\t\tconst pendingAccessor = target.NORMAL !== undefined\n\t\t\t\t? parser.getDependency( 'accessor', target.NORMAL )\n\t\t\t\t: geometry.attributes.normal;\n\n\t\t\tpendingNormalAccessors.push( pendingAccessor );\n\n\t\t}\n\n\t\tif ( hasMorphColor ) {\n\n\t\t\tconst pendingAccessor = target.COLOR_0 !== undefined\n\t\t\t\t? parser.getDependency( 'accessor', target.COLOR_0 )\n\t\t\t\t: geometry.attributes.color;\n\n\t\t\tpendingColorAccessors.push( pendingAccessor );\n\n\t\t}\n\n\t}\n\n\treturn Promise.all( [\n\t\tPromise.all( pendingPositionAccessors ),\n\t\tPromise.all( pendingNormalAccessors ),\n\t\tPromise.all( pendingColorAccessors )\n\t] ).then( function ( accessors ) {\n\n\t\tconst morphPositions = accessors[ 0 ];\n\t\tconst morphNormals = accessors[ 1 ];\n\t\tconst morphColors = accessors[ 2 ];\n\n\t\tif ( hasMorphPosition ) geometry.morphAttributes.position = morphPositions;\n\t\tif ( hasMorphNormal ) geometry.morphAttributes.normal = morphNormals;\n\t\tif ( hasMorphColor ) geometry.morphAttributes.color = morphColors;\n\t\tgeometry.morphTargetsRelative = true;\n\n\t\treturn geometry;\n\n\t} );\n\n}\n\n/**\n * @param {Mesh} mesh\n * @param {GLTF.Mesh} meshDef\n */\nfunction updateMorphTargets( mesh, meshDef ) {\n\n\tmesh.updateMorphTargets();\n\n\tif ( meshDef.weights !== undefined ) {\n\n\t\tfor ( let i = 0, il = meshDef.weights.length; i < il; i ++ ) {\n\n\t\t\tmesh.morphTargetInfluences[ i ] = meshDef.weights[ i ];\n\n\t\t}\n\n\t}\n\n\t// .extras has user-defined data, so check that .extras.targetNames is an array.\n\tif ( meshDef.extras && Array.isArray( meshDef.extras.targetNames ) ) {\n\n\t\tconst targetNames = meshDef.extras.targetNames;\n\n\t\tif ( mesh.morphTargetInfluences.length === targetNames.length ) {\n\n\t\t\tmesh.morphTargetDictionary = {};\n\n\t\t\tfor ( let i = 0, il = targetNames.length; i < il; i ++ ) {\n\n\t\t\t\tmesh.morphTargetDictionary[ targetNames[ i ] ] = i;\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tconsole.warn( 'THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.' );\n\n\t\t}\n\n\t}\n\n}\n\nfunction createPrimitiveKey( primitiveDef ) {\n\n\tlet geometryKey;\n\n\tconst dracoExtension = primitiveDef.extensions && primitiveDef.extensions[ EXTENSIONS.KHR_DRACO_MESH_COMPRESSION ];\n\n\tif ( dracoExtension ) {\n\n\t\tgeometryKey = 'draco:' + dracoExtension.bufferView\n\t\t\t\t+ ':' + dracoExtension.indices\n\t\t\t\t+ ':' + createAttributesKey( dracoExtension.attributes );\n\n\t} else {\n\n\t\tgeometryKey = primitiveDef.indices + ':' + createAttributesKey( primitiveDef.attributes ) + ':' + primitiveDef.mode;\n\n\t}\n\n\tif ( primitiveDef.targets !== undefined ) {\n\n\t\tfor ( let i = 0, il = primitiveDef.targets.length; i < il; i ++ ) {\n\n\t\t\tgeometryKey += ':' + createAttributesKey( primitiveDef.targets[ i ] );\n\n\t\t}\n\n\t}\n\n\treturn geometryKey;\n\n}\n\nfunction createAttributesKey( attributes ) {\n\n\tlet attributesKey = '';\n\n\tconst keys = Object.keys( attributes ).sort();\n\n\tfor ( let i = 0, il = keys.length; i < il; i ++ ) {\n\n\t\tattributesKey += keys[ i ] + ':' + attributes[ keys[ i ] ] + ';';\n\n\t}\n\n\treturn attributesKey;\n\n}\n\nfunction getNormalizedComponentScale( constructor ) {\n\n\t// Reference:\n\t// https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_mesh_quantization#encoding-quantized-data\n\n\tswitch ( constructor ) {\n\n\t\tcase Int8Array:\n\t\t\treturn 1 / 127;\n\n\t\tcase Uint8Array:\n\t\t\treturn 1 / 255;\n\n\t\tcase Int16Array:\n\t\t\treturn 1 / 32767;\n\n\t\tcase Uint16Array:\n\t\t\treturn 1 / 65535;\n\n\t\tdefault:\n\t\t\tthrow new Error( 'THREE.GLTFLoader: Unsupported normalized accessor component type.' );\n\n\t}\n\n}\n\nfunction getImageURIMimeType( uri ) {\n\n\tif ( uri.search( /\\.jpe?g($|\\?)/i ) > 0 || uri.search( /^data\\:image\\/jpeg/ ) === 0 ) return 'image/jpeg';\n\tif ( uri.search( /\\.webp($|\\?)/i ) > 0 || uri.search( /^data\\:image\\/webp/ ) === 0 ) return 'image/webp';\n\tif ( uri.search( /\\.ktx2($|\\?)/i ) > 0 || uri.search( /^data\\:image\\/ktx2/ ) === 0 ) return 'image/ktx2';\n\n\treturn 'image/png';\n\n}\n\nconst _identityMatrix$1 = new Matrix4();\n\n/* GLTF PARSER */\n\nclass GLTFParser {\n\n\tconstructor( json = {}, options = {} ) {\n\n\t\tthis.json = json;\n\t\tthis.extensions = {};\n\t\tthis.plugins = {};\n\t\tthis.options = options;\n\n\t\t// loader object cache\n\t\tthis.cache = new GLTFRegistry();\n\n\t\t// associations between Three.js objects and glTF elements\n\t\tthis.associations = new Map();\n\n\t\t// BufferGeometry caching\n\t\tthis.primitiveCache = {};\n\n\t\t// Node cache\n\t\tthis.nodeCache = {};\n\n\t\t// Object3D instance caches\n\t\tthis.meshCache = { refs: {}, uses: {} };\n\t\tthis.cameraCache = { refs: {}, uses: {} };\n\t\tthis.lightCache = { refs: {}, uses: {} };\n\n\t\tthis.sourceCache = {};\n\t\tthis.textureCache = {};\n\n\t\t// Track node names, to ensure no duplicates\n\t\tthis.nodeNamesUsed = {};\n\n\t\t// Use an ImageBitmapLoader if imageBitmaps are supported. Moves much of the\n\t\t// expensive work of uploading a texture to the GPU off the main thread.\n\n\t\tlet isSafari = false;\n\t\tlet safariVersion = -1;\n\t\tlet isFirefox = false;\n\t\tlet firefoxVersion = -1;\n\n\t\tif ( typeof navigator !== 'undefined' ) {\n\n\t\t\tconst userAgent = navigator.userAgent;\n\n\t\t\tisSafari = /^((?!chrome|android).)*safari/i.test( userAgent ) === true;\n\t\t\tconst safariMatch = userAgent.match( /Version\\/(\\d+)/ );\n\t\t\tsafariVersion = isSafari && safariMatch ? parseInt( safariMatch[ 1 ], 10 ) : -1;\n\n\t\t\tisFirefox = userAgent.indexOf( 'Firefox' ) > -1;\n\t\t\tfirefoxVersion = isFirefox ? userAgent.match( /Firefox\\/([0-9]+)\\./ )[ 1 ] : -1;\n\n\t\t}\n\n\t\tif ( typeof createImageBitmap === 'undefined' || ( isSafari && safariVersion < 17 ) || ( isFirefox && firefoxVersion < 98 ) ) {\n\n\t\t\tthis.textureLoader = new TextureLoader( this.options.manager );\n\n\t\t} else {\n\n\t\t\tthis.textureLoader = new ImageBitmapLoader( this.options.manager );\n\n\t\t}\n\n\t\tthis.textureLoader.setCrossOrigin( this.options.crossOrigin );\n\t\tthis.textureLoader.setRequestHeader( this.options.requestHeader );\n\n\t\tthis.fileLoader = new FileLoader( this.options.manager );\n\t\tthis.fileLoader.setResponseType( 'arraybuffer' );\n\n\t\tif ( this.options.crossOrigin === 'use-credentials' ) {\n\n\t\t\tthis.fileLoader.setWithCredentials( true );\n\n\t\t}\n\n\t}\n\n\tsetExtensions( extensions ) {\n\n\t\tthis.extensions = extensions;\n\n\t}\n\n\tsetPlugins( plugins ) {\n\n\t\tthis.plugins = plugins;\n\n\t}\n\n\tparse( onLoad, onError ) {\n\n\t\tconst parser = this;\n\t\tconst json = this.json;\n\t\tconst extensions = this.extensions;\n\n\t\t// Clear the loader cache\n\t\tthis.cache.removeAll();\n\t\tthis.nodeCache = {};\n\n\t\t// Mark the special nodes/meshes in json for efficient parse\n\t\tthis._invokeAll( function ( ext ) {\n\n\t\t\treturn ext._markDefs && ext._markDefs();\n\n\t\t} );\n\n\t\tPromise.all( this._invokeAll( function ( ext ) {\n\n\t\t\treturn ext.beforeRoot && ext.beforeRoot();\n\n\t\t} ) ).then( function () {\n\n\t\t\treturn Promise.all( [\n\n\t\t\t\tparser.getDependencies( 'scene' ),\n\t\t\t\tparser.getDependencies( 'animation' ),\n\t\t\t\tparser.getDependencies( 'camera' ),\n\n\t\t\t] );\n\n\t\t} ).then( function ( dependencies ) {\n\n\t\t\tconst result = {\n\t\t\t\tscene: dependencies[ 0 ][ json.scene || 0 ],\n\t\t\t\tscenes: dependencies[ 0 ],\n\t\t\t\tanimations: dependencies[ 1 ],\n\t\t\t\tcameras: dependencies[ 2 ],\n\t\t\t\tasset: json.asset,\n\t\t\t\tparser: parser,\n\t\t\t\tuserData: {}\n\t\t\t};\n\n\t\t\taddUnknownExtensionsToUserData( extensions, result, json );\n\n\t\t\tassignExtrasToUserData( result, json );\n\n\t\t\treturn Promise.all( parser._invokeAll( function ( ext ) {\n\n\t\t\t\treturn ext.afterRoot && ext.afterRoot( result );\n\n\t\t\t} ) ).then( function () {\n\n\t\t\t\tfor ( const scene of result.scenes ) {\n\n\t\t\t\t\tscene.updateMatrixWorld();\n\n\t\t\t\t}\n\n\t\t\t\tonLoad( result );\n\n\t\t\t} );\n\n\t\t} ).catch( onError );\n\n\t}\n\n\t/**\n\t * Marks the special nodes/meshes in json for efficient parse.\n\t */\n\t_markDefs() {\n\n\t\tconst nodeDefs = this.json.nodes || [];\n\t\tconst skinDefs = this.json.skins || [];\n\t\tconst meshDefs = this.json.meshes || [];\n\n\t\t// Nothing in the node definition indicates whether it is a Bone or an\n\t\t// Object3D. Use the skins' joint references to mark bones.\n\t\tfor ( let skinIndex = 0, skinLength = skinDefs.length; skinIndex < skinLength; skinIndex ++ ) {\n\n\t\t\tconst joints = skinDefs[ skinIndex ].joints;\n\n\t\t\tfor ( let i = 0, il = joints.length; i < il; i ++ ) {\n\n\t\t\t\tnodeDefs[ joints[ i ] ].isBone = true;\n\n\t\t\t}\n\n\t\t}\n\n\t\t// Iterate over all nodes, marking references to shared resources,\n\t\t// as well as skeleton joints.\n\t\tfor ( let nodeIndex = 0, nodeLength = nodeDefs.length; nodeIndex < nodeLength; nodeIndex ++ ) {\n\n\t\t\tconst nodeDef = nodeDefs[ nodeIndex ];\n\n\t\t\tif ( nodeDef.mesh !== undefined ) {\n\n\t\t\t\tthis._addNodeRef( this.meshCache, nodeDef.mesh );\n\n\t\t\t\t// Nothing in the mesh definition indicates whether it is\n\t\t\t\t// a SkinnedMesh or Mesh. Use the node's mesh reference\n\t\t\t\t// to mark SkinnedMesh if node has skin.\n\t\t\t\tif ( nodeDef.skin !== undefined ) {\n\n\t\t\t\t\tmeshDefs[ nodeDef.mesh ].isSkinnedMesh = true;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( nodeDef.camera !== undefined ) {\n\n\t\t\t\tthis._addNodeRef( this.cameraCache, nodeDef.camera );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Counts references to shared node / Object3D resources. These resources\n\t * can be reused, or \"instantiated\", at multiple nodes in the scene\n\t * hierarchy. Mesh, Camera, and Light instances are instantiated and must\n\t * be marked. Non-scenegraph resources (like Materials, Geometries, and\n\t * Textures) can be reused directly and are not marked here.\n\t *\n\t * Example: CesiumMilkTruck sample model reuses \"Wheel\" meshes.\n\t *\n\t * @param {Object} cache\n\t * @param {Object3D} index\n\t */\n\t_addNodeRef( cache, index ) {\n\n\t\tif ( index === undefined ) return;\n\n\t\tif ( cache.refs[ index ] === undefined ) {\n\n\t\t\tcache.refs[ index ] = cache.uses[ index ] = 0;\n\n\t\t}\n\n\t\tcache.refs[ index ] ++;\n\n\t}\n\n\t/**\n\t * Returns a reference to a shared resource, cloning it if necessary.\n\t *\n\t * @param {Object} cache\n\t * @param {number} index\n\t * @param {Object} object\n\t * @return {Object}\n\t */\n\t_getNodeRef( cache, index, object ) {\n\n\t\tif ( cache.refs[ index ] <= 1 ) return object;\n\n\t\tconst ref = object.clone();\n\n\t\t// Propagates mappings to the cloned object, prevents mappings on the\n\t\t// original object from being lost.\n\t\tconst updateMappings = ( original, clone ) => {\n\n\t\t\tconst mappings = this.associations.get( original );\n\t\t\tif ( mappings != null ) {\n\n\t\t\t\tthis.associations.set( clone, mappings );\n\n\t\t\t}\n\n\t\t\tfor ( const [ i, child ] of original.children.entries() ) {\n\n\t\t\t\tupdateMappings( child, clone.children[ i ] );\n\n\t\t\t}\n\n\t\t};\n\n\t\tupdateMappings( object, ref );\n\n\t\tref.name += '_instance_' + ( cache.uses[ index ] ++ );\n\n\t\treturn ref;\n\n\t}\n\n\t_invokeOne( func ) {\n\n\t\tconst extensions = Object.values( this.plugins );\n\t\textensions.push( this );\n\n\t\tfor ( let i = 0; i < extensions.length; i ++ ) {\n\n\t\t\tconst result = func( extensions[ i ] );\n\n\t\t\tif ( result ) return result;\n\n\t\t}\n\n\t\treturn null;\n\n\t}\n\n\t_invokeAll( func ) {\n\n\t\tconst extensions = Object.values( this.plugins );\n\t\textensions.unshift( this );\n\n\t\tconst pending = [];\n\n\t\tfor ( let i = 0; i < extensions.length; i ++ ) {\n\n\t\t\tconst result = func( extensions[ i ] );\n\n\t\t\tif ( result ) pending.push( result );\n\n\t\t}\n\n\t\treturn pending;\n\n\t}\n\n\t/**\n\t * Requests the specified dependency asynchronously, with caching.\n\t * @param {string} type\n\t * @param {number} index\n\t * @return {Promise<Object3D|Material|THREE.Texture|AnimationClip|ArrayBuffer|Object>}\n\t */\n\tgetDependency( type, index ) {\n\n\t\tconst cacheKey = type + ':' + index;\n\t\tlet dependency = this.cache.get( cacheKey );\n\n\t\tif ( ! dependency ) {\n\n\t\t\tswitch ( type ) {\n\n\t\t\t\tcase 'scene':\n\t\t\t\t\tdependency = this.loadScene( index );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'node':\n\t\t\t\t\tdependency = this._invokeOne( function ( ext ) {\n\n\t\t\t\t\t\treturn ext.loadNode && ext.loadNode( index );\n\n\t\t\t\t\t} );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'mesh':\n\t\t\t\t\tdependency = this._invokeOne( function ( ext ) {\n\n\t\t\t\t\t\treturn ext.loadMesh && ext.loadMesh( index );\n\n\t\t\t\t\t} );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'accessor':\n\t\t\t\t\tdependency = this.loadAccessor( index );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'bufferView':\n\t\t\t\t\tdependency = this._invokeOne( function ( ext ) {\n\n\t\t\t\t\t\treturn ext.loadBufferView && ext.loadBufferView( index );\n\n\t\t\t\t\t} );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'buffer':\n\t\t\t\t\tdependency = this.loadBuffer( index );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'material':\n\t\t\t\t\tdependency = this._invokeOne( function ( ext ) {\n\n\t\t\t\t\t\treturn ext.loadMaterial && ext.loadMaterial( index );\n\n\t\t\t\t\t} );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'texture':\n\t\t\t\t\tdependency = this._invokeOne( function ( ext ) {\n\n\t\t\t\t\t\treturn ext.loadTexture && ext.loadTexture( index );\n\n\t\t\t\t\t} );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'skin':\n\t\t\t\t\tdependency = this.loadSkin( index );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'animation':\n\t\t\t\t\tdependency = this._invokeOne( function ( ext ) {\n\n\t\t\t\t\t\treturn ext.loadAnimation && ext.loadAnimation( index );\n\n\t\t\t\t\t} );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'camera':\n\t\t\t\t\tdependency = this.loadCamera( index );\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\tdependency = this._invokeOne( function ( ext ) {\n\n\t\t\t\t\t\treturn ext != this && ext.getDependency && ext.getDependency( type, index );\n\n\t\t\t\t\t} );\n\n\t\t\t\t\tif ( ! dependency ) {\n\n\t\t\t\t\t\tthrow new Error( 'Unknown type: ' + type );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t\tthis.cache.add( cacheKey, dependency );\n\n\t\t}\n\n\t\treturn dependency;\n\n\t}\n\n\t/**\n\t * Requests all dependencies of the specified type asynchronously, with caching.\n\t * @param {string} type\n\t * @return {Promise<Array<Object>>}\n\t */\n\tgetDependencies( type ) {\n\n\t\tlet dependencies = this.cache.get( type );\n\n\t\tif ( ! dependencies ) {\n\n\t\t\tconst parser = this;\n\t\t\tconst defs = this.json[ type + ( type === 'mesh' ? 'es' : 's' ) ] || [];\n\n\t\t\tdependencies = Promise.all( defs.map( function ( def, index ) {\n\n\t\t\t\treturn parser.getDependency( type, index );\n\n\t\t\t} ) );\n\n\t\t\tthis.cache.add( type, dependencies );\n\n\t\t}\n\n\t\treturn dependencies;\n\n\t}\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#buffers-and-buffer-views\n\t * @param {number} bufferIndex\n\t * @return {Promise<ArrayBuffer>}\n\t */\n\tloadBuffer( bufferIndex ) {\n\n\t\tconst bufferDef = this.json.buffers[ bufferIndex ];\n\t\tconst loader = this.fileLoader;\n\n\t\tif ( bufferDef.type && bufferDef.type !== 'arraybuffer' ) {\n\n\t\t\tthrow new Error( 'THREE.GLTFLoader: ' + bufferDef.type + ' buffer type is not supported.' );\n\n\t\t}\n\n\t\t// If present, GLB container is required to be the first buffer.\n\t\tif ( bufferDef.uri === undefined && bufferIndex === 0 ) {\n\n\t\t\treturn Promise.resolve( this.extensions[ EXTENSIONS.KHR_BINARY_GLTF ].body );\n\n\t\t}\n\n\t\tconst options = this.options;\n\n\t\treturn new Promise( function ( resolve, reject ) {\n\n\t\t\tloader.load( LoaderUtils.resolveURL( bufferDef.uri, options.path ), resolve, undefined, function () {\n\n\t\t\t\treject( new Error( 'THREE.GLTFLoader: Failed to load buffer \"' + bufferDef.uri + '\".' ) );\n\n\t\t\t} );\n\n\t\t} );\n\n\t}\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#buffers-and-buffer-views\n\t * @param {number} bufferViewIndex\n\t * @return {Promise<ArrayBuffer>}\n\t */\n\tloadBufferView( bufferViewIndex ) {\n\n\t\tconst bufferViewDef = this.json.bufferViews[ bufferViewIndex ];\n\n\t\treturn this.getDependency( 'buffer', bufferViewDef.buffer ).then( function ( buffer ) {\n\n\t\t\tconst byteLength = bufferViewDef.byteLength || 0;\n\t\t\tconst byteOffset = bufferViewDef.byteOffset || 0;\n\t\t\treturn buffer.slice( byteOffset, byteOffset + byteLength );\n\n\t\t} );\n\n\t}\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#accessors\n\t * @param {number} accessorIndex\n\t * @return {Promise<BufferAttribute|InterleavedBufferAttribute>}\n\t */\n\tloadAccessor( accessorIndex ) {\n\n\t\tconst parser = this;\n\t\tconst json = this.json;\n\n\t\tconst accessorDef = this.json.accessors[ accessorIndex ];\n\n\t\tif ( accessorDef.bufferView === undefined && accessorDef.sparse === undefined ) {\n\n\t\t\tconst itemSize = WEBGL_TYPE_SIZES[ accessorDef.type ];\n\t\t\tconst TypedArray = WEBGL_COMPONENT_TYPES[ accessorDef.componentType ];\n\t\t\tconst normalized = accessorDef.normalized === true;\n\n\t\t\tconst array = new TypedArray( accessorDef.count * itemSize );\n\t\t\treturn Promise.resolve( new BufferAttribute( array, itemSize, normalized ) );\n\n\t\t}\n\n\t\tconst pendingBufferViews = [];\n\n\t\tif ( accessorDef.bufferView !== undefined ) {\n\n\t\t\tpendingBufferViews.push( this.getDependency( 'bufferView', accessorDef.bufferView ) );\n\n\t\t} else {\n\n\t\t\tpendingBufferViews.push( null );\n\n\t\t}\n\n\t\tif ( accessorDef.sparse !== undefined ) {\n\n\t\t\tpendingBufferViews.push( this.getDependency( 'bufferView', accessorDef.sparse.indices.bufferView ) );\n\t\t\tpendingBufferViews.push( this.getDependency( 'bufferView', accessorDef.sparse.values.bufferView ) );\n\n\t\t}\n\n\t\treturn Promise.all( pendingBufferViews ).then( function ( bufferViews ) {\n\n\t\t\tconst bufferView = bufferViews[ 0 ];\n\n\t\t\tconst itemSize = WEBGL_TYPE_SIZES[ accessorDef.type ];\n\t\t\tconst TypedArray = WEBGL_COMPONENT_TYPES[ accessorDef.componentType ];\n\n\t\t\t// For VEC3: itemSize is 3, elementBytes is 4, itemBytes is 12.\n\t\t\tconst elementBytes = TypedArray.BYTES_PER_ELEMENT;\n\t\t\tconst itemBytes = elementBytes * itemSize;\n\t\t\tconst byteOffset = accessorDef.byteOffset || 0;\n\t\t\tconst byteStride = accessorDef.bufferView !== undefined ? json.bufferViews[ accessorDef.bufferView ].byteStride : undefined;\n\t\t\tconst normalized = accessorDef.normalized === true;\n\t\t\tlet array, bufferAttribute;\n\n\t\t\t// The buffer is not interleaved if the stride is the item size in bytes.\n\t\t\tif ( byteStride && byteStride !== itemBytes ) {\n\n\t\t\t\t// Each \"slice\" of the buffer, as defined by 'count' elements of 'byteStride' bytes, gets its own InterleavedBuffer\n\t\t\t\t// This makes sure that IBA.count reflects accessor.count properly\n\t\t\t\tconst ibSlice = Math.floor( byteOffset / byteStride );\n\t\t\t\tconst ibCacheKey = 'InterleavedBuffer:' + accessorDef.bufferView + ':' + accessorDef.componentType + ':' + ibSlice + ':' + accessorDef.count;\n\t\t\t\tlet ib = parser.cache.get( ibCacheKey );\n\n\t\t\t\tif ( ! ib ) {\n\n\t\t\t\t\tarray = new TypedArray( bufferView, ibSlice * byteStride, accessorDef.count * byteStride / elementBytes );\n\n\t\t\t\t\t// Integer parameters to IB/IBA are in array elements, not bytes.\n\t\t\t\t\tib = new InterleavedBuffer( array, byteStride / elementBytes );\n\n\t\t\t\t\tparser.cache.add( ibCacheKey, ib );\n\n\t\t\t\t}\n\n\t\t\t\tbufferAttribute = new InterleavedBufferAttribute( ib, itemSize, ( byteOffset % byteStride ) / elementBytes, normalized );\n\n\t\t\t} else {\n\n\t\t\t\tif ( bufferView === null ) {\n\n\t\t\t\t\tarray = new TypedArray( accessorDef.count * itemSize );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tarray = new TypedArray( bufferView, byteOffset, accessorDef.count * itemSize );\n\n\t\t\t\t}\n\n\t\t\t\tbufferAttribute = new BufferAttribute( array, itemSize, normalized );\n\n\t\t\t}\n\n\t\t\t// https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#sparse-accessors\n\t\t\tif ( accessorDef.sparse !== undefined ) {\n\n\t\t\t\tconst itemSizeIndices = WEBGL_TYPE_SIZES.SCALAR;\n\t\t\t\tconst TypedArrayIndices = WEBGL_COMPONENT_TYPES[ accessorDef.sparse.indices.componentType ];\n\n\t\t\t\tconst byteOffsetIndices = accessorDef.sparse.indices.byteOffset || 0;\n\t\t\t\tconst byteOffsetValues = accessorDef.sparse.values.byteOffset || 0;\n\n\t\t\t\tconst sparseIndices = new TypedArrayIndices( bufferViews[ 1 ], byteOffsetIndices, accessorDef.sparse.count * itemSizeIndices );\n\t\t\t\tconst sparseValues = new TypedArray( bufferViews[ 2 ], byteOffsetValues, accessorDef.sparse.count * itemSize );\n\n\t\t\t\tif ( bufferView !== null ) {\n\n\t\t\t\t\t// Avoid modifying the original ArrayBuffer, if the bufferView wasn't initialized with zeroes.\n\t\t\t\t\tbufferAttribute = new BufferAttribute( bufferAttribute.array.slice(), bufferAttribute.itemSize, bufferAttribute.normalized );\n\n\t\t\t\t}\n\n\t\t\t\t// Ignore normalized since we copy from sparse\n\t\t\t\tbufferAttribute.normalized = false;\n\n\t\t\t\tfor ( let i = 0, il = sparseIndices.length; i < il; i ++ ) {\n\n\t\t\t\t\tconst index = sparseIndices[ i ];\n\n\t\t\t\t\tbufferAttribute.setX( index, sparseValues[ i * itemSize ] );\n\t\t\t\t\tif ( itemSize >= 2 ) bufferAttribute.setY( index, sparseValues[ i * itemSize + 1 ] );\n\t\t\t\t\tif ( itemSize >= 3 ) bufferAttribute.setZ( index, sparseValues[ i * itemSize + 2 ] );\n\t\t\t\t\tif ( itemSize >= 4 ) bufferAttribute.setW( index, sparseValues[ i * itemSize + 3 ] );\n\t\t\t\t\tif ( itemSize >= 5 ) throw new Error( 'THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.' );\n\n\t\t\t\t}\n\n\t\t\t\tbufferAttribute.normalized = normalized;\n\n\t\t\t}\n\n\t\t\treturn bufferAttribute;\n\n\t\t} );\n\n\t}\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#textures\n\t * @param {number} textureIndex\n\t * @return {Promise<THREE.Texture|null>}\n\t */\n\tloadTexture( textureIndex ) {\n\n\t\tconst json = this.json;\n\t\tconst options = this.options;\n\t\tconst textureDef = json.textures[ textureIndex ];\n\t\tconst sourceIndex = textureDef.source;\n\t\tconst sourceDef = json.images[ sourceIndex ];\n\n\t\tlet loader = this.textureLoader;\n\n\t\tif ( sourceDef.uri ) {\n\n\t\t\tconst handler = options.manager.getHandler( sourceDef.uri );\n\t\t\tif ( handler !== null ) loader = handler;\n\n\t\t}\n\n\t\treturn this.loadTextureImage( textureIndex, sourceIndex, loader );\n\n\t}\n\n\tloadTextureImage( textureIndex, sourceIndex, loader ) {\n\n\t\tconst parser = this;\n\t\tconst json = this.json;\n\n\t\tconst textureDef = json.textures[ textureIndex ];\n\t\tconst sourceDef = json.images[ sourceIndex ];\n\n\t\tconst cacheKey = ( sourceDef.uri || sourceDef.bufferView ) + ':' + textureDef.sampler;\n\n\t\tif ( this.textureCache[ cacheKey ] ) {\n\n\t\t\t// See https://github.com/mrdoob/three.js/issues/21559.\n\t\t\treturn this.textureCache[ cacheKey ];\n\n\t\t}\n\n\t\tconst promise = this.loadImageSource( sourceIndex, loader ).then( function ( texture ) {\n\n\t\t\ttexture.flipY = false;\n\n\t\t\ttexture.name = textureDef.name || sourceDef.name || '';\n\n\t\t\tif ( texture.name === '' && typeof sourceDef.uri === 'string' && sourceDef.uri.startsWith( 'data:image/' ) === false ) {\n\n\t\t\t\ttexture.name = sourceDef.uri;\n\n\t\t\t}\n\n\t\t\tconst samplers = json.samplers || {};\n\t\t\tconst sampler = samplers[ textureDef.sampler ] || {};\n\n\t\t\ttexture.magFilter = WEBGL_FILTERS[ sampler.magFilter ] || LinearFilter;\n\t\t\ttexture.minFilter = WEBGL_FILTERS[ sampler.minFilter ] || LinearMipmapLinearFilter;\n\t\t\ttexture.wrapS = WEBGL_WRAPPINGS[ sampler.wrapS ] || RepeatWrapping;\n\t\t\ttexture.wrapT = WEBGL_WRAPPINGS[ sampler.wrapT ] || RepeatWrapping;\n\t\t\ttexture.generateMipmaps = ! texture.isCompressedTexture && texture.minFilter !== NearestFilter && texture.minFilter !== LinearFilter;\n\n\t\t\tparser.associations.set( texture, { textures: textureIndex } );\n\n\t\t\treturn texture;\n\n\t\t} ).catch( function () {\n\n\t\t\treturn null;\n\n\t\t} );\n\n\t\tthis.textureCache[ cacheKey ] = promise;\n\n\t\treturn promise;\n\n\t}\n\n\tloadImageSource( sourceIndex, loader ) {\n\n\t\tconst parser = this;\n\t\tconst json = this.json;\n\t\tconst options = this.options;\n\n\t\tif ( this.sourceCache[ sourceIndex ] !== undefined ) {\n\n\t\t\treturn this.sourceCache[ sourceIndex ].then( ( texture ) => texture.clone() );\n\n\t\t}\n\n\t\tconst sourceDef = json.images[ sourceIndex ];\n\n\t\tconst URL = self.URL || self.webkitURL;\n\n\t\tlet sourceURI = sourceDef.uri || '';\n\t\tlet isObjectURL = false;\n\n\t\tif ( sourceDef.bufferView !== undefined ) {\n\n\t\t\t// Load binary image data from bufferView, if provided.\n\n\t\t\tsourceURI = parser.getDependency( 'bufferView', sourceDef.bufferView ).then( function ( bufferView ) {\n\n\t\t\t\tisObjectURL = true;\n\t\t\t\tconst blob = new Blob( [ bufferView ], { type: sourceDef.mimeType } );\n\t\t\t\tsourceURI = URL.createObjectURL( blob );\n\t\t\t\treturn sourceURI;\n\n\t\t\t} );\n\n\t\t} else if ( sourceDef.uri === undefined ) {\n\n\t\t\tthrow new Error( 'THREE.GLTFLoader: Image ' + sourceIndex + ' is missing URI and bufferView' );\n\n\t\t}\n\n\t\tconst promise = Promise.resolve( sourceURI ).then( function ( sourceURI ) {\n\n\t\t\treturn new Promise( function ( resolve, reject ) {\n\n\t\t\t\tlet onLoad = resolve;\n\n\t\t\t\tif ( loader.isImageBitmapLoader === true ) {\n\n\t\t\t\t\tonLoad = function ( imageBitmap ) {\n\n\t\t\t\t\t\tconst texture = new Texture( imageBitmap );\n\t\t\t\t\t\ttexture.needsUpdate = true;\n\n\t\t\t\t\t\tresolve( texture );\n\n\t\t\t\t\t};\n\n\t\t\t\t}\n\n\t\t\t\tloader.load( LoaderUtils.resolveURL( sourceURI, options.path ), onLoad, undefined, reject );\n\n\t\t\t} );\n\n\t\t} ).then( function ( texture ) {\n\n\t\t\t// Clean up resources and configure Texture.\n\n\t\t\tif ( isObjectURL === true ) {\n\n\t\t\t\tURL.revokeObjectURL( sourceURI );\n\n\t\t\t}\n\n\t\t\tassignExtrasToUserData( texture, sourceDef );\n\n\t\t\ttexture.userData.mimeType = sourceDef.mimeType || getImageURIMimeType( sourceDef.uri );\n\n\t\t\treturn texture;\n\n\t\t} ).catch( function ( error ) {\n\n\t\t\tconsole.error( 'THREE.GLTFLoader: Couldn\\'t load texture', sourceURI );\n\t\t\tthrow error;\n\n\t\t} );\n\n\t\tthis.sourceCache[ sourceIndex ] = promise;\n\t\treturn promise;\n\n\t}\n\n\t/**\n\t * Asynchronously assigns a texture to the given material parameters.\n\t *\n\t * @param {Object} materialParams\n\t * @param {string} mapName\n\t * @param {Object} mapDef\n\t * @param {string} colorSpace\n\t * @return {Promise<Texture>}\n\t */\n\tassignTexture( materialParams, mapName, mapDef, colorSpace ) {\n\n\t\tconst parser = this;\n\n\t\treturn this.getDependency( 'texture', mapDef.index ).then( function ( texture ) {\n\n\t\t\tif ( ! texture ) return null;\n\n\t\t\tif ( mapDef.texCoord !== undefined && mapDef.texCoord > 0 ) {\n\n\t\t\t\ttexture = texture.clone();\n\t\t\t\ttexture.channel = mapDef.texCoord;\n\n\t\t\t}\n\n\t\t\tif ( parser.extensions[ EXTENSIONS.KHR_TEXTURE_TRANSFORM ] ) {\n\n\t\t\t\tconst transform = mapDef.extensions !== undefined ? mapDef.extensions[ EXTENSIONS.KHR_TEXTURE_TRANSFORM ] : undefined;\n\n\t\t\t\tif ( transform ) {\n\n\t\t\t\t\tconst gltfReference = parser.associations.get( texture );\n\t\t\t\t\ttexture = parser.extensions[ EXTENSIONS.KHR_TEXTURE_TRANSFORM ].extendTexture( texture, transform );\n\t\t\t\t\tparser.associations.set( texture, gltfReference );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( colorSpace !== undefined ) {\n\n\t\t\t\ttexture.colorSpace = colorSpace;\n\n\t\t\t}\n\n\t\t\tmaterialParams[ mapName ] = texture;\n\n\t\t\treturn texture;\n\n\t\t} );\n\n\t}\n\n\t/**\n\t * Assigns final material to a Mesh, Line, or Points instance. The instance\n\t * already has a material (generated from the glTF material options alone)\n\t * but reuse of the same glTF material may require multiple threejs materials\n\t * to accommodate different primitive types, defines, etc. New materials will\n\t * be created if necessary, and reused from a cache.\n\t * @param  {Object3D} mesh Mesh, Line, or Points instance.\n\t */\n\tassignFinalMaterial( mesh ) {\n\n\t\tconst geometry = mesh.geometry;\n\t\tlet material = mesh.material;\n\n\t\tconst useDerivativeTangents = geometry.attributes.tangent === undefined;\n\t\tconst useVertexColors = geometry.attributes.color !== undefined;\n\t\tconst useFlatShading = geometry.attributes.normal === undefined;\n\n\t\tif ( mesh.isPoints ) {\n\n\t\t\tconst cacheKey = 'PointsMaterial:' + material.uuid;\n\n\t\t\tlet pointsMaterial = this.cache.get( cacheKey );\n\n\t\t\tif ( ! pointsMaterial ) {\n\n\t\t\t\tpointsMaterial = new PointsMaterial();\n\t\t\t\tMaterial.prototype.copy.call( pointsMaterial, material );\n\t\t\t\tpointsMaterial.color.copy( material.color );\n\t\t\t\tpointsMaterial.map = material.map;\n\t\t\t\tpointsMaterial.sizeAttenuation = false; // glTF spec says points should be 1px\n\n\t\t\t\tthis.cache.add( cacheKey, pointsMaterial );\n\n\t\t\t}\n\n\t\t\tmaterial = pointsMaterial;\n\n\t\t} else if ( mesh.isLine ) {\n\n\t\t\tconst cacheKey = 'LineBasicMaterial:' + material.uuid;\n\n\t\t\tlet lineMaterial = this.cache.get( cacheKey );\n\n\t\t\tif ( ! lineMaterial ) {\n\n\t\t\t\tlineMaterial = new LineBasicMaterial();\n\t\t\t\tMaterial.prototype.copy.call( lineMaterial, material );\n\t\t\t\tlineMaterial.color.copy( material.color );\n\t\t\t\tlineMaterial.map = material.map;\n\n\t\t\t\tthis.cache.add( cacheKey, lineMaterial );\n\n\t\t\t}\n\n\t\t\tmaterial = lineMaterial;\n\n\t\t}\n\n\t\t// Clone the material if it will be modified\n\t\tif ( useDerivativeTangents || useVertexColors || useFlatShading ) {\n\n\t\t\tlet cacheKey = 'ClonedMaterial:' + material.uuid + ':';\n\n\t\t\tif ( useDerivativeTangents ) cacheKey += 'derivative-tangents:';\n\t\t\tif ( useVertexColors ) cacheKey += 'vertex-colors:';\n\t\t\tif ( useFlatShading ) cacheKey += 'flat-shading:';\n\n\t\t\tlet cachedMaterial = this.cache.get( cacheKey );\n\n\t\t\tif ( ! cachedMaterial ) {\n\n\t\t\t\tcachedMaterial = material.clone();\n\n\t\t\t\tif ( useVertexColors ) cachedMaterial.vertexColors = true;\n\t\t\t\tif ( useFlatShading ) cachedMaterial.flatShading = true;\n\n\t\t\t\tif ( useDerivativeTangents ) {\n\n\t\t\t\t\t// https://github.com/mrdoob/three.js/issues/11438#issuecomment-507003995\n\t\t\t\t\tif ( cachedMaterial.normalScale ) cachedMaterial.normalScale.y *= -1;\n\t\t\t\t\tif ( cachedMaterial.clearcoatNormalScale ) cachedMaterial.clearcoatNormalScale.y *= -1;\n\n\t\t\t\t}\n\n\t\t\t\tthis.cache.add( cacheKey, cachedMaterial );\n\n\t\t\t\tthis.associations.set( cachedMaterial, this.associations.get( material ) );\n\n\t\t\t}\n\n\t\t\tmaterial = cachedMaterial;\n\n\t\t}\n\n\t\tmesh.material = material;\n\n\t}\n\n\tgetMaterialType( /* materialIndex */ ) {\n\n\t\treturn MeshStandardMaterial;\n\n\t}\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#materials\n\t * @param {number} materialIndex\n\t * @return {Promise<Material>}\n\t */\n\tloadMaterial( materialIndex ) {\n\n\t\tconst parser = this;\n\t\tconst json = this.json;\n\t\tconst extensions = this.extensions;\n\t\tconst materialDef = json.materials[ materialIndex ];\n\n\t\tlet materialType;\n\t\tconst materialParams = {};\n\t\tconst materialExtensions = materialDef.extensions || {};\n\n\t\tconst pending = [];\n\n\t\tif ( materialExtensions[ EXTENSIONS.KHR_MATERIALS_UNLIT ] ) {\n\n\t\t\tconst kmuExtension = extensions[ EXTENSIONS.KHR_MATERIALS_UNLIT ];\n\t\t\tmaterialType = kmuExtension.getMaterialType();\n\t\t\tpending.push( kmuExtension.extendParams( materialParams, materialDef, parser ) );\n\n\t\t} else {\n\n\t\t\t// Specification:\n\t\t\t// https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#metallic-roughness-material\n\n\t\t\tconst metallicRoughness = materialDef.pbrMetallicRoughness || {};\n\n\t\t\tmaterialParams.color = new Color( 1.0, 1.0, 1.0 );\n\t\t\tmaterialParams.opacity = 1.0;\n\n\t\t\tif ( Array.isArray( metallicRoughness.baseColorFactor ) ) {\n\n\t\t\t\tconst array = metallicRoughness.baseColorFactor;\n\n\t\t\t\tmaterialParams.color.setRGB( array[ 0 ], array[ 1 ], array[ 2 ], LinearSRGBColorSpace );\n\t\t\t\tmaterialParams.opacity = array[ 3 ];\n\n\t\t\t}\n\n\t\t\tif ( metallicRoughness.baseColorTexture !== undefined ) {\n\n\t\t\t\tpending.push( parser.assignTexture( materialParams, 'map', metallicRoughness.baseColorTexture, SRGBColorSpace ) );\n\n\t\t\t}\n\n\t\t\tmaterialParams.metalness = metallicRoughness.metallicFactor !== undefined ? metallicRoughness.metallicFactor : 1.0;\n\t\t\tmaterialParams.roughness = metallicRoughness.roughnessFactor !== undefined ? metallicRoughness.roughnessFactor : 1.0;\n\n\t\t\tif ( metallicRoughness.metallicRoughnessTexture !== undefined ) {\n\n\t\t\t\tpending.push( parser.assignTexture( materialParams, 'metalnessMap', metallicRoughness.metallicRoughnessTexture ) );\n\t\t\t\tpending.push( parser.assignTexture( materialParams, 'roughnessMap', metallicRoughness.metallicRoughnessTexture ) );\n\n\t\t\t}\n\n\t\t\tmaterialType = this._invokeOne( function ( ext ) {\n\n\t\t\t\treturn ext.getMaterialType && ext.getMaterialType( materialIndex );\n\n\t\t\t} );\n\n\t\t\tpending.push( Promise.all( this._invokeAll( function ( ext ) {\n\n\t\t\t\treturn ext.extendMaterialParams && ext.extendMaterialParams( materialIndex, materialParams );\n\n\t\t\t} ) ) );\n\n\t\t}\n\n\t\tif ( materialDef.doubleSided === true ) {\n\n\t\t\tmaterialParams.side = DoubleSide;\n\n\t\t}\n\n\t\tconst alphaMode = materialDef.alphaMode || ALPHA_MODES.OPAQUE;\n\n\t\tif ( alphaMode === ALPHA_MODES.BLEND ) {\n\n\t\t\tmaterialParams.transparent = true;\n\n\t\t\t// See: https://github.com/mrdoob/three.js/issues/17706\n\t\t\tmaterialParams.depthWrite = false;\n\n\t\t} else {\n\n\t\t\tmaterialParams.transparent = false;\n\n\t\t\tif ( alphaMode === ALPHA_MODES.MASK ) {\n\n\t\t\t\tmaterialParams.alphaTest = materialDef.alphaCutoff !== undefined ? materialDef.alphaCutoff : 0.5;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( materialDef.normalTexture !== undefined && materialType !== MeshBasicMaterial ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'normalMap', materialDef.normalTexture ) );\n\n\t\t\tmaterialParams.normalScale = new Vector2( 1, 1 );\n\n\t\t\tif ( materialDef.normalTexture.scale !== undefined ) {\n\n\t\t\t\tconst scale = materialDef.normalTexture.scale;\n\n\t\t\t\tmaterialParams.normalScale.set( scale, scale );\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( materialDef.occlusionTexture !== undefined && materialType !== MeshBasicMaterial ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'aoMap', materialDef.occlusionTexture ) );\n\n\t\t\tif ( materialDef.occlusionTexture.strength !== undefined ) {\n\n\t\t\t\tmaterialParams.aoMapIntensity = materialDef.occlusionTexture.strength;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( materialDef.emissiveFactor !== undefined && materialType !== MeshBasicMaterial ) {\n\n\t\t\tconst emissiveFactor = materialDef.emissiveFactor;\n\t\t\tmaterialParams.emissive = new Color().setRGB( emissiveFactor[ 0 ], emissiveFactor[ 1 ], emissiveFactor[ 2 ], LinearSRGBColorSpace );\n\n\t\t}\n\n\t\tif ( materialDef.emissiveTexture !== undefined && materialType !== MeshBasicMaterial ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'emissiveMap', materialDef.emissiveTexture, SRGBColorSpace ) );\n\n\t\t}\n\n\t\treturn Promise.all( pending ).then( function () {\n\n\t\t\tconst material = new materialType( materialParams );\n\n\t\t\tif ( materialDef.name ) material.name = materialDef.name;\n\n\t\t\tassignExtrasToUserData( material, materialDef );\n\n\t\t\tparser.associations.set( material, { materials: materialIndex } );\n\n\t\t\tif ( materialDef.extensions ) addUnknownExtensionsToUserData( extensions, material, materialDef );\n\n\t\t\treturn material;\n\n\t\t} );\n\n\t}\n\n\t/**\n\t * When Object3D instances are targeted by animation, they need unique names.\n\t *\n\t * @param {string} originalName\n\t * @return {string}\n\t */\n\tcreateUniqueName( originalName ) {\n\n\t\tconst sanitizedName = PropertyBinding.sanitizeNodeName( originalName || '' );\n\n\t\tif ( sanitizedName in this.nodeNamesUsed ) {\n\n\t\t\treturn sanitizedName + '_' + ( ++ this.nodeNamesUsed[ sanitizedName ] );\n\n\t\t} else {\n\n\t\t\tthis.nodeNamesUsed[ sanitizedName ] = 0;\n\n\t\t\treturn sanitizedName;\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#geometry\n\t *\n\t * Creates BufferGeometries from primitives.\n\t *\n\t * @param {Array<GLTF.Primitive>} primitives\n\t * @return {Promise<Array<BufferGeometry>>}\n\t */\n\tloadGeometries( primitives ) {\n\n\t\tconst parser = this;\n\t\tconst extensions = this.extensions;\n\t\tconst cache = this.primitiveCache;\n\n\t\tfunction createDracoPrimitive( primitive ) {\n\n\t\t\treturn extensions[ EXTENSIONS.KHR_DRACO_MESH_COMPRESSION ]\n\t\t\t\t.decodePrimitive( primitive, parser )\n\t\t\t\t.then( function ( geometry ) {\n\n\t\t\t\t\treturn addPrimitiveAttributes( geometry, primitive, parser );\n\n\t\t\t\t} );\n\n\t\t}\n\n\t\tconst pending = [];\n\n\t\tfor ( let i = 0, il = primitives.length; i < il; i ++ ) {\n\n\t\t\tconst primitive = primitives[ i ];\n\t\t\tconst cacheKey = createPrimitiveKey( primitive );\n\n\t\t\t// See if we've already created this geometry\n\t\t\tconst cached = cache[ cacheKey ];\n\n\t\t\tif ( cached ) {\n\n\t\t\t\t// Use the cached geometry if it exists\n\t\t\t\tpending.push( cached.promise );\n\n\t\t\t} else {\n\n\t\t\t\tlet geometryPromise;\n\n\t\t\t\tif ( primitive.extensions && primitive.extensions[ EXTENSIONS.KHR_DRACO_MESH_COMPRESSION ] ) {\n\n\t\t\t\t\t// Use DRACO geometry if available\n\t\t\t\t\tgeometryPromise = createDracoPrimitive( primitive );\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// Otherwise create a new geometry\n\t\t\t\t\tgeometryPromise = addPrimitiveAttributes( new BufferGeometry(), primitive, parser );\n\n\t\t\t\t}\n\n\t\t\t\t// Cache this geometry\n\t\t\t\tcache[ cacheKey ] = { primitive: primitive, promise: geometryPromise };\n\n\t\t\t\tpending.push( geometryPromise );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn Promise.all( pending );\n\n\t}\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#meshes\n\t * @param {number} meshIndex\n\t * @return {Promise<Group|Mesh|SkinnedMesh>}\n\t */\n\tloadMesh( meshIndex ) {\n\n\t\tconst parser = this;\n\t\tconst json = this.json;\n\t\tconst extensions = this.extensions;\n\n\t\tconst meshDef = json.meshes[ meshIndex ];\n\t\tconst primitives = meshDef.primitives;\n\n\t\tconst pending = [];\n\n\t\tfor ( let i = 0, il = primitives.length; i < il; i ++ ) {\n\n\t\t\tconst material = primitives[ i ].material === undefined\n\t\t\t\t? createDefaultMaterial( this.cache )\n\t\t\t\t: this.getDependency( 'material', primitives[ i ].material );\n\n\t\t\tpending.push( material );\n\n\t\t}\n\n\t\tpending.push( parser.loadGeometries( primitives ) );\n\n\t\treturn Promise.all( pending ).then( function ( results ) {\n\n\t\t\tconst materials = results.slice( 0, results.length - 1 );\n\t\t\tconst geometries = results[ results.length - 1 ];\n\n\t\t\tconst meshes = [];\n\n\t\t\tfor ( let i = 0, il = geometries.length; i < il; i ++ ) {\n\n\t\t\t\tconst geometry = geometries[ i ];\n\t\t\t\tconst primitive = primitives[ i ];\n\n\t\t\t\t// 1. create Mesh\n\n\t\t\t\tlet mesh;\n\n\t\t\t\tconst material = materials[ i ];\n\n\t\t\t\tif ( primitive.mode === WEBGL_CONSTANTS.TRIANGLES ||\n\t\t\t\t\t\tprimitive.mode === WEBGL_CONSTANTS.TRIANGLE_STRIP ||\n\t\t\t\t\t\tprimitive.mode === WEBGL_CONSTANTS.TRIANGLE_FAN ||\n\t\t\t\t\t\tprimitive.mode === undefined ) {\n\n\t\t\t\t\t// .isSkinnedMesh isn't in glTF spec. See ._markDefs()\n\t\t\t\t\tmesh = meshDef.isSkinnedMesh === true\n\t\t\t\t\t\t? new SkinnedMesh( geometry, material )\n\t\t\t\t\t\t: new Mesh( geometry, material );\n\n\t\t\t\t\tif ( mesh.isSkinnedMesh === true ) {\n\n\t\t\t\t\t\t// normalize skin weights to fix malformed assets (see #15319)\n\t\t\t\t\t\tmesh.normalizeSkinWeights();\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( primitive.mode === WEBGL_CONSTANTS.TRIANGLE_STRIP ) {\n\n\t\t\t\t\t\tmesh.geometry = toTrianglesDrawMode( mesh.geometry, TriangleStripDrawMode );\n\n\t\t\t\t\t} else if ( primitive.mode === WEBGL_CONSTANTS.TRIANGLE_FAN ) {\n\n\t\t\t\t\t\tmesh.geometry = toTrianglesDrawMode( mesh.geometry, TriangleFanDrawMode );\n\n\t\t\t\t\t}\n\n\t\t\t\t} else if ( primitive.mode === WEBGL_CONSTANTS.LINES ) {\n\n\t\t\t\t\tmesh = new LineSegments( geometry, material );\n\n\t\t\t\t} else if ( primitive.mode === WEBGL_CONSTANTS.LINE_STRIP ) {\n\n\t\t\t\t\tmesh = new Line( geometry, material );\n\n\t\t\t\t} else if ( primitive.mode === WEBGL_CONSTANTS.LINE_LOOP ) {\n\n\t\t\t\t\tmesh = new LineLoop( geometry, material );\n\n\t\t\t\t} else if ( primitive.mode === WEBGL_CONSTANTS.POINTS ) {\n\n\t\t\t\t\tmesh = new Points( geometry, material );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tthrow new Error( 'THREE.GLTFLoader: Primitive mode unsupported: ' + primitive.mode );\n\n\t\t\t\t}\n\n\t\t\t\tif ( Object.keys( mesh.geometry.morphAttributes ).length > 0 ) {\n\n\t\t\t\t\tupdateMorphTargets( mesh, meshDef );\n\n\t\t\t\t}\n\n\t\t\t\tmesh.name = parser.createUniqueName( meshDef.name || ( 'mesh_' + meshIndex ) );\n\n\t\t\t\tassignExtrasToUserData( mesh, meshDef );\n\n\t\t\t\tif ( primitive.extensions ) addUnknownExtensionsToUserData( extensions, mesh, primitive );\n\n\t\t\t\tparser.assignFinalMaterial( mesh );\n\n\t\t\t\tmeshes.push( mesh );\n\n\t\t\t}\n\n\t\t\tfor ( let i = 0, il = meshes.length; i < il; i ++ ) {\n\n\t\t\t\tparser.associations.set( meshes[ i ], {\n\t\t\t\t\tmeshes: meshIndex,\n\t\t\t\t\tprimitives: i\n\t\t\t\t} );\n\n\t\t\t}\n\n\t\t\tif ( meshes.length === 1 ) {\n\n\t\t\t\tif ( meshDef.extensions ) addUnknownExtensionsToUserData( extensions, meshes[ 0 ], meshDef );\n\n\t\t\t\treturn meshes[ 0 ];\n\n\t\t\t}\n\n\t\t\tconst group = new Group();\n\n\t\t\tif ( meshDef.extensions ) addUnknownExtensionsToUserData( extensions, group, meshDef );\n\n\t\t\tparser.associations.set( group, { meshes: meshIndex } );\n\n\t\t\tfor ( let i = 0, il = meshes.length; i < il; i ++ ) {\n\n\t\t\t\tgroup.add( meshes[ i ] );\n\n\t\t\t}\n\n\t\t\treturn group;\n\n\t\t} );\n\n\t}\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#cameras\n\t * @param {number} cameraIndex\n\t * @return {Promise<THREE.Camera>}\n\t */\n\tloadCamera( cameraIndex ) {\n\n\t\tlet camera;\n\t\tconst cameraDef = this.json.cameras[ cameraIndex ];\n\t\tconst params = cameraDef[ cameraDef.type ];\n\n\t\tif ( ! params ) {\n\n\t\t\tconsole.warn( 'THREE.GLTFLoader: Missing camera parameters.' );\n\t\t\treturn;\n\n\t\t}\n\n\t\tif ( cameraDef.type === 'perspective' ) {\n\n\t\t\tcamera = new PerspectiveCamera( MathUtils.radToDeg( params.yfov ), params.aspectRatio || 1, params.znear || 1, params.zfar || 2e6 );\n\n\t\t} else if ( cameraDef.type === 'orthographic' ) {\n\n\t\t\tcamera = new OrthographicCamera( - params.xmag, params.xmag, params.ymag, - params.ymag, params.znear, params.zfar );\n\n\t\t}\n\n\t\tif ( cameraDef.name ) camera.name = this.createUniqueName( cameraDef.name );\n\n\t\tassignExtrasToUserData( camera, cameraDef );\n\n\t\treturn Promise.resolve( camera );\n\n\t}\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#skins\n\t * @param {number} skinIndex\n\t * @return {Promise<Skeleton>}\n\t */\n\tloadSkin( skinIndex ) {\n\n\t\tconst skinDef = this.json.skins[ skinIndex ];\n\n\t\tconst pending = [];\n\n\t\tfor ( let i = 0, il = skinDef.joints.length; i < il; i ++ ) {\n\n\t\t\tpending.push( this._loadNodeShallow( skinDef.joints[ i ] ) );\n\n\t\t}\n\n\t\tif ( skinDef.inverseBindMatrices !== undefined ) {\n\n\t\t\tpending.push( this.getDependency( 'accessor', skinDef.inverseBindMatrices ) );\n\n\t\t} else {\n\n\t\t\tpending.push( null );\n\n\t\t}\n\n\t\treturn Promise.all( pending ).then( function ( results ) {\n\n\t\t\tconst inverseBindMatrices = results.pop();\n\t\t\tconst jointNodes = results;\n\n\t\t\t// Note that bones (joint nodes) may or may not be in the\n\t\t\t// scene graph at this time.\n\n\t\t\tconst bones = [];\n\t\t\tconst boneInverses = [];\n\n\t\t\tfor ( let i = 0, il = jointNodes.length; i < il; i ++ ) {\n\n\t\t\t\tconst jointNode = jointNodes[ i ];\n\n\t\t\t\tif ( jointNode ) {\n\n\t\t\t\t\tbones.push( jointNode );\n\n\t\t\t\t\tconst mat = new Matrix4();\n\n\t\t\t\t\tif ( inverseBindMatrices !== null ) {\n\n\t\t\t\t\t\tmat.fromArray( inverseBindMatrices.array, i * 16 );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tboneInverses.push( mat );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.warn( 'THREE.GLTFLoader: Joint \"%s\" could not be found.', skinDef.joints[ i ] );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn new Skeleton( bones, boneInverses );\n\n\t\t} );\n\n\t}\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#animations\n\t * @param {number} animationIndex\n\t * @return {Promise<AnimationClip>}\n\t */\n\tloadAnimation( animationIndex ) {\n\n\t\tconst json = this.json;\n\t\tconst parser = this;\n\n\t\tconst animationDef = json.animations[ animationIndex ];\n\t\tconst animationName = animationDef.name ? animationDef.name : 'animation_' + animationIndex;\n\n\t\tconst pendingNodes = [];\n\t\tconst pendingInputAccessors = [];\n\t\tconst pendingOutputAccessors = [];\n\t\tconst pendingSamplers = [];\n\t\tconst pendingTargets = [];\n\n\t\tfor ( let i = 0, il = animationDef.channels.length; i < il; i ++ ) {\n\n\t\t\tconst channel = animationDef.channels[ i ];\n\t\t\tconst sampler = animationDef.samplers[ channel.sampler ];\n\t\t\tconst target = channel.target;\n\t\t\tconst name = target.node;\n\t\t\tconst input = animationDef.parameters !== undefined ? animationDef.parameters[ sampler.input ] : sampler.input;\n\t\t\tconst output = animationDef.parameters !== undefined ? animationDef.parameters[ sampler.output ] : sampler.output;\n\n\t\t\tif ( target.node === undefined ) continue;\n\n\t\t\tpendingNodes.push( this.getDependency( 'node', name ) );\n\t\t\tpendingInputAccessors.push( this.getDependency( 'accessor', input ) );\n\t\t\tpendingOutputAccessors.push( this.getDependency( 'accessor', output ) );\n\t\t\tpendingSamplers.push( sampler );\n\t\t\tpendingTargets.push( target );\n\n\t\t}\n\n\t\treturn Promise.all( [\n\n\t\t\tPromise.all( pendingNodes ),\n\t\t\tPromise.all( pendingInputAccessors ),\n\t\t\tPromise.all( pendingOutputAccessors ),\n\t\t\tPromise.all( pendingSamplers ),\n\t\t\tPromise.all( pendingTargets )\n\n\t\t] ).then( function ( dependencies ) {\n\n\t\t\tconst nodes = dependencies[ 0 ];\n\t\t\tconst inputAccessors = dependencies[ 1 ];\n\t\t\tconst outputAccessors = dependencies[ 2 ];\n\t\t\tconst samplers = dependencies[ 3 ];\n\t\t\tconst targets = dependencies[ 4 ];\n\n\t\t\tconst tracks = [];\n\n\t\t\tfor ( let i = 0, il = nodes.length; i < il; i ++ ) {\n\n\t\t\t\tconst node = nodes[ i ];\n\t\t\t\tconst inputAccessor = inputAccessors[ i ];\n\t\t\t\tconst outputAccessor = outputAccessors[ i ];\n\t\t\t\tconst sampler = samplers[ i ];\n\t\t\t\tconst target = targets[ i ];\n\n\t\t\t\tif ( node === undefined ) continue;\n\n\t\t\t\tif ( node.updateMatrix ) {\n\n\t\t\t\t\tnode.updateMatrix();\n\n\t\t\t\t}\n\n\t\t\t\tconst createdTracks = parser._createAnimationTracks( node, inputAccessor, outputAccessor, sampler, target );\n\n\t\t\t\tif ( createdTracks ) {\n\n\t\t\t\t\tfor ( let k = 0; k < createdTracks.length; k ++ ) {\n\n\t\t\t\t\t\ttracks.push( createdTracks[ k ] );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn new AnimationClip( animationName, undefined, tracks );\n\n\t\t} );\n\n\t}\n\n\tcreateNodeMesh( nodeIndex ) {\n\n\t\tconst json = this.json;\n\t\tconst parser = this;\n\t\tconst nodeDef = json.nodes[ nodeIndex ];\n\n\t\tif ( nodeDef.mesh === undefined ) return null;\n\n\t\treturn parser.getDependency( 'mesh', nodeDef.mesh ).then( function ( mesh ) {\n\n\t\t\tconst node = parser._getNodeRef( parser.meshCache, nodeDef.mesh, mesh );\n\n\t\t\t// if weights are provided on the node, override weights on the mesh.\n\t\t\tif ( nodeDef.weights !== undefined ) {\n\n\t\t\t\tnode.traverse( function ( o ) {\n\n\t\t\t\t\tif ( ! o.isMesh ) return;\n\n\t\t\t\t\tfor ( let i = 0, il = nodeDef.weights.length; i < il; i ++ ) {\n\n\t\t\t\t\t\to.morphTargetInfluences[ i ] = nodeDef.weights[ i ];\n\n\t\t\t\t\t}\n\n\t\t\t\t} );\n\n\t\t\t}\n\n\t\t\treturn node;\n\n\t\t} );\n\n\t}\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#nodes-and-hierarchy\n\t * @param {number} nodeIndex\n\t * @return {Promise<Object3D>}\n\t */\n\tloadNode( nodeIndex ) {\n\n\t\tconst json = this.json;\n\t\tconst parser = this;\n\n\t\tconst nodeDef = json.nodes[ nodeIndex ];\n\n\t\tconst nodePending = parser._loadNodeShallow( nodeIndex );\n\n\t\tconst childPending = [];\n\t\tconst childrenDef = nodeDef.children || [];\n\n\t\tfor ( let i = 0, il = childrenDef.length; i < il; i ++ ) {\n\n\t\t\tchildPending.push( parser.getDependency( 'node', childrenDef[ i ] ) );\n\n\t\t}\n\n\t\tconst skeletonPending = nodeDef.skin === undefined\n\t\t\t? Promise.resolve( null )\n\t\t\t: parser.getDependency( 'skin', nodeDef.skin );\n\n\t\treturn Promise.all( [\n\t\t\tnodePending,\n\t\t\tPromise.all( childPending ),\n\t\t\tskeletonPending\n\t\t] ).then( function ( results ) {\n\n\t\t\tconst node = results[ 0 ];\n\t\t\tconst children = results[ 1 ];\n\t\t\tconst skeleton = results[ 2 ];\n\n\t\t\tif ( skeleton !== null ) {\n\n\t\t\t\t// This full traverse should be fine because\n\t\t\t\t// child glTF nodes have not been added to this node yet.\n\t\t\t\tnode.traverse( function ( mesh ) {\n\n\t\t\t\t\tif ( ! mesh.isSkinnedMesh ) return;\n\n\t\t\t\t\tmesh.bind( skeleton, _identityMatrix$1 );\n\n\t\t\t\t} );\n\n\t\t\t}\n\n\t\t\tfor ( let i = 0, il = children.length; i < il; i ++ ) {\n\n\t\t\t\tnode.add( children[ i ] );\n\n\t\t\t}\n\n\t\t\treturn node;\n\n\t\t} );\n\n\t}\n\n\t// ._loadNodeShallow() parses a single node.\n\t// skin and child nodes are created and added in .loadNode() (no '_' prefix).\n\t_loadNodeShallow( nodeIndex ) {\n\n\t\tconst json = this.json;\n\t\tconst extensions = this.extensions;\n\t\tconst parser = this;\n\n\t\t// This method is called from .loadNode() and .loadSkin().\n\t\t// Cache a node to avoid duplication.\n\n\t\tif ( this.nodeCache[ nodeIndex ] !== undefined ) {\n\n\t\t\treturn this.nodeCache[ nodeIndex ];\n\n\t\t}\n\n\t\tconst nodeDef = json.nodes[ nodeIndex ];\n\n\t\t// reserve node's name before its dependencies, so the root has the intended name.\n\t\tconst nodeName = nodeDef.name ? parser.createUniqueName( nodeDef.name ) : '';\n\n\t\tconst pending = [];\n\n\t\tconst meshPromise = parser._invokeOne( function ( ext ) {\n\n\t\t\treturn ext.createNodeMesh && ext.createNodeMesh( nodeIndex );\n\n\t\t} );\n\n\t\tif ( meshPromise ) {\n\n\t\t\tpending.push( meshPromise );\n\n\t\t}\n\n\t\tif ( nodeDef.camera !== undefined ) {\n\n\t\t\tpending.push( parser.getDependency( 'camera', nodeDef.camera ).then( function ( camera ) {\n\n\t\t\t\treturn parser._getNodeRef( parser.cameraCache, nodeDef.camera, camera );\n\n\t\t\t} ) );\n\n\t\t}\n\n\t\tparser._invokeAll( function ( ext ) {\n\n\t\t\treturn ext.createNodeAttachment && ext.createNodeAttachment( nodeIndex );\n\n\t\t} ).forEach( function ( promise ) {\n\n\t\t\tpending.push( promise );\n\n\t\t} );\n\n\t\tthis.nodeCache[ nodeIndex ] = Promise.all( pending ).then( function ( objects ) {\n\n\t\t\tlet node;\n\n\t\t\t// .isBone isn't in glTF spec. See ._markDefs\n\t\t\tif ( nodeDef.isBone === true ) {\n\n\t\t\t\tnode = new Bone();\n\n\t\t\t} else if ( objects.length > 1 ) {\n\n\t\t\t\tnode = new Group();\n\n\t\t\t} else if ( objects.length === 1 ) {\n\n\t\t\t\tnode = objects[ 0 ];\n\n\t\t\t} else {\n\n\t\t\t\tnode = new Object3D();\n\n\t\t\t}\n\n\t\t\tif ( node !== objects[ 0 ] ) {\n\n\t\t\t\tfor ( let i = 0, il = objects.length; i < il; i ++ ) {\n\n\t\t\t\t\tnode.add( objects[ i ] );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( nodeDef.name ) {\n\n\t\t\t\tnode.userData.name = nodeDef.name;\n\t\t\t\tnode.name = nodeName;\n\n\t\t\t}\n\n\t\t\tassignExtrasToUserData( node, nodeDef );\n\n\t\t\tif ( nodeDef.extensions ) addUnknownExtensionsToUserData( extensions, node, nodeDef );\n\n\t\t\tif ( nodeDef.matrix !== undefined ) {\n\n\t\t\t\tconst matrix = new Matrix4();\n\t\t\t\tmatrix.fromArray( nodeDef.matrix );\n\t\t\t\tnode.applyMatrix4( matrix );\n\n\t\t\t} else {\n\n\t\t\t\tif ( nodeDef.translation !== undefined ) {\n\n\t\t\t\t\tnode.position.fromArray( nodeDef.translation );\n\n\t\t\t\t}\n\n\t\t\t\tif ( nodeDef.rotation !== undefined ) {\n\n\t\t\t\t\tnode.quaternion.fromArray( nodeDef.rotation );\n\n\t\t\t\t}\n\n\t\t\t\tif ( nodeDef.scale !== undefined ) {\n\n\t\t\t\t\tnode.scale.fromArray( nodeDef.scale );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( ! parser.associations.has( node ) ) {\n\n\t\t\t\tparser.associations.set( node, {} );\n\n\t\t\t}\n\n\t\t\tparser.associations.get( node ).nodes = nodeIndex;\n\n\t\t\treturn node;\n\n\t\t} );\n\n\t\treturn this.nodeCache[ nodeIndex ];\n\n\t}\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#scenes\n\t * @param {number} sceneIndex\n\t * @return {Promise<Group>}\n\t */\n\tloadScene( sceneIndex ) {\n\n\t\tconst extensions = this.extensions;\n\t\tconst sceneDef = this.json.scenes[ sceneIndex ];\n\t\tconst parser = this;\n\n\t\t// Loader returns Group, not Scene.\n\t\t// See: https://github.com/mrdoob/three.js/issues/18342#issuecomment-578981172\n\t\tconst scene = new Group();\n\t\tif ( sceneDef.name ) scene.name = parser.createUniqueName( sceneDef.name );\n\n\t\tassignExtrasToUserData( scene, sceneDef );\n\n\t\tif ( sceneDef.extensions ) addUnknownExtensionsToUserData( extensions, scene, sceneDef );\n\n\t\tconst nodeIds = sceneDef.nodes || [];\n\n\t\tconst pending = [];\n\n\t\tfor ( let i = 0, il = nodeIds.length; i < il; i ++ ) {\n\n\t\t\tpending.push( parser.getDependency( 'node', nodeIds[ i ] ) );\n\n\t\t}\n\n\t\treturn Promise.all( pending ).then( function ( nodes ) {\n\n\t\t\tfor ( let i = 0, il = nodes.length; i < il; i ++ ) {\n\n\t\t\t\tscene.add( nodes[ i ] );\n\n\t\t\t}\n\n\t\t\t// Removes dangling associations, associations that reference a node that\n\t\t\t// didn't make it into the scene.\n\t\t\tconst reduceAssociations = ( node ) => {\n\n\t\t\t\tconst reducedAssociations = new Map();\n\n\t\t\t\tfor ( const [ key, value ] of parser.associations ) {\n\n\t\t\t\t\tif ( key instanceof Material || key instanceof Texture ) {\n\n\t\t\t\t\t\treducedAssociations.set( key, value );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tnode.traverse( ( node ) => {\n\n\t\t\t\t\tconst mappings = parser.associations.get( node );\n\n\t\t\t\t\tif ( mappings != null ) {\n\n\t\t\t\t\t\treducedAssociations.set( node, mappings );\n\n\t\t\t\t\t}\n\n\t\t\t\t} );\n\n\t\t\t\treturn reducedAssociations;\n\n\t\t\t};\n\n\t\t\tparser.associations = reduceAssociations( scene );\n\n\t\t\treturn scene;\n\n\t\t} );\n\n\t}\n\n\t_createAnimationTracks( node, inputAccessor, outputAccessor, sampler, target ) {\n\n\t\tconst tracks = [];\n\n\t\tconst targetName = node.name ? node.name : node.uuid;\n\t\tconst targetNames = [];\n\n\t\tif ( PATH_PROPERTIES[ target.path ] === PATH_PROPERTIES.weights ) {\n\n\t\t\tnode.traverse( function ( object ) {\n\n\t\t\t\tif ( object.morphTargetInfluences ) {\n\n\t\t\t\t\ttargetNames.push( object.name ? object.name : object.uuid );\n\n\t\t\t\t}\n\n\t\t\t} );\n\n\t\t} else {\n\n\t\t\ttargetNames.push( targetName );\n\n\t\t}\n\n\t\tlet TypedKeyframeTrack;\n\n\t\tswitch ( PATH_PROPERTIES[ target.path ] ) {\n\n\t\t\tcase PATH_PROPERTIES.weights:\n\n\t\t\t\tTypedKeyframeTrack = NumberKeyframeTrack;\n\t\t\t\tbreak;\n\n\t\t\tcase PATH_PROPERTIES.rotation:\n\n\t\t\t\tTypedKeyframeTrack = QuaternionKeyframeTrack;\n\t\t\t\tbreak;\n\n\t\t\tcase PATH_PROPERTIES.position:\n\t\t\tcase PATH_PROPERTIES.scale:\n\n\t\t\t\tTypedKeyframeTrack = VectorKeyframeTrack;\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\n\t\t\t\tswitch ( outputAccessor.itemSize ) {\n\n\t\t\t\t\tcase 1:\n\t\t\t\t\t\tTypedKeyframeTrack = NumberKeyframeTrack;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 2:\n\t\t\t\t\tcase 3:\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tTypedKeyframeTrack = VectorKeyframeTrack;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t}\n\n\t\tconst interpolation = sampler.interpolation !== undefined ? INTERPOLATION[ sampler.interpolation ] : InterpolateLinear;\n\n\n\t\tconst outputArray = this._getArrayFromAccessor( outputAccessor );\n\n\t\tfor ( let j = 0, jl = targetNames.length; j < jl; j ++ ) {\n\n\t\t\tconst track = new TypedKeyframeTrack(\n\t\t\t\ttargetNames[ j ] + '.' + PATH_PROPERTIES[ target.path ],\n\t\t\t\tinputAccessor.array,\n\t\t\t\toutputArray,\n\t\t\t\tinterpolation\n\t\t\t);\n\n\t\t\t// Override interpolation with custom factory method.\n\t\t\tif ( sampler.interpolation === 'CUBICSPLINE' ) {\n\n\t\t\t\tthis._createCubicSplineTrackInterpolant( track );\n\n\t\t\t}\n\n\t\t\ttracks.push( track );\n\n\t\t}\n\n\t\treturn tracks;\n\n\t}\n\n\t_getArrayFromAccessor( accessor ) {\n\n\t\tlet outputArray = accessor.array;\n\n\t\tif ( accessor.normalized ) {\n\n\t\t\tconst scale = getNormalizedComponentScale( outputArray.constructor );\n\t\t\tconst scaled = new Float32Array( outputArray.length );\n\n\t\t\tfor ( let j = 0, jl = outputArray.length; j < jl; j ++ ) {\n\n\t\t\t\tscaled[ j ] = outputArray[ j ] * scale;\n\n\t\t\t}\n\n\t\t\toutputArray = scaled;\n\n\t\t}\n\n\t\treturn outputArray;\n\n\t}\n\n\t_createCubicSplineTrackInterpolant( track ) {\n\n\t\ttrack.createInterpolant = function InterpolantFactoryMethodGLTFCubicSpline( result ) {\n\n\t\t\t// A CUBICSPLINE keyframe in glTF has three output values for each input value,\n\t\t\t// representing inTangent, splineVertex, and outTangent. As a result, track.getValueSize()\n\t\t\t// must be divided by three to get the interpolant's sampleSize argument.\n\n\t\t\tconst interpolantType = ( this instanceof QuaternionKeyframeTrack ) ? GLTFCubicSplineQuaternionInterpolant : GLTFCubicSplineInterpolant;\n\n\t\t\treturn new interpolantType( this.times, this.values, this.getValueSize() / 3, result );\n\n\t\t};\n\n\t\t// Mark as CUBICSPLINE. `track.getInterpolation()` doesn't support custom interpolants.\n\t\ttrack.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline = true;\n\n\t}\n\n}\n\n/**\n * @param {BufferGeometry} geometry\n * @param {GLTF.Primitive} primitiveDef\n * @param {GLTFParser} parser\n */\nfunction computeBounds( geometry, primitiveDef, parser ) {\n\n\tconst attributes = primitiveDef.attributes;\n\n\tconst box = new Box3();\n\n\tif ( attributes.POSITION !== undefined ) {\n\n\t\tconst accessor = parser.json.accessors[ attributes.POSITION ];\n\n\t\tconst min = accessor.min;\n\t\tconst max = accessor.max;\n\n\t\t// glTF requires 'min' and 'max', but VRM (which extends glTF) currently ignores that requirement.\n\n\t\tif ( min !== undefined && max !== undefined ) {\n\n\t\t\tbox.set(\n\t\t\t\tnew Vector3( min[ 0 ], min[ 1 ], min[ 2 ] ),\n\t\t\t\tnew Vector3( max[ 0 ], max[ 1 ], max[ 2 ] )\n\t\t\t);\n\n\t\t\tif ( accessor.normalized ) {\n\n\t\t\t\tconst boxScale = getNormalizedComponentScale( WEBGL_COMPONENT_TYPES[ accessor.componentType ] );\n\t\t\t\tbox.min.multiplyScalar( boxScale );\n\t\t\t\tbox.max.multiplyScalar( boxScale );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tconsole.warn( 'THREE.GLTFLoader: Missing min/max properties for accessor POSITION.' );\n\n\t\t\treturn;\n\n\t\t}\n\n\t} else {\n\n\t\treturn;\n\n\t}\n\n\tconst targets = primitiveDef.targets;\n\n\tif ( targets !== undefined ) {\n\n\t\tconst maxDisplacement = new Vector3();\n\t\tconst vector = new Vector3();\n\n\t\tfor ( let i = 0, il = targets.length; i < il; i ++ ) {\n\n\t\t\tconst target = targets[ i ];\n\n\t\t\tif ( target.POSITION !== undefined ) {\n\n\t\t\t\tconst accessor = parser.json.accessors[ target.POSITION ];\n\t\t\t\tconst min = accessor.min;\n\t\t\t\tconst max = accessor.max;\n\n\t\t\t\t// glTF requires 'min' and 'max', but VRM (which extends glTF) currently ignores that requirement.\n\n\t\t\t\tif ( min !== undefined && max !== undefined ) {\n\n\t\t\t\t\t// we need to get max of absolute components because target weight is [-1,1]\n\t\t\t\t\tvector.setX( Math.max( Math.abs( min[ 0 ] ), Math.abs( max[ 0 ] ) ) );\n\t\t\t\t\tvector.setY( Math.max( Math.abs( min[ 1 ] ), Math.abs( max[ 1 ] ) ) );\n\t\t\t\t\tvector.setZ( Math.max( Math.abs( min[ 2 ] ), Math.abs( max[ 2 ] ) ) );\n\n\n\t\t\t\t\tif ( accessor.normalized ) {\n\n\t\t\t\t\t\tconst boxScale = getNormalizedComponentScale( WEBGL_COMPONENT_TYPES[ accessor.componentType ] );\n\t\t\t\t\t\tvector.multiplyScalar( boxScale );\n\n\t\t\t\t\t}\n\n\t\t\t\t\t// Note: this assumes that the sum of all weights is at most 1. This isn't quite correct - it's more conservative\n\t\t\t\t\t// to assume that each target can have a max weight of 1. However, for some use cases - notably, when morph targets\n\t\t\t\t\t// are used to implement key-frame animations and as such only two are active at a time - this results in very large\n\t\t\t\t\t// boxes. So for now we make a box that's sometimes a touch too small but is hopefully mostly of reasonable size.\n\t\t\t\t\tmaxDisplacement.max( vector );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.warn( 'THREE.GLTFLoader: Missing min/max properties for accessor POSITION.' );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\t// As per comment above this box isn't conservative, but has a reasonable size for a very large number of morph targets.\n\t\tbox.expandByVector( maxDisplacement );\n\n\t}\n\n\tgeometry.boundingBox = box;\n\n\tconst sphere = new Sphere();\n\n\tbox.getCenter( sphere.center );\n\tsphere.radius = box.min.distanceTo( box.max ) / 2;\n\n\tgeometry.boundingSphere = sphere;\n\n}\n\n/**\n * @param {BufferGeometry} geometry\n * @param {GLTF.Primitive} primitiveDef\n * @param {GLTFParser} parser\n * @return {Promise<BufferGeometry>}\n */\nfunction addPrimitiveAttributes( geometry, primitiveDef, parser ) {\n\n\tconst attributes = primitiveDef.attributes;\n\n\tconst pending = [];\n\n\tfunction assignAttributeAccessor( accessorIndex, attributeName ) {\n\n\t\treturn parser.getDependency( 'accessor', accessorIndex )\n\t\t\t.then( function ( accessor ) {\n\n\t\t\t\tgeometry.setAttribute( attributeName, accessor );\n\n\t\t\t} );\n\n\t}\n\n\tfor ( const gltfAttributeName in attributes ) {\n\n\t\tconst threeAttributeName = ATTRIBUTES[ gltfAttributeName ] || gltfAttributeName.toLowerCase();\n\n\t\t// Skip attributes already provided by e.g. Draco extension.\n\t\tif ( threeAttributeName in geometry.attributes ) continue;\n\n\t\tpending.push( assignAttributeAccessor( attributes[ gltfAttributeName ], threeAttributeName ) );\n\n\t}\n\n\tif ( primitiveDef.indices !== undefined && ! geometry.index ) {\n\n\t\tconst accessor = parser.getDependency( 'accessor', primitiveDef.indices ).then( function ( accessor ) {\n\n\t\t\tgeometry.setIndex( accessor );\n\n\t\t} );\n\n\t\tpending.push( accessor );\n\n\t}\n\n\tif ( ColorManagement.workingColorSpace !== LinearSRGBColorSpace && 'COLOR_0' in attributes ) {\n\n\t\tconsole.warn( `THREE.GLTFLoader: Converting vertex colors from \"srgb-linear\" to \"${ColorManagement.workingColorSpace}\" not supported.` );\n\n\t}\n\n\tassignExtrasToUserData( geometry, primitiveDef );\n\n\tcomputeBounds( geometry, primitiveDef, parser );\n\n\treturn Promise.all( pending ).then( function () {\n\n\t\treturn primitiveDef.targets !== undefined\n\t\t\t? addMorphTargets( geometry, primitiveDef.targets, parser )\n\t\t\t: geometry;\n\n\t} );\n\n}\n\nconst _taskCache$1 = new WeakMap();\n\nclass DRACOLoader extends Loader {\n\n\tconstructor( manager ) {\n\n\t\tsuper( manager );\n\n\t\tthis.decoderPath = '';\n\t\tthis.decoderConfig = {};\n\t\tthis.decoderBinary = null;\n\t\tthis.decoderPending = null;\n\n\t\tthis.workerLimit = 4;\n\t\tthis.workerPool = [];\n\t\tthis.workerNextTaskID = 1;\n\t\tthis.workerSourceURL = '';\n\n\t\tthis.defaultAttributeIDs = {\n\t\t\tposition: 'POSITION',\n\t\t\tnormal: 'NORMAL',\n\t\t\tcolor: 'COLOR',\n\t\t\tuv: 'TEX_COORD'\n\t\t};\n\t\tthis.defaultAttributeTypes = {\n\t\t\tposition: 'Float32Array',\n\t\t\tnormal: 'Float32Array',\n\t\t\tcolor: 'Float32Array',\n\t\t\tuv: 'Float32Array'\n\t\t};\n\n\t}\n\n\tsetDecoderPath( path ) {\n\n\t\tthis.decoderPath = path;\n\n\t\treturn this;\n\n\t}\n\n\tsetDecoderConfig( config ) {\n\n\t\tthis.decoderConfig = config;\n\n\t\treturn this;\n\n\t}\n\n\tsetWorkerLimit( workerLimit ) {\n\n\t\tthis.workerLimit = workerLimit;\n\n\t\treturn this;\n\n\t}\n\n\tload( url, onLoad, onProgress, onError ) {\n\n\t\tconst loader = new FileLoader( this.manager );\n\n\t\tloader.setPath( this.path );\n\t\tloader.setResponseType( 'arraybuffer' );\n\t\tloader.setRequestHeader( this.requestHeader );\n\t\tloader.setWithCredentials( this.withCredentials );\n\n\t\tloader.load( url, ( buffer ) => {\n\n\t\t\tthis.parse( buffer, onLoad, onError );\n\n\t\t}, onProgress, onError );\n\n\t}\n\n\tparse( buffer, onLoad, onError ) {\n\n\t\tthis.decodeDracoFile( buffer, onLoad, null, null, SRGBColorSpace ).catch( onError );\n\n\t}\n\n\tdecodeDracoFile( buffer, callback, attributeIDs, attributeTypes, vertexColorSpace = LinearSRGBColorSpace ) {\n\n\t\tconst taskConfig = {\n\t\t\tattributeIDs: attributeIDs || this.defaultAttributeIDs,\n\t\t\tattributeTypes: attributeTypes || this.defaultAttributeTypes,\n\t\t\tuseUniqueIDs: !! attributeIDs,\n\t\t\tvertexColorSpace: vertexColorSpace,\n\t\t};\n\n\t\treturn this.decodeGeometry( buffer, taskConfig ).then( callback );\n\n\t}\n\n\tdecodeGeometry( buffer, taskConfig ) {\n\n\t\tconst taskKey = JSON.stringify( taskConfig );\n\n\t\t// Check for an existing task using this buffer. A transferred buffer cannot be transferred\n\t\t// again from this thread.\n\t\tif ( _taskCache$1.has( buffer ) ) {\n\n\t\t\tconst cachedTask = _taskCache$1.get( buffer );\n\n\t\t\tif ( cachedTask.key === taskKey ) {\n\n\t\t\t\treturn cachedTask.promise;\n\n\t\t\t} else if ( buffer.byteLength === 0 ) {\n\n\t\t\t\t// Technically, it would be possible to wait for the previous task to complete,\n\t\t\t\t// transfer the buffer back, and decode again with the second configuration. That\n\t\t\t\t// is complex, and I don't know of any reason to decode a Draco buffer twice in\n\t\t\t\t// different ways, so this is left unimplemented.\n\t\t\t\tthrow new Error(\n\n\t\t\t\t\t'THREE.DRACOLoader: Unable to re-decode a buffer with different ' +\n\t\t\t\t\t'settings. Buffer has already been transferred.'\n\n\t\t\t\t);\n\n\t\t\t}\n\n\t\t}\n\n\t\t//\n\n\t\tlet worker;\n\t\tconst taskID = this.workerNextTaskID ++;\n\t\tconst taskCost = buffer.byteLength;\n\n\t\t// Obtain a worker and assign a task, and construct a geometry instance\n\t\t// when the task completes.\n\t\tconst geometryPending = this._getWorker( taskID, taskCost )\n\t\t\t.then( ( _worker ) => {\n\n\t\t\t\tworker = _worker;\n\n\t\t\t\treturn new Promise( ( resolve, reject ) => {\n\n\t\t\t\t\tworker._callbacks[ taskID ] = { resolve, reject };\n\n\t\t\t\t\tworker.postMessage( { type: 'decode', id: taskID, taskConfig, buffer }, [ buffer ] );\n\n\t\t\t\t\t// this.debug();\n\n\t\t\t\t} );\n\n\t\t\t} )\n\t\t\t.then( ( message ) => this._createGeometry( message.geometry ) );\n\n\t\t// Remove task from the task list.\n\t\t// Note: replaced '.finally()' with '.catch().then()' block - iOS 11 support (#19416)\n\t\tgeometryPending\n\t\t\t.catch( () => true )\n\t\t\t.then( () => {\n\n\t\t\t\tif ( worker && taskID ) {\n\n\t\t\t\t\tthis._releaseTask( worker, taskID );\n\n\t\t\t\t\t// this.debug();\n\n\t\t\t\t}\n\n\t\t\t} );\n\n\t\t// Cache the task result.\n\t\t_taskCache$1.set( buffer, {\n\n\t\t\tkey: taskKey,\n\t\t\tpromise: geometryPending\n\n\t\t} );\n\n\t\treturn geometryPending;\n\n\t}\n\n\t_createGeometry( geometryData ) {\n\n\t\tconst geometry = new BufferGeometry();\n\n\t\tif ( geometryData.index ) {\n\n\t\t\tgeometry.setIndex( new BufferAttribute( geometryData.index.array, 1 ) );\n\n\t\t}\n\n\t\tfor ( let i = 0; i < geometryData.attributes.length; i ++ ) {\n\n\t\t\tconst result = geometryData.attributes[ i ];\n\t\t\tconst name = result.name;\n\t\t\tconst array = result.array;\n\t\t\tconst itemSize = result.itemSize;\n\n\t\t\tconst attribute = new BufferAttribute( array, itemSize );\n\n\t\t\tif ( name === 'color' ) {\n\n\t\t\t\tthis._assignVertexColorSpace( attribute, result.vertexColorSpace );\n\n\t\t\t\tattribute.normalized = ( array instanceof Float32Array ) === false;\n\n\t\t\t}\n\n\t\t\tgeometry.setAttribute( name, attribute );\n\n\t\t}\n\n\t\treturn geometry;\n\n\t}\n\n\t_assignVertexColorSpace( attribute, inputColorSpace ) {\n\n\t\t// While .drc files do not specify colorspace, the only 'official' tooling\n\t\t// is PLY and OBJ converters, which use sRGB. We'll assume sRGB when a .drc\n\t\t// file is passed into .load() or .parse(). GLTFLoader uses internal APIs\n\t\t// to decode geometry, and vertex colors are already Linear-sRGB in there.\n\n\t\tif ( inputColorSpace !== SRGBColorSpace ) return;\n\n\t\tconst _color = new Color();\n\n\t\tfor ( let i = 0, il = attribute.count; i < il; i ++ ) {\n\n\t\t\t_color.fromBufferAttribute( attribute, i ).convertSRGBToLinear();\n\t\t\tattribute.setXYZ( i, _color.r, _color.g, _color.b );\n\n\t\t}\n\n\t}\n\n\t_loadLibrary( url, responseType ) {\n\n\t\tconst loader = new FileLoader( this.manager );\n\t\tloader.setPath( this.decoderPath );\n\t\tloader.setResponseType( responseType );\n\t\tloader.setWithCredentials( this.withCredentials );\n\n\t\treturn new Promise( ( resolve, reject ) => {\n\n\t\t\tloader.load( url, resolve, undefined, reject );\n\n\t\t} );\n\n\t}\n\n\tpreload() {\n\n\t\tthis._initDecoder();\n\n\t\treturn this;\n\n\t}\n\n\t_initDecoder() {\n\n\t\tif ( this.decoderPending ) return this.decoderPending;\n\n\t\tconst useJS = typeof WebAssembly !== 'object' || this.decoderConfig.type === 'js';\n\t\tconst librariesPending = [];\n\n\t\tif ( useJS ) {\n\n\t\t\tlibrariesPending.push( this._loadLibrary( 'draco_decoder.js', 'text' ) );\n\n\t\t} else {\n\n\t\t\tlibrariesPending.push( this._loadLibrary( 'draco_wasm_wrapper.js', 'text' ) );\n\t\t\t//librariesPending.push( this._loadLibrary( 'draco_decoder.wasm', 'arraybuffer' ) );\n\n\t\t}\n\n\t\tthis.decoderPending = Promise.all( librariesPending )\n\t\t\t.then( ( libraries ) => {\n\n\t\t\t\tconst jsContent = libraries[ 0 ];\n\n\t\t\t\tconst fn = DRACOWorker.toString();\n\n\t\t\t\tconst body = [\n\t\t\t\t\t'/* draco decoder */',\n\t\t\t\t\tjsContent,\n\t\t\t\t\t'',\n\t\t\t\t\t'/* worker */',\n\t\t\t\t\tfn.substring( fn.indexOf( '{' ) + 1, fn.lastIndexOf( '}' ) )\n\t\t\t\t].join( '\\n' );\n\n\t\t\t\tthis.workerSourceURL = URL.createObjectURL( new Blob( [ body ] ) );\n\n\t\t\t} );\n\n\t\treturn this.decoderPending;\n\n\t}\n\n\t_getWorker( taskID, taskCost ) {\n\n\t\treturn this._initDecoder().then( () => {\n\n\t\t\tif ( this.workerPool.length < this.workerLimit ) {\n\n\t\t\t\tconst worker = new Worker( this.workerSourceURL );\n\n\t\t\t\tworker._callbacks = {};\n\t\t\t\tworker._taskCosts = {};\n\t\t\t\tworker._taskLoad = 0;\n\n\t\t\t\tworker.postMessage( { type: 'init', decoderConfig: this.decoderConfig } );\n\n\t\t\t\tworker.onmessage = function ( e ) {\n\n\t\t\t\t\tconst message = e.data;\n\n\t\t\t\t\tswitch ( message.type ) {\n\n\t\t\t\t\t\tcase 'decode':\n\t\t\t\t\t\t\tworker._callbacks[ message.id ].resolve( message );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 'error':\n\t\t\t\t\t\t\tworker._callbacks[ message.id ].reject( message );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\tconsole.error( 'THREE.DRACOLoader: Unexpected message, \"' + message.type + '\"' );\n\n\t\t\t\t\t}\n\n\t\t\t\t};\n\n\t\t\t\tthis.workerPool.push( worker );\n\n\t\t\t} else {\n\n\t\t\t\tthis.workerPool.sort( function ( a, b ) {\n\n\t\t\t\t\treturn a._taskLoad > b._taskLoad ? -1 : 1;\n\n\t\t\t\t} );\n\n\t\t\t}\n\n\t\t\tconst worker = this.workerPool[ this.workerPool.length - 1 ];\n\t\t\tworker._taskCosts[ taskID ] = taskCost;\n\t\t\tworker._taskLoad += taskCost;\n\t\t\treturn worker;\n\n\t\t} );\n\n\t}\n\n\t_releaseTask( worker, taskID ) {\n\n\t\tworker._taskLoad -= worker._taskCosts[ taskID ];\n\t\tdelete worker._callbacks[ taskID ];\n\t\tdelete worker._taskCosts[ taskID ];\n\n\t}\n\n\tdebug() {\n\n\t\tconsole.log( 'Task load: ', this.workerPool.map( ( worker ) => worker._taskLoad ) );\n\n\t}\n\n\tdispose() {\n\n\t\tfor ( let i = 0; i < this.workerPool.length; ++ i ) {\n\n\t\t\tthis.workerPool[ i ].terminate();\n\n\t\t}\n\n\t\tthis.workerPool.length = 0;\n\n\t\tif ( this.workerSourceURL !== '' ) {\n\n\t\t\tURL.revokeObjectURL( this.workerSourceURL );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n}\n\n/* WEB WORKER */\n\nfunction DRACOWorker() {\n\n\tlet decoderConfig;\n\tlet decoderPending;\n\n\tonmessage = function ( e ) {\n\n\t\tconst message = e.data;\n\n\t\tswitch ( message.type ) {\n\n\t\t\tcase 'init':\n\t\t\t\tdecoderConfig = message.decoderConfig;\n\t\t\t\tdecoderPending = new Promise( function ( resolve/*, reject*/ ) {\n\n\t\t\t\t\tdecoderConfig.onModuleLoaded = function ( draco ) {\n\n\t\t\t\t\t\t// Module is Promise-like. Wrap before resolving to avoid loop.\n\t\t\t\t\t\tresolve( { draco: draco } );\n\n\t\t\t\t\t};\n\n\t\t\t\t\tDracoDecoderModule( decoderConfig ); // eslint-disable-line no-undef\n\n\t\t\t\t} );\n\t\t\t\tbreak;\n\n\t\t\tcase 'decode':\n\t\t\t\tconst buffer = message.buffer;\n\t\t\t\tconst taskConfig = message.taskConfig;\n\t\t\t\tdecoderPending.then( ( module ) => {\n\n\t\t\t\t\tconst draco = module.draco;\n\t\t\t\t\tconst decoder = new draco.Decoder();\n\n\t\t\t\t\ttry {\n\n\t\t\t\t\t\tconst geometry = decodeGeometry( draco, decoder, new Int8Array( buffer ), taskConfig );\n\n\t\t\t\t\t\tconst buffers = geometry.attributes.map( ( attr ) => attr.array.buffer );\n\n\t\t\t\t\t\tif ( geometry.index ) buffers.push( geometry.index.array.buffer );\n\n\t\t\t\t\t\tself.postMessage( { type: 'decode', id: message.id, geometry }, buffers );\n\n\t\t\t\t\t} catch ( error ) {\n\n\t\t\t\t\t\tconsole.error( error );\n\n\t\t\t\t\t\tself.postMessage( { type: 'error', id: message.id, error: error.message } );\n\n\t\t\t\t\t} finally {\n\n\t\t\t\t\t\tdraco.destroy( decoder );\n\n\t\t\t\t\t}\n\n\t\t\t\t} );\n\t\t\t\tbreak;\n\n\t\t}\n\n\t};\n\n\tfunction decodeGeometry( draco, decoder, array, taskConfig ) {\n\n\t\tconst attributeIDs = taskConfig.attributeIDs;\n\t\tconst attributeTypes = taskConfig.attributeTypes;\n\n\t\tlet dracoGeometry;\n\t\tlet decodingStatus;\n\n\t\tconst geometryType = decoder.GetEncodedGeometryType( array );\n\n\t\tif ( geometryType === draco.TRIANGULAR_MESH ) {\n\n\t\t\tdracoGeometry = new draco.Mesh();\n\t\t\tdecodingStatus = decoder.DecodeArrayToMesh( array, array.byteLength, dracoGeometry );\n\n\t\t} else if ( geometryType === draco.POINT_CLOUD ) {\n\n\t\t\tdracoGeometry = new draco.PointCloud();\n\t\t\tdecodingStatus = decoder.DecodeArrayToPointCloud( array, array.byteLength, dracoGeometry );\n\n\t\t} else {\n\n\t\t\tthrow new Error( 'THREE.DRACOLoader: Unexpected geometry type.' );\n\n\t\t}\n\n\t\tif ( ! decodingStatus.ok() || dracoGeometry.ptr === 0 ) {\n\n\t\t\tthrow new Error( 'THREE.DRACOLoader: Decoding failed: ' + decodingStatus.error_msg() );\n\n\t\t}\n\n\t\tconst geometry = { index: null, attributes: [] };\n\n\t\t// Gather all vertex attributes.\n\t\tfor ( const attributeName in attributeIDs ) {\n\n\t\t\tconst attributeType = self[ attributeTypes[ attributeName ] ];\n\n\t\t\tlet attribute;\n\t\t\tlet attributeID;\n\n\t\t\t// A Draco file may be created with default vertex attributes, whose attribute IDs\n\t\t\t// are mapped 1:1 from their semantic name (POSITION, NORMAL, ...). Alternatively,\n\t\t\t// a Draco file may contain a custom set of attributes, identified by known unique\n\t\t\t// IDs. glTF files always do the latter, and `.drc` files typically do the former.\n\t\t\tif ( taskConfig.useUniqueIDs ) {\n\n\t\t\t\tattributeID = attributeIDs[ attributeName ];\n\t\t\t\tattribute = decoder.GetAttributeByUniqueId( dracoGeometry, attributeID );\n\n\t\t\t} else {\n\n\t\t\t\tattributeID = decoder.GetAttributeId( dracoGeometry, draco[ attributeIDs[ attributeName ] ] );\n\n\t\t\t\tif ( attributeID === -1 ) continue;\n\n\t\t\t\tattribute = decoder.GetAttribute( dracoGeometry, attributeID );\n\n\t\t\t}\n\n\t\t\tconst attributeResult = decodeAttribute( draco, decoder, dracoGeometry, attributeName, attributeType, attribute );\n\n\t\t\tif ( attributeName === 'color' ) {\n\n\t\t\t\tattributeResult.vertexColorSpace = taskConfig.vertexColorSpace;\n\n\t\t\t}\n\n\t\t\tgeometry.attributes.push( attributeResult );\n\n\t\t}\n\n\t\t// Add index.\n\t\tif ( geometryType === draco.TRIANGULAR_MESH ) {\n\n\t\t\tgeometry.index = decodeIndex( draco, decoder, dracoGeometry );\n\n\t\t}\n\n\t\tdraco.destroy( dracoGeometry );\n\n\t\treturn geometry;\n\n\t}\n\n\tfunction decodeIndex( draco, decoder, dracoGeometry ) {\n\n\t\tconst numFaces = dracoGeometry.num_faces();\n\t\tconst numIndices = numFaces * 3;\n\t\tconst byteLength = numIndices * 4;\n\n\t\tconst ptr = draco._malloc( byteLength );\n\t\tdecoder.GetTrianglesUInt32Array( dracoGeometry, byteLength, ptr );\n\t\tconst index = new Uint32Array( draco.HEAPF32.buffer, ptr, numIndices ).slice();\n\t\tdraco._free( ptr );\n\n\t\treturn { array: index, itemSize: 1 };\n\n\t}\n\n\tfunction decodeAttribute( draco, decoder, dracoGeometry, attributeName, attributeType, attribute ) {\n\n\t\tconst numComponents = attribute.num_components();\n\t\tconst numPoints = dracoGeometry.num_points();\n\t\tconst numValues = numPoints * numComponents;\n\t\tconst byteLength = numValues * attributeType.BYTES_PER_ELEMENT;\n\t\tconst dataType = getDracoDataType( draco, attributeType );\n\n\t\tconst ptr = draco._malloc( byteLength );\n\t\tdecoder.GetAttributeDataArrayForAllPoints( dracoGeometry, attribute, dataType, byteLength, ptr );\n\t\tconst array = new attributeType( draco.HEAPF32.buffer, ptr, numValues ).slice();\n\t\tdraco._free( ptr );\n\n\t\treturn {\n\t\t\tname: attributeName,\n\t\t\tarray: array,\n\t\t\titemSize: numComponents\n\t\t};\n\n\t}\n\n\tfunction getDracoDataType( draco, attributeType ) {\n\n\t\tswitch ( attributeType ) {\n\n\t\t\tcase Float32Array: return draco.DT_FLOAT32;\n\t\t\tcase Int8Array: return draco.DT_INT8;\n\t\t\tcase Int16Array: return draco.DT_INT16;\n\t\t\tcase Int32Array: return draco.DT_INT32;\n\t\t\tcase Uint8Array: return draco.DT_UINT8;\n\t\t\tcase Uint16Array: return draco.DT_UINT16;\n\t\t\tcase Uint32Array: return draco.DT_UINT32;\n\n\t\t}\n\n\t}\n\n}\n\n/*!\nfflate - fast JavaScript compression/decompression\n<https://101arrowz.github.io/fflate>\nLicensed under MIT. https://github.com/101arrowz/fflate/blob/master/LICENSE\nversion 0.6.9\n*/\n\nvar durl = function (c) { return URL.createObjectURL(new Blob([c], { type: 'text/javascript' })); };\ntry {\n    URL.revokeObjectURL(durl(''));\n}\ncatch (e) {\n    // We're in Deno or a very old browser\n    durl = function (c) { return 'data:application/javascript;charset=UTF-8,' + encodeURI(c); };\n}\n\n// aliases for shorter compressed code (most minifers don't do this)\nvar u8 = Uint8Array, u16 = Uint16Array, u32 = Uint32Array;\n// fixed length extra bits\nvar fleb = new u8([0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 2, 2, 2, 2, 3, 3, 3, 3, 4, 4, 4, 4, 5, 5, 5, 5, 0, /* unused */ 0, 0, /* impossible */ 0]);\n// fixed distance extra bits\n// see fleb note\nvar fdeb = new u8([0, 0, 0, 0, 1, 1, 2, 2, 3, 3, 4, 4, 5, 5, 6, 6, 7, 7, 8, 8, 9, 9, 10, 10, 11, 11, 12, 12, 13, 13, /* unused */ 0, 0]);\n// code length index map\nvar clim = new u8([16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15]);\n// get base, reverse index map from extra bits\nvar freb = function (eb, start) {\n    var b = new u16(31);\n    for (var i = 0; i < 31; ++i) {\n        b[i] = start += 1 << eb[i - 1];\n    }\n    // numbers here are at max 18 bits\n    var r = new u32(b[30]);\n    for (var i = 1; i < 30; ++i) {\n        for (var j = b[i]; j < b[i + 1]; ++j) {\n            r[j] = ((j - b[i]) << 5) | i;\n        }\n    }\n    return [b, r];\n};\nvar _a = freb(fleb, 2), fl = _a[0], revfl = _a[1];\n// we can ignore the fact that the other numbers are wrong; they never happen anyway\nfl[28] = 258, revfl[258] = 28;\nvar _b = freb(fdeb, 0), fd = _b[0];\n// map of value to reverse (assuming 16 bits)\nvar rev = new u16(32768);\nfor (var i = 0; i < 32768; ++i) {\n    // reverse table algorithm from SO\n    var x$1 = ((i & 0xAAAA) >>> 1) | ((i & 0x5555) << 1);\n    x$1 = ((x$1 & 0xCCCC) >>> 2) | ((x$1 & 0x3333) << 2);\n    x$1 = ((x$1 & 0xF0F0) >>> 4) | ((x$1 & 0x0F0F) << 4);\n    rev[i] = (((x$1 & 0xFF00) >>> 8) | ((x$1 & 0x00FF) << 8)) >>> 1;\n}\n// create huffman tree from u8 \"map\": index -> code length for code index\n// mb (max bits) must be at most 15\n// TODO: optimize/split up?\nvar hMap = (function (cd, mb, r) {\n    var s = cd.length;\n    // index\n    var i = 0;\n    // u16 \"map\": index -> # of codes with bit length = index\n    var l = new u16(mb);\n    // length of cd must be 288 (total # of codes)\n    for (; i < s; ++i)\n        ++l[cd[i] - 1];\n    // u16 \"map\": index -> minimum code for bit length = index\n    var le = new u16(mb);\n    for (i = 0; i < mb; ++i) {\n        le[i] = (le[i - 1] + l[i - 1]) << 1;\n    }\n    var co;\n    if (r) {\n        // u16 \"map\": index -> number of actual bits, symbol for code\n        co = new u16(1 << mb);\n        // bits to remove for reverser\n        var rvb = 15 - mb;\n        for (i = 0; i < s; ++i) {\n            // ignore 0 lengths\n            if (cd[i]) {\n                // num encoding both symbol and bits read\n                var sv = (i << 4) | cd[i];\n                // free bits\n                var r_1 = mb - cd[i];\n                // start value\n                var v = le[cd[i] - 1]++ << r_1;\n                // m is end value\n                for (var m = v | ((1 << r_1) - 1); v <= m; ++v) {\n                    // every 16 bit value starting with the code yields the same result\n                    co[rev[v] >>> rvb] = sv;\n                }\n            }\n        }\n    }\n    else {\n        co = new u16(s);\n        for (i = 0; i < s; ++i) {\n            if (cd[i]) {\n                co[i] = rev[le[cd[i] - 1]++] >>> (15 - cd[i]);\n            }\n        }\n    }\n    return co;\n});\n// fixed length tree\nvar flt = new u8(288);\nfor (var i = 0; i < 144; ++i)\n    flt[i] = 8;\nfor (var i = 144; i < 256; ++i)\n    flt[i] = 9;\nfor (var i = 256; i < 280; ++i)\n    flt[i] = 7;\nfor (var i = 280; i < 288; ++i)\n    flt[i] = 8;\n// fixed distance tree\nvar fdt = new u8(32);\nfor (var i = 0; i < 32; ++i)\n    fdt[i] = 5;\n// fixed length map\nvar flrm = /*#__PURE__*/ hMap(flt, 9, 1);\n// fixed distance map\nvar fdrm = /*#__PURE__*/ hMap(fdt, 5, 1);\n// find max of array\nvar max = function (a) {\n    var m = a[0];\n    for (var i = 1; i < a.length; ++i) {\n        if (a[i] > m)\n            m = a[i];\n    }\n    return m;\n};\n// read d, starting at bit p and mask with m\nvar bits = function (d, p, m) {\n    var o = (p / 8) | 0;\n    return ((d[o] | (d[o + 1] << 8)) >> (p & 7)) & m;\n};\n// read d, starting at bit p continuing for at least 16 bits\nvar bits16 = function (d, p) {\n    var o = (p / 8) | 0;\n    return ((d[o] | (d[o + 1] << 8) | (d[o + 2] << 16)) >> (p & 7));\n};\n// get end of byte\nvar shft = function (p) { return ((p / 8) | 0) + (p & 7 && 1); };\n// typed array slice - allows garbage collector to free original reference,\n// while being more compatible than .slice\nvar slc = function (v, s, e) {\n    if (e == null || e > v.length)\n        e = v.length;\n    // can't use .constructor in case user-supplied\n    var n = new (v instanceof u16 ? u16 : v instanceof u32 ? u32 : u8)(e - s);\n    n.set(v.subarray(s, e));\n    return n;\n};\n// expands raw DEFLATE data\nvar inflt = function (dat, buf, st) {\n    // source length\n    var sl = dat.length;\n    if (!sl || (st && !st.l && sl < 5))\n        return buf || new u8(0);\n    // have to estimate size\n    var noBuf = !buf || st;\n    // no state\n    var noSt = !st || st.i;\n    if (!st)\n        st = {};\n    // Assumes roughly 33% compression ratio average\n    if (!buf)\n        buf = new u8(sl * 3);\n    // ensure buffer can fit at least l elements\n    var cbuf = function (l) {\n        var bl = buf.length;\n        // need to increase size to fit\n        if (l > bl) {\n            // Double or set to necessary, whichever is greater\n            var nbuf = new u8(Math.max(bl * 2, l));\n            nbuf.set(buf);\n            buf = nbuf;\n        }\n    };\n    //  last chunk         bitpos           bytes\n    var final = st.f || 0, pos = st.p || 0, bt = st.b || 0, lm = st.l, dm = st.d, lbt = st.m, dbt = st.n;\n    // total bits\n    var tbts = sl * 8;\n    do {\n        if (!lm) {\n            // BFINAL - this is only 1 when last chunk is next\n            st.f = final = bits(dat, pos, 1);\n            // type: 0 = no compression, 1 = fixed huffman, 2 = dynamic huffman\n            var type = bits(dat, pos + 1, 3);\n            pos += 3;\n            if (!type) {\n                // go to end of byte boundary\n                var s = shft(pos) + 4, l = dat[s - 4] | (dat[s - 3] << 8), t = s + l;\n                if (t > sl) {\n                    if (noSt)\n                        throw 'unexpected EOF';\n                    break;\n                }\n                // ensure size\n                if (noBuf)\n                    cbuf(bt + l);\n                // Copy over uncompressed data\n                buf.set(dat.subarray(s, t), bt);\n                // Get new bitpos, update byte count\n                st.b = bt += l, st.p = pos = t * 8;\n                continue;\n            }\n            else if (type == 1)\n                lm = flrm, dm = fdrm, lbt = 9, dbt = 5;\n            else if (type == 2) {\n                //  literal                            lengths\n                var hLit = bits(dat, pos, 31) + 257, hcLen = bits(dat, pos + 10, 15) + 4;\n                var tl = hLit + bits(dat, pos + 5, 31) + 1;\n                pos += 14;\n                // length+distance tree\n                var ldt = new u8(tl);\n                // code length tree\n                var clt = new u8(19);\n                for (var i = 0; i < hcLen; ++i) {\n                    // use index map to get real code\n                    clt[clim[i]] = bits(dat, pos + i * 3, 7);\n                }\n                pos += hcLen * 3;\n                // code lengths bits\n                var clb = max(clt), clbmsk = (1 << clb) - 1;\n                // code lengths map\n                var clm = hMap(clt, clb, 1);\n                for (var i = 0; i < tl;) {\n                    var r = clm[bits(dat, pos, clbmsk)];\n                    // bits read\n                    pos += r & 15;\n                    // symbol\n                    var s = r >>> 4;\n                    // code length to copy\n                    if (s < 16) {\n                        ldt[i++] = s;\n                    }\n                    else {\n                        //  copy   count\n                        var c = 0, n = 0;\n                        if (s == 16)\n                            n = 3 + bits(dat, pos, 3), pos += 2, c = ldt[i - 1];\n                        else if (s == 17)\n                            n = 3 + bits(dat, pos, 7), pos += 3;\n                        else if (s == 18)\n                            n = 11 + bits(dat, pos, 127), pos += 7;\n                        while (n--)\n                            ldt[i++] = c;\n                    }\n                }\n                //    length tree                 distance tree\n                var lt = ldt.subarray(0, hLit), dt = ldt.subarray(hLit);\n                // max length bits\n                lbt = max(lt);\n                // max dist bits\n                dbt = max(dt);\n                lm = hMap(lt, lbt, 1);\n                dm = hMap(dt, dbt, 1);\n            }\n            else\n                throw 'invalid block type';\n            if (pos > tbts) {\n                if (noSt)\n                    throw 'unexpected EOF';\n                break;\n            }\n        }\n        // Make sure the buffer can hold this + the largest possible addition\n        // Maximum chunk size (practically, theoretically infinite) is 2^17;\n        if (noBuf)\n            cbuf(bt + 131072);\n        var lms = (1 << lbt) - 1, dms = (1 << dbt) - 1;\n        var lpos = pos;\n        for (;; lpos = pos) {\n            // bits read, code\n            var c = lm[bits16(dat, pos) & lms], sym = c >>> 4;\n            pos += c & 15;\n            if (pos > tbts) {\n                if (noSt)\n                    throw 'unexpected EOF';\n                break;\n            }\n            if (!c)\n                throw 'invalid length/literal';\n            if (sym < 256)\n                buf[bt++] = sym;\n            else if (sym == 256) {\n                lpos = pos, lm = null;\n                break;\n            }\n            else {\n                var add = sym - 254;\n                // no extra bits needed if less\n                if (sym > 264) {\n                    // index\n                    var i = sym - 257, b = fleb[i];\n                    add = bits(dat, pos, (1 << b) - 1) + fl[i];\n                    pos += b;\n                }\n                // dist\n                var d = dm[bits16(dat, pos) & dms], dsym = d >>> 4;\n                if (!d)\n                    throw 'invalid distance';\n                pos += d & 15;\n                var dt = fd[dsym];\n                if (dsym > 3) {\n                    var b = fdeb[dsym];\n                    dt += bits16(dat, pos) & ((1 << b) - 1), pos += b;\n                }\n                if (pos > tbts) {\n                    if (noSt)\n                        throw 'unexpected EOF';\n                    break;\n                }\n                if (noBuf)\n                    cbuf(bt + 131072);\n                var end = bt + add;\n                for (; bt < end; bt += 4) {\n                    buf[bt] = buf[bt - dt];\n                    buf[bt + 1] = buf[bt + 1 - dt];\n                    buf[bt + 2] = buf[bt + 2 - dt];\n                    buf[bt + 3] = buf[bt + 3 - dt];\n                }\n                bt = end;\n            }\n        }\n        st.l = lm, st.p = lpos, st.b = bt;\n        if (lm)\n            final = 1, st.m = lbt, st.d = dm, st.n = dbt;\n    } while (!final);\n    return bt == buf.length ? buf : slc(buf, 0, bt);\n};\n// empty\nvar et = /*#__PURE__*/ new u8(0);\n// zlib valid\nvar zlv = function (d) {\n    if ((d[0] & 15) != 8 || (d[0] >>> 4) > 7 || ((d[0] << 8 | d[1]) % 31))\n        throw 'invalid zlib data';\n    if (d[1] & 32)\n        throw 'invalid zlib data: preset dictionaries not supported';\n};\n/**\n * Expands Zlib data\n * @param data The data to decompress\n * @param out Where to write the data. Saves memory if you know the decompressed size and provide an output buffer of that length.\n * @returns The decompressed version of the data\n */\nfunction unzlibSync(data, out) {\n    return inflt((zlv(data), data.subarray(2, -4)), out);\n}\n// text decoder\nvar td = typeof TextDecoder != 'undefined' && /*#__PURE__*/ new TextDecoder();\n// text decoder stream\nvar tds = 0;\ntry {\n    td.decode(et, { stream: true });\n    tds = 1;\n}\ncatch (e) { }\n\n/**\n * NURBS utils\n *\n * See NURBSCurve and NURBSSurface.\n **/\n\n\n/**************************************************************\n *\tNURBS Utils\n **************************************************************/\n\n/*\nFinds knot vector span.\n\np : degree\nu : parametric value\nU : knot vector\n\nreturns the span\n*/\nfunction findSpan( p, u, U ) {\n\n\tconst n = U.length - p - 1;\n\n\tif ( u >= U[ n ] ) {\n\n\t\treturn n - 1;\n\n\t}\n\n\tif ( u <= U[ p ] ) {\n\n\t\treturn p;\n\n\t}\n\n\tlet low = p;\n\tlet high = n;\n\tlet mid = Math.floor( ( low + high ) / 2 );\n\n\twhile ( u < U[ mid ] || u >= U[ mid + 1 ] ) {\n\n\t\tif ( u < U[ mid ] ) {\n\n\t\t\thigh = mid;\n\n\t\t} else {\n\n\t\t\tlow = mid;\n\n\t\t}\n\n\t\tmid = Math.floor( ( low + high ) / 2 );\n\n\t}\n\n\treturn mid;\n\n}\n\n\n/*\nCalculate basis functions. See The NURBS Book, page 70, algorithm A2.2\n\nspan : span in which u lies\nu    : parametric point\np    : degree\nU    : knot vector\n\nreturns array[p+1] with basis functions values.\n*/\nfunction calcBasisFunctions( span, u, p, U ) {\n\n\tconst N = [];\n\tconst left = [];\n\tconst right = [];\n\tN[ 0 ] = 1.0;\n\n\tfor ( let j = 1; j <= p; ++ j ) {\n\n\t\tleft[ j ] = u - U[ span + 1 - j ];\n\t\tright[ j ] = U[ span + j ] - u;\n\n\t\tlet saved = 0.0;\n\n\t\tfor ( let r = 0; r < j; ++ r ) {\n\n\t\t\tconst rv = right[ r + 1 ];\n\t\t\tconst lv = left[ j - r ];\n\t\t\tconst temp = N[ r ] / ( rv + lv );\n\t\t\tN[ r ] = saved + rv * temp;\n\t\t\tsaved = lv * temp;\n\n\t\t}\n\n\t\tN[ j ] = saved;\n\n\t}\n\n\treturn N;\n\n}\n\n\n/*\nCalculate B-Spline curve points. See The NURBS Book, page 82, algorithm A3.1.\n\np : degree of B-Spline\nU : knot vector\nP : control points (x, y, z, w)\nu : parametric point\n\nreturns point for given u\n*/\nfunction calcBSplinePoint( p, U, P, u ) {\n\n\tconst span = findSpan( p, u, U );\n\tconst N = calcBasisFunctions( span, u, p, U );\n\tconst C = new Vector4( 0, 0, 0, 0 );\n\n\tfor ( let j = 0; j <= p; ++ j ) {\n\n\t\tconst point = P[ span - p + j ];\n\t\tconst Nj = N[ j ];\n\t\tconst wNj = point.w * Nj;\n\t\tC.x += point.x * wNj;\n\t\tC.y += point.y * wNj;\n\t\tC.z += point.z * wNj;\n\t\tC.w += point.w * Nj;\n\n\t}\n\n\treturn C;\n\n}\n\n\n/*\nCalculate basis functions derivatives. See The NURBS Book, page 72, algorithm A2.3.\n\nspan : span in which u lies\nu    : parametric point\np    : degree\nn    : number of derivatives to calculate\nU    : knot vector\n\nreturns array[n+1][p+1] with basis functions derivatives\n*/\nfunction calcBasisFunctionDerivatives( span, u, p, n, U ) {\n\n\tconst zeroArr = [];\n\tfor ( let i = 0; i <= p; ++ i )\n\t\tzeroArr[ i ] = 0.0;\n\n\tconst ders = [];\n\n\tfor ( let i = 0; i <= n; ++ i )\n\t\tders[ i ] = zeroArr.slice( 0 );\n\n\tconst ndu = [];\n\n\tfor ( let i = 0; i <= p; ++ i )\n\t\tndu[ i ] = zeroArr.slice( 0 );\n\n\tndu[ 0 ][ 0 ] = 1.0;\n\n\tconst left = zeroArr.slice( 0 );\n\tconst right = zeroArr.slice( 0 );\n\n\tfor ( let j = 1; j <= p; ++ j ) {\n\n\t\tleft[ j ] = u - U[ span + 1 - j ];\n\t\tright[ j ] = U[ span + j ] - u;\n\n\t\tlet saved = 0.0;\n\n\t\tfor ( let r = 0; r < j; ++ r ) {\n\n\t\t\tconst rv = right[ r + 1 ];\n\t\t\tconst lv = left[ j - r ];\n\t\t\tndu[ j ][ r ] = rv + lv;\n\n\t\t\tconst temp = ndu[ r ][ j - 1 ] / ndu[ j ][ r ];\n\t\t\tndu[ r ][ j ] = saved + rv * temp;\n\t\t\tsaved = lv * temp;\n\n\t\t}\n\n\t\tndu[ j ][ j ] = saved;\n\n\t}\n\n\tfor ( let j = 0; j <= p; ++ j ) {\n\n\t\tders[ 0 ][ j ] = ndu[ j ][ p ];\n\n\t}\n\n\tfor ( let r = 0; r <= p; ++ r ) {\n\n\t\tlet s1 = 0;\n\t\tlet s2 = 1;\n\n\t\tconst a = [];\n\t\tfor ( let i = 0; i <= p; ++ i ) {\n\n\t\t\ta[ i ] = zeroArr.slice( 0 );\n\n\t\t}\n\n\t\ta[ 0 ][ 0 ] = 1.0;\n\n\t\tfor ( let k = 1; k <= n; ++ k ) {\n\n\t\t\tlet d = 0.0;\n\t\t\tconst rk = r - k;\n\t\t\tconst pk = p - k;\n\n\t\t\tif ( r >= k ) {\n\n\t\t\t\ta[ s2 ][ 0 ] = a[ s1 ][ 0 ] / ndu[ pk + 1 ][ rk ];\n\t\t\t\td = a[ s2 ][ 0 ] * ndu[ rk ][ pk ];\n\n\t\t\t}\n\n\t\t\tconst j1 = ( rk >= -1 ) ? 1 : - rk;\n\t\t\tconst j2 = ( r - 1 <= pk ) ? k - 1 : p - r;\n\n\t\t\tfor ( let j = j1; j <= j2; ++ j ) {\n\n\t\t\t\ta[ s2 ][ j ] = ( a[ s1 ][ j ] - a[ s1 ][ j - 1 ] ) / ndu[ pk + 1 ][ rk + j ];\n\t\t\t\td += a[ s2 ][ j ] * ndu[ rk + j ][ pk ];\n\n\t\t\t}\n\n\t\t\tif ( r <= pk ) {\n\n\t\t\t\ta[ s2 ][ k ] = - a[ s1 ][ k - 1 ] / ndu[ pk + 1 ][ r ];\n\t\t\t\td += a[ s2 ][ k ] * ndu[ r ][ pk ];\n\n\t\t\t}\n\n\t\t\tders[ k ][ r ] = d;\n\n\t\t\tconst j = s1;\n\t\t\ts1 = s2;\n\t\t\ts2 = j;\n\n\t\t}\n\n\t}\n\n\tlet r = p;\n\n\tfor ( let k = 1; k <= n; ++ k ) {\n\n\t\tfor ( let j = 0; j <= p; ++ j ) {\n\n\t\t\tders[ k ][ j ] *= r;\n\n\t\t}\n\n\t\tr *= p - k;\n\n\t}\n\n\treturn ders;\n\n}\n\n\n/*\n\tCalculate derivatives of a B-Spline. See The NURBS Book, page 93, algorithm A3.2.\n\n\tp  : degree\n\tU  : knot vector\n\tP  : control points\n\tu  : Parametric points\n\tnd : number of derivatives\n\n\treturns array[d+1] with derivatives\n\t*/\nfunction calcBSplineDerivatives( p, U, P, u, nd ) {\n\n\tconst du = nd < p ? nd : p;\n\tconst CK = [];\n\tconst span = findSpan( p, u, U );\n\tconst nders = calcBasisFunctionDerivatives( span, u, p, du, U );\n\tconst Pw = [];\n\n\tfor ( let i = 0; i < P.length; ++ i ) {\n\n\t\tconst point = P[ i ].clone();\n\t\tconst w = point.w;\n\n\t\tpoint.x *= w;\n\t\tpoint.y *= w;\n\t\tpoint.z *= w;\n\n\t\tPw[ i ] = point;\n\n\t}\n\n\tfor ( let k = 0; k <= du; ++ k ) {\n\n\t\tconst point = Pw[ span - p ].clone().multiplyScalar( nders[ k ][ 0 ] );\n\n\t\tfor ( let j = 1; j <= p; ++ j ) {\n\n\t\t\tpoint.add( Pw[ span - p + j ].clone().multiplyScalar( nders[ k ][ j ] ) );\n\n\t\t}\n\n\t\tCK[ k ] = point;\n\n\t}\n\n\tfor ( let k = du + 1; k <= nd + 1; ++ k ) {\n\n\t\tCK[ k ] = new Vector4( 0, 0, 0 );\n\n\t}\n\n\treturn CK;\n\n}\n\n\n/*\nCalculate \"K over I\"\n\nreturns k!/(i!(k-i)!)\n*/\nfunction calcKoverI( k, i ) {\n\n\tlet nom = 1;\n\n\tfor ( let j = 2; j <= k; ++ j ) {\n\n\t\tnom *= j;\n\n\t}\n\n\tlet denom = 1;\n\n\tfor ( let j = 2; j <= i; ++ j ) {\n\n\t\tdenom *= j;\n\n\t}\n\n\tfor ( let j = 2; j <= k - i; ++ j ) {\n\n\t\tdenom *= j;\n\n\t}\n\n\treturn nom / denom;\n\n}\n\n\n/*\nCalculate derivatives (0-nd) of rational curve. See The NURBS Book, page 127, algorithm A4.2.\n\nPders : result of function calcBSplineDerivatives\n\nreturns array with derivatives for rational curve.\n*/\nfunction calcRationalCurveDerivatives( Pders ) {\n\n\tconst nd = Pders.length;\n\tconst Aders = [];\n\tconst wders = [];\n\n\tfor ( let i = 0; i < nd; ++ i ) {\n\n\t\tconst point = Pders[ i ];\n\t\tAders[ i ] = new Vector3( point.x, point.y, point.z );\n\t\twders[ i ] = point.w;\n\n\t}\n\n\tconst CK = [];\n\n\tfor ( let k = 0; k < nd; ++ k ) {\n\n\t\tconst v = Aders[ k ].clone();\n\n\t\tfor ( let i = 1; i <= k; ++ i ) {\n\n\t\t\tv.sub( CK[ k - i ].clone().multiplyScalar( calcKoverI( k, i ) * wders[ i ] ) );\n\n\t\t}\n\n\t\tCK[ k ] = v.divideScalar( wders[ 0 ] );\n\n\t}\n\n\treturn CK;\n\n}\n\n\n/*\nCalculate NURBS curve derivatives. See The NURBS Book, page 127, algorithm A4.2.\n\np  : degree\nU  : knot vector\nP  : control points in homogeneous space\nu  : parametric points\nnd : number of derivatives\n\nreturns array with derivatives.\n*/\nfunction calcNURBSDerivatives( p, U, P, u, nd ) {\n\n\tconst Pders = calcBSplineDerivatives( p, U, P, u, nd );\n\treturn calcRationalCurveDerivatives( Pders );\n\n}\n\n/**\n * NURBS curve object\n *\n * Derives from Curve, overriding getPoint and getTangent.\n *\n * Implementation is based on (x, y [, z=0 [, w=1]]) control points with w=weight.\n *\n **/\n\nclass NURBSCurve extends Curve {\n\n\tconstructor(\n\t\tdegree,\n\t\tknots /* array of reals */,\n\t\tcontrolPoints /* array of Vector(2|3|4) */,\n\t\tstartKnot /* index in knots */,\n\t\tendKnot /* index in knots */\n\t) {\n\n\t\tsuper();\n\n\t\tthis.degree = degree;\n\t\tthis.knots = knots;\n\t\tthis.controlPoints = [];\n\t\t// Used by periodic NURBS to remove hidden spans\n\t\tthis.startKnot = startKnot || 0;\n\t\tthis.endKnot = endKnot || ( this.knots.length - 1 );\n\n\t\tfor ( let i = 0; i < controlPoints.length; ++ i ) {\n\n\t\t\t// ensure Vector4 for control points\n\t\t\tconst point = controlPoints[ i ];\n\t\t\tthis.controlPoints[ i ] = new Vector4( point.x, point.y, point.z, point.w );\n\n\t\t}\n\n\t}\n\n\tgetPoint( t, optionalTarget = new Vector3() ) {\n\n\t\tconst point = optionalTarget;\n\n\t\tconst u = this.knots[ this.startKnot ] + t * ( this.knots[ this.endKnot ] - this.knots[ this.startKnot ] ); // linear mapping t->u\n\n\t\t// following results in (wx, wy, wz, w) homogeneous point\n\t\tconst hpoint = calcBSplinePoint( this.degree, this.knots, this.controlPoints, u );\n\n\t\tif ( hpoint.w !== 1.0 ) {\n\n\t\t\t// project to 3D space: (wx, wy, wz, w) -> (x, y, z, 1)\n\t\t\thpoint.divideScalar( hpoint.w );\n\n\t\t}\n\n\t\treturn point.set( hpoint.x, hpoint.y, hpoint.z );\n\n\t}\n\n\tgetTangent( t, optionalTarget = new Vector3() ) {\n\n\t\tconst tangent = optionalTarget;\n\n\t\tconst u = this.knots[ 0 ] + t * ( this.knots[ this.knots.length - 1 ] - this.knots[ 0 ] );\n\t\tconst ders = calcNURBSDerivatives( this.degree, this.knots, this.controlPoints, u, 1 );\n\t\ttangent.copy( ders[ 1 ] ).normalize();\n\n\t\treturn tangent;\n\n\t}\n\n}\n\n/**\n * Loader loads FBX file and generates Group representing FBX scene.\n * Requires FBX file to be >= 7.0 and in ASCII or >= 6400 in Binary format\n * Versions lower than this may load but will probably have errors\n *\n * Needs Support:\n *  Morph normals / blend shape normals\n *\n * FBX format references:\n * \thttps://help.autodesk.com/view/FBX/2017/ENU/?guid=__cpp_ref_index_html (C++ SDK reference)\n *\n * Binary format specification:\n *\thttps://code.blender.org/2013/08/fbx-binary-file-format-specification/\n */\n\n\nlet fbxTree;\nlet connections;\nlet sceneGraph;\n\nclass FBXLoader extends Loader {\n\n\tconstructor( manager ) {\n\n\t\tsuper( manager );\n\n\t}\n\n\tload( url, onLoad, onProgress, onError ) {\n\n\t\tconst scope = this;\n\n\t\tconst path = ( scope.path === '' ) ? LoaderUtils.extractUrlBase( url ) : scope.path;\n\n\t\tconst loader = new FileLoader( this.manager );\n\t\tloader.setPath( scope.path );\n\t\tloader.setResponseType( 'arraybuffer' );\n\t\tloader.setRequestHeader( scope.requestHeader );\n\t\tloader.setWithCredentials( scope.withCredentials );\n\n\t\tloader.load( url, function ( buffer ) {\n\n\t\t\ttry {\n\n\t\t\t\tonLoad( scope.parse( buffer, path ) );\n\n\t\t\t} catch ( e ) {\n\n\t\t\t\tif ( onError ) {\n\n\t\t\t\t\tonError( e );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.error( e );\n\n\t\t\t\t}\n\n\t\t\t\tscope.manager.itemError( url );\n\n\t\t\t}\n\n\t\t}, onProgress, onError );\n\n\t}\n\n\tparse( FBXBuffer, path ) {\n\n\t\tif ( isFbxFormatBinary( FBXBuffer ) ) {\n\n\t\t\tfbxTree = new BinaryParser().parse( FBXBuffer );\n\n\t\t} else {\n\n\t\t\tconst FBXText = convertArrayBufferToString( FBXBuffer );\n\n\t\t\tif ( ! isFbxFormatASCII( FBXText ) ) {\n\n\t\t\t\tthrow new Error( 'THREE.FBXLoader: Unknown format.' );\n\n\t\t\t}\n\n\t\t\tif ( getFbxVersion( FBXText ) < 7000 ) {\n\n\t\t\t\tthrow new Error( 'THREE.FBXLoader: FBX version not supported, FileVersion: ' + getFbxVersion( FBXText ) );\n\n\t\t\t}\n\n\t\t\tfbxTree = new TextParser().parse( FBXText );\n\n\t\t}\n\n\t\t// console.log( fbxTree );\n\n\t\tconst textureLoader = new TextureLoader( this.manager ).setPath( this.resourcePath || path ).setCrossOrigin( this.crossOrigin );\n\n\t\treturn new FBXTreeParser( textureLoader, this.manager ).parse( fbxTree );\n\n\t}\n\n}\n\n// Parse the FBXTree object returned by the BinaryParser or TextParser and return a Group\nclass FBXTreeParser {\n\n\tconstructor( textureLoader, manager ) {\n\n\t\tthis.textureLoader = textureLoader;\n\t\tthis.manager = manager;\n\n\t}\n\n\tparse() {\n\n\t\tconnections = this.parseConnections();\n\n\t\tconst images = this.parseImages();\n\t\tconst textures = this.parseTextures( images );\n\t\tconst materials = this.parseMaterials( textures );\n\t\tconst deformers = this.parseDeformers();\n\t\tconst geometryMap = new GeometryParser().parse( deformers );\n\n\t\tthis.parseScene( deformers, geometryMap, materials );\n\n\t\treturn sceneGraph;\n\n\t}\n\n\t// Parses FBXTree.Connections which holds parent-child connections between objects (e.g. material -> texture, model->geometry )\n\t// and details the connection type\n\tparseConnections() {\n\n\t\tconst connectionMap = new Map();\n\n\t\tif ( 'Connections' in fbxTree ) {\n\n\t\t\tconst rawConnections = fbxTree.Connections.connections;\n\n\t\t\trawConnections.forEach( function ( rawConnection ) {\n\n\t\t\t\tconst fromID = rawConnection[ 0 ];\n\t\t\t\tconst toID = rawConnection[ 1 ];\n\t\t\t\tconst relationship = rawConnection[ 2 ];\n\n\t\t\t\tif ( ! connectionMap.has( fromID ) ) {\n\n\t\t\t\t\tconnectionMap.set( fromID, {\n\t\t\t\t\t\tparents: [],\n\t\t\t\t\t\tchildren: []\n\t\t\t\t\t} );\n\n\t\t\t\t}\n\n\t\t\t\tconst parentRelationship = { ID: toID, relationship: relationship };\n\t\t\t\tconnectionMap.get( fromID ).parents.push( parentRelationship );\n\n\t\t\t\tif ( ! connectionMap.has( toID ) ) {\n\n\t\t\t\t\tconnectionMap.set( toID, {\n\t\t\t\t\t\tparents: [],\n\t\t\t\t\t\tchildren: []\n\t\t\t\t\t} );\n\n\t\t\t\t}\n\n\t\t\t\tconst childRelationship = { ID: fromID, relationship: relationship };\n\t\t\t\tconnectionMap.get( toID ).children.push( childRelationship );\n\n\t\t\t} );\n\n\t\t}\n\n\t\treturn connectionMap;\n\n\t}\n\n\t// Parse FBXTree.Objects.Video for embedded image data\n\t// These images are connected to textures in FBXTree.Objects.Textures\n\t// via FBXTree.Connections.\n\tparseImages() {\n\n\t\tconst images = {};\n\t\tconst blobs = {};\n\n\t\tif ( 'Video' in fbxTree.Objects ) {\n\n\t\t\tconst videoNodes = fbxTree.Objects.Video;\n\n\t\t\tfor ( const nodeID in videoNodes ) {\n\n\t\t\t\tconst videoNode = videoNodes[ nodeID ];\n\n\t\t\t\tconst id = parseInt( nodeID );\n\n\t\t\t\timages[ id ] = videoNode.RelativeFilename || videoNode.Filename;\n\n\t\t\t\t// raw image data is in videoNode.Content\n\t\t\t\tif ( 'Content' in videoNode ) {\n\n\t\t\t\t\tconst arrayBufferContent = ( videoNode.Content instanceof ArrayBuffer ) && ( videoNode.Content.byteLength > 0 );\n\t\t\t\t\tconst base64Content = ( typeof videoNode.Content === 'string' ) && ( videoNode.Content !== '' );\n\n\t\t\t\t\tif ( arrayBufferContent || base64Content ) {\n\n\t\t\t\t\t\tconst image = this.parseImage( videoNodes[ nodeID ] );\n\n\t\t\t\t\t\tblobs[ videoNode.RelativeFilename || videoNode.Filename ] = image;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tfor ( const id in images ) {\n\n\t\t\tconst filename = images[ id ];\n\n\t\t\tif ( blobs[ filename ] !== undefined ) images[ id ] = blobs[ filename ];\n\t\t\telse images[ id ] = images[ id ].split( '\\\\' ).pop();\n\n\t\t}\n\n\t\treturn images;\n\n\t}\n\n\t// Parse embedded image data in FBXTree.Video.Content\n\tparseImage( videoNode ) {\n\n\t\tconst content = videoNode.Content;\n\t\tconst fileName = videoNode.RelativeFilename || videoNode.Filename;\n\t\tconst extension = fileName.slice( fileName.lastIndexOf( '.' ) + 1 ).toLowerCase();\n\n\t\tlet type;\n\n\t\tswitch ( extension ) {\n\n\t\t\tcase 'bmp':\n\n\t\t\t\ttype = 'image/bmp';\n\t\t\t\tbreak;\n\n\t\t\tcase 'jpg':\n\t\t\tcase 'jpeg':\n\n\t\t\t\ttype = 'image/jpeg';\n\t\t\t\tbreak;\n\n\t\t\tcase 'png':\n\n\t\t\t\ttype = 'image/png';\n\t\t\t\tbreak;\n\n\t\t\tcase 'tif':\n\n\t\t\t\ttype = 'image/tiff';\n\t\t\t\tbreak;\n\n\t\t\tcase 'tga':\n\n\t\t\t\tif ( this.manager.getHandler( '.tga' ) === null ) {\n\n\t\t\t\t\tconsole.warn( 'FBXLoader: TGA loader not found, skipping ', fileName );\n\n\t\t\t\t}\n\n\t\t\t\ttype = 'image/tga';\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\n\t\t\t\tconsole.warn( 'FBXLoader: Image type \"' + extension + '\" is not supported.' );\n\t\t\t\treturn;\n\n\t\t}\n\n\t\tif ( typeof content === 'string' ) { // ASCII format\n\n\t\t\treturn 'data:' + type + ';base64,' + content;\n\n\t\t} else { // Binary Format\n\n\t\t\tconst array = new Uint8Array( content );\n\t\t\treturn window.URL.createObjectURL( new Blob( [ array ], { type: type } ) );\n\n\t\t}\n\n\t}\n\n\t// Parse nodes in FBXTree.Objects.Texture\n\t// These contain details such as UV scaling, cropping, rotation etc and are connected\n\t// to images in FBXTree.Objects.Video\n\tparseTextures( images ) {\n\n\t\tconst textureMap = new Map();\n\n\t\tif ( 'Texture' in fbxTree.Objects ) {\n\n\t\t\tconst textureNodes = fbxTree.Objects.Texture;\n\t\t\tfor ( const nodeID in textureNodes ) {\n\n\t\t\t\tconst texture = this.parseTexture( textureNodes[ nodeID ], images );\n\t\t\t\ttextureMap.set( parseInt( nodeID ), texture );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn textureMap;\n\n\t}\n\n\t// Parse individual node in FBXTree.Objects.Texture\n\tparseTexture( textureNode, images ) {\n\n\t\tconst texture = this.loadTexture( textureNode, images );\n\n\t\ttexture.ID = textureNode.id;\n\n\t\ttexture.name = textureNode.attrName;\n\n\t\tconst wrapModeU = textureNode.WrapModeU;\n\t\tconst wrapModeV = textureNode.WrapModeV;\n\n\t\tconst valueU = wrapModeU !== undefined ? wrapModeU.value : 0;\n\t\tconst valueV = wrapModeV !== undefined ? wrapModeV.value : 0;\n\n\t\t// http://download.autodesk.com/us/fbx/SDKdocs/FBX_SDK_Help/files/fbxsdkref/class_k_fbx_texture.html#889640e63e2e681259ea81061b85143a\n\t\t// 0: repeat(default), 1: clamp\n\n\t\ttexture.wrapS = valueU === 0 ? RepeatWrapping : ClampToEdgeWrapping;\n\t\ttexture.wrapT = valueV === 0 ? RepeatWrapping : ClampToEdgeWrapping;\n\n\t\tif ( 'Scaling' in textureNode ) {\n\n\t\t\tconst values = textureNode.Scaling.value;\n\n\t\t\ttexture.repeat.x = values[ 0 ];\n\t\t\ttexture.repeat.y = values[ 1 ];\n\n\t\t}\n\n\t\tif ( 'Translation' in textureNode ) {\n\n\t\t\tconst values = textureNode.Translation.value;\n\n\t\t\ttexture.offset.x = values[ 0 ];\n\t\t\ttexture.offset.y = values[ 1 ];\n\n\t\t}\n\n\t\treturn texture;\n\n\t}\n\n\t// load a texture specified as a blob or data URI, or via an external URL using TextureLoader\n\tloadTexture( textureNode, images ) {\n\n\t\tconst nonNativeExtensions = new Set( [ 'tga', 'tif', 'tiff', 'exr', 'dds', 'hdr', 'ktx2' ] );\n\n\t\tconst extension = textureNode.FileName.split( '.' ).pop().toLowerCase();\n\n\t\tconst loader = nonNativeExtensions.has( extension ) ? this.manager.getHandler( `.${extension}` ) : this.textureLoader;\n\n\t\tif ( ! loader ) {\n\n\t\t\tconsole.warn(\n\t\t\t\t`FBXLoader: ${extension.toUpperCase()} loader not found, creating placeholder texture for`,\n\t\t\t\ttextureNode.RelativeFilename\n\t\t\t);\n\t\t\treturn new Texture();\n\n\t\t}\n\n\t\tconst loaderPath = loader.path;\n\n\t\tif ( ! loaderPath ) {\n\n\t\t\tloader.setPath( this.textureLoader.path );\n\n\t\t}\n\n\t\tconst children = connections.get( textureNode.id ).children;\n\n\t\tlet fileName;\n\n\t\tif ( children !== undefined && children.length > 0 && images[ children[ 0 ].ID ] !== undefined ) {\n\n\t\t\tfileName = images[ children[ 0 ].ID ];\n\n\t\t\tif ( fileName.indexOf( 'blob:' ) === 0 || fileName.indexOf( 'data:' ) === 0 ) {\n\n\t\t\t\tloader.setPath( undefined );\n\n\t\t\t}\n\n\t\t}\n\n\t\tconst texture = loader.load( fileName );\n\n\t\t// revert to initial path\n\t\tloader.setPath( loaderPath );\n\n\t\treturn texture;\n\n\t}\n\n\t// Parse nodes in FBXTree.Objects.Material\n\tparseMaterials( textureMap ) {\n\n\t\tconst materialMap = new Map();\n\n\t\tif ( 'Material' in fbxTree.Objects ) {\n\n\t\t\tconst materialNodes = fbxTree.Objects.Material;\n\n\t\t\tfor ( const nodeID in materialNodes ) {\n\n\t\t\t\tconst material = this.parseMaterial( materialNodes[ nodeID ], textureMap );\n\n\t\t\t\tif ( material !== null ) materialMap.set( parseInt( nodeID ), material );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn materialMap;\n\n\t}\n\n\t// Parse single node in FBXTree.Objects.Material\n\t// Materials are connected to texture maps in FBXTree.Objects.Textures\n\t// FBX format currently only supports Lambert and Phong shading models\n\tparseMaterial( materialNode, textureMap ) {\n\n\t\tconst ID = materialNode.id;\n\t\tconst name = materialNode.attrName;\n\t\tlet type = materialNode.ShadingModel;\n\n\t\t// Case where FBX wraps shading model in property object.\n\t\tif ( typeof type === 'object' ) {\n\n\t\t\ttype = type.value;\n\n\t\t}\n\n\t\t// Ignore unused materials which don't have any connections.\n\t\tif ( ! connections.has( ID ) ) return null;\n\n\t\tconst parameters = this.parseParameters( materialNode, textureMap, ID );\n\n\t\tlet material;\n\n\t\tswitch ( type.toLowerCase() ) {\n\n\t\t\tcase 'phong':\n\t\t\t\tmaterial = new MeshPhongMaterial();\n\t\t\t\tbreak;\n\t\t\tcase 'lambert':\n\t\t\t\tmaterial = new MeshLambertMaterial();\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tconsole.warn( 'THREE.FBXLoader: unknown material type \"%s\". Defaulting to MeshPhongMaterial.', type );\n\t\t\t\tmaterial = new MeshPhongMaterial();\n\t\t\t\tbreak;\n\n\t\t}\n\n\t\tmaterial.setValues( parameters );\n\t\tmaterial.name = name;\n\n\t\treturn material;\n\n\t}\n\n\t// Parse FBX material and return parameters suitable for a three.js material\n\t// Also parse the texture map and return any textures associated with the material\n\tparseParameters( materialNode, textureMap, ID ) {\n\n\t\tconst parameters = {};\n\n\t\tif ( materialNode.BumpFactor ) {\n\n\t\t\tparameters.bumpScale = materialNode.BumpFactor.value;\n\n\t\t}\n\n\t\tif ( materialNode.Diffuse ) {\n\n\t\t\tparameters.color = ColorManagement.toWorkingColorSpace( new Color().fromArray( materialNode.Diffuse.value ), SRGBColorSpace );\n\n\t\t} else if ( materialNode.DiffuseColor && ( materialNode.DiffuseColor.type === 'Color' || materialNode.DiffuseColor.type === 'ColorRGB' ) ) {\n\n\t\t\t// The blender exporter exports diffuse here instead of in materialNode.Diffuse\n\t\t\tparameters.color = ColorManagement.toWorkingColorSpace( new Color().fromArray( materialNode.DiffuseColor.value ), SRGBColorSpace );\n\n\t\t}\n\n\t\tif ( materialNode.DisplacementFactor ) {\n\n\t\t\tparameters.displacementScale = materialNode.DisplacementFactor.value;\n\n\t\t}\n\n\t\tif ( materialNode.Emissive ) {\n\n\t\t\tparameters.emissive = ColorManagement.toWorkingColorSpace( new Color().fromArray( materialNode.Emissive.value ), SRGBColorSpace );\n\n\t\t} else if ( materialNode.EmissiveColor && ( materialNode.EmissiveColor.type === 'Color' || materialNode.EmissiveColor.type === 'ColorRGB' ) ) {\n\n\t\t\t// The blender exporter exports emissive color here instead of in materialNode.Emissive\n\t\t\tparameters.emissive = ColorManagement.toWorkingColorSpace( new Color().fromArray( materialNode.EmissiveColor.value ), SRGBColorSpace );\n\n\t\t}\n\n\t\tif ( materialNode.EmissiveFactor ) {\n\n\t\t\tparameters.emissiveIntensity = parseFloat( materialNode.EmissiveFactor.value );\n\n\t\t}\n\n\t\t// the transparency handling is implemented based on Blender/Unity's approach: https://github.com/sobotka/blender-addons/blob/7d80f2f97161fc8e353a657b179b9aa1f8e5280b/io_scene_fbx/import_fbx.py#L1444-L1459\n\n\t\tparameters.opacity = 1 - ( materialNode.TransparencyFactor ? parseFloat( materialNode.TransparencyFactor.value ) : 0 );\n\n\t\tif ( parameters.opacity === 1 || parameters.opacity === 0 ) {\n\n\t\t\tparameters.opacity = ( materialNode.Opacity ? parseFloat( materialNode.Opacity.value ) : null );\n\n\t\t\tif ( parameters.opacity === null ) {\n\n\t\t\t\tparameters.opacity = 1 - ( materialNode.TransparentColor ? parseFloat( materialNode.TransparentColor.value[ 0 ] ) : 0 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( parameters.opacity < 1.0 ) {\n\n\t\t\tparameters.transparent = true;\n\n\t\t}\n\n\t\tif ( materialNode.ReflectionFactor ) {\n\n\t\t\tparameters.reflectivity = materialNode.ReflectionFactor.value;\n\n\t\t}\n\n\t\tif ( materialNode.Shininess ) {\n\n\t\t\tparameters.shininess = materialNode.Shininess.value;\n\n\t\t}\n\n\t\tif ( materialNode.Specular ) {\n\n\t\t\tparameters.specular = ColorManagement.toWorkingColorSpace( new Color().fromArray( materialNode.Specular.value ), SRGBColorSpace );\n\n\t\t} else if ( materialNode.SpecularColor && materialNode.SpecularColor.type === 'Color' ) {\n\n\t\t\t// The blender exporter exports specular color here instead of in materialNode.Specular\n\t\t\tparameters.specular = ColorManagement.toWorkingColorSpace( new Color().fromArray( materialNode.SpecularColor.value ), SRGBColorSpace );\n\n\t\t}\n\n\t\tconst scope = this;\n\t\tconnections.get( ID ).children.forEach( function ( child ) {\n\n\t\t\tconst type = child.relationship;\n\n\t\t\tswitch ( type ) {\n\n\t\t\t\tcase 'Bump':\n\t\t\t\t\tparameters.bumpMap = scope.getTexture( textureMap, child.ID );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'Maya|TEX_ao_map':\n\t\t\t\t\tparameters.aoMap = scope.getTexture( textureMap, child.ID );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'DiffuseColor':\n\t\t\t\tcase 'Maya|TEX_color_map':\n\t\t\t\t\tparameters.map = scope.getTexture( textureMap, child.ID );\n\t\t\t\t\tif ( parameters.map !== undefined ) {\n\n\t\t\t\t\t\tparameters.map.colorSpace = SRGBColorSpace;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'DisplacementColor':\n\t\t\t\t\tparameters.displacementMap = scope.getTexture( textureMap, child.ID );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'EmissiveColor':\n\t\t\t\t\tparameters.emissiveMap = scope.getTexture( textureMap, child.ID );\n\t\t\t\t\tif ( parameters.emissiveMap !== undefined ) {\n\n\t\t\t\t\t\tparameters.emissiveMap.colorSpace = SRGBColorSpace;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'NormalMap':\n\t\t\t\tcase 'Maya|TEX_normal_map':\n\t\t\t\t\tparameters.normalMap = scope.getTexture( textureMap, child.ID );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'ReflectionColor':\n\t\t\t\t\tparameters.envMap = scope.getTexture( textureMap, child.ID );\n\t\t\t\t\tif ( parameters.envMap !== undefined ) {\n\n\t\t\t\t\t\tparameters.envMap.mapping = EquirectangularReflectionMapping;\n\t\t\t\t\t\tparameters.envMap.colorSpace = SRGBColorSpace;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'SpecularColor':\n\t\t\t\t\tparameters.specularMap = scope.getTexture( textureMap, child.ID );\n\t\t\t\t\tif ( parameters.specularMap !== undefined ) {\n\n\t\t\t\t\t\tparameters.specularMap.colorSpace = SRGBColorSpace;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'TransparentColor':\n\t\t\t\tcase 'TransparencyFactor':\n\t\t\t\t\tparameters.alphaMap = scope.getTexture( textureMap, child.ID );\n\t\t\t\t\tparameters.transparent = true;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'AmbientColor':\n\t\t\t\tcase 'ShininessExponent': // AKA glossiness map\n\t\t\t\tcase 'SpecularFactor': // AKA specularLevel\n\t\t\t\tcase 'VectorDisplacementColor': // NOTE: Seems to be a copy of DisplacementColor\n\t\t\t\tdefault:\n\t\t\t\t\tconsole.warn( 'THREE.FBXLoader: %s map is not supported in three.js, skipping texture.', type );\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t} );\n\n\t\treturn parameters;\n\n\t}\n\n\t// get a texture from the textureMap for use by a material.\n\tgetTexture( textureMap, id ) {\n\n\t\t// if the texture is a layered texture, just use the first layer and issue a warning\n\t\tif ( 'LayeredTexture' in fbxTree.Objects && id in fbxTree.Objects.LayeredTexture ) {\n\n\t\t\tconsole.warn( 'THREE.FBXLoader: layered textures are not supported in three.js. Discarding all but first layer.' );\n\t\t\tid = connections.get( id ).children[ 0 ].ID;\n\n\t\t}\n\n\t\treturn textureMap.get( id );\n\n\t}\n\n\t// Parse nodes in FBXTree.Objects.Deformer\n\t// Deformer node can contain skinning or Vertex Cache animation data, however only skinning is supported here\n\t// Generates map of Skeleton-like objects for use later when generating and binding skeletons.\n\tparseDeformers() {\n\n\t\tconst skeletons = {};\n\t\tconst morphTargets = {};\n\n\t\tif ( 'Deformer' in fbxTree.Objects ) {\n\n\t\t\tconst DeformerNodes = fbxTree.Objects.Deformer;\n\n\t\t\tfor ( const nodeID in DeformerNodes ) {\n\n\t\t\t\tconst deformerNode = DeformerNodes[ nodeID ];\n\n\t\t\t\tconst relationships = connections.get( parseInt( nodeID ) );\n\n\t\t\t\tif ( deformerNode.attrType === 'Skin' ) {\n\n\t\t\t\t\tconst skeleton = this.parseSkeleton( relationships, DeformerNodes );\n\t\t\t\t\tskeleton.ID = nodeID;\n\n\t\t\t\t\tif ( relationships.parents.length > 1 ) console.warn( 'THREE.FBXLoader: skeleton attached to more than one geometry is not supported.' );\n\t\t\t\t\tskeleton.geometryID = relationships.parents[ 0 ].ID;\n\n\t\t\t\t\tskeletons[ nodeID ] = skeleton;\n\n\t\t\t\t} else if ( deformerNode.attrType === 'BlendShape' ) {\n\n\t\t\t\t\tconst morphTarget = {\n\t\t\t\t\t\tid: nodeID,\n\t\t\t\t\t};\n\n\t\t\t\t\tmorphTarget.rawTargets = this.parseMorphTargets( relationships, DeformerNodes );\n\t\t\t\t\tmorphTarget.id = nodeID;\n\n\t\t\t\t\tif ( relationships.parents.length > 1 ) console.warn( 'THREE.FBXLoader: morph target attached to more than one geometry is not supported.' );\n\n\t\t\t\t\tmorphTargets[ nodeID ] = morphTarget;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn {\n\n\t\t\tskeletons: skeletons,\n\t\t\tmorphTargets: morphTargets,\n\n\t\t};\n\n\t}\n\n\t// Parse single nodes in FBXTree.Objects.Deformer\n\t// The top level skeleton node has type 'Skin' and sub nodes have type 'Cluster'\n\t// Each skin node represents a skeleton and each cluster node represents a bone\n\tparseSkeleton( relationships, deformerNodes ) {\n\n\t\tconst rawBones = [];\n\n\t\trelationships.children.forEach( function ( child ) {\n\n\t\t\tconst boneNode = deformerNodes[ child.ID ];\n\n\t\t\tif ( boneNode.attrType !== 'Cluster' ) return;\n\n\t\t\tconst rawBone = {\n\n\t\t\t\tID: child.ID,\n\t\t\t\tindices: [],\n\t\t\t\tweights: [],\n\t\t\t\ttransformLink: new Matrix4().fromArray( boneNode.TransformLink.a ),\n\t\t\t\t// transform: new Matrix4().fromArray( boneNode.Transform.a ),\n\t\t\t\t// linkMode: boneNode.Mode,\n\n\t\t\t};\n\n\t\t\tif ( 'Indexes' in boneNode ) {\n\n\t\t\t\trawBone.indices = boneNode.Indexes.a;\n\t\t\t\trawBone.weights = boneNode.Weights.a;\n\n\t\t\t}\n\n\t\t\trawBones.push( rawBone );\n\n\t\t} );\n\n\t\treturn {\n\n\t\t\trawBones: rawBones,\n\t\t\tbones: []\n\n\t\t};\n\n\t}\n\n\t// The top level morph deformer node has type \"BlendShape\" and sub nodes have type \"BlendShapeChannel\"\n\tparseMorphTargets( relationships, deformerNodes ) {\n\n\t\tconst rawMorphTargets = [];\n\n\t\tfor ( let i = 0; i < relationships.children.length; i ++ ) {\n\n\t\t\tconst child = relationships.children[ i ];\n\n\t\t\tconst morphTargetNode = deformerNodes[ child.ID ];\n\n\t\t\tconst rawMorphTarget = {\n\n\t\t\t\tname: morphTargetNode.attrName,\n\t\t\t\tinitialWeight: morphTargetNode.DeformPercent,\n\t\t\t\tid: morphTargetNode.id,\n\t\t\t\tfullWeights: morphTargetNode.FullWeights.a\n\n\t\t\t};\n\n\t\t\tif ( morphTargetNode.attrType !== 'BlendShapeChannel' ) return;\n\n\t\t\trawMorphTarget.geoID = connections.get( parseInt( child.ID ) ).children.filter( function ( child ) {\n\n\t\t\t\treturn child.relationship === undefined;\n\n\t\t\t} )[ 0 ].ID;\n\n\t\t\trawMorphTargets.push( rawMorphTarget );\n\n\t\t}\n\n\t\treturn rawMorphTargets;\n\n\t}\n\n\t// create the main Group() to be returned by the loader\n\tparseScene( deformers, geometryMap, materialMap ) {\n\n\t\tsceneGraph = new Group();\n\n\t\tconst modelMap = this.parseModels( deformers.skeletons, geometryMap, materialMap );\n\n\t\tconst modelNodes = fbxTree.Objects.Model;\n\n\t\tconst scope = this;\n\t\tmodelMap.forEach( function ( model ) {\n\n\t\t\tconst modelNode = modelNodes[ model.ID ];\n\t\t\tscope.setLookAtProperties( model, modelNode );\n\n\t\t\tconst parentConnections = connections.get( model.ID ).parents;\n\n\t\t\tparentConnections.forEach( function ( connection ) {\n\n\t\t\t\tconst parent = modelMap.get( connection.ID );\n\t\t\t\tif ( parent !== undefined ) parent.add( model );\n\n\t\t\t} );\n\n\t\t\tif ( model.parent === null ) {\n\n\t\t\t\tsceneGraph.add( model );\n\n\t\t\t}\n\n\n\t\t} );\n\n\t\tthis.bindSkeleton( deformers.skeletons, geometryMap, modelMap );\n\n\t\tthis.addGlobalSceneSettings();\n\n\t\tsceneGraph.traverse( function ( node ) {\n\n\t\t\tif ( node.userData.transformData ) {\n\n\t\t\t\tif ( node.parent ) {\n\n\t\t\t\t\tnode.userData.transformData.parentMatrix = node.parent.matrix;\n\t\t\t\t\tnode.userData.transformData.parentMatrixWorld = node.parent.matrixWorld;\n\n\t\t\t\t}\n\n\t\t\t\tconst transform = generateTransform( node.userData.transformData );\n\n\t\t\t\tnode.applyMatrix4( transform );\n\t\t\t\tnode.updateWorldMatrix();\n\n\t\t\t}\n\n\t\t} );\n\n\t\tconst animations = new AnimationParser().parse();\n\n\t\t// if all the models where already combined in a single group, just return that\n\t\tif ( sceneGraph.children.length === 1 && sceneGraph.children[ 0 ].isGroup ) {\n\n\t\t\tsceneGraph.children[ 0 ].animations = animations;\n\t\t\tsceneGraph = sceneGraph.children[ 0 ];\n\n\t\t}\n\n\t\tsceneGraph.animations = animations;\n\n\t}\n\n\t// parse nodes in FBXTree.Objects.Model\n\tparseModels( skeletons, geometryMap, materialMap ) {\n\n\t\tconst modelMap = new Map();\n\t\tconst modelNodes = fbxTree.Objects.Model;\n\n\t\tfor ( const nodeID in modelNodes ) {\n\n\t\t\tconst id = parseInt( nodeID );\n\t\t\tconst node = modelNodes[ nodeID ];\n\t\t\tconst relationships = connections.get( id );\n\n\t\t\tlet model = this.buildSkeleton( relationships, skeletons, id, node.attrName );\n\n\t\t\tif ( ! model ) {\n\n\t\t\t\tswitch ( node.attrType ) {\n\n\t\t\t\t\tcase 'Camera':\n\t\t\t\t\t\tmodel = this.createCamera( relationships );\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'Light':\n\t\t\t\t\t\tmodel = this.createLight( relationships );\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'Mesh':\n\t\t\t\t\t\tmodel = this.createMesh( relationships, geometryMap, materialMap );\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'NurbsCurve':\n\t\t\t\t\t\tmodel = this.createCurve( relationships, geometryMap );\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'LimbNode':\n\t\t\t\t\tcase 'Root':\n\t\t\t\t\t\tmodel = new Bone();\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'Null':\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tmodel = new Group();\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t\tmodel.name = node.attrName ? PropertyBinding.sanitizeNodeName( node.attrName ) : '';\n\t\t\t\tmodel.userData.originalName = node.attrName;\n\n\t\t\t\tmodel.ID = id;\n\n\t\t\t}\n\n\t\t\tthis.getTransformData( model, node );\n\t\t\tmodelMap.set( id, model );\n\n\t\t}\n\n\t\treturn modelMap;\n\n\t}\n\n\tbuildSkeleton( relationships, skeletons, id, name ) {\n\n\t\tlet bone = null;\n\n\t\trelationships.parents.forEach( function ( parent ) {\n\n\t\t\tfor ( const ID in skeletons ) {\n\n\t\t\t\tconst skeleton = skeletons[ ID ];\n\n\t\t\t\tskeleton.rawBones.forEach( function ( rawBone, i ) {\n\n\t\t\t\t\tif ( rawBone.ID === parent.ID ) {\n\n\t\t\t\t\t\tconst subBone = bone;\n\t\t\t\t\t\tbone = new Bone();\n\n\t\t\t\t\t\tbone.matrixWorld.copy( rawBone.transformLink );\n\n\t\t\t\t\t\t// set name and id here - otherwise in cases where \"subBone\" is created it will not have a name / id\n\n\t\t\t\t\t\tbone.name = name ? PropertyBinding.sanitizeNodeName( name ) : '';\n\t\t\t\t\t\tbone.userData.originalName = name;\n\t\t\t\t\t\tbone.ID = id;\n\n\t\t\t\t\t\tskeleton.bones[ i ] = bone;\n\n\t\t\t\t\t\t// In cases where a bone is shared between multiple meshes\n\t\t\t\t\t\t// duplicate the bone here and and it as a child of the first bone\n\t\t\t\t\t\tif ( subBone !== null ) {\n\n\t\t\t\t\t\t\tbone.add( subBone );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t} );\n\n\t\t\t}\n\n\t\t} );\n\n\t\treturn bone;\n\n\t}\n\n\t// create a PerspectiveCamera or OrthographicCamera\n\tcreateCamera( relationships ) {\n\n\t\tlet model;\n\t\tlet cameraAttribute;\n\n\t\trelationships.children.forEach( function ( child ) {\n\n\t\t\tconst attr = fbxTree.Objects.NodeAttribute[ child.ID ];\n\n\t\t\tif ( attr !== undefined ) {\n\n\t\t\t\tcameraAttribute = attr;\n\n\t\t\t}\n\n\t\t} );\n\n\t\tif ( cameraAttribute === undefined ) {\n\n\t\t\tmodel = new Object3D();\n\n\t\t} else {\n\n\t\t\tlet type = 0;\n\t\t\tif ( cameraAttribute.CameraProjectionType !== undefined && cameraAttribute.CameraProjectionType.value === 1 ) {\n\n\t\t\t\ttype = 1;\n\n\t\t\t}\n\n\t\t\tlet nearClippingPlane = 1;\n\t\t\tif ( cameraAttribute.NearPlane !== undefined ) {\n\n\t\t\t\tnearClippingPlane = cameraAttribute.NearPlane.value / 1000;\n\n\t\t\t}\n\n\t\t\tlet farClippingPlane = 1000;\n\t\t\tif ( cameraAttribute.FarPlane !== undefined ) {\n\n\t\t\t\tfarClippingPlane = cameraAttribute.FarPlane.value / 1000;\n\n\t\t\t}\n\n\n\t\t\tlet width = window.innerWidth;\n\t\t\tlet height = window.innerHeight;\n\n\t\t\tif ( cameraAttribute.AspectWidth !== undefined && cameraAttribute.AspectHeight !== undefined ) {\n\n\t\t\t\twidth = cameraAttribute.AspectWidth.value;\n\t\t\t\theight = cameraAttribute.AspectHeight.value;\n\n\t\t\t}\n\n\t\t\tconst aspect = width / height;\n\n\t\t\tlet fov = 45;\n\t\t\tif ( cameraAttribute.FieldOfView !== undefined ) {\n\n\t\t\t\tfov = cameraAttribute.FieldOfView.value;\n\n\t\t\t}\n\n\t\t\tconst focalLength = cameraAttribute.FocalLength ? cameraAttribute.FocalLength.value : null;\n\n\t\t\tswitch ( type ) {\n\n\t\t\t\tcase 0: // Perspective\n\t\t\t\t\tmodel = new PerspectiveCamera( fov, aspect, nearClippingPlane, farClippingPlane );\n\t\t\t\t\tif ( focalLength !== null ) model.setFocalLength( focalLength );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 1: // Orthographic\n\t\t\t\t\tconsole.warn( 'THREE.FBXLoader: Orthographic cameras not supported yet.' );\n\t\t\t\t\tmodel = new Object3D();\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\tconsole.warn( 'THREE.FBXLoader: Unknown camera type ' + type + '.' );\n\t\t\t\t\tmodel = new Object3D();\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn model;\n\n\t}\n\n\t// Create a DirectionalLight, PointLight or SpotLight\n\tcreateLight( relationships ) {\n\n\t\tlet model;\n\t\tlet lightAttribute;\n\n\t\trelationships.children.forEach( function ( child ) {\n\n\t\t\tconst attr = fbxTree.Objects.NodeAttribute[ child.ID ];\n\n\t\t\tif ( attr !== undefined ) {\n\n\t\t\t\tlightAttribute = attr;\n\n\t\t\t}\n\n\t\t} );\n\n\t\tif ( lightAttribute === undefined ) {\n\n\t\t\tmodel = new Object3D();\n\n\t\t} else {\n\n\t\t\tlet type;\n\n\t\t\t// LightType can be undefined for Point lights\n\t\t\tif ( lightAttribute.LightType === undefined ) {\n\n\t\t\t\ttype = 0;\n\n\t\t\t} else {\n\n\t\t\t\ttype = lightAttribute.LightType.value;\n\n\t\t\t}\n\n\t\t\tlet color = 0xffffff;\n\n\t\t\tif ( lightAttribute.Color !== undefined ) {\n\n\t\t\t\tcolor = ColorManagement.toWorkingColorSpace( new Color().fromArray( lightAttribute.Color.value ), SRGBColorSpace );\n\n\t\t\t}\n\n\t\t\tlet intensity = ( lightAttribute.Intensity === undefined ) ? 1 : lightAttribute.Intensity.value / 100;\n\n\t\t\t// light disabled\n\t\t\tif ( lightAttribute.CastLightOnObject !== undefined && lightAttribute.CastLightOnObject.value === 0 ) {\n\n\t\t\t\tintensity = 0;\n\n\t\t\t}\n\n\t\t\tlet distance = 0;\n\t\t\tif ( lightAttribute.FarAttenuationEnd !== undefined ) {\n\n\t\t\t\tif ( lightAttribute.EnableFarAttenuation !== undefined && lightAttribute.EnableFarAttenuation.value === 0 ) {\n\n\t\t\t\t\tdistance = 0;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tdistance = lightAttribute.FarAttenuationEnd.value;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// TODO: could this be calculated linearly from FarAttenuationStart to FarAttenuationEnd?\n\t\t\tconst decay = 1;\n\n\t\t\tswitch ( type ) {\n\n\t\t\t\tcase 0: // Point\n\t\t\t\t\tmodel = new PointLight( color, intensity, distance, decay );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 1: // Directional\n\t\t\t\t\tmodel = new DirectionalLight( color, intensity );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 2: // Spot\n\t\t\t\t\tlet angle = Math.PI / 3;\n\n\t\t\t\t\tif ( lightAttribute.InnerAngle !== undefined ) {\n\n\t\t\t\t\t\tangle = MathUtils.degToRad( lightAttribute.InnerAngle.value );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tlet penumbra = 0;\n\t\t\t\t\tif ( lightAttribute.OuterAngle !== undefined ) {\n\n\t\t\t\t\t\t// TODO: this is not correct - FBX calculates outer and inner angle in degrees\n\t\t\t\t\t\t// with OuterAngle > InnerAngle && OuterAngle <= Math.PI\n\t\t\t\t\t\t// while three.js uses a penumbra between (0, 1) to attenuate the inner angle\n\t\t\t\t\t\tpenumbra = MathUtils.degToRad( lightAttribute.OuterAngle.value );\n\t\t\t\t\t\tpenumbra = Math.max( penumbra, 1 );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tmodel = new SpotLight( color, intensity, distance, angle, penumbra, decay );\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\tconsole.warn( 'THREE.FBXLoader: Unknown light type ' + lightAttribute.LightType.value + ', defaulting to a PointLight.' );\n\t\t\t\t\tmodel = new PointLight( color, intensity );\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t\tif ( lightAttribute.CastShadows !== undefined && lightAttribute.CastShadows.value === 1 ) {\n\n\t\t\t\tmodel.castShadow = true;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn model;\n\n\t}\n\n\tcreateMesh( relationships, geometryMap, materialMap ) {\n\n\t\tlet model;\n\t\tlet geometry = null;\n\t\tlet material = null;\n\t\tconst materials = [];\n\n\t\t// get geometry and materials(s) from connections\n\t\trelationships.children.forEach( function ( child ) {\n\n\t\t\tif ( geometryMap.has( child.ID ) ) {\n\n\t\t\t\tgeometry = geometryMap.get( child.ID );\n\n\t\t\t}\n\n\t\t\tif ( materialMap.has( child.ID ) ) {\n\n\t\t\t\tmaterials.push( materialMap.get( child.ID ) );\n\n\t\t\t}\n\n\t\t} );\n\n\t\tif ( materials.length > 1 ) {\n\n\t\t\tmaterial = materials;\n\n\t\t} else if ( materials.length > 0 ) {\n\n\t\t\tmaterial = materials[ 0 ];\n\n\t\t} else {\n\n\t\t\tmaterial = new MeshPhongMaterial( {\n\t\t\t\tname: Loader.DEFAULT_MATERIAL_NAME,\n\t\t\t\tcolor: 0xcccccc\n\t\t\t} );\n\t\t\tmaterials.push( material );\n\n\t\t}\n\n\t\tif ( 'color' in geometry.attributes ) {\n\n\t\t\tmaterials.forEach( function ( material ) {\n\n\t\t\t\tmaterial.vertexColors = true;\n\n\t\t\t} );\n\n\t\t}\n\n\t\tif ( geometry.FBX_Deformer ) {\n\n\t\t\tmodel = new SkinnedMesh( geometry, material );\n\t\t\tmodel.normalizeSkinWeights();\n\n\t\t} else {\n\n\t\t\tmodel = new Mesh( geometry, material );\n\n\t\t}\n\n\t\treturn model;\n\n\t}\n\n\tcreateCurve( relationships, geometryMap ) {\n\n\t\tconst geometry = relationships.children.reduce( function ( geo, child ) {\n\n\t\t\tif ( geometryMap.has( child.ID ) ) geo = geometryMap.get( child.ID );\n\n\t\t\treturn geo;\n\n\t\t}, null );\n\n\t\t// FBX does not list materials for Nurbs lines, so we'll just put our own in here.\n\t\tconst material = new LineBasicMaterial( {\n\t\t\tname: Loader.DEFAULT_MATERIAL_NAME,\n\t\t\tcolor: 0x3300ff,\n\t\t\tlinewidth: 1\n\t\t} );\n\t\treturn new Line( geometry, material );\n\n\t}\n\n\t// parse the model node for transform data\n\tgetTransformData( model, modelNode ) {\n\n\t\tconst transformData = {};\n\n\t\tif ( 'InheritType' in modelNode ) transformData.inheritType = parseInt( modelNode.InheritType.value );\n\n\t\tif ( 'RotationOrder' in modelNode ) transformData.eulerOrder = getEulerOrder( modelNode.RotationOrder.value );\n\t\telse transformData.eulerOrder = getEulerOrder( 0 );\n\n\t\tif ( 'Lcl_Translation' in modelNode ) transformData.translation = modelNode.Lcl_Translation.value;\n\n\t\tif ( 'PreRotation' in modelNode ) transformData.preRotation = modelNode.PreRotation.value;\n\t\tif ( 'Lcl_Rotation' in modelNode ) transformData.rotation = modelNode.Lcl_Rotation.value;\n\t\tif ( 'PostRotation' in modelNode ) transformData.postRotation = modelNode.PostRotation.value;\n\n\t\tif ( 'Lcl_Scaling' in modelNode ) transformData.scale = modelNode.Lcl_Scaling.value;\n\n\t\tif ( 'ScalingOffset' in modelNode ) transformData.scalingOffset = modelNode.ScalingOffset.value;\n\t\tif ( 'ScalingPivot' in modelNode ) transformData.scalingPivot = modelNode.ScalingPivot.value;\n\n\t\tif ( 'RotationOffset' in modelNode ) transformData.rotationOffset = modelNode.RotationOffset.value;\n\t\tif ( 'RotationPivot' in modelNode ) transformData.rotationPivot = modelNode.RotationPivot.value;\n\n\t\tmodel.userData.transformData = transformData;\n\n\t}\n\n\tsetLookAtProperties( model, modelNode ) {\n\n\t\tif ( 'LookAtProperty' in modelNode ) {\n\n\t\t\tconst children = connections.get( model.ID ).children;\n\n\t\t\tchildren.forEach( function ( child ) {\n\n\t\t\t\tif ( child.relationship === 'LookAtProperty' ) {\n\n\t\t\t\t\tconst lookAtTarget = fbxTree.Objects.Model[ child.ID ];\n\n\t\t\t\t\tif ( 'Lcl_Translation' in lookAtTarget ) {\n\n\t\t\t\t\t\tconst pos = lookAtTarget.Lcl_Translation.value;\n\n\t\t\t\t\t\t// DirectionalLight, SpotLight\n\t\t\t\t\t\tif ( model.target !== undefined ) {\n\n\t\t\t\t\t\t\tmodel.target.position.fromArray( pos );\n\t\t\t\t\t\t\tsceneGraph.add( model.target );\n\n\t\t\t\t\t\t} else { // Cameras and other Object3Ds\n\n\t\t\t\t\t\t\tmodel.lookAt( new Vector3().fromArray( pos ) );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} );\n\n\t\t}\n\n\t}\n\n\tbindSkeleton( skeletons, geometryMap, modelMap ) {\n\n\t\tconst bindMatrices = this.parsePoseNodes();\n\n\t\tfor ( const ID in skeletons ) {\n\n\t\t\tconst skeleton = skeletons[ ID ];\n\n\t\t\tconst parents = connections.get( parseInt( skeleton.ID ) ).parents;\n\n\t\t\tparents.forEach( function ( parent ) {\n\n\t\t\t\tif ( geometryMap.has( parent.ID ) ) {\n\n\t\t\t\t\tconst geoID = parent.ID;\n\t\t\t\t\tconst geoRelationships = connections.get( geoID );\n\n\t\t\t\t\tgeoRelationships.parents.forEach( function ( geoConnParent ) {\n\n\t\t\t\t\t\tif ( modelMap.has( geoConnParent.ID ) ) {\n\n\t\t\t\t\t\t\tconst model = modelMap.get( geoConnParent.ID );\n\n\t\t\t\t\t\t\tmodel.bind( new Skeleton( skeleton.bones ), bindMatrices[ geoConnParent.ID ] );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} );\n\n\t\t\t\t}\n\n\t\t\t} );\n\n\t\t}\n\n\t}\n\n\tparsePoseNodes() {\n\n\t\tconst bindMatrices = {};\n\n\t\tif ( 'Pose' in fbxTree.Objects ) {\n\n\t\t\tconst BindPoseNode = fbxTree.Objects.Pose;\n\n\t\t\tfor ( const nodeID in BindPoseNode ) {\n\n\t\t\t\tif ( BindPoseNode[ nodeID ].attrType === 'BindPose' && BindPoseNode[ nodeID ].NbPoseNodes > 0 ) {\n\n\t\t\t\t\tconst poseNodes = BindPoseNode[ nodeID ].PoseNode;\n\n\t\t\t\t\tif ( Array.isArray( poseNodes ) ) {\n\n\t\t\t\t\t\tposeNodes.forEach( function ( poseNode ) {\n\n\t\t\t\t\t\t\tbindMatrices[ poseNode.Node ] = new Matrix4().fromArray( poseNode.Matrix.a );\n\n\t\t\t\t\t\t} );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tbindMatrices[ poseNodes.Node ] = new Matrix4().fromArray( poseNodes.Matrix.a );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn bindMatrices;\n\n\t}\n\n\taddGlobalSceneSettings() {\n\n\t\tif ( 'GlobalSettings' in fbxTree ) {\n\n\t\t\tif ( 'AmbientColor' in fbxTree.GlobalSettings ) {\n\n\t\t\t\t// Parse ambient color - if it's not set to black (default), create an ambient light\n\n\t\t\t\tconst ambientColor = fbxTree.GlobalSettings.AmbientColor.value;\n\t\t\t\tconst r = ambientColor[ 0 ];\n\t\t\t\tconst g = ambientColor[ 1 ];\n\t\t\t\tconst b = ambientColor[ 2 ];\n\n\t\t\t\tif ( r !== 0 || g !== 0 || b !== 0 ) {\n\n\t\t\t\t\tconst color = new Color().setRGB( r, g, b, SRGBColorSpace );\n\t\t\t\t\tsceneGraph.add( new AmbientLight( color, 1 ) );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( 'UnitScaleFactor' in fbxTree.GlobalSettings ) {\n\n\t\t\t\tsceneGraph.userData.unitScaleFactor = fbxTree.GlobalSettings.UnitScaleFactor.value;\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n}\n\n// parse Geometry data from FBXTree and return map of BufferGeometries\nclass GeometryParser {\n\n\tconstructor() {\n\n\t\tthis.negativeMaterialIndices = false;\n\n\t}\n\n\t// Parse nodes in FBXTree.Objects.Geometry\n\tparse( deformers ) {\n\n\t\tconst geometryMap = new Map();\n\n\t\tif ( 'Geometry' in fbxTree.Objects ) {\n\n\t\t\tconst geoNodes = fbxTree.Objects.Geometry;\n\n\t\t\tfor ( const nodeID in geoNodes ) {\n\n\t\t\t\tconst relationships = connections.get( parseInt( nodeID ) );\n\t\t\t\tconst geo = this.parseGeometry( relationships, geoNodes[ nodeID ], deformers );\n\n\t\t\t\tgeometryMap.set( parseInt( nodeID ), geo );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// report warnings\n\n\t\tif ( this.negativeMaterialIndices === true ) {\n\n\t\t\tconsole.warn( 'THREE.FBXLoader: The FBX file contains invalid (negative) material indices. The asset might not render as expected.' );\n\n\t\t}\n\n\t\treturn geometryMap;\n\n\t}\n\n\t// Parse single node in FBXTree.Objects.Geometry\n\tparseGeometry( relationships, geoNode, deformers ) {\n\n\t\tswitch ( geoNode.attrType ) {\n\n\t\t\tcase 'Mesh':\n\t\t\t\treturn this.parseMeshGeometry( relationships, geoNode, deformers );\n\n\t\t\tcase 'NurbsCurve':\n\t\t\t\treturn this.parseNurbsGeometry( geoNode );\n\n\t\t}\n\n\t}\n\n\t// Parse single node mesh geometry in FBXTree.Objects.Geometry\n\tparseMeshGeometry( relationships, geoNode, deformers ) {\n\n\t\tconst skeletons = deformers.skeletons;\n\t\tconst morphTargets = [];\n\n\t\tconst modelNodes = relationships.parents.map( function ( parent ) {\n\n\t\t\treturn fbxTree.Objects.Model[ parent.ID ];\n\n\t\t} );\n\n\t\t// don't create geometry if it is not associated with any models\n\t\tif ( modelNodes.length === 0 ) return;\n\n\t\tconst skeleton = relationships.children.reduce( function ( skeleton, child ) {\n\n\t\t\tif ( skeletons[ child.ID ] !== undefined ) skeleton = skeletons[ child.ID ];\n\n\t\t\treturn skeleton;\n\n\t\t}, null );\n\n\t\trelationships.children.forEach( function ( child ) {\n\n\t\t\tif ( deformers.morphTargets[ child.ID ] !== undefined ) {\n\n\t\t\t\tmorphTargets.push( deformers.morphTargets[ child.ID ] );\n\n\t\t\t}\n\n\t\t} );\n\n\t\t// Assume one model and get the preRotation from that\n\t\t// if there is more than one model associated with the geometry this may cause problems\n\t\tconst modelNode = modelNodes[ 0 ];\n\n\t\tconst transformData = {};\n\n\t\tif ( 'RotationOrder' in modelNode ) transformData.eulerOrder = getEulerOrder( modelNode.RotationOrder.value );\n\t\tif ( 'InheritType' in modelNode ) transformData.inheritType = parseInt( modelNode.InheritType.value );\n\n\t\tif ( 'GeometricTranslation' in modelNode ) transformData.translation = modelNode.GeometricTranslation.value;\n\t\tif ( 'GeometricRotation' in modelNode ) transformData.rotation = modelNode.GeometricRotation.value;\n\t\tif ( 'GeometricScaling' in modelNode ) transformData.scale = modelNode.GeometricScaling.value;\n\n\t\tconst transform = generateTransform( transformData );\n\n\t\treturn this.genGeometry( geoNode, skeleton, morphTargets, transform );\n\n\t}\n\n\t// Generate a BufferGeometry from a node in FBXTree.Objects.Geometry\n\tgenGeometry( geoNode, skeleton, morphTargets, preTransform ) {\n\n\t\tconst geo = new BufferGeometry();\n\t\tif ( geoNode.attrName ) geo.name = geoNode.attrName;\n\n\t\tconst geoInfo = this.parseGeoNode( geoNode, skeleton );\n\t\tconst buffers = this.genBuffers( geoInfo );\n\n\t\tconst positionAttribute = new Float32BufferAttribute( buffers.vertex, 3 );\n\n\t\tpositionAttribute.applyMatrix4( preTransform );\n\n\t\tgeo.setAttribute( 'position', positionAttribute );\n\n\t\tif ( buffers.colors.length > 0 ) {\n\n\t\t\tgeo.setAttribute( 'color', new Float32BufferAttribute( buffers.colors, 3 ) );\n\n\t\t}\n\n\t\tif ( skeleton ) {\n\n\t\t\tgeo.setAttribute( 'skinIndex', new Uint16BufferAttribute( buffers.weightsIndices, 4 ) );\n\n\t\t\tgeo.setAttribute( 'skinWeight', new Float32BufferAttribute( buffers.vertexWeights, 4 ) );\n\n\t\t\t// used later to bind the skeleton to the model\n\t\t\tgeo.FBX_Deformer = skeleton;\n\n\t\t}\n\n\t\tif ( buffers.normal.length > 0 ) {\n\n\t\t\tconst normalMatrix = new Matrix3().getNormalMatrix( preTransform );\n\n\t\t\tconst normalAttribute = new Float32BufferAttribute( buffers.normal, 3 );\n\t\t\tnormalAttribute.applyNormalMatrix( normalMatrix );\n\n\t\t\tgeo.setAttribute( 'normal', normalAttribute );\n\n\t\t}\n\n\t\tbuffers.uvs.forEach( function ( uvBuffer, i ) {\n\n\t\t\tconst name = i === 0 ? 'uv' : `uv${ i }`;\n\n\t\t\tgeo.setAttribute( name, new Float32BufferAttribute( buffers.uvs[ i ], 2 ) );\n\n\t\t} );\n\n\t\tif ( geoInfo.material && geoInfo.material.mappingType !== 'AllSame' ) {\n\n\t\t\t// Convert the material indices of each vertex into rendering groups on the geometry.\n\t\t\tlet prevMaterialIndex = buffers.materialIndex[ 0 ];\n\t\t\tlet startIndex = 0;\n\n\t\t\tbuffers.materialIndex.forEach( function ( currentIndex, i ) {\n\n\t\t\t\tif ( currentIndex !== prevMaterialIndex ) {\n\n\t\t\t\t\tgeo.addGroup( startIndex, i - startIndex, prevMaterialIndex );\n\n\t\t\t\t\tprevMaterialIndex = currentIndex;\n\t\t\t\t\tstartIndex = i;\n\n\t\t\t\t}\n\n\t\t\t} );\n\n\t\t\t// the loop above doesn't add the last group, do that here.\n\t\t\tif ( geo.groups.length > 0 ) {\n\n\t\t\t\tconst lastGroup = geo.groups[ geo.groups.length - 1 ];\n\t\t\t\tconst lastIndex = lastGroup.start + lastGroup.count;\n\n\t\t\t\tif ( lastIndex !== buffers.materialIndex.length ) {\n\n\t\t\t\t\tgeo.addGroup( lastIndex, buffers.materialIndex.length - lastIndex, prevMaterialIndex );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// case where there are multiple materials but the whole geometry is only\n\t\t\t// using one of them\n\t\t\tif ( geo.groups.length === 0 ) {\n\n\t\t\t\tgeo.addGroup( 0, buffers.materialIndex.length, buffers.materialIndex[ 0 ] );\n\n\t\t\t}\n\n\t\t}\n\n\t\tthis.addMorphTargets( geo, geoNode, morphTargets, preTransform );\n\n\t\treturn geo;\n\n\t}\n\n\tparseGeoNode( geoNode, skeleton ) {\n\n\t\tconst geoInfo = {};\n\n\t\tgeoInfo.vertexPositions = ( geoNode.Vertices !== undefined ) ? geoNode.Vertices.a : [];\n\t\tgeoInfo.vertexIndices = ( geoNode.PolygonVertexIndex !== undefined ) ? geoNode.PolygonVertexIndex.a : [];\n\n\t\tif ( geoNode.LayerElementColor ) {\n\n\t\t\tgeoInfo.color = this.parseVertexColors( geoNode.LayerElementColor[ 0 ] );\n\n\t\t}\n\n\t\tif ( geoNode.LayerElementMaterial ) {\n\n\t\t\tgeoInfo.material = this.parseMaterialIndices( geoNode.LayerElementMaterial[ 0 ] );\n\n\t\t}\n\n\t\tif ( geoNode.LayerElementNormal ) {\n\n\t\t\tgeoInfo.normal = this.parseNormals( geoNode.LayerElementNormal[ 0 ] );\n\n\t\t}\n\n\t\tif ( geoNode.LayerElementUV ) {\n\n\t\t\tgeoInfo.uv = [];\n\n\t\t\tlet i = 0;\n\t\t\twhile ( geoNode.LayerElementUV[ i ] ) {\n\n\t\t\t\tif ( geoNode.LayerElementUV[ i ].UV ) {\n\n\t\t\t\t\tgeoInfo.uv.push( this.parseUVs( geoNode.LayerElementUV[ i ] ) );\n\n\t\t\t\t}\n\n\t\t\t\ti ++;\n\n\t\t\t}\n\n\t\t}\n\n\t\tgeoInfo.weightTable = {};\n\n\t\tif ( skeleton !== null ) {\n\n\t\t\tgeoInfo.skeleton = skeleton;\n\n\t\t\tskeleton.rawBones.forEach( function ( rawBone, i ) {\n\n\t\t\t\t// loop over the bone's vertex indices and weights\n\t\t\t\trawBone.indices.forEach( function ( index, j ) {\n\n\t\t\t\t\tif ( geoInfo.weightTable[ index ] === undefined ) geoInfo.weightTable[ index ] = [];\n\n\t\t\t\t\tgeoInfo.weightTable[ index ].push( {\n\n\t\t\t\t\t\tid: i,\n\t\t\t\t\t\tweight: rawBone.weights[ j ],\n\n\t\t\t\t\t} );\n\n\t\t\t\t} );\n\n\t\t\t} );\n\n\t\t}\n\n\t\treturn geoInfo;\n\n\t}\n\n\tgenBuffers( geoInfo ) {\n\n\t\tconst buffers = {\n\t\t\tvertex: [],\n\t\t\tnormal: [],\n\t\t\tcolors: [],\n\t\t\tuvs: [],\n\t\t\tmaterialIndex: [],\n\t\t\tvertexWeights: [],\n\t\t\tweightsIndices: [],\n\t\t};\n\n\t\tlet polygonIndex = 0;\n\t\tlet faceLength = 0;\n\t\tlet displayedWeightsWarning = false;\n\n\t\t// these will hold data for a single face\n\t\tlet facePositionIndexes = [];\n\t\tlet faceNormals = [];\n\t\tlet faceColors = [];\n\t\tlet faceUVs = [];\n\t\tlet faceWeights = [];\n\t\tlet faceWeightIndices = [];\n\n\t\tconst scope = this;\n\t\tgeoInfo.vertexIndices.forEach( function ( vertexIndex, polygonVertexIndex ) {\n\n\t\t\tlet materialIndex;\n\t\t\tlet endOfFace = false;\n\n\t\t\t// Face index and vertex index arrays are combined in a single array\n\t\t\t// A cube with quad faces looks like this:\n\t\t\t// PolygonVertexIndex: *24 {\n\t\t\t//  a: 0, 1, 3, -3, 2, 3, 5, -5, 4, 5, 7, -7, 6, 7, 1, -1, 1, 7, 5, -4, 6, 0, 2, -5\n\t\t\t//  }\n\t\t\t// Negative numbers mark the end of a face - first face here is 0, 1, 3, -3\n\t\t\t// to find index of last vertex bit shift the index: ^ - 1\n\t\t\tif ( vertexIndex < 0 ) {\n\n\t\t\t\tvertexIndex = vertexIndex ^ -1; // equivalent to ( x * -1 ) - 1\n\t\t\t\tendOfFace = true;\n\n\t\t\t}\n\n\t\t\tlet weightIndices = [];\n\t\t\tlet weights = [];\n\n\t\t\tfacePositionIndexes.push( vertexIndex * 3, vertexIndex * 3 + 1, vertexIndex * 3 + 2 );\n\n\t\t\tif ( geoInfo.color ) {\n\n\t\t\t\tconst data = getData( polygonVertexIndex, polygonIndex, vertexIndex, geoInfo.color );\n\n\t\t\t\tfaceColors.push( data[ 0 ], data[ 1 ], data[ 2 ] );\n\n\t\t\t}\n\n\t\t\tif ( geoInfo.skeleton ) {\n\n\t\t\t\tif ( geoInfo.weightTable[ vertexIndex ] !== undefined ) {\n\n\t\t\t\t\tgeoInfo.weightTable[ vertexIndex ].forEach( function ( wt ) {\n\n\t\t\t\t\t\tweights.push( wt.weight );\n\t\t\t\t\t\tweightIndices.push( wt.id );\n\n\t\t\t\t\t} );\n\n\n\t\t\t\t}\n\n\t\t\t\tif ( weights.length > 4 ) {\n\n\t\t\t\t\tif ( ! displayedWeightsWarning ) {\n\n\t\t\t\t\t\tconsole.warn( 'THREE.FBXLoader: Vertex has more than 4 skinning weights assigned to vertex. Deleting additional weights.' );\n\t\t\t\t\t\tdisplayedWeightsWarning = true;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tconst wIndex = [ 0, 0, 0, 0 ];\n\t\t\t\t\tconst Weight = [ 0, 0, 0, 0 ];\n\n\t\t\t\t\tweights.forEach( function ( weight, weightIndex ) {\n\n\t\t\t\t\t\tlet currentWeight = weight;\n\t\t\t\t\t\tlet currentIndex = weightIndices[ weightIndex ];\n\n\t\t\t\t\t\tWeight.forEach( function ( comparedWeight, comparedWeightIndex, comparedWeightArray ) {\n\n\t\t\t\t\t\t\tif ( currentWeight > comparedWeight ) {\n\n\t\t\t\t\t\t\t\tcomparedWeightArray[ comparedWeightIndex ] = currentWeight;\n\t\t\t\t\t\t\t\tcurrentWeight = comparedWeight;\n\n\t\t\t\t\t\t\t\tconst tmp = wIndex[ comparedWeightIndex ];\n\t\t\t\t\t\t\t\twIndex[ comparedWeightIndex ] = currentIndex;\n\t\t\t\t\t\t\t\tcurrentIndex = tmp;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t} );\n\n\t\t\t\t\t} );\n\n\t\t\t\t\tweightIndices = wIndex;\n\t\t\t\t\tweights = Weight;\n\n\t\t\t\t}\n\n\t\t\t\t// if the weight array is shorter than 4 pad with 0s\n\t\t\t\twhile ( weights.length < 4 ) {\n\n\t\t\t\t\tweights.push( 0 );\n\t\t\t\t\tweightIndices.push( 0 );\n\n\t\t\t\t}\n\n\t\t\t\tfor ( let i = 0; i < 4; ++ i ) {\n\n\t\t\t\t\tfaceWeights.push( weights[ i ] );\n\t\t\t\t\tfaceWeightIndices.push( weightIndices[ i ] );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( geoInfo.normal ) {\n\n\t\t\t\tconst data = getData( polygonVertexIndex, polygonIndex, vertexIndex, geoInfo.normal );\n\n\t\t\t\tfaceNormals.push( data[ 0 ], data[ 1 ], data[ 2 ] );\n\n\t\t\t}\n\n\t\t\tif ( geoInfo.material && geoInfo.material.mappingType !== 'AllSame' ) {\n\n\t\t\t\tmaterialIndex = getData( polygonVertexIndex, polygonIndex, vertexIndex, geoInfo.material )[ 0 ];\n\n\t\t\t\tif ( materialIndex < 0 ) {\n\n\t\t\t\t\tscope.negativeMaterialIndices = true;\n\t\t\t\t\tmaterialIndex = 0; // fallback\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( geoInfo.uv ) {\n\n\t\t\t\tgeoInfo.uv.forEach( function ( uv, i ) {\n\n\t\t\t\t\tconst data = getData( polygonVertexIndex, polygonIndex, vertexIndex, uv );\n\n\t\t\t\t\tif ( faceUVs[ i ] === undefined ) {\n\n\t\t\t\t\t\tfaceUVs[ i ] = [];\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfaceUVs[ i ].push( data[ 0 ] );\n\t\t\t\t\tfaceUVs[ i ].push( data[ 1 ] );\n\n\t\t\t\t} );\n\n\t\t\t}\n\n\t\t\tfaceLength ++;\n\n\t\t\tif ( endOfFace ) {\n\n\t\t\t\tscope.genFace( buffers, geoInfo, facePositionIndexes, materialIndex, faceNormals, faceColors, faceUVs, faceWeights, faceWeightIndices, faceLength );\n\n\t\t\t\tpolygonIndex ++;\n\t\t\t\tfaceLength = 0;\n\n\t\t\t\t// reset arrays for the next face\n\t\t\t\tfacePositionIndexes = [];\n\t\t\t\tfaceNormals = [];\n\t\t\t\tfaceColors = [];\n\t\t\t\tfaceUVs = [];\n\t\t\t\tfaceWeights = [];\n\t\t\t\tfaceWeightIndices = [];\n\n\t\t\t}\n\n\t\t} );\n\n\t\treturn buffers;\n\n\t}\n\n\t// See https://www.khronos.org/opengl/wiki/Calculating_a_Surface_Normal\n\tgetNormalNewell( vertices ) {\n\n\t\tconst normal = new Vector3( 0.0, 0.0, 0.0 );\n\n\t\tfor ( let i = 0; i < vertices.length; i ++ ) {\n\n\t\t\tconst current = vertices[ i ];\n\t\t\tconst next = vertices[ ( i + 1 ) % vertices.length ];\n\n\t\t\tnormal.x += ( current.y - next.y ) * ( current.z + next.z );\n\t\t\tnormal.y += ( current.z - next.z ) * ( current.x + next.x );\n\t\t\tnormal.z += ( current.x - next.x ) * ( current.y + next.y );\n\n\t\t}\n\n\t\tnormal.normalize();\n\n\t\treturn normal;\n\n\t}\n\n\tgetNormalTangentAndBitangent( vertices ) {\n\n\t\tconst normalVector = this.getNormalNewell( vertices );\n\t\t// Avoid up being equal or almost equal to normalVector\n\t\tconst up = Math.abs( normalVector.z ) > 0.5 ? new Vector3( 0.0, 1.0, 0.0 ) : new Vector3( 0.0, 0.0, 1.0 );\n\t\tconst tangent = up.cross( normalVector ).normalize();\n\t\tconst bitangent = normalVector.clone().cross( tangent ).normalize();\n\n\t\treturn {\n\t\t\tnormal: normalVector,\n\t\t\ttangent: tangent,\n\t\t\tbitangent: bitangent\n\t\t};\n\n\t}\n\n\tflattenVertex( vertex, normalTangent, normalBitangent ) {\n\n\t\treturn new Vector2(\n\t\t\tvertex.dot( normalTangent ),\n\t\t\tvertex.dot( normalBitangent )\n\t\t);\n\n\t}\n\n\t// Generate data for a single face in a geometry. If the face is a quad then split it into 2 tris\n\tgenFace( buffers, geoInfo, facePositionIndexes, materialIndex, faceNormals, faceColors, faceUVs, faceWeights, faceWeightIndices, faceLength ) {\n\n\t\tlet triangles;\n\n\t\tif ( faceLength > 3 ) {\n\n\t\t\t// Triangulate n-gon using earcut\n\n\t\t\tconst vertices = [];\n\t\t\t// in morphing scenario vertexPositions represent morphPositions\n\t\t\t// while baseVertexPositions represent the original geometry's positions\n\t\t\tconst positions = geoInfo.baseVertexPositions || geoInfo.vertexPositions;\n\t\t\tfor ( let i = 0; i < facePositionIndexes.length; i += 3 ) {\n\n\t\t\t\tvertices.push(\n\t\t\t\t\tnew Vector3(\n\t\t\t\t\t\tpositions[ facePositionIndexes[ i ] ],\n\t\t\t\t\t\tpositions[ facePositionIndexes[ i + 1 ] ],\n\t\t\t\t\t\tpositions[ facePositionIndexes[ i + 2 ] ]\n\t\t\t\t\t)\n\t\t\t\t);\n\n\t\t\t}\n\n\t\t\tconst { tangent, bitangent } = this.getNormalTangentAndBitangent( vertices );\n\t\t\tconst triangulationInput = [];\n\n\t\t\tfor ( const vertex of vertices ) {\n\n\t\t\t\ttriangulationInput.push( this.flattenVertex( vertex, tangent, bitangent ) );\n\n\t\t\t}\n\n\t\t\t// When vertices is an array of [0,0,0] elements (which is the case for vertices not participating in morph)\n\t\t\t// the triangulationInput will be an array of [0,0] elements\n\t\t\t// resulting in an array of 0 triangles being returned from ShapeUtils.triangulateShape\n\t\t\t// leading to not pushing into buffers.vertex the redundant vertices (the vertices that are not morphed).\n\t\t\t// That's why, in order to support morphing scenario, \"positions\" is looking first for baseVertexPositions,\n\t\t\t// so that we don't end up with an array of 0 triangles for the faces not participating in morph.\n\t\t\ttriangles = ShapeUtils.triangulateShape( triangulationInput, [] );\n\n\t\t} else {\n\n\t\t\t// Regular triangle, skip earcut triangulation step\n\t\t\ttriangles = [[ 0, 1, 2 ]];\n\n\t\t}\n\n\t\tfor ( const [ i0, i1, i2 ] of triangles ) {\n\n\t\t\tbuffers.vertex.push( geoInfo.vertexPositions[ facePositionIndexes[ i0 * 3 ] ] );\n\t\t\tbuffers.vertex.push( geoInfo.vertexPositions[ facePositionIndexes[ i0 * 3 + 1 ] ] );\n\t\t\tbuffers.vertex.push( geoInfo.vertexPositions[ facePositionIndexes[ i0 * 3 + 2 ] ] );\n\n\t\t\tbuffers.vertex.push( geoInfo.vertexPositions[ facePositionIndexes[ i1 * 3 ] ] );\n\t\t\tbuffers.vertex.push( geoInfo.vertexPositions[ facePositionIndexes[ i1 * 3 + 1 ] ] );\n\t\t\tbuffers.vertex.push( geoInfo.vertexPositions[ facePositionIndexes[ i1 * 3 + 2 ] ] );\n\n\t\t\tbuffers.vertex.push( geoInfo.vertexPositions[ facePositionIndexes[ i2 * 3 ] ] );\n\t\t\tbuffers.vertex.push( geoInfo.vertexPositions[ facePositionIndexes[ i2 * 3 + 1 ] ] );\n\t\t\tbuffers.vertex.push( geoInfo.vertexPositions[ facePositionIndexes[ i2 * 3 + 2 ] ] );\n\n\t\t\tif ( geoInfo.skeleton ) {\n\n\t\t\t\tbuffers.vertexWeights.push( faceWeights[ i0 * 4 ] );\n\t\t\t\tbuffers.vertexWeights.push( faceWeights[ i0 * 4 + 1 ] );\n\t\t\t\tbuffers.vertexWeights.push( faceWeights[ i0 * 4 + 2 ] );\n\t\t\t\tbuffers.vertexWeights.push( faceWeights[ i0 * 4 + 3 ] );\n\n\t\t\t\tbuffers.vertexWeights.push( faceWeights[ i1 * 4 ] );\n\t\t\t\tbuffers.vertexWeights.push( faceWeights[ i1 * 4 + 1 ] );\n\t\t\t\tbuffers.vertexWeights.push( faceWeights[ i1 * 4 + 2 ] );\n\t\t\t\tbuffers.vertexWeights.push( faceWeights[ i1 * 4 + 3 ] );\n\n\t\t\t\tbuffers.vertexWeights.push( faceWeights[ i2 * 4 ] );\n\t\t\t\tbuffers.vertexWeights.push( faceWeights[ i2 * 4 + 1 ] );\n\t\t\t\tbuffers.vertexWeights.push( faceWeights[ i2 * 4 + 2 ] );\n\t\t\t\tbuffers.vertexWeights.push( faceWeights[ i2 * 4 + 3 ] );\n\n\t\t\t\tbuffers.weightsIndices.push( faceWeightIndices[ i0 * 4 ] );\n\t\t\t\tbuffers.weightsIndices.push( faceWeightIndices[ i0 * 4 + 1 ] );\n\t\t\t\tbuffers.weightsIndices.push( faceWeightIndices[ i0 * 4 + 2 ] );\n\t\t\t\tbuffers.weightsIndices.push( faceWeightIndices[ i0 * 4 + 3 ] );\n\n\t\t\t\tbuffers.weightsIndices.push( faceWeightIndices[ i1 * 4 ] );\n\t\t\t\tbuffers.weightsIndices.push( faceWeightIndices[ i1 * 4 + 1 ] );\n\t\t\t\tbuffers.weightsIndices.push( faceWeightIndices[ i1 * 4 + 2 ] );\n\t\t\t\tbuffers.weightsIndices.push( faceWeightIndices[ i1 * 4 + 3 ] );\n\n\t\t\t\tbuffers.weightsIndices.push( faceWeightIndices[ i2 * 4 ] );\n\t\t\t\tbuffers.weightsIndices.push( faceWeightIndices[ i2 * 4 + 1 ] );\n\t\t\t\tbuffers.weightsIndices.push( faceWeightIndices[ i2 * 4 + 2 ] );\n\t\t\t\tbuffers.weightsIndices.push( faceWeightIndices[ i2 * 4 + 3 ] );\n\n\t\t\t}\n\n\t\t\tif ( geoInfo.color ) {\n\n\t\t\t\tbuffers.colors.push( faceColors[ i0 * 3 ] );\n\t\t\t\tbuffers.colors.push( faceColors[ i0 * 3 + 1 ] );\n\t\t\t\tbuffers.colors.push( faceColors[ i0 * 3 + 2 ] );\n\n\t\t\t\tbuffers.colors.push( faceColors[ i1 * 3 ] );\n\t\t\t\tbuffers.colors.push( faceColors[ i1 * 3 + 1 ] );\n\t\t\t\tbuffers.colors.push( faceColors[ i1 * 3 + 2 ] );\n\n\t\t\t\tbuffers.colors.push( faceColors[ i2 * 3 ] );\n\t\t\t\tbuffers.colors.push( faceColors[ i2 * 3 + 1 ] );\n\t\t\t\tbuffers.colors.push( faceColors[ i2 * 3 + 2 ] );\n\n\t\t\t}\n\n\t\t\tif ( geoInfo.material && geoInfo.material.mappingType !== 'AllSame' ) {\n\n\t\t\t\tbuffers.materialIndex.push( materialIndex );\n\t\t\t\tbuffers.materialIndex.push( materialIndex );\n\t\t\t\tbuffers.materialIndex.push( materialIndex );\n\n\t\t\t}\n\n\t\t\tif ( geoInfo.normal ) {\n\n\t\t\t\tbuffers.normal.push( faceNormals[ i0 * 3 ] );\n\t\t\t\tbuffers.normal.push( faceNormals[ i0 * 3 + 1 ] );\n\t\t\t\tbuffers.normal.push( faceNormals[ i0 * 3 + 2 ] );\n\n\t\t\t\tbuffers.normal.push( faceNormals[ i1 * 3 ] );\n\t\t\t\tbuffers.normal.push( faceNormals[ i1 * 3 + 1 ] );\n\t\t\t\tbuffers.normal.push( faceNormals[ i1 * 3 + 2 ] );\n\n\t\t\t\tbuffers.normal.push( faceNormals[ i2 * 3 ] );\n\t\t\t\tbuffers.normal.push( faceNormals[ i2 * 3 + 1 ] );\n\t\t\t\tbuffers.normal.push( faceNormals[ i2 * 3 + 2 ] );\n\n\t\t\t}\n\n\t\t\tif ( geoInfo.uv ) {\n\n\t\t\t\tgeoInfo.uv.forEach( function ( uv, j ) {\n\n\t\t\t\t\tif ( buffers.uvs[ j ] === undefined ) buffers.uvs[ j ] = [];\n\n\t\t\t\t\tbuffers.uvs[ j ].push( faceUVs[ j ][ i0 * 2 ] );\n\t\t\t\t\tbuffers.uvs[ j ].push( faceUVs[ j ][ i0 * 2 + 1 ] );\n\n\t\t\t\t\tbuffers.uvs[ j ].push( faceUVs[ j ][ i1 * 2 ] );\n\t\t\t\t\tbuffers.uvs[ j ].push( faceUVs[ j ][ i1 * 2 + 1 ] );\n\n\t\t\t\t\tbuffers.uvs[ j ].push( faceUVs[ j ][ i2 * 2 ] );\n\t\t\t\t\tbuffers.uvs[ j ].push( faceUVs[ j ][ i2 * 2 + 1 ] );\n\n\t\t\t\t} );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\taddMorphTargets( parentGeo, parentGeoNode, morphTargets, preTransform ) {\n\n\t\tif ( morphTargets.length === 0 ) return;\n\n\t\tparentGeo.morphTargetsRelative = true;\n\n\t\tparentGeo.morphAttributes.position = [];\n\t\t// parentGeo.morphAttributes.normal = []; // not implemented\n\n\t\tconst scope = this;\n\t\tmorphTargets.forEach( function ( morphTarget ) {\n\n\t\t\tmorphTarget.rawTargets.forEach( function ( rawTarget ) {\n\n\t\t\t\tconst morphGeoNode = fbxTree.Objects.Geometry[ rawTarget.geoID ];\n\n\t\t\t\tif ( morphGeoNode !== undefined ) {\n\n\t\t\t\t\tscope.genMorphGeometry( parentGeo, parentGeoNode, morphGeoNode, preTransform, rawTarget.name );\n\n\t\t\t\t}\n\n\t\t\t} );\n\n\t\t} );\n\n\t}\n\n\t// a morph geometry node is similar to a standard  node, and the node is also contained\n\t// in FBXTree.Objects.Geometry, however it can only have attributes for position, normal\n\t// and a special attribute Index defining which vertices of the original geometry are affected\n\t// Normal and position attributes only have data for the vertices that are affected by the morph\n\tgenMorphGeometry( parentGeo, parentGeoNode, morphGeoNode, preTransform, name ) {\n\n\t\tconst basePositions = parentGeoNode.Vertices !== undefined ? parentGeoNode.Vertices.a : [];\n\t\tconst baseIndices = parentGeoNode.PolygonVertexIndex !== undefined ? parentGeoNode.PolygonVertexIndex.a : [];\n\n\t\tconst morphPositionsSparse = morphGeoNode.Vertices !== undefined ? morphGeoNode.Vertices.a : [];\n\t\tconst morphIndices = morphGeoNode.Indexes !== undefined ? morphGeoNode.Indexes.a : [];\n\n\t\tconst length = parentGeo.attributes.position.count * 3;\n\t\tconst morphPositions = new Float32Array( length );\n\n\t\tfor ( let i = 0; i < morphIndices.length; i ++ ) {\n\n\t\t\tconst morphIndex = morphIndices[ i ] * 3;\n\n\t\t\tmorphPositions[ morphIndex ] = morphPositionsSparse[ i * 3 ];\n\t\t\tmorphPositions[ morphIndex + 1 ] = morphPositionsSparse[ i * 3 + 1 ];\n\t\t\tmorphPositions[ morphIndex + 2 ] = morphPositionsSparse[ i * 3 + 2 ];\n\n\t\t}\n\n\t\t// TODO: add morph normal support\n\t\tconst morphGeoInfo = {\n\t\t\tvertexIndices: baseIndices,\n\t\t\tvertexPositions: morphPositions,\n\t\t\tbaseVertexPositions: basePositions\n\t\t};\n\n\t\tconst morphBuffers = this.genBuffers( morphGeoInfo );\n\n\t\tconst positionAttribute = new Float32BufferAttribute( morphBuffers.vertex, 3 );\n\t\tpositionAttribute.name = name || morphGeoNode.attrName;\n\n\t\tpositionAttribute.applyMatrix4( preTransform );\n\n\t\tparentGeo.morphAttributes.position.push( positionAttribute );\n\n\t}\n\n\t// Parse normal from FBXTree.Objects.Geometry.LayerElementNormal if it exists\n\tparseNormals( NormalNode ) {\n\n\t\tconst mappingType = NormalNode.MappingInformationType;\n\t\tconst referenceType = NormalNode.ReferenceInformationType;\n\t\tconst buffer = NormalNode.Normals.a;\n\t\tlet indexBuffer = [];\n\t\tif ( referenceType === 'IndexToDirect' ) {\n\n\t\t\tif ( 'NormalIndex' in NormalNode ) {\n\n\t\t\t\tindexBuffer = NormalNode.NormalIndex.a;\n\n\t\t\t} else if ( 'NormalsIndex' in NormalNode ) {\n\n\t\t\t\tindexBuffer = NormalNode.NormalsIndex.a;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn {\n\t\t\tdataSize: 3,\n\t\t\tbuffer: buffer,\n\t\t\tindices: indexBuffer,\n\t\t\tmappingType: mappingType,\n\t\t\treferenceType: referenceType\n\t\t};\n\n\t}\n\n\t// Parse UVs from FBXTree.Objects.Geometry.LayerElementUV if it exists\n\tparseUVs( UVNode ) {\n\n\t\tconst mappingType = UVNode.MappingInformationType;\n\t\tconst referenceType = UVNode.ReferenceInformationType;\n\t\tconst buffer = UVNode.UV.a;\n\t\tlet indexBuffer = [];\n\t\tif ( referenceType === 'IndexToDirect' ) {\n\n\t\t\tindexBuffer = UVNode.UVIndex.a;\n\n\t\t}\n\n\t\treturn {\n\t\t\tdataSize: 2,\n\t\t\tbuffer: buffer,\n\t\t\tindices: indexBuffer,\n\t\t\tmappingType: mappingType,\n\t\t\treferenceType: referenceType\n\t\t};\n\n\t}\n\n\t// Parse Vertex Colors from FBXTree.Objects.Geometry.LayerElementColor if it exists\n\tparseVertexColors( ColorNode ) {\n\n\t\tconst mappingType = ColorNode.MappingInformationType;\n\t\tconst referenceType = ColorNode.ReferenceInformationType;\n\t\tconst buffer = ColorNode.Colors.a;\n\t\tlet indexBuffer = [];\n\t\tif ( referenceType === 'IndexToDirect' ) {\n\n\t\t\tindexBuffer = ColorNode.ColorIndex.a;\n\n\t\t}\n\n\t\tfor ( let i = 0, c = new Color(); i < buffer.length; i += 4 ) {\n\n\t\t\tc.fromArray( buffer, i );\n\t\t\tColorManagement.toWorkingColorSpace( c, SRGBColorSpace );\n\t\t\tc.toArray( buffer, i );\n\n\t\t}\n\n\t\treturn {\n\t\t\tdataSize: 4,\n\t\t\tbuffer: buffer,\n\t\t\tindices: indexBuffer,\n\t\t\tmappingType: mappingType,\n\t\t\treferenceType: referenceType\n\t\t};\n\n\t}\n\n\t// Parse mapping and material data in FBXTree.Objects.Geometry.LayerElementMaterial if it exists\n\tparseMaterialIndices( MaterialNode ) {\n\n\t\tconst mappingType = MaterialNode.MappingInformationType;\n\t\tconst referenceType = MaterialNode.ReferenceInformationType;\n\n\t\tif ( mappingType === 'NoMappingInformation' ) {\n\n\t\t\treturn {\n\t\t\t\tdataSize: 1,\n\t\t\t\tbuffer: [ 0 ],\n\t\t\t\tindices: [ 0 ],\n\t\t\t\tmappingType: 'AllSame',\n\t\t\t\treferenceType: referenceType\n\t\t\t};\n\n\t\t}\n\n\t\tconst materialIndexBuffer = MaterialNode.Materials.a;\n\n\t\t// Since materials are stored as indices, there's a bit of a mismatch between FBX and what\n\t\t// we expect.So we create an intermediate buffer that points to the index in the buffer,\n\t\t// for conforming with the other functions we've written for other data.\n\t\tconst materialIndices = [];\n\n\t\tfor ( let i = 0; i < materialIndexBuffer.length; ++ i ) {\n\n\t\t\tmaterialIndices.push( i );\n\n\t\t}\n\n\t\treturn {\n\t\t\tdataSize: 1,\n\t\t\tbuffer: materialIndexBuffer,\n\t\t\tindices: materialIndices,\n\t\t\tmappingType: mappingType,\n\t\t\treferenceType: referenceType\n\t\t};\n\n\t}\n\n\t// Generate a NurbGeometry from a node in FBXTree.Objects.Geometry\n\tparseNurbsGeometry( geoNode ) {\n\n\t\tconst order = parseInt( geoNode.Order );\n\n\t\tif ( isNaN( order ) ) {\n\n\t\t\tconsole.error( 'THREE.FBXLoader: Invalid Order %s given for geometry ID: %s', geoNode.Order, geoNode.id );\n\t\t\treturn new BufferGeometry();\n\n\t\t}\n\n\t\tconst degree = order - 1;\n\n\t\tconst knots = geoNode.KnotVector.a;\n\t\tconst controlPoints = [];\n\t\tconst pointsValues = geoNode.Points.a;\n\n\t\tfor ( let i = 0, l = pointsValues.length; i < l; i += 4 ) {\n\n\t\t\tcontrolPoints.push( new Vector4().fromArray( pointsValues, i ) );\n\n\t\t}\n\n\t\tlet startKnot, endKnot;\n\n\t\tif ( geoNode.Form === 'Closed' ) {\n\n\t\t\tcontrolPoints.push( controlPoints[ 0 ] );\n\n\t\t} else if ( geoNode.Form === 'Periodic' ) {\n\n\t\t\tstartKnot = degree;\n\t\t\tendKnot = knots.length - 1 - startKnot;\n\n\t\t\tfor ( let i = 0; i < degree; ++ i ) {\n\n\t\t\t\tcontrolPoints.push( controlPoints[ i ] );\n\n\t\t\t}\n\n\t\t}\n\n\t\tconst curve = new NURBSCurve( degree, knots, controlPoints, startKnot, endKnot );\n\t\tconst points = curve.getPoints( controlPoints.length * 12 );\n\n\t\treturn new BufferGeometry().setFromPoints( points );\n\n\t}\n\n}\n\n// parse animation data from FBXTree\nclass AnimationParser {\n\n\t// take raw animation clips and turn them into three.js animation clips\n\tparse() {\n\n\t\tconst animationClips = [];\n\n\t\tconst rawClips = this.parseClips();\n\n\t\tif ( rawClips !== undefined ) {\n\n\t\t\tfor ( const key in rawClips ) {\n\n\t\t\t\tconst rawClip = rawClips[ key ];\n\n\t\t\t\tconst clip = this.addClip( rawClip );\n\n\t\t\t\tanimationClips.push( clip );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn animationClips;\n\n\t}\n\n\tparseClips() {\n\n\t\t// since the actual transformation data is stored in FBXTree.Objects.AnimationCurve,\n\t\t// if this is undefined we can safely assume there are no animations\n\t\tif ( fbxTree.Objects.AnimationCurve === undefined ) return undefined;\n\n\t\tconst curveNodesMap = this.parseAnimationCurveNodes();\n\n\t\tthis.parseAnimationCurves( curveNodesMap );\n\n\t\tconst layersMap = this.parseAnimationLayers( curveNodesMap );\n\t\tconst rawClips = this.parseAnimStacks( layersMap );\n\n\t\treturn rawClips;\n\n\t}\n\n\t// parse nodes in FBXTree.Objects.AnimationCurveNode\n\t// each AnimationCurveNode holds data for an animation transform for a model (e.g. left arm rotation )\n\t// and is referenced by an AnimationLayer\n\tparseAnimationCurveNodes() {\n\n\t\tconst rawCurveNodes = fbxTree.Objects.AnimationCurveNode;\n\n\t\tconst curveNodesMap = new Map();\n\n\t\tfor ( const nodeID in rawCurveNodes ) {\n\n\t\t\tconst rawCurveNode = rawCurveNodes[ nodeID ];\n\n\t\t\tif ( rawCurveNode.attrName.match( /S|R|T|DeformPercent/ ) !== null ) {\n\n\t\t\t\tconst curveNode = {\n\n\t\t\t\t\tid: rawCurveNode.id,\n\t\t\t\t\tattr: rawCurveNode.attrName,\n\t\t\t\t\tcurves: {},\n\n\t\t\t\t};\n\n\t\t\t\tcurveNodesMap.set( curveNode.id, curveNode );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn curveNodesMap;\n\n\t}\n\n\t// parse nodes in FBXTree.Objects.AnimationCurve and connect them up to\n\t// previously parsed AnimationCurveNodes. Each AnimationCurve holds data for a single animated\n\t// axis ( e.g. times and values of x rotation)\n\tparseAnimationCurves( curveNodesMap ) {\n\n\t\tconst rawCurves = fbxTree.Objects.AnimationCurve;\n\n\t\t// TODO: Many values are identical up to roundoff error, but won't be optimised\n\t\t// e.g. position times: [0, 0.4, 0. 8]\n\t\t// position values: [7.23538335023477e-7, 93.67518615722656, -0.9982695579528809, 7.23538335023477e-7, 93.67518615722656, -0.9982695579528809, 7.235384487103147e-7, 93.67520904541016, -0.9982695579528809]\n\t\t// clearly, this should be optimised to\n\t\t// times: [0], positions [7.23538335023477e-7, 93.67518615722656, -0.9982695579528809]\n\t\t// this shows up in nearly every FBX file, and generally time array is length > 100\n\n\t\tfor ( const nodeID in rawCurves ) {\n\n\t\t\tconst animationCurve = {\n\n\t\t\t\tid: rawCurves[ nodeID ].id,\n\t\t\t\ttimes: rawCurves[ nodeID ].KeyTime.a.map( convertFBXTimeToSeconds ),\n\t\t\t\tvalues: rawCurves[ nodeID ].KeyValueFloat.a,\n\n\t\t\t};\n\n\t\t\tconst relationships = connections.get( animationCurve.id );\n\n\t\t\tif ( relationships !== undefined ) {\n\n\t\t\t\tconst animationCurveID = relationships.parents[ 0 ].ID;\n\t\t\t\tconst animationCurveRelationship = relationships.parents[ 0 ].relationship;\n\n\t\t\t\tif ( animationCurveRelationship.match( /X/ ) ) {\n\n\t\t\t\t\tcurveNodesMap.get( animationCurveID ).curves[ 'x' ] = animationCurve;\n\n\t\t\t\t} else if ( animationCurveRelationship.match( /Y/ ) ) {\n\n\t\t\t\t\tcurveNodesMap.get( animationCurveID ).curves[ 'y' ] = animationCurve;\n\n\t\t\t\t} else if ( animationCurveRelationship.match( /Z/ ) ) {\n\n\t\t\t\t\tcurveNodesMap.get( animationCurveID ).curves[ 'z' ] = animationCurve;\n\n\t\t\t\t} else if ( animationCurveRelationship.match( /DeformPercent/ ) && curveNodesMap.has( animationCurveID ) ) {\n\n\t\t\t\t\tcurveNodesMap.get( animationCurveID ).curves[ 'morph' ] = animationCurve;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\t// parse nodes in FBXTree.Objects.AnimationLayer. Each layers holds references\n\t// to various AnimationCurveNodes and is referenced by an AnimationStack node\n\t// note: theoretically a stack can have multiple layers, however in practice there always seems to be one per stack\n\tparseAnimationLayers( curveNodesMap ) {\n\n\t\tconst rawLayers = fbxTree.Objects.AnimationLayer;\n\n\t\tconst layersMap = new Map();\n\n\t\tfor ( const nodeID in rawLayers ) {\n\n\t\t\tconst layerCurveNodes = [];\n\n\t\t\tconst connection = connections.get( parseInt( nodeID ) );\n\n\t\t\tif ( connection !== undefined ) {\n\n\t\t\t\t// all the animationCurveNodes used in the layer\n\t\t\t\tconst children = connection.children;\n\n\t\t\t\tchildren.forEach( function ( child, i ) {\n\n\t\t\t\t\tif ( curveNodesMap.has( child.ID ) ) {\n\n\t\t\t\t\t\tconst curveNode = curveNodesMap.get( child.ID );\n\n\t\t\t\t\t\t// check that the curves are defined for at least one axis, otherwise ignore the curveNode\n\t\t\t\t\t\tif ( curveNode.curves.x !== undefined || curveNode.curves.y !== undefined || curveNode.curves.z !== undefined ) {\n\n\t\t\t\t\t\t\tif ( layerCurveNodes[ i ] === undefined ) {\n\n\t\t\t\t\t\t\t\tconst modelID = connections.get( child.ID ).parents.filter( function ( parent ) {\n\n\t\t\t\t\t\t\t\t\treturn parent.relationship !== undefined;\n\n\t\t\t\t\t\t\t\t} )[ 0 ].ID;\n\n\t\t\t\t\t\t\t\tif ( modelID !== undefined ) {\n\n\t\t\t\t\t\t\t\t\tconst rawModel = fbxTree.Objects.Model[ modelID.toString() ];\n\n\t\t\t\t\t\t\t\t\tif ( rawModel === undefined ) {\n\n\t\t\t\t\t\t\t\t\t\tconsole.warn( 'THREE.FBXLoader: Encountered a unused curve.', child );\n\t\t\t\t\t\t\t\t\t\treturn;\n\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\tconst node = {\n\n\t\t\t\t\t\t\t\t\t\tmodelName: rawModel.attrName ? PropertyBinding.sanitizeNodeName( rawModel.attrName ) : '',\n\t\t\t\t\t\t\t\t\t\tID: rawModel.id,\n\t\t\t\t\t\t\t\t\t\tinitialPosition: [ 0, 0, 0 ],\n\t\t\t\t\t\t\t\t\t\tinitialRotation: [ 0, 0, 0 ],\n\t\t\t\t\t\t\t\t\t\tinitialScale: [ 1, 1, 1 ],\n\n\t\t\t\t\t\t\t\t\t};\n\n\t\t\t\t\t\t\t\t\tsceneGraph.traverse( function ( child ) {\n\n\t\t\t\t\t\t\t\t\t\tif ( child.ID === rawModel.id ) {\n\n\t\t\t\t\t\t\t\t\t\t\tnode.transform = child.matrix;\n\n\t\t\t\t\t\t\t\t\t\t\tif ( child.userData.transformData ) node.eulerOrder = child.userData.transformData.eulerOrder;\n\n\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t} );\n\n\t\t\t\t\t\t\t\t\tif ( ! node.transform ) node.transform = new Matrix4();\n\n\t\t\t\t\t\t\t\t\t// if the animated model is pre rotated, we'll have to apply the pre rotations to every\n\t\t\t\t\t\t\t\t\t// animation value as well\n\t\t\t\t\t\t\t\t\tif ( 'PreRotation' in rawModel ) node.preRotation = rawModel.PreRotation.value;\n\t\t\t\t\t\t\t\t\tif ( 'PostRotation' in rawModel ) node.postRotation = rawModel.PostRotation.value;\n\n\t\t\t\t\t\t\t\t\tlayerCurveNodes[ i ] = node;\n\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif ( layerCurveNodes[ i ] ) layerCurveNodes[ i ][ curveNode.attr ] = curveNode;\n\n\t\t\t\t\t\t} else if ( curveNode.curves.morph !== undefined ) {\n\n\t\t\t\t\t\t\tif ( layerCurveNodes[ i ] === undefined ) {\n\n\t\t\t\t\t\t\t\tconst deformerID = connections.get( child.ID ).parents.filter( function ( parent ) {\n\n\t\t\t\t\t\t\t\t\treturn parent.relationship !== undefined;\n\n\t\t\t\t\t\t\t\t} )[ 0 ].ID;\n\n\t\t\t\t\t\t\t\tconst morpherID = connections.get( deformerID ).parents[ 0 ].ID;\n\t\t\t\t\t\t\t\tconst geoID = connections.get( morpherID ).parents[ 0 ].ID;\n\n\t\t\t\t\t\t\t\t// assuming geometry is not used in more than one model\n\t\t\t\t\t\t\t\tconst modelID = connections.get( geoID ).parents[ 0 ].ID;\n\n\t\t\t\t\t\t\t\tconst rawModel = fbxTree.Objects.Model[ modelID ];\n\n\t\t\t\t\t\t\t\tconst node = {\n\n\t\t\t\t\t\t\t\t\tmodelName: rawModel.attrName ? PropertyBinding.sanitizeNodeName( rawModel.attrName ) : '',\n\t\t\t\t\t\t\t\t\tmorphName: fbxTree.Objects.Deformer[ deformerID ].attrName,\n\n\t\t\t\t\t\t\t\t};\n\n\t\t\t\t\t\t\t\tlayerCurveNodes[ i ] = node;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tlayerCurveNodes[ i ][ curveNode.attr ] = curveNode;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t} );\n\n\t\t\t\tlayersMap.set( parseInt( nodeID ), layerCurveNodes );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn layersMap;\n\n\t}\n\n\t// parse nodes in FBXTree.Objects.AnimationStack. These are the top level node in the animation\n\t// hierarchy. Each Stack node will be used to create a AnimationClip\n\tparseAnimStacks( layersMap ) {\n\n\t\tconst rawStacks = fbxTree.Objects.AnimationStack;\n\n\t\t// connect the stacks (clips) up to the layers\n\t\tconst rawClips = {};\n\n\t\tfor ( const nodeID in rawStacks ) {\n\n\t\t\tconst children = connections.get( parseInt( nodeID ) ).children;\n\n\t\t\tif ( children.length > 1 ) {\n\n\t\t\t\t// it seems like stacks will always be associated with a single layer. But just in case there are files\n\t\t\t\t// where there are multiple layers per stack, we'll display a warning\n\t\t\t\tconsole.warn( 'THREE.FBXLoader: Encountered an animation stack with multiple layers, this is currently not supported. Ignoring subsequent layers.' );\n\n\t\t\t}\n\n\t\t\tconst layer = layersMap.get( children[ 0 ].ID );\n\n\t\t\trawClips[ nodeID ] = {\n\n\t\t\t\tname: rawStacks[ nodeID ].attrName,\n\t\t\t\tlayer: layer,\n\n\t\t\t};\n\n\t\t}\n\n\t\treturn rawClips;\n\n\t}\n\n\taddClip( rawClip ) {\n\n\t\tlet tracks = [];\n\n\t\tconst scope = this;\n\t\trawClip.layer.forEach( function ( rawTracks ) {\n\n\t\t\ttracks = tracks.concat( scope.generateTracks( rawTracks ) );\n\n\t\t} );\n\n\t\treturn new AnimationClip( rawClip.name, -1, tracks );\n\n\t}\n\n\tgenerateTracks( rawTracks ) {\n\n\t\tconst tracks = [];\n\n\t\tlet initialPosition = new Vector3();\n\t\tlet initialScale = new Vector3();\n\n\t\tif ( rawTracks.transform ) rawTracks.transform.decompose( initialPosition, new Quaternion(), initialScale );\n\n\t\tinitialPosition = initialPosition.toArray();\n\t\tinitialScale = initialScale.toArray();\n\n\t\tif ( rawTracks.T !== undefined && Object.keys( rawTracks.T.curves ).length > 0 ) {\n\n\t\t\tconst positionTrack = this.generateVectorTrack( rawTracks.modelName, rawTracks.T.curves, initialPosition, 'position' );\n\t\t\tif ( positionTrack !== undefined ) tracks.push( positionTrack );\n\n\t\t}\n\n\t\tif ( rawTracks.R !== undefined && Object.keys( rawTracks.R.curves ).length > 0 ) {\n\n\t\t\tconst rotationTrack = this.generateRotationTrack( rawTracks.modelName, rawTracks.R.curves, rawTracks.preRotation, rawTracks.postRotation, rawTracks.eulerOrder );\n\t\t\tif ( rotationTrack !== undefined ) tracks.push( rotationTrack );\n\n\t\t}\n\n\t\tif ( rawTracks.S !== undefined && Object.keys( rawTracks.S.curves ).length > 0 ) {\n\n\t\t\tconst scaleTrack = this.generateVectorTrack( rawTracks.modelName, rawTracks.S.curves, initialScale, 'scale' );\n\t\t\tif ( scaleTrack !== undefined ) tracks.push( scaleTrack );\n\n\t\t}\n\n\t\tif ( rawTracks.DeformPercent !== undefined ) {\n\n\t\t\tconst morphTrack = this.generateMorphTrack( rawTracks );\n\t\t\tif ( morphTrack !== undefined ) tracks.push( morphTrack );\n\n\t\t}\n\n\t\treturn tracks;\n\n\t}\n\n\tgenerateVectorTrack( modelName, curves, initialValue, type ) {\n\n\t\tconst times = this.getTimesForAllAxes( curves );\n\t\tconst values = this.getKeyframeTrackValues( times, curves, initialValue );\n\n\t\treturn new VectorKeyframeTrack( modelName + '.' + type, times, values );\n\n\t}\n\n\tgenerateRotationTrack( modelName, curves, preRotation, postRotation, eulerOrder ) {\n\n\t\tlet times;\n\t\tlet values;\n\n\t\tif ( curves.x !== undefined && curves.y !== undefined && curves.z !== undefined ) {\n\n\t\t\tconst result = this.interpolateRotations( curves.x, curves.y, curves.z, eulerOrder );\n\n\t\t\ttimes = result[ 0 ];\n\t\t\tvalues = result[ 1 ];\n\n\t\t}\n\n\t\t// For Maya models using \"Joint Orient\", Euler order only applies to rotation, not pre/post-rotations\n\t\tconst defaultEulerOrder = getEulerOrder( 0 );\n\n\t\tif ( preRotation !== undefined ) {\n\n\t\t\tpreRotation = preRotation.map( MathUtils.degToRad );\n\t\t\tpreRotation.push( defaultEulerOrder );\n\n\t\t\tpreRotation = new Euler().fromArray( preRotation );\n\t\t\tpreRotation = new Quaternion().setFromEuler( preRotation );\n\n\t\t}\n\n\t\tif ( postRotation !== undefined ) {\n\n\t\t\tpostRotation = postRotation.map( MathUtils.degToRad );\n\t\t\tpostRotation.push( defaultEulerOrder );\n\n\t\t\tpostRotation = new Euler().fromArray( postRotation );\n\t\t\tpostRotation = new Quaternion().setFromEuler( postRotation ).invert();\n\n\t\t}\n\n\t\tconst quaternion = new Quaternion();\n\t\tconst euler = new Euler();\n\n\t\tconst quaternionValues = [];\n\n\t\tif ( ! values || ! times ) return new QuaternionKeyframeTrack( modelName + '.quaternion', [ 0 ], [ 0 ] );\n\n\t\tfor ( let i = 0; i < values.length; i += 3 ) {\n\n\t\t\teuler.set( values[ i ], values[ i + 1 ], values[ i + 2 ], eulerOrder );\n\t\t\tquaternion.setFromEuler( euler );\n\n\t\t\tif ( preRotation !== undefined ) quaternion.premultiply( preRotation );\n\t\t\tif ( postRotation !== undefined ) quaternion.multiply( postRotation );\n\n\t\t\t// Check unroll\n\t\t\tif ( i > 2 ) {\n\n\t\t\t\tconst prevQuat = new Quaternion().fromArray(\n\t\t\t\t\tquaternionValues,\n\t\t\t\t\t( ( i - 3 ) / 3 ) * 4\n\t\t\t\t);\n\n\t\t\t\tif ( prevQuat.dot( quaternion ) < 0 ) {\n\n\t\t\t\t\tquaternion.set( - quaternion.x, - quaternion.y, - quaternion.z, - quaternion.w );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tquaternion.toArray( quaternionValues, ( i / 3 ) * 4 );\n\n\t\t}\n\n\t\treturn new QuaternionKeyframeTrack( modelName + '.quaternion', times, quaternionValues );\n\n\t}\n\n\tgenerateMorphTrack( rawTracks ) {\n\n\t\tconst curves = rawTracks.DeformPercent.curves.morph;\n\t\tconst values = curves.values.map( function ( val ) {\n\n\t\t\treturn val / 100;\n\n\t\t} );\n\n\t\tconst morphNum = sceneGraph.getObjectByName( rawTracks.modelName ).morphTargetDictionary[ rawTracks.morphName ];\n\n\t\treturn new NumberKeyframeTrack( rawTracks.modelName + '.morphTargetInfluences[' + morphNum + ']', curves.times, values );\n\n\t}\n\n\t// For all animated objects, times are defined separately for each axis\n\t// Here we'll combine the times into one sorted array without duplicates\n\tgetTimesForAllAxes( curves ) {\n\n\t\tlet times = [];\n\n\t\t// first join together the times for each axis, if defined\n\t\tif ( curves.x !== undefined ) times = times.concat( curves.x.times );\n\t\tif ( curves.y !== undefined ) times = times.concat( curves.y.times );\n\t\tif ( curves.z !== undefined ) times = times.concat( curves.z.times );\n\n\t\t// then sort them\n\t\ttimes = times.sort( function ( a, b ) {\n\n\t\t\treturn a - b;\n\n\t\t} );\n\n\t\t// and remove duplicates\n\t\tif ( times.length > 1 ) {\n\n\t\t\tlet targetIndex = 1;\n\t\t\tlet lastValue = times[ 0 ];\n\t\t\tfor ( let i = 1; i < times.length; i ++ ) {\n\n\t\t\t\tconst currentValue = times[ i ];\n\t\t\t\tif ( currentValue !== lastValue ) {\n\n\t\t\t\t\ttimes[ targetIndex ] = currentValue;\n\t\t\t\t\tlastValue = currentValue;\n\t\t\t\t\ttargetIndex ++;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\ttimes = times.slice( 0, targetIndex );\n\n\t\t}\n\n\t\treturn times;\n\n\t}\n\n\tgetKeyframeTrackValues( times, curves, initialValue ) {\n\n\t\tconst prevValue = initialValue;\n\n\t\tconst values = [];\n\n\t\tlet xIndex = -1;\n\t\tlet yIndex = -1;\n\t\tlet zIndex = -1;\n\n\t\ttimes.forEach( function ( time ) {\n\n\t\t\tif ( curves.x ) xIndex = curves.x.times.indexOf( time );\n\t\t\tif ( curves.y ) yIndex = curves.y.times.indexOf( time );\n\t\t\tif ( curves.z ) zIndex = curves.z.times.indexOf( time );\n\n\t\t\t// if there is an x value defined for this frame, use that\n\t\t\tif ( xIndex !== -1 ) {\n\n\t\t\t\tconst xValue = curves.x.values[ xIndex ];\n\t\t\t\tvalues.push( xValue );\n\t\t\t\tprevValue[ 0 ] = xValue;\n\n\t\t\t} else {\n\n\t\t\t\t// otherwise use the x value from the previous frame\n\t\t\t\tvalues.push( prevValue[ 0 ] );\n\n\t\t\t}\n\n\t\t\tif ( yIndex !== -1 ) {\n\n\t\t\t\tconst yValue = curves.y.values[ yIndex ];\n\t\t\t\tvalues.push( yValue );\n\t\t\t\tprevValue[ 1 ] = yValue;\n\n\t\t\t} else {\n\n\t\t\t\tvalues.push( prevValue[ 1 ] );\n\n\t\t\t}\n\n\t\t\tif ( zIndex !== -1 ) {\n\n\t\t\t\tconst zValue = curves.z.values[ zIndex ];\n\t\t\t\tvalues.push( zValue );\n\t\t\t\tprevValue[ 2 ] = zValue;\n\n\t\t\t} else {\n\n\t\t\t\tvalues.push( prevValue[ 2 ] );\n\n\t\t\t}\n\n\t\t} );\n\n\t\treturn values;\n\n\t}\n\n\t// Rotations are defined as Euler angles which can have values  of any size\n\t// These will be converted to quaternions which don't support values greater than\n\t// PI, so we'll interpolate large rotations\n\tinterpolateRotations( curvex, curvey, curvez, eulerOrder ) {\n\n\t\tconst times = [];\n\t\tconst values = [];\n\n\t\t// Add first frame\n\t\ttimes.push( curvex.times[ 0 ] );\n\t\tvalues.push( MathUtils.degToRad( curvex.values[ 0 ] ) );\n\t\tvalues.push( MathUtils.degToRad( curvey.values[ 0 ] ) );\n\t\tvalues.push( MathUtils.degToRad( curvez.values[ 0 ] ) );\n\n\t\tfor ( let i = 1; i < curvex.values.length; i ++ ) {\n\n\t\t\tconst initialValue = [\n\t\t\t\tcurvex.values[ i - 1 ],\n\t\t\t\tcurvey.values[ i - 1 ],\n\t\t\t\tcurvez.values[ i - 1 ],\n\t\t\t];\n\n\t\t\tif ( isNaN( initialValue[ 0 ] ) || isNaN( initialValue[ 1 ] ) || isNaN( initialValue[ 2 ] ) ) {\n\n\t\t\t\tcontinue;\n\n\t\t\t}\n\n\t\t\tconst initialValueRad = initialValue.map( MathUtils.degToRad );\n\n\t\t\tconst currentValue = [\n\t\t\t\tcurvex.values[ i ],\n\t\t\t\tcurvey.values[ i ],\n\t\t\t\tcurvez.values[ i ],\n\t\t\t];\n\n\t\t\tif ( isNaN( currentValue[ 0 ] ) || isNaN( currentValue[ 1 ] ) || isNaN( currentValue[ 2 ] ) ) {\n\n\t\t\t\tcontinue;\n\n\t\t\t}\n\n\t\t\tconst currentValueRad = currentValue.map( MathUtils.degToRad );\n\n\t\t\tconst valuesSpan = [\n\t\t\t\tcurrentValue[ 0 ] - initialValue[ 0 ],\n\t\t\t\tcurrentValue[ 1 ] - initialValue[ 1 ],\n\t\t\t\tcurrentValue[ 2 ] - initialValue[ 2 ],\n\t\t\t];\n\n\t\t\tconst absoluteSpan = [\n\t\t\t\tMath.abs( valuesSpan[ 0 ] ),\n\t\t\t\tMath.abs( valuesSpan[ 1 ] ),\n\t\t\t\tMath.abs( valuesSpan[ 2 ] ),\n\t\t\t];\n\n\t\t\tif ( absoluteSpan[ 0 ] >= 180 || absoluteSpan[ 1 ] >= 180 || absoluteSpan[ 2 ] >= 180 ) {\n\n\t\t\t\tconst maxAbsSpan = Math.max( ...absoluteSpan );\n\n\t\t\t\tconst numSubIntervals = maxAbsSpan / 180;\n\n\t\t\t\tconst E1 = new Euler( ...initialValueRad, eulerOrder );\n\t\t\t\tconst E2 = new Euler( ...currentValueRad, eulerOrder );\n\n\t\t\t\tconst Q1 = new Quaternion().setFromEuler( E1 );\n\t\t\t\tconst Q2 = new Quaternion().setFromEuler( E2 );\n\n\t\t\t\t// Check unroll\n\t\t\t\tif ( Q1.dot( Q2 ) ) {\n\n\t\t\t\t\tQ2.set( - Q2.x, - Q2.y, - Q2.z, - Q2.w );\n\n\t\t\t\t}\n\n\t\t\t\t// Interpolate\n\t\t\t\tconst initialTime = curvex.times[ i - 1 ];\n\t\t\t\tconst timeSpan = curvex.times[ i ] - initialTime;\n\n\t\t\t\tconst Q = new Quaternion();\n\t\t\t\tconst E = new Euler();\n\t\t\t\tfor ( let t = 0; t < 1; t += 1 / numSubIntervals ) {\n\n\t\t\t\t\tQ.copy( Q1.clone().slerp( Q2.clone(), t ) );\n\n\t\t\t\t\ttimes.push( initialTime + t * timeSpan );\n\t\t\t\t\tE.setFromQuaternion( Q, eulerOrder );\n\n\t\t\t\t\tvalues.push( E.x );\n\t\t\t\t\tvalues.push( E.y );\n\t\t\t\t\tvalues.push( E.z );\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\ttimes.push( curvex.times[ i ] );\n\t\t\t\tvalues.push( MathUtils.degToRad( curvex.values[ i ] ) );\n\t\t\t\tvalues.push( MathUtils.degToRad( curvey.values[ i ] ) );\n\t\t\t\tvalues.push( MathUtils.degToRad( curvez.values[ i ] ) );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn [ times, values ];\n\n\t}\n\n}\n\n// parse an FBX file in ASCII format\nclass TextParser {\n\n\tgetPrevNode() {\n\n\t\treturn this.nodeStack[ this.currentIndent - 2 ];\n\n\t}\n\n\tgetCurrentNode() {\n\n\t\treturn this.nodeStack[ this.currentIndent - 1 ];\n\n\t}\n\n\tgetCurrentProp() {\n\n\t\treturn this.currentProp;\n\n\t}\n\n\tpushStack( node ) {\n\n\t\tthis.nodeStack.push( node );\n\t\tthis.currentIndent += 1;\n\n\t}\n\n\tpopStack() {\n\n\t\tthis.nodeStack.pop();\n\t\tthis.currentIndent -= 1;\n\n\t}\n\n\tsetCurrentProp( val, name ) {\n\n\t\tthis.currentProp = val;\n\t\tthis.currentPropName = name;\n\n\t}\n\n\tparse( text ) {\n\n\t\tthis.currentIndent = 0;\n\n\t\tthis.allNodes = new FBXTree();\n\t\tthis.nodeStack = [];\n\t\tthis.currentProp = [];\n\t\tthis.currentPropName = '';\n\n\t\tconst scope = this;\n\n\t\tconst split = text.split( /[\\r\\n]+/ );\n\n\t\tsplit.forEach( function ( line, i ) {\n\n\t\t\tconst matchComment = line.match( /^[\\s\\t]*;/ );\n\t\t\tconst matchEmpty = line.match( /^[\\s\\t]*$/ );\n\n\t\t\tif ( matchComment || matchEmpty ) return;\n\n\t\t\tconst matchBeginning = line.match( '^\\\\t{' + scope.currentIndent + '}(\\\\w+):(.*){', '' );\n\t\t\tconst matchProperty = line.match( '^\\\\t{' + ( scope.currentIndent ) + '}(\\\\w+):[\\\\s\\\\t\\\\r\\\\n](.*)' );\n\t\t\tconst matchEnd = line.match( '^\\\\t{' + ( scope.currentIndent - 1 ) + '}}' );\n\n\t\t\tif ( matchBeginning ) {\n\n\t\t\t\tscope.parseNodeBegin( line, matchBeginning );\n\n\t\t\t} else if ( matchProperty ) {\n\n\t\t\t\tscope.parseNodeProperty( line, matchProperty, split[ ++ i ] );\n\n\t\t\t} else if ( matchEnd ) {\n\n\t\t\t\tscope.popStack();\n\n\t\t\t} else if ( line.match( /^[^\\s\\t}]/ ) ) {\n\n\t\t\t\t// large arrays are split over multiple lines terminated with a ',' character\n\t\t\t\t// if this is encountered the line needs to be joined to the previous line\n\t\t\t\tscope.parseNodePropertyContinued( line );\n\n\t\t\t}\n\n\t\t} );\n\n\t\treturn this.allNodes;\n\n\t}\n\n\tparseNodeBegin( line, property ) {\n\n\t\tconst nodeName = property[ 1 ].trim().replace( /^\"/, '' ).replace( /\"$/, '' );\n\n\t\tconst nodeAttrs = property[ 2 ].split( ',' ).map( function ( attr ) {\n\n\t\t\treturn attr.trim().replace( /^\"/, '' ).replace( /\"$/, '' );\n\n\t\t} );\n\n\t\tconst node = { name: nodeName };\n\t\tconst attrs = this.parseNodeAttr( nodeAttrs );\n\n\t\tconst currentNode = this.getCurrentNode();\n\n\t\t// a top node\n\t\tif ( this.currentIndent === 0 ) {\n\n\t\t\tthis.allNodes.add( nodeName, node );\n\n\t\t} else { // a subnode\n\n\t\t\t// if the subnode already exists, append it\n\t\t\tif ( nodeName in currentNode ) {\n\n\t\t\t\t// special case Pose needs PoseNodes as an array\n\t\t\t\tif ( nodeName === 'PoseNode' ) {\n\n\t\t\t\t\tcurrentNode.PoseNode.push( node );\n\n\t\t\t\t} else if ( currentNode[ nodeName ].id !== undefined ) {\n\n\t\t\t\t\tcurrentNode[ nodeName ] = {};\n\t\t\t\t\tcurrentNode[ nodeName ][ currentNode[ nodeName ].id ] = currentNode[ nodeName ];\n\n\t\t\t\t}\n\n\t\t\t\tif ( attrs.id !== '' ) currentNode[ nodeName ][ attrs.id ] = node;\n\n\t\t\t} else if ( typeof attrs.id === 'number' ) {\n\n\t\t\t\tcurrentNode[ nodeName ] = {};\n\t\t\t\tcurrentNode[ nodeName ][ attrs.id ] = node;\n\n\t\t\t} else if ( nodeName !== 'Properties70' ) {\n\n\t\t\t\tif ( nodeName === 'PoseNode' )\tcurrentNode[ nodeName ] = [ node ];\n\t\t\t\telse currentNode[ nodeName ] = node;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( typeof attrs.id === 'number' ) node.id = attrs.id;\n\t\tif ( attrs.name !== '' ) node.attrName = attrs.name;\n\t\tif ( attrs.type !== '' ) node.attrType = attrs.type;\n\n\t\tthis.pushStack( node );\n\n\t}\n\n\tparseNodeAttr( attrs ) {\n\n\t\tlet id = attrs[ 0 ];\n\n\t\tif ( attrs[ 0 ] !== '' ) {\n\n\t\t\tid = parseInt( attrs[ 0 ] );\n\n\t\t\tif ( isNaN( id ) ) {\n\n\t\t\t\tid = attrs[ 0 ];\n\n\t\t\t}\n\n\t\t}\n\n\t\tlet name = '', type = '';\n\n\t\tif ( attrs.length > 1 ) {\n\n\t\t\tname = attrs[ 1 ].replace( /^(\\w+)::/, '' );\n\t\t\ttype = attrs[ 2 ];\n\n\t\t}\n\n\t\treturn { id: id, name: name, type: type };\n\n\t}\n\n\tparseNodeProperty( line, property, contentLine ) {\n\n\t\tlet propName = property[ 1 ].replace( /^\"/, '' ).replace( /\"$/, '' ).trim();\n\t\tlet propValue = property[ 2 ].replace( /^\"/, '' ).replace( /\"$/, '' ).trim();\n\n\t\t// for special case: base64 image data follows \"Content: ,\" line\n\t\t//\tContent: ,\n\t\t//\t \"/9j/4RDaRXhpZgAATU0A...\"\n\t\tif ( propName === 'Content' && propValue === ',' ) {\n\n\t\t\tpropValue = contentLine.replace( /\"/g, '' ).replace( /,$/, '' ).trim();\n\n\t\t}\n\n\t\tconst currentNode = this.getCurrentNode();\n\t\tconst parentName = currentNode.name;\n\n\t\tif ( parentName === 'Properties70' ) {\n\n\t\t\tthis.parseNodeSpecialProperty( line, propName, propValue );\n\t\t\treturn;\n\n\t\t}\n\n\t\t// Connections\n\t\tif ( propName === 'C' ) {\n\n\t\t\tconst connProps = propValue.split( ',' ).slice( 1 );\n\t\t\tconst from = parseInt( connProps[ 0 ] );\n\t\t\tconst to = parseInt( connProps[ 1 ] );\n\n\t\t\tlet rest = propValue.split( ',' ).slice( 3 );\n\n\t\t\trest = rest.map( function ( elem ) {\n\n\t\t\t\treturn elem.trim().replace( /^\"/, '' );\n\n\t\t\t} );\n\n\t\t\tpropName = 'connections';\n\t\t\tpropValue = [ from, to ];\n\t\t\tappend( propValue, rest );\n\n\t\t\tif ( currentNode[ propName ] === undefined ) {\n\n\t\t\t\tcurrentNode[ propName ] = [];\n\n\t\t\t}\n\n\t\t}\n\n\t\t// Node\n\t\tif ( propName === 'Node' ) currentNode.id = propValue;\n\n\t\t// connections\n\t\tif ( propName in currentNode && Array.isArray( currentNode[ propName ] ) ) {\n\n\t\t\tcurrentNode[ propName ].push( propValue );\n\n\t\t} else {\n\n\t\t\tif ( propName !== 'a' ) currentNode[ propName ] = propValue;\n\t\t\telse currentNode.a = propValue;\n\n\t\t}\n\n\t\tthis.setCurrentProp( currentNode, propName );\n\n\t\t// convert string to array, unless it ends in ',' in which case more will be added to it\n\t\tif ( propName === 'a' && propValue.slice( -1 ) !== ',' ) {\n\n\t\t\tcurrentNode.a = parseNumberArray( propValue );\n\n\t\t}\n\n\t}\n\n\tparseNodePropertyContinued( line ) {\n\n\t\tconst currentNode = this.getCurrentNode();\n\n\t\tcurrentNode.a += line;\n\n\t\t// if the line doesn't end in ',' we have reached the end of the property value\n\t\t// so convert the string to an array\n\t\tif ( line.slice( -1 ) !== ',' ) {\n\n\t\t\tcurrentNode.a = parseNumberArray( currentNode.a );\n\n\t\t}\n\n\t}\n\n\t// parse \"Property70\"\n\tparseNodeSpecialProperty( line, propName, propValue ) {\n\n\t\t// split this\n\t\t// P: \"Lcl Scaling\", \"Lcl Scaling\", \"\", \"A\",1,1,1\n\t\t// into array like below\n\t\t// [\"Lcl Scaling\", \"Lcl Scaling\", \"\", \"A\", \"1,1,1\" ]\n\t\tconst props = propValue.split( '\",' ).map( function ( prop ) {\n\n\t\t\treturn prop.trim().replace( /^\\\"/, '' ).replace( /\\s/, '_' );\n\n\t\t} );\n\n\t\tconst innerPropName = props[ 0 ];\n\t\tconst innerPropType1 = props[ 1 ];\n\t\tconst innerPropType2 = props[ 2 ];\n\t\tconst innerPropFlag = props[ 3 ];\n\t\tlet innerPropValue = props[ 4 ];\n\n\t\t// cast values where needed, otherwise leave as strings\n\t\tswitch ( innerPropType1 ) {\n\n\t\t\tcase 'int':\n\t\t\tcase 'enum':\n\t\t\tcase 'bool':\n\t\t\tcase 'ULongLong':\n\t\t\tcase 'double':\n\t\t\tcase 'Number':\n\t\t\tcase 'FieldOfView':\n\t\t\t\tinnerPropValue = parseFloat( innerPropValue );\n\t\t\t\tbreak;\n\n\t\t\tcase 'Color':\n\t\t\tcase 'ColorRGB':\n\t\t\tcase 'Vector3D':\n\t\t\tcase 'Lcl_Translation':\n\t\t\tcase 'Lcl_Rotation':\n\t\t\tcase 'Lcl_Scaling':\n\t\t\t\tinnerPropValue = parseNumberArray( innerPropValue );\n\t\t\t\tbreak;\n\n\t\t}\n\n\t\t// CAUTION: these props must append to parent's parent\n\t\tthis.getPrevNode()[ innerPropName ] = {\n\n\t\t\t'type': innerPropType1,\n\t\t\t'type2': innerPropType2,\n\t\t\t'flag': innerPropFlag,\n\t\t\t'value': innerPropValue\n\n\t\t};\n\n\t\tthis.setCurrentProp( this.getPrevNode(), innerPropName );\n\n\t}\n\n}\n\n// Parse an FBX file in Binary format\nclass BinaryParser {\n\n\tparse( buffer ) {\n\n\t\tconst reader = new BinaryReader( buffer );\n\t\treader.skip( 23 ); // skip magic 23 bytes\n\n\t\tconst version = reader.getUint32();\n\n\t\tif ( version < 6400 ) {\n\n\t\t\tthrow new Error( 'THREE.FBXLoader: FBX version not supported, FileVersion: ' + version );\n\n\t\t}\n\n\t\tconst allNodes = new FBXTree();\n\n\t\twhile ( ! this.endOfContent( reader ) ) {\n\n\t\t\tconst node = this.parseNode( reader, version );\n\t\t\tif ( node !== null ) allNodes.add( node.name, node );\n\n\t\t}\n\n\t\treturn allNodes;\n\n\t}\n\n\t// Check if reader has reached the end of content.\n\tendOfContent( reader ) {\n\n\t\t// footer size: 160bytes + 16-byte alignment padding\n\t\t// - 16bytes: magic\n\t\t// - padding til 16-byte alignment (at least 1byte?)\n\t\t//\t(seems like some exporters embed fixed 15 or 16bytes?)\n\t\t// - 4bytes: magic\n\t\t// - 4bytes: version\n\t\t// - 120bytes: zero\n\t\t// - 16bytes: magic\n\t\tif ( reader.size() % 16 === 0 ) {\n\n\t\t\treturn ( ( reader.getOffset() + 160 + 16 ) & -16 ) >= reader.size();\n\n\t\t} else {\n\n\t\t\treturn reader.getOffset() + 160 + 16 >= reader.size();\n\n\t\t}\n\n\t}\n\n\t// recursively parse nodes until the end of the file is reached\n\tparseNode( reader, version ) {\n\n\t\tconst node = {};\n\n\t\t// The first three data sizes depends on version.\n\t\tconst endOffset = ( version >= 7500 ) ? reader.getUint64() : reader.getUint32();\n\t\tconst numProperties = ( version >= 7500 ) ? reader.getUint64() : reader.getUint32();\n\n\t\t( version >= 7500 ) ? reader.getUint64() : reader.getUint32(); // the returned propertyListLen is not used\n\n\t\tconst nameLen = reader.getUint8();\n\t\tconst name = reader.getString( nameLen );\n\n\t\t// Regards this node as NULL-record if endOffset is zero\n\t\tif ( endOffset === 0 ) return null;\n\n\t\tconst propertyList = [];\n\n\t\tfor ( let i = 0; i < numProperties; i ++ ) {\n\n\t\t\tpropertyList.push( this.parseProperty( reader ) );\n\n\t\t}\n\n\t\t// Regards the first three elements in propertyList as id, attrName, and attrType\n\t\tconst id = propertyList.length > 0 ? propertyList[ 0 ] : '';\n\t\tconst attrName = propertyList.length > 1 ? propertyList[ 1 ] : '';\n\t\tconst attrType = propertyList.length > 2 ? propertyList[ 2 ] : '';\n\n\t\t// check if this node represents just a single property\n\t\t// like (name, 0) set or (name2, [0, 1, 2]) set of {name: 0, name2: [0, 1, 2]}\n\t\tnode.singleProperty = ( numProperties === 1 && reader.getOffset() === endOffset ) ? true : false;\n\n\t\twhile ( endOffset > reader.getOffset() ) {\n\n\t\t\tconst subNode = this.parseNode( reader, version );\n\n\t\t\tif ( subNode !== null ) this.parseSubNode( name, node, subNode );\n\n\t\t}\n\n\t\tnode.propertyList = propertyList; // raw property list used by parent\n\n\t\tif ( typeof id === 'number' ) node.id = id;\n\t\tif ( attrName !== '' ) node.attrName = attrName;\n\t\tif ( attrType !== '' ) node.attrType = attrType;\n\t\tif ( name !== '' ) node.name = name;\n\n\t\treturn node;\n\n\t}\n\n\tparseSubNode( name, node, subNode ) {\n\n\t\t// special case: child node is single property\n\t\tif ( subNode.singleProperty === true ) {\n\n\t\t\tconst value = subNode.propertyList[ 0 ];\n\n\t\t\tif ( Array.isArray( value ) ) {\n\n\t\t\t\tnode[ subNode.name ] = subNode;\n\n\t\t\t\tsubNode.a = value;\n\n\t\t\t} else {\n\n\t\t\t\tnode[ subNode.name ] = value;\n\n\t\t\t}\n\n\t\t} else if ( name === 'Connections' && subNode.name === 'C' ) {\n\n\t\t\tconst array = [];\n\n\t\t\tsubNode.propertyList.forEach( function ( property, i ) {\n\n\t\t\t\t// first Connection is FBX type (OO, OP, etc.). We'll discard these\n\t\t\t\tif ( i !== 0 ) array.push( property );\n\n\t\t\t} );\n\n\t\t\tif ( node.connections === undefined ) {\n\n\t\t\t\tnode.connections = [];\n\n\t\t\t}\n\n\t\t\tnode.connections.push( array );\n\n\t\t} else if ( subNode.name === 'Properties70' ) {\n\n\t\t\tconst keys = Object.keys( subNode );\n\n\t\t\tkeys.forEach( function ( key ) {\n\n\t\t\t\tnode[ key ] = subNode[ key ];\n\n\t\t\t} );\n\n\t\t} else if ( name === 'Properties70' && subNode.name === 'P' ) {\n\n\t\t\tlet innerPropName = subNode.propertyList[ 0 ];\n\t\t\tlet innerPropType1 = subNode.propertyList[ 1 ];\n\t\t\tconst innerPropType2 = subNode.propertyList[ 2 ];\n\t\t\tconst innerPropFlag = subNode.propertyList[ 3 ];\n\t\t\tlet innerPropValue;\n\n\t\t\tif ( innerPropName.indexOf( 'Lcl ' ) === 0 ) innerPropName = innerPropName.replace( 'Lcl ', 'Lcl_' );\n\t\t\tif ( innerPropType1.indexOf( 'Lcl ' ) === 0 ) innerPropType1 = innerPropType1.replace( 'Lcl ', 'Lcl_' );\n\n\t\t\tif ( innerPropType1 === 'Color' || innerPropType1 === 'ColorRGB' || innerPropType1 === 'Vector' || innerPropType1 === 'Vector3D' || innerPropType1.indexOf( 'Lcl_' ) === 0 ) {\n\n\t\t\t\tinnerPropValue = [\n\t\t\t\t\tsubNode.propertyList[ 4 ],\n\t\t\t\t\tsubNode.propertyList[ 5 ],\n\t\t\t\t\tsubNode.propertyList[ 6 ]\n\t\t\t\t];\n\n\t\t\t} else {\n\n\t\t\t\tinnerPropValue = subNode.propertyList[ 4 ];\n\n\t\t\t}\n\n\t\t\t// this will be copied to parent, see above\n\t\t\tnode[ innerPropName ] = {\n\n\t\t\t\t'type': innerPropType1,\n\t\t\t\t'type2': innerPropType2,\n\t\t\t\t'flag': innerPropFlag,\n\t\t\t\t'value': innerPropValue\n\n\t\t\t};\n\n\t\t} else if ( node[ subNode.name ] === undefined ) {\n\n\t\t\tif ( typeof subNode.id === 'number' ) {\n\n\t\t\t\tnode[ subNode.name ] = {};\n\t\t\t\tnode[ subNode.name ][ subNode.id ] = subNode;\n\n\t\t\t} else {\n\n\t\t\t\tnode[ subNode.name ] = subNode;\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tif ( subNode.name === 'PoseNode' ) {\n\n\t\t\t\tif ( ! Array.isArray( node[ subNode.name ] ) ) {\n\n\t\t\t\t\tnode[ subNode.name ] = [ node[ subNode.name ] ];\n\n\t\t\t\t}\n\n\t\t\t\tnode[ subNode.name ].push( subNode );\n\n\t\t\t} else if ( node[ subNode.name ][ subNode.id ] === undefined ) {\n\n\t\t\t\tnode[ subNode.name ][ subNode.id ] = subNode;\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tparseProperty( reader ) {\n\n\t\tconst type = reader.getString( 1 );\n\t\tlet length;\n\n\t\tswitch ( type ) {\n\n\t\t\tcase 'C':\n\t\t\t\treturn reader.getBoolean();\n\n\t\t\tcase 'D':\n\t\t\t\treturn reader.getFloat64();\n\n\t\t\tcase 'F':\n\t\t\t\treturn reader.getFloat32();\n\n\t\t\tcase 'I':\n\t\t\t\treturn reader.getInt32();\n\n\t\t\tcase 'L':\n\t\t\t\treturn reader.getInt64();\n\n\t\t\tcase 'R':\n\t\t\t\tlength = reader.getUint32();\n\t\t\t\treturn reader.getArrayBuffer( length );\n\n\t\t\tcase 'S':\n\t\t\t\tlength = reader.getUint32();\n\t\t\t\treturn reader.getString( length );\n\n\t\t\tcase 'Y':\n\t\t\t\treturn reader.getInt16();\n\n\t\t\tcase 'b':\n\t\t\tcase 'c':\n\t\t\tcase 'd':\n\t\t\tcase 'f':\n\t\t\tcase 'i':\n\t\t\tcase 'l':\n\n\t\t\t\tconst arrayLength = reader.getUint32();\n\t\t\t\tconst encoding = reader.getUint32(); // 0: non-compressed, 1: compressed\n\t\t\t\tconst compressedLength = reader.getUint32();\n\n\t\t\t\tif ( encoding === 0 ) {\n\n\t\t\t\t\tswitch ( type ) {\n\n\t\t\t\t\t\tcase 'b':\n\t\t\t\t\t\tcase 'c':\n\t\t\t\t\t\t\treturn reader.getBooleanArray( arrayLength );\n\n\t\t\t\t\t\tcase 'd':\n\t\t\t\t\t\t\treturn reader.getFloat64Array( arrayLength );\n\n\t\t\t\t\t\tcase 'f':\n\t\t\t\t\t\t\treturn reader.getFloat32Array( arrayLength );\n\n\t\t\t\t\t\tcase 'i':\n\t\t\t\t\t\t\treturn reader.getInt32Array( arrayLength );\n\n\t\t\t\t\t\tcase 'l':\n\t\t\t\t\t\t\treturn reader.getInt64Array( arrayLength );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tconst data = unzlibSync( new Uint8Array( reader.getArrayBuffer( compressedLength ) ) );\n\t\t\t\tconst reader2 = new BinaryReader( data.buffer );\n\n\t\t\t\tswitch ( type ) {\n\n\t\t\t\t\tcase 'b':\n\t\t\t\t\tcase 'c':\n\t\t\t\t\t\treturn reader2.getBooleanArray( arrayLength );\n\n\t\t\t\t\tcase 'd':\n\t\t\t\t\t\treturn reader2.getFloat64Array( arrayLength );\n\n\t\t\t\t\tcase 'f':\n\t\t\t\t\t\treturn reader2.getFloat32Array( arrayLength );\n\n\t\t\t\t\tcase 'i':\n\t\t\t\t\t\treturn reader2.getInt32Array( arrayLength );\n\n\t\t\t\t\tcase 'l':\n\t\t\t\t\t\treturn reader2.getInt64Array( arrayLength );\n\n\t\t\t\t}\n\n\t\t\t\tbreak; // cannot happen but is required by the DeepScan\n\n\t\t\tdefault:\n\t\t\t\tthrow new Error( 'THREE.FBXLoader: Unknown property type ' + type );\n\n\t\t}\n\n\t}\n\n}\n\nclass BinaryReader {\n\n\tconstructor( buffer, littleEndian ) {\n\n\t\tthis.dv = new DataView( buffer );\n\t\tthis.offset = 0;\n\t\tthis.littleEndian = ( littleEndian !== undefined ) ? littleEndian : true;\n\t\tthis._textDecoder = new TextDecoder();\n\n\t}\n\n\tgetOffset() {\n\n\t\treturn this.offset;\n\n\t}\n\n\tsize() {\n\n\t\treturn this.dv.buffer.byteLength;\n\n\t}\n\n\tskip( length ) {\n\n\t\tthis.offset += length;\n\n\t}\n\n\t// seems like true/false representation depends on exporter.\n\t// true: 1 or 'Y'(=0x59), false: 0 or 'T'(=0x54)\n\t// then sees LSB.\n\tgetBoolean() {\n\n\t\treturn ( this.getUint8() & 1 ) === 1;\n\n\t}\n\n\tgetBooleanArray( size ) {\n\n\t\tconst a = [];\n\n\t\tfor ( let i = 0; i < size; i ++ ) {\n\n\t\t\ta.push( this.getBoolean() );\n\n\t\t}\n\n\t\treturn a;\n\n\t}\n\n\tgetUint8() {\n\n\t\tconst value = this.dv.getUint8( this.offset );\n\t\tthis.offset += 1;\n\t\treturn value;\n\n\t}\n\n\tgetInt16() {\n\n\t\tconst value = this.dv.getInt16( this.offset, this.littleEndian );\n\t\tthis.offset += 2;\n\t\treturn value;\n\n\t}\n\n\tgetInt32() {\n\n\t\tconst value = this.dv.getInt32( this.offset, this.littleEndian );\n\t\tthis.offset += 4;\n\t\treturn value;\n\n\t}\n\n\tgetInt32Array( size ) {\n\n\t\tconst a = [];\n\n\t\tfor ( let i = 0; i < size; i ++ ) {\n\n\t\t\ta.push( this.getInt32() );\n\n\t\t}\n\n\t\treturn a;\n\n\t}\n\n\tgetUint32() {\n\n\t\tconst value = this.dv.getUint32( this.offset, this.littleEndian );\n\t\tthis.offset += 4;\n\t\treturn value;\n\n\t}\n\n\t// JavaScript doesn't support 64-bit integer so calculate this here\n\t// 1 << 32 will return 1 so using multiply operation instead here.\n\t// There's a possibility that this method returns wrong value if the value\n\t// is out of the range between Number.MAX_SAFE_INTEGER and Number.MIN_SAFE_INTEGER.\n\t// TODO: safely handle 64-bit integer\n\tgetInt64() {\n\n\t\tlet low, high;\n\n\t\tif ( this.littleEndian ) {\n\n\t\t\tlow = this.getUint32();\n\t\t\thigh = this.getUint32();\n\n\t\t} else {\n\n\t\t\thigh = this.getUint32();\n\t\t\tlow = this.getUint32();\n\n\t\t}\n\n\t\t// calculate negative value\n\t\tif ( high & 0x80000000 ) {\n\n\t\t\thigh = ~ high & 0xFFFFFFFF;\n\t\t\tlow = ~ low & 0xFFFFFFFF;\n\n\t\t\tif ( low === 0xFFFFFFFF ) high = ( high + 1 ) & 0xFFFFFFFF;\n\n\t\t\tlow = ( low + 1 ) & 0xFFFFFFFF;\n\n\t\t\treturn - ( high * 0x100000000 + low );\n\n\t\t}\n\n\t\treturn high * 0x100000000 + low;\n\n\t}\n\n\tgetInt64Array( size ) {\n\n\t\tconst a = [];\n\n\t\tfor ( let i = 0; i < size; i ++ ) {\n\n\t\t\ta.push( this.getInt64() );\n\n\t\t}\n\n\t\treturn a;\n\n\t}\n\n\t// Note: see getInt64() comment\n\tgetUint64() {\n\n\t\tlet low, high;\n\n\t\tif ( this.littleEndian ) {\n\n\t\t\tlow = this.getUint32();\n\t\t\thigh = this.getUint32();\n\n\t\t} else {\n\n\t\t\thigh = this.getUint32();\n\t\t\tlow = this.getUint32();\n\n\t\t}\n\n\t\treturn high * 0x100000000 + low;\n\n\t}\n\n\tgetFloat32() {\n\n\t\tconst value = this.dv.getFloat32( this.offset, this.littleEndian );\n\t\tthis.offset += 4;\n\t\treturn value;\n\n\t}\n\n\tgetFloat32Array( size ) {\n\n\t\tconst a = [];\n\n\t\tfor ( let i = 0; i < size; i ++ ) {\n\n\t\t\ta.push( this.getFloat32() );\n\n\t\t}\n\n\t\treturn a;\n\n\t}\n\n\tgetFloat64() {\n\n\t\tconst value = this.dv.getFloat64( this.offset, this.littleEndian );\n\t\tthis.offset += 8;\n\t\treturn value;\n\n\t}\n\n\tgetFloat64Array( size ) {\n\n\t\tconst a = [];\n\n\t\tfor ( let i = 0; i < size; i ++ ) {\n\n\t\t\ta.push( this.getFloat64() );\n\n\t\t}\n\n\t\treturn a;\n\n\t}\n\n\tgetArrayBuffer( size ) {\n\n\t\tconst value = this.dv.buffer.slice( this.offset, this.offset + size );\n\t\tthis.offset += size;\n\t\treturn value;\n\n\t}\n\n\tgetString( size ) {\n\n\t\tconst start = this.offset;\n\t\tlet a = new Uint8Array( this.dv.buffer, start, size );\n\n\t\tthis.skip( size );\n\n\t\tconst nullByte = a.indexOf( 0 );\n\t\tif ( nullByte >= 0 ) a = new Uint8Array( this.dv.buffer, start, nullByte );\n\n\t\treturn this._textDecoder.decode( a );\n\n\t}\n\n}\n\n// FBXTree holds a representation of the FBX data, returned by the TextParser ( FBX ASCII format)\n// and BinaryParser( FBX Binary format)\nclass FBXTree {\n\n\tadd( key, val ) {\n\n\t\tthis[ key ] = val;\n\n\t}\n\n}\n\n// ************** UTILITY FUNCTIONS **************\n\nfunction isFbxFormatBinary( buffer ) {\n\n\tconst CORRECT = 'Kaydara\\u0020FBX\\u0020Binary\\u0020\\u0020\\0';\n\n\treturn buffer.byteLength >= CORRECT.length && CORRECT === convertArrayBufferToString( buffer, 0, CORRECT.length );\n\n}\n\nfunction isFbxFormatASCII( text ) {\n\n\tconst CORRECT = [ 'K', 'a', 'y', 'd', 'a', 'r', 'a', '\\\\', 'F', 'B', 'X', '\\\\', 'B', 'i', 'n', 'a', 'r', 'y', '\\\\', '\\\\' ];\n\n\tlet cursor = 0;\n\n\tfunction read( offset ) {\n\n\t\tconst result = text[ offset - 1 ];\n\t\ttext = text.slice( cursor + offset );\n\t\tcursor ++;\n\t\treturn result;\n\n\t}\n\n\tfor ( let i = 0; i < CORRECT.length; ++ i ) {\n\n\t\tconst num = read( 1 );\n\t\tif ( num === CORRECT[ i ] ) {\n\n\t\t\treturn false;\n\n\t\t}\n\n\t}\n\n\treturn true;\n\n}\n\nfunction getFbxVersion( text ) {\n\n\tconst versionRegExp = /FBXVersion: (\\d+)/;\n\tconst match = text.match( versionRegExp );\n\n\tif ( match ) {\n\n\t\tconst version = parseInt( match[ 1 ] );\n\t\treturn version;\n\n\t}\n\n\tthrow new Error( 'THREE.FBXLoader: Cannot find the version number for the file given.' );\n\n}\n\n// Converts FBX ticks into real time seconds.\nfunction convertFBXTimeToSeconds( time ) {\n\n\treturn time / 46186158000;\n\n}\n\nconst dataArray = [];\n\n// extracts the data from the correct position in the FBX array based on indexing type\nfunction getData( polygonVertexIndex, polygonIndex, vertexIndex, infoObject ) {\n\n\tlet index;\n\n\tswitch ( infoObject.mappingType ) {\n\n\t\tcase 'ByPolygonVertex' :\n\t\t\tindex = polygonVertexIndex;\n\t\t\tbreak;\n\t\tcase 'ByPolygon' :\n\t\t\tindex = polygonIndex;\n\t\t\tbreak;\n\t\tcase 'ByVertice' :\n\t\t\tindex = vertexIndex;\n\t\t\tbreak;\n\t\tcase 'AllSame' :\n\t\t\tindex = infoObject.indices[ 0 ];\n\t\t\tbreak;\n\t\tdefault :\n\t\t\tconsole.warn( 'THREE.FBXLoader: unknown attribute mapping type ' + infoObject.mappingType );\n\n\t}\n\n\tif ( infoObject.referenceType === 'IndexToDirect' ) index = infoObject.indices[ index ];\n\n\tconst from = index * infoObject.dataSize;\n\tconst to = from + infoObject.dataSize;\n\n\treturn slice( dataArray, infoObject.buffer, from, to );\n\n}\n\nconst tempEuler = new Euler();\nconst tempVec = new Vector3();\n\n// generate transformation from FBX transform data\n// ref: https://help.autodesk.com/view/FBX/2017/ENU/?guid=__files_GUID_10CDD63C_79C1_4F2D_BB28_AD2BE65A02ED_htm\n// ref: http://docs.autodesk.com/FBX/2014/ENU/FBX-SDK-Documentation/index.html?url=cpp_ref/_transformations_2main_8cxx-example.html,topicNumber=cpp_ref__transformations_2main_8cxx_example_htmlfc10a1e1-b18d-4e72-9dc0-70d0f1959f5e\nfunction generateTransform( transformData ) {\n\n\tconst lTranslationM = new Matrix4();\n\tconst lPreRotationM = new Matrix4();\n\tconst lRotationM = new Matrix4();\n\tconst lPostRotationM = new Matrix4();\n\n\tconst lScalingM = new Matrix4();\n\tconst lScalingPivotM = new Matrix4();\n\tconst lScalingOffsetM = new Matrix4();\n\tconst lRotationOffsetM = new Matrix4();\n\tconst lRotationPivotM = new Matrix4();\n\n\tconst lParentGX = new Matrix4();\n\tconst lParentLX = new Matrix4();\n\tconst lGlobalT = new Matrix4();\n\n\tconst inheritType = ( transformData.inheritType ) ? transformData.inheritType : 0;\n\n\tif ( transformData.translation ) lTranslationM.setPosition( tempVec.fromArray( transformData.translation ) );\n\n\t// For Maya models using \"Joint Orient\", Euler order only applies to rotation, not pre/post-rotations\n\tconst defaultEulerOrder = getEulerOrder( 0 );\n\n\tif ( transformData.preRotation ) {\n\n\t\tconst array = transformData.preRotation.map( MathUtils.degToRad );\n\t\tarray.push( defaultEulerOrder );\n\t\tlPreRotationM.makeRotationFromEuler( tempEuler.fromArray( array ) );\n\n\t}\n\n\tif ( transformData.rotation ) {\n\n\t\tconst array = transformData.rotation.map( MathUtils.degToRad );\n\t\tarray.push( transformData.eulerOrder || defaultEulerOrder );\n\t\tlRotationM.makeRotationFromEuler( tempEuler.fromArray( array ) );\n\n\t}\n\n\tif ( transformData.postRotation ) {\n\n\t\tconst array = transformData.postRotation.map( MathUtils.degToRad );\n\t\tarray.push( defaultEulerOrder );\n\t\tlPostRotationM.makeRotationFromEuler( tempEuler.fromArray( array ) );\n\t\tlPostRotationM.invert();\n\n\t}\n\n\tif ( transformData.scale ) lScalingM.scale( tempVec.fromArray( transformData.scale ) );\n\n\t// Pivots and offsets\n\tif ( transformData.scalingOffset ) lScalingOffsetM.setPosition( tempVec.fromArray( transformData.scalingOffset ) );\n\tif ( transformData.scalingPivot ) lScalingPivotM.setPosition( tempVec.fromArray( transformData.scalingPivot ) );\n\tif ( transformData.rotationOffset ) lRotationOffsetM.setPosition( tempVec.fromArray( transformData.rotationOffset ) );\n\tif ( transformData.rotationPivot ) lRotationPivotM.setPosition( tempVec.fromArray( transformData.rotationPivot ) );\n\n\t// parent transform\n\tif ( transformData.parentMatrixWorld ) {\n\n\t\tlParentLX.copy( transformData.parentMatrix );\n\t\tlParentGX.copy( transformData.parentMatrixWorld );\n\n\t}\n\n\tconst lLRM = lPreRotationM.clone().multiply( lRotationM ).multiply( lPostRotationM );\n\t// Global Rotation\n\tconst lParentGRM = new Matrix4();\n\tlParentGRM.extractRotation( lParentGX );\n\n\t// Global Shear*Scaling\n\tconst lParentTM = new Matrix4();\n\tlParentTM.copyPosition( lParentGX );\n\n\tconst lParentGRSM = lParentTM.clone().invert().multiply( lParentGX );\n\tconst lParentGSM = lParentGRM.clone().invert().multiply( lParentGRSM );\n\tconst lLSM = lScalingM;\n\n\tconst lGlobalRS = new Matrix4();\n\n\tif ( inheritType === 0 ) {\n\n\t\tlGlobalRS.copy( lParentGRM ).multiply( lLRM ).multiply( lParentGSM ).multiply( lLSM );\n\n\t} else if ( inheritType === 1 ) {\n\n\t\tlGlobalRS.copy( lParentGRM ).multiply( lParentGSM ).multiply( lLRM ).multiply( lLSM );\n\n\t} else {\n\n\t\tconst lParentLSM = new Matrix4().scale( new Vector3().setFromMatrixScale( lParentLX ) );\n\t\tconst lParentLSM_inv = lParentLSM.clone().invert();\n\t\tconst lParentGSM_noLocal = lParentGSM.clone().multiply( lParentLSM_inv );\n\n\t\tlGlobalRS.copy( lParentGRM ).multiply( lLRM ).multiply( lParentGSM_noLocal ).multiply( lLSM );\n\n\t}\n\n\tconst lRotationPivotM_inv = lRotationPivotM.clone().invert();\n\tconst lScalingPivotM_inv = lScalingPivotM.clone().invert();\n\t// Calculate the local transform matrix\n\tlet lTransform = lTranslationM.clone().multiply( lRotationOffsetM ).multiply( lRotationPivotM ).multiply( lPreRotationM ).multiply( lRotationM ).multiply( lPostRotationM ).multiply( lRotationPivotM_inv ).multiply( lScalingOffsetM ).multiply( lScalingPivotM ).multiply( lScalingM ).multiply( lScalingPivotM_inv );\n\n\tconst lLocalTWithAllPivotAndOffsetInfo = new Matrix4().copyPosition( lTransform );\n\n\tconst lGlobalTranslation = lParentGX.clone().multiply( lLocalTWithAllPivotAndOffsetInfo );\n\tlGlobalT.copyPosition( lGlobalTranslation );\n\n\tlTransform = lGlobalT.clone().multiply( lGlobalRS );\n\n\t// from global to local\n\tlTransform.premultiply( lParentGX.invert() );\n\n\treturn lTransform;\n\n}\n\n// Returns the three.js intrinsic Euler order corresponding to FBX extrinsic Euler order\n// ref: http://help.autodesk.com/view/FBX/2017/ENU/?guid=__cpp_ref_class_fbx_euler_html\nfunction getEulerOrder( order ) {\n\n\torder = order || 0;\n\n\tconst enums = [\n\t\t'ZYX', // -> XYZ extrinsic\n\t\t'YZX', // -> XZY extrinsic\n\t\t'XZY', // -> YZX extrinsic\n\t\t'ZXY', // -> YXZ extrinsic\n\t\t'YXZ', // -> ZXY extrinsic\n\t\t'XYZ', // -> ZYX extrinsic\n\t\t//'SphericXYZ', // not possible to support\n\t];\n\n\tif ( order === 6 ) {\n\n\t\tconsole.warn( 'THREE.FBXLoader: unsupported Euler Order: Spherical XYZ. Animations and rotations may be incorrect.' );\n\t\treturn enums[ 0 ];\n\n\t}\n\n\treturn enums[ order ];\n\n}\n\n// Parses comma separated list of numbers and returns them an array.\n// Used internally by the TextParser\nfunction parseNumberArray( value ) {\n\n\tconst array = value.split( ',' ).map( function ( val ) {\n\n\t\treturn parseFloat( val );\n\n\t} );\n\n\treturn array;\n\n}\n\nfunction convertArrayBufferToString( buffer, from, to ) {\n\n\tif ( from === undefined ) from = 0;\n\tif ( to === undefined ) to = buffer.byteLength;\n\n\treturn new TextDecoder().decode( new Uint8Array( buffer, from, to ) );\n\n}\n\nfunction append( a, b ) {\n\n\tfor ( let i = 0, j = a.length, l = b.length; i < l; i ++, j ++ ) {\n\n\t\ta[ j ] = b[ i ];\n\n\t}\n\n}\n\nfunction slice( a, b, from, to ) {\n\n\tfor ( let i = from, j = 0; i < to; i ++, j ++ ) {\n\n\t\ta[ j ] = b[ i ];\n\n\t}\n\n\treturn a;\n\n}\n\n// This file is part of meshoptimizer library and is distributed under the terms of MIT License.\n// Copyright (C) 2016-2022, by Arseny Kapoulkine (arseny.kapoulkine@gmail.com)\nvar MeshoptDecoder = (function() {\n\n\t// Built with clang version 14.0.4\n\t// Built from meshoptimizer 0.18\n\tvar wasm_base = \"b9H79Tebbbe8Fv9Gbb9Gvuuuuueu9Giuuub9Geueu9Giuuueuikqbeeedddillviebeoweuec:q;iekr;leDo9TW9T9VV95dbH9F9F939H79T9F9J9H229F9Jt9VV7bb8A9TW79O9V9Wt9F9KW9J9V9KW9wWVtW949c919M9MWVbeY9TW79O9V9Wt9F9KW9J9V9KW69U9KW949c919M9MWVbdE9TW79O9V9Wt9F9KW9J9V9KW69U9KW949tWG91W9U9JWbiL9TW79O9V9Wt9F9KW9J9V9KWS9P2tWV9p9JtblK9TW79O9V9Wt9F9KW9J9V9KWS9P2tWV9r919HtbvL9TW79O9V9Wt9F9KW9J9V9KWS9P2tWVT949Wbol79IV9Rbrq:P8Yqdbk;3sezu8Jjjjjbcj;eb9Rgv8Kjjjjbc9:hodnadcefal0mbcuhoaiRbbc:Ge9hmbavaialfgrad9Radz1jjjbhwcj;abad9UhoaicefhldnadTmbaoc;WFbGgocjdaocjd6EhDcbhqinaqae9pmeaDaeaq9RaqaDfae6Egkcsfgocl4cifcd4hxdndndndnaoc9WGgmTmbcbhPcehsawcjdfhzalhHinaraH9Rax6midnaraHaxfgl9RcK6mbczhoinawcj;cbfaogifgoc9WfhOdndndndndnaHaic9WfgAco4fRbbaAci4coG4ciGPlbedibkaO9cb83ibaOcwf9cb83ibxikaOalRblalRbbgAco4gCaCciSgCE86bbaocGfalclfaCfgORbbaAcl4ciGgCaCciSgCE86bbaocVfaOaCfgORbbaAcd4ciGgCaCciSgCE86bbaoc7faOaCfgORbbaAciGgAaAciSgAE86bbaoctfaOaAfgARbbalRbegOco4gCaCciSgCE86bbaoc91faAaCfgARbbaOcl4ciGgCaCciSgCE86bbaoc4faAaCfgARbbaOcd4ciGgCaCciSgCE86bbaoc93faAaCfgARbbaOciGgOaOciSgOE86bbaoc94faAaOfgARbbalRbdgOco4gCaCciSgCE86bbaoc95faAaCfgARbbaOcl4ciGgCaCciSgCE86bbaoc96faAaCfgARbbaOcd4ciGgCaCciSgCE86bbaoc97faAaCfgARbbaOciGgOaOciSgOE86bbaoc98faAaOfgORbbalRbiglco4gAaAciSgAE86bbaoc99faOaAfgORbbalcl4ciGgAaAciSgAE86bbaoc9:faOaAfgORbbalcd4ciGgAaAciSgAE86bbaocufaOaAfgoRbbalciGglalciSglE86bbaoalfhlxdkaOalRbwalRbbgAcl4gCaCcsSgCE86bbaocGfalcwfaCfgORbbaAcsGgAaAcsSgAE86bbaocVfaOaAfgORbbalRbegAcl4gCaCcsSgCE86bbaoc7faOaCfgORbbaAcsGgAaAcsSgAE86bbaoctfaOaAfgORbbalRbdgAcl4gCaCcsSgCE86bbaoc91faOaCfgORbbaAcsGgAaAcsSgAE86bbaoc4faOaAfgORbbalRbigAcl4gCaCcsSgCE86bbaoc93faOaCfgORbbaAcsGgAaAcsSgAE86bbaoc94faOaAfgORbbalRblgAcl4gCaCcsSgCE86bbaoc95faOaCfgORbbaAcsGgAaAcsSgAE86bbaoc96faOaAfgORbbalRbvgAcl4gCaCcsSgCE86bbaoc97faOaCfgORbbaAcsGgAaAcsSgAE86bbaoc98faOaAfgORbbalRbogAcl4gCaCcsSgCE86bbaoc99faOaCfgORbbaAcsGgAaAcsSgAE86bbaoc9:faOaAfgORbbalRbrglcl4gAaAcsSgAE86bbaocufaOaAfgoRbbalcsGglalcsSglE86bbaoalfhlxekaOal8Pbb83bbaOcwfalcwf8Pbb83bbalczfhlkdnaiam9pmbaiczfhoaral9RcL0mekkaiam6mialTmidnakTmbawaPfRbbhOcbhoazhiinaiawcj;cbfaofRbbgAce4cbaAceG9R7aOfgO86bbaiadfhiaocefgoak9hmbkkazcefhzaPcefgPad6hsalhHaPad9hmexvkkcbhlasceGmdxikalaxad2fhCdnakTmbcbhHcehsawcjdfhminaral9Rax6mialTmdalaxfhlawaHfRbbhOcbhoamhiinaiawcj;cbfaofRbbgAce4cbaAceG9R7aOfgO86bbaiadfhiaocefgoak9hmbkamcefhmaHcefgHad6hsaHad9hmbkaChlxikcbhocehsinaral9Rax6mdalTmealaxfhlaocefgoad6hsadao9hmbkaChlxdkcbhlasceGTmekc9:hoxikabaqad2fawcjdfakad2z1jjjb8Aawawcjdfakcufad2fadz1jjjb8Aakaqfhqalmbkc9:hoxekcbc99aral9Radcaadca0ESEhokavcj;ebf8Kjjjjbaok;yzeHu8Jjjjjbc;ae9Rgv8Kjjjjbc9:hodnaeci9UgrcHfal0mbcuhoaiRbbgwc;WeGc;Ge9hmbawcsGgDce0mbavc;abfcFecjez:jjjjb8AavcUf9cu83ibavc8Wf9cu83ibavcyf9cu83ibavcaf9cu83ibavcKf9cu83ibavczf9cu83ibav9cu83iwav9cu83ibaialfc9WfhqaicefgwarfhodnaeTmbcmcsaDceSEhkcbhxcbhmcbhDcbhicbhlindnaoaq9nmbc9:hoxikdndnawRbbgrc;Ve0mbavc;abfalarcl4cu7fcsGcitfgPydlhsaPydbhzdnarcsGgPak9pmbavaiarcu7fcsGcdtfydbaxaPEhraPThPdndnadcd9hmbabaDcetfgHaz87ebaHcdfas87ebaHclfar87ebxekabaDcdtfgHazBdbaHclfasBdbaHcwfarBdbkaxaPfhxavc;abfalcitfgHarBdbaHasBdlavaicdtfarBdbavc;abfalcefcsGglcitfgHazBdbaHarBdlaiaPfhialcefhlxdkdndnaPcsSmbamaPfaPc987fcefhmxekaocefhrao8SbbgPcFeGhHdndnaPcu9mmbarhoxekaocvfhoaHcFbGhHcrhPdninar8SbbgOcFbGaPtaHVhHaOcu9kmearcefhraPcrfgPc8J9hmbxdkkarcefhokaHce4cbaHceG9R7amfhmkdndnadcd9hmbabaDcetfgraz87ebarcdfas87ebarclfam87ebxekabaDcdtfgrazBdbarclfasBdbarcwfamBdbkavc;abfalcitfgramBdbarasBdlavaicdtfamBdbavc;abfalcefcsGglcitfgrazBdbaramBdlaicefhialcefhlxekdnarcpe0mbaxcefgOavaiaqarcsGfRbbgPcl49RcsGcdtfydbaPcz6gHEhravaiaP9RcsGcdtfydbaOaHfgsaPcsGgOEhPaOThOdndnadcd9hmbabaDcetfgzax87ebazcdfar87ebazclfaP87ebxekabaDcdtfgzaxBdbazclfarBdbazcwfaPBdbkavaicdtfaxBdbavc;abfalcitfgzarBdbazaxBdlavaicefgicsGcdtfarBdbavc;abfalcefcsGcitfgzaPBdbazarBdlavaiaHfcsGgicdtfaPBdbavc;abfalcdfcsGglcitfgraxBdbaraPBdlalcefhlaiaOfhiasaOfhxxekaxcbaoRbbgzEgAarc;:eSgrfhsazcsGhCazcl4hXdndnazcs0mbascefhOxekashOavaiaX9RcsGcdtfydbhskdndnaCmbaOcefhxxekaOhxavaiaz9RcsGcdtfydbhOkdndnarTmbaocefhrxekaocdfhrao8SbegHcFeGhPdnaHcu9kmbaocofhAaPcFbGhPcrhodninar8SbbgHcFbGaotaPVhPaHcu9kmearcefhraocrfgoc8J9hmbkaAhrxekarcefhrkaPce4cbaPceG9R7amfgmhAkdndnaXcsSmbarhPxekarcefhPar8SbbgocFeGhHdnaocu9kmbarcvfhsaHcFbGhHcrhodninaP8SbbgrcFbGaotaHVhHarcu9kmeaPcefhPaocrfgoc8J9hmbkashPxekaPcefhPkaHce4cbaHceG9R7amfgmhskdndnaCcsSmbaPhoxekaPcefhoaP8SbbgrcFeGhHdnarcu9kmbaPcvfhOaHcFbGhHcrhrdninao8SbbgPcFbGartaHVhHaPcu9kmeaocefhoarcrfgrc8J9hmbkaOhoxekaocefhokaHce4cbaHceG9R7amfgmhOkdndnadcd9hmbabaDcetfgraA87ebarcdfas87ebarclfaO87ebxekabaDcdtfgraABdbarclfasBdbarcwfaOBdbkavc;abfalcitfgrasBdbaraABdlavaicdtfaABdbavc;abfalcefcsGcitfgraOBdbarasBdlavaicefgicsGcdtfasBdbavc;abfalcdfcsGcitfgraABdbaraOBdlavaiazcz6aXcsSVfgicsGcdtfaOBdbaiaCTaCcsSVfhialcifhlkawcefhwalcsGhlaicsGhiaDcifgDae6mbkkcbc99aoaqSEhokavc;aef8Kjjjjbaok:llevu8Jjjjjbcz9Rhvc9:hodnaecvfal0mbcuhoaiRbbc;:eGc;qe9hmbav9cb83iwaicefhraialfc98fhwdnaeTmbdnadcdSmbcbhDindnaraw6mbc9:skarcefhoar8SbbglcFeGhidndnalcu9mmbaohrxekarcvfhraicFbGhicrhldninao8SbbgdcFbGaltaiVhiadcu9kmeaocefhoalcrfglc8J9hmbxdkkaocefhrkabaDcdtfaicd4cbaice4ceG9R7avcwfaiceGcdtVgoydbfglBdbaoalBdbaDcefgDae9hmbxdkkcbhDindnaraw6mbc9:skarcefhoar8SbbglcFeGhidndnalcu9mmbaohrxekarcvfhraicFbGhicrhldninao8SbbgdcFbGaltaiVhiadcu9kmeaocefhoalcrfglc8J9hmbxdkkaocefhrkabaDcetfaicd4cbaice4ceG9R7avcwfaiceGcdtVgoydbfgl87ebaoalBdbaDcefgDae9hmbkkcbc99arawSEhokaok:Lvoeue99dud99eud99dndnadcl9hmbaeTmeindndnabcdfgd8Sbb:Yab8Sbbgi:Ygl:l:tabcefgv8Sbbgo:Ygr:l:tgwJbb;:9cawawNJbbbbawawJbbbb9GgDEgq:mgkaqaicb9iEalMgwawNakaqaocb9iEarMgqaqNMM:r:vglNJbbbZJbbb:;aDEMgr:lJbbb9p9DTmbar:Ohixekcjjjj94hikadai86bbdndnaqalNJbbbZJbbb:;aqJbbbb9GEMgq:lJbbb9p9DTmbaq:Ohdxekcjjjj94hdkavad86bbdndnawalNJbbbZJbbb:;awJbbbb9GEMgw:lJbbb9p9DTmbaw:Ohdxekcjjjj94hdkabad86bbabclfhbaecufgembxdkkaeTmbindndnabclfgd8Ueb:Yab8Uebgi:Ygl:l:tabcdfgv8Uebgo:Ygr:l:tgwJb;:FSawawNJbbbbawawJbbbb9GgDEgq:mgkaqaicb9iEalMgwawNakaqaocb9iEarMgqaqNMM:r:vglNJbbbZJbbb:;aDEMgr:lJbbb9p9DTmbar:Ohixekcjjjj94hikadai87ebdndnaqalNJbbbZJbbb:;aqJbbbb9GEMgq:lJbbb9p9DTmbaq:Ohdxekcjjjj94hdkavad87ebdndnawalNJbbbZJbbb:;awJbbbb9GEMgw:lJbbb9p9DTmbaw:Ohdxekcjjjj94hdkabad87ebabcwfhbaecufgembkkk;siliui99iue99dnaeTmbcbhiabhlindndnJ;Zl81Zalcof8UebgvciV:Y:vgoal8Ueb:YNgrJb;:FSNJbbbZJbbb:;arJbbbb9GEMgw:lJbbb9p9DTmbaw:OhDxekcjjjj94hDkalclf8Uebhqalcdf8UebhkabavcefciGaiVcetfaD87ebdndnaoak:YNgwJb;:FSNJbbbZJbbb:;awJbbbb9GEMgx:lJbbb9p9DTmbax:Ohkxekcjjjj94hkkabavcdfciGaiVcetfak87ebdndnaoaq:YNgoJb;:FSNJbbbZJbbb:;aoJbbbb9GEMgx:lJbbb9p9DTmbax:Ohqxekcjjjj94hqkabavcufciGaiVcetfaq87ebdndnJbbjZararN:tawawN:taoaoN:tgrJbbbbarJbbbb9GE:rJb;:FSNJbbbZMgr:lJbbb9p9DTmbar:Ohqxekcjjjj94hqkabavciGaiVcetfaq87ebalcwfhlaiclfhiaecufgembkkk9mbdnadcd4ae2geTmbinababydbgdcwtcw91:Yadce91cjjj;8ifcjjj98G::NUdbabclfhbaecufgembkkk9teiucbcbydj1jjbgeabcifc98GfgbBdj1jjbdndnabZbcztgd9nmbcuhiabad9RcFFifcz4nbcuSmekaehikaik;LeeeudndnaeabVciGTmbabhixekdndnadcz9pmbabhixekabhiinaiaeydbBdbaiclfaeclfydbBdbaicwfaecwfydbBdbaicxfaecxfydbBdbaiczfhiaeczfheadc9Wfgdcs0mbkkadcl6mbinaiaeydbBdbaeclfheaiclfhiadc98fgdci0mbkkdnadTmbinaiaeRbb86bbaicefhiaecefheadcufgdmbkkabk;aeedudndnabciGTmbabhixekaecFeGc:b:c:ew2hldndnadcz9pmbabhixekabhiinaialBdbaicxfalBdbaicwfalBdbaiclfalBdbaiczfhiadc9Wfgdcs0mbkkadcl6mbinaialBdbaiclfhiadc98fgdci0mbkkdnadTmbinaiae86bbaicefhiadcufgdmbkkabkkkebcjwklz9Kbb\";\n\tvar wasm_simd = \"b9H79TebbbeKl9Gbb9Gvuuuuueu9Giuuub9Geueuikqbbebeedddilve9Weeeviebeoweuec:q;Aekr;leDo9TW9T9VV95dbH9F9F939H79T9F9J9H229F9Jt9VV7bb8A9TW79O9V9Wt9F9KW9J9V9KW9wWVtW949c919M9MWVbdY9TW79O9V9Wt9F9KW9J9V9KW69U9KW949c919M9MWVblE9TW79O9V9Wt9F9KW9J9V9KW69U9KW949tWG91W9U9JWbvL9TW79O9V9Wt9F9KW9J9V9KWS9P2tWV9p9JtboK9TW79O9V9Wt9F9KW9J9V9KWS9P2tWV9r919HtbrL9TW79O9V9Wt9F9KW9J9V9KWS9P2tWVT949Wbwl79IV9RbDq;t9tqlbzik9:evu8Jjjjjbcz9Rhbcbheincbhdcbhiinabcwfadfaicjuaead4ceGglE86bbaialfhiadcefgdcw9hmbkaec:q:yjjbfai86bbaecitc:q1jjbfab8Piw83ibaecefgecjd9hmbkk;h8JlHud97euo978Jjjjjbcj;kb9Rgv8Kjjjjbc9:hodnadcefal0mbcuhoaiRbbc:Ge9hmbavaialfgrad9Rad;8qbbcj;abad9UhoaicefhldnadTmbaoc;WFbGgocjdaocjd6EhwcbhDinaDae9pmeawaeaD9RaDawfae6Egqcsfgoc9WGgkci2hxakcethmaocl4cifcd4hPabaDad2fhscbhzdnincehHalhOcbhAdninaraO9RaP6miavcj;cbfaAak2fhCaOaPfhlcbhidnakc;ab6mbaral9Rc;Gb6mbcbhoinaCaofhidndndndndnaOaoco4fRbbgXciGPlbedibkaipxbbbbbbbbbbbbbbbbpklbxikaialpbblalpbbbgQclp:meaQpmbzeHdOiAlCvXoQrLgQcdp:meaQpmbzeHdOiAlCvXoQrLpxiiiiiiiiiiiiiiiip9ogLpxiiiiiiiiiiiiiiiip8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibaKc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spklbalclfaYpQbfaKc:q:yjjbfRbbfhlxdkaialpbbwalpbbbgQclp:meaQpmbzeHdOiAlCvXoQrLpxssssssssssssssssp9ogLpxssssssssssssssssp8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibaKc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spklbalcwfaYpQbfaKc:q:yjjbfRbbfhlxekaialpbbbpklbalczfhlkdndndndndnaXcd4ciGPlbedibkaipxbbbbbbbbbbbbbbbbpklzxikaialpbblalpbbbgQclp:meaQpmbzeHdOiAlCvXoQrLgQcdp:meaQpmbzeHdOiAlCvXoQrLpxiiiiiiiiiiiiiiiip9ogLpxiiiiiiiiiiiiiiiip8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibaKc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spklzalclfaYpQbfaKc:q:yjjbfRbbfhlxdkaialpbbwalpbbbgQclp:meaQpmbzeHdOiAlCvXoQrLpxssssssssssssssssp9ogLpxssssssssssssssssp8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibaKc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spklzalcwfaYpQbfaKc:q:yjjbfRbbfhlxekaialpbbbpklzalczfhlkdndndndndnaXcl4ciGPlbedibkaipxbbbbbbbbbbbbbbbbpklaxikaialpbblalpbbbgQclp:meaQpmbzeHdOiAlCvXoQrLgQcdp:meaQpmbzeHdOiAlCvXoQrLpxiiiiiiiiiiiiiiiip9ogLpxiiiiiiiiiiiiiiiip8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibaKc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spklaalclfaYpQbfaKc:q:yjjbfRbbfhlxdkaialpbbwalpbbbgQclp:meaQpmbzeHdOiAlCvXoQrLpxssssssssssssssssp9ogLpxssssssssssssssssp8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibaKc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spklaalcwfaYpQbfaKc:q:yjjbfRbbfhlxekaialpbbbpklaalczfhlkdndndndndnaXco4Plbedibkaipxbbbbbbbbbbbbbbbbpkl8WxikaialpbblalpbbbgQclp:meaQpmbzeHdOiAlCvXoQrLgQcdp:meaQpmbzeHdOiAlCvXoQrLpxiiiiiiiiiiiiiiiip9ogLpxiiiiiiiiiiiiiiiip8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgXcitc:q1jjbfpbibaXc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgXcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spkl8WalclfaYpQbfaXc:q:yjjbfRbbfhlxdkaialpbbwalpbbbgQclp:meaQpmbzeHdOiAlCvXoQrLpxssssssssssssssssp9ogLpxssssssssssssssssp8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgXcitc:q1jjbfpbibaXc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgXcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spkl8WalcwfaYpQbfaXc:q:yjjbfRbbfhlxekaialpbbbpkl8Walczfhlkaoc;abfhiaocjefak0meaihoaral9Rc;Fb0mbkkdndnaiak9pmbaici4hoinaral9RcK6mdaCaifhXdndndndndnaOaico4fRbbaocoG4ciGPlbedibkaXpxbbbbbbbbbbbbbbbbpklbxikaXalpbblalpbbbgQclp:meaQpmbzeHdOiAlCvXoQrLgQcdp:meaQpmbzeHdOiAlCvXoQrLpxiiiiiiiiiiiiiiiip9ogLpxiiiiiiiiiiiiiiiip8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibaKc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spklbalclfaYpQbfaKc:q:yjjbfRbbfhlxdkaXalpbbwalpbbbgQclp:meaQpmbzeHdOiAlCvXoQrLpxssssssssssssssssp9ogLpxssssssssssssssssp8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibaKc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spklbalcwfaYpQbfaKc:q:yjjbfRbbfhlxekaXalpbbbpklbalczfhlkaocdfhoaiczfgiak6mbkkalTmbaAci6hHalhOaAcefgohAaoclSmdxekkcbhlaHceGmdkdnakTmbavcjdfazfhiavazfpbdbhYcbhXinaiavcj;cbfaXfgopblbgLcep9TaLpxeeeeeeeeeeeeeeeegQp9op9Hp9rgLaoakfpblbg8Acep9Ta8AaQp9op9Hp9rg8ApmbzeHdOiAlCvXoQrLgEaoamfpblbg3cep9Ta3aQp9op9Hp9rg3aoaxfpblbg5cep9Ta5aQp9op9Hp9rg5pmbzeHdOiAlCvXoQrLg8EpmbezHdiOAlvCXorQLgQaQpmbedibedibedibediaYp9UgYp9AdbbaiadfgoaYaQaQpmlvorlvorlvorlvorp9UgYp9AdbbaoadfgoaYaQaQpmwDqkwDqkwDqkwDqkp9UgYp9AdbbaoadfgoaYaQaQpmxmPsxmPsxmPsxmPsp9UgYp9AdbbaoadfgoaYaEa8EpmwDKYqk8AExm35Ps8E8FgQaQpmbedibedibedibedip9UgYp9AdbbaoadfgoaYaQaQpmlvorlvorlvorlvorp9UgYp9AdbbaoadfgoaYaQaQpmwDqkwDqkwDqkwDqkp9UgYp9AdbbaoadfgoaYaQaQpmxmPsxmPsxmPsxmPsp9UgYp9AdbbaoadfgoaYaLa8ApmwKDYq8AkEx3m5P8Es8FgLa3a5pmwKDYq8AkEx3m5P8Es8Fg8ApmbezHdiOAlvCXorQLgQaQpmbedibedibedibedip9UgYp9AdbbaoadfgoaYaQaQpmlvorlvorlvorlvorp9UgYp9AdbbaoadfgoaYaQaQpmwDqkwDqkwDqkwDqkp9UgYp9AdbbaoadfgoaYaQaQpmxmPsxmPsxmPsxmPsp9UgYp9AdbbaoadfgoaYaLa8ApmwDKYqk8AExm35Ps8E8FgQaQpmbedibedibedibedip9UgYp9AdbbaoadfgoaYaQaQpmlvorlvorlvorlvorp9UgYp9AdbbaoadfgoaYaQaQpmwDqkwDqkwDqkwDqkp9UgYp9AdbbaoadfgoaYaQaQpmxmPsxmPsxmPsxmPsp9UgYp9AdbbaoadfhiaXczfgXak6mbkkazclfgzad6mbkasavcjdfaqad2;8qbbavavcjdfaqcufad2fad;8qbbaqaDfhDc9:hoalmexikkc9:hoxekcbc99aral9Radcaadca0ESEhokavcj;kbf8Kjjjjbaokwbz:bjjjbk;uzeHu8Jjjjjbc;ae9Rgv8Kjjjjbc9:hodnaeci9UgrcHfal0mbcuhoaiRbbgwc;WeGc;Ge9hmbawcsGgDce0mbavc;abfcFecje;8kbavcUf9cu83ibavc8Wf9cu83ibavcyf9cu83ibavcaf9cu83ibavcKf9cu83ibavczf9cu83ibav9cu83iwav9cu83ibaialfc9WfhqaicefgwarfhodnaeTmbcmcsaDceSEhkcbhxcbhmcbhDcbhicbhlindnaoaq9nmbc9:hoxikdndnawRbbgrc;Ve0mbavc;abfalarcl4cu7fcsGcitfgPydlhsaPydbhzdnarcsGgPak9pmbavaiarcu7fcsGcdtfydbaxaPEhraPThPdndnadcd9hmbabaDcetfgHaz87ebaHcdfas87ebaHclfar87ebxekabaDcdtfgHazBdbaHclfasBdbaHcwfarBdbkaxaPfhxavc;abfalcitfgHarBdbaHasBdlavaicdtfarBdbavc;abfalcefcsGglcitfgHazBdbaHarBdlaiaPfhialcefhlxdkdndnaPcsSmbamaPfaPc987fcefhmxekaocefhrao8SbbgPcFeGhHdndnaPcu9mmbarhoxekaocvfhoaHcFbGhHcrhPdninar8SbbgOcFbGaPtaHVhHaOcu9kmearcefhraPcrfgPc8J9hmbxdkkarcefhokaHce4cbaHceG9R7amfhmkdndnadcd9hmbabaDcetfgraz87ebarcdfas87ebarclfam87ebxekabaDcdtfgrazBdbarclfasBdbarcwfamBdbkavc;abfalcitfgramBdbarasBdlavaicdtfamBdbavc;abfalcefcsGglcitfgrazBdbaramBdlaicefhialcefhlxekdnarcpe0mbaxcefgOavaiaqarcsGfRbbgPcl49RcsGcdtfydbaPcz6gHEhravaiaP9RcsGcdtfydbaOaHfgsaPcsGgOEhPaOThOdndnadcd9hmbabaDcetfgzax87ebazcdfar87ebazclfaP87ebxekabaDcdtfgzaxBdbazclfarBdbazcwfaPBdbkavaicdtfaxBdbavc;abfalcitfgzarBdbazaxBdlavaicefgicsGcdtfarBdbavc;abfalcefcsGcitfgzaPBdbazarBdlavaiaHfcsGgicdtfaPBdbavc;abfalcdfcsGglcitfgraxBdbaraPBdlalcefhlaiaOfhiasaOfhxxekaxcbaoRbbgzEgAarc;:eSgrfhsazcsGhCazcl4hXdndnazcs0mbascefhOxekashOavaiaX9RcsGcdtfydbhskdndnaCmbaOcefhxxekaOhxavaiaz9RcsGcdtfydbhOkdndnarTmbaocefhrxekaocdfhrao8SbegHcFeGhPdnaHcu9kmbaocofhAaPcFbGhPcrhodninar8SbbgHcFbGaotaPVhPaHcu9kmearcefhraocrfgoc8J9hmbkaAhrxekarcefhrkaPce4cbaPceG9R7amfgmhAkdndnaXcsSmbarhPxekarcefhPar8SbbgocFeGhHdnaocu9kmbarcvfhsaHcFbGhHcrhodninaP8SbbgrcFbGaotaHVhHarcu9kmeaPcefhPaocrfgoc8J9hmbkashPxekaPcefhPkaHce4cbaHceG9R7amfgmhskdndnaCcsSmbaPhoxekaPcefhoaP8SbbgrcFeGhHdnarcu9kmbaPcvfhOaHcFbGhHcrhrdninao8SbbgPcFbGartaHVhHaPcu9kmeaocefhoarcrfgrc8J9hmbkaOhoxekaocefhokaHce4cbaHceG9R7amfgmhOkdndnadcd9hmbabaDcetfgraA87ebarcdfas87ebarclfaO87ebxekabaDcdtfgraABdbarclfasBdbarcwfaOBdbkavc;abfalcitfgrasBdbaraABdlavaicdtfaABdbavc;abfalcefcsGcitfgraOBdbarasBdlavaicefgicsGcdtfasBdbavc;abfalcdfcsGcitfgraABdbaraOBdlavaiazcz6aXcsSVfgicsGcdtfaOBdbaiaCTaCcsSVfhialcifhlkawcefhwalcsGhlaicsGhiaDcifgDae6mbkkcbc99aoaqSEhokavc;aef8Kjjjjbaok:llevu8Jjjjjbcz9Rhvc9:hodnaecvfal0mbcuhoaiRbbc;:eGc;qe9hmbav9cb83iwaicefhraialfc98fhwdnaeTmbdnadcdSmbcbhDindnaraw6mbc9:skarcefhoar8SbbglcFeGhidndnalcu9mmbaohrxekarcvfhraicFbGhicrhldninao8SbbgdcFbGaltaiVhiadcu9kmeaocefhoalcrfglc8J9hmbxdkkaocefhrkabaDcdtfaicd4cbaice4ceG9R7avcwfaiceGcdtVgoydbfglBdbaoalBdbaDcefgDae9hmbxdkkcbhDindnaraw6mbc9:skarcefhoar8SbbglcFeGhidndnalcu9mmbaohrxekarcvfhraicFbGhicrhldninao8SbbgdcFbGaltaiVhiadcu9kmeaocefhoalcrfglc8J9hmbxdkkaocefhrkabaDcetfaicd4cbaice4ceG9R7avcwfaiceGcdtVgoydbfgl87ebaoalBdbaDcefgDae9hmbkkcbc99arawSEhokaok:EPliuo97eue978Jjjjjbca9Rhidndnadcl9hmbdnaec98GglTmbcbhvabhdinadadpbbbgocKp:RecKp:Sep;6egraocwp:RecKp:Sep;6earp;Geaoczp:RecKp:Sep;6egwp;Gep;Kep;LegDpxbbbbbbbbbbbbbbbbp:2egqarpxbbbjbbbjbbbjbbbjgkp9op9rp;Kegrpxbb;:9cbb;:9cbb;:9cbb;:9cararp;MeaDaDp;Meawaqawakp9op9rp;Kegrarp;Mep;Kep;Kep;Jep;Negwp;Mepxbbn0bbn0bbn0bbn0gqp;KepxFbbbFbbbFbbbFbbbp9oaopxbbbFbbbFbbbFbbbFp9op9qarawp;Meaqp;Kecwp:RepxbFbbbFbbbFbbbFbbp9op9qaDawp;Meaqp;Keczp:RepxbbFbbbFbbbFbbbFbp9op9qpkbbadczfhdavclfgval6mbkkalae9pmeaiaeciGgvcdtgdVcbczad9R;8kbaiabalcdtfglad;8qbbdnavTmbaiaipblbgocKp:RecKp:Sep;6egraocwp:RecKp:Sep;6earp;Geaoczp:RecKp:Sep;6egwp;Gep;Kep;LegDpxbbbbbbbbbbbbbbbbp:2egqarpxbbbjbbbjbbbjbbbjgkp9op9rp;Kegrpxbb;:9cbb;:9cbb;:9cbb;:9cararp;MeaDaDp;Meawaqawakp9op9rp;Kegrarp;Mep;Kep;Kep;Jep;Negwp;Mepxbbn0bbn0bbn0bbn0gqp;KepxFbbbFbbbFbbbFbbbp9oaopxbbbFbbbFbbbFbbbFp9op9qarawp;Meaqp;Kecwp:RepxbFbbbFbbbFbbbFbbp9op9qaDawp;Meaqp;Keczp:RepxbbFbbbFbbbFbbbFbp9op9qpklbkalaiad;8qbbskdnaec98GgxTmbcbhvabhdinadczfglalpbbbgopxbbbbbbFFbbbbbbFFgkp9oadpbbbgDaopmlvorxmPsCXQL358E8FpxFubbFubbFubbFubbp9op;6eaDaopmbediwDqkzHOAKY8AEgoczp:Sep;6egrp;Geaoczp:Reczp:Sep;6egwp;Gep;Kep;Legopxb;:FSb;:FSb;:FSb;:FSawaopxbbbbbbbbbbbbbbbbp:2egqawpxbbbjbbbjbbbjbbbjgmp9op9rp;Kegwawp;Meaoaop;Mearaqaramp9op9rp;Kegoaop;Mep;Kep;Kep;Jep;Negrp;Mepxbbn0bbn0bbn0bbn0gqp;Keczp:Reawarp;Meaqp;KepxFFbbFFbbFFbbFFbbp9op9qgwaoarp;Meaqp;KepxFFbbFFbbFFbbFFbbp9ogopmwDKYqk8AExm35Ps8E8Fp9qpkbbadaDakp9oawaopmbezHdiOAlvCXorQLp9qpkbbadcafhdavclfgvax6mbkkaxae9pmbaiaeciGgvcitgdfcbcaad9R;8kbaiabaxcitfglad;8qbbdnavTmbaiaipblzgopxbbbbbbFFbbbbbbFFgkp9oaipblbgDaopmlvorxmPsCXQL358E8FpxFubbFubbFubbFubbp9op;6eaDaopmbediwDqkzHOAKY8AEgoczp:Sep;6egrp;Geaoczp:Reczp:Sep;6egwp;Gep;Kep;Legopxb;:FSb;:FSb;:FSb;:FSawaopxbbbbbbbbbbbbbbbbp:2egqawpxbbbjbbbjbbbjbbbjgmp9op9rp;Kegwawp;Meaoaop;Mearaqaramp9op9rp;Kegoaop;Mep;Kep;Kep;Jep;Negrp;Mepxbbn0bbn0bbn0bbn0gqp;Keczp:Reawarp;Meaqp;KepxFFbbFFbbFFbbFFbbp9op9qgwaoarp;Meaqp;KepxFFbbFFbbFFbbFFbbp9ogopmwDKYqk8AExm35Ps8E8Fp9qpklzaiaDakp9oawaopmbezHdiOAlvCXorQLp9qpklbkalaiad;8qbbkk;4wllue97euv978Jjjjjbc8W9Rhidnaec98GglTmbcbhvabhoinaiaopbbbgraoczfgwpbbbgDpmlvorxmPsCXQL358E8Fgqczp:Segkclp:RepklbaopxbbjZbbjZbbjZbbjZpx;Zl81Z;Zl81Z;Zl81Z;Zl81Zakpxibbbibbbibbbibbbp9qp;6ep;NegkaraDpmbediwDqkzHOAKY8AEgrczp:Reczp:Sep;6ep;MegDaDp;Meakarczp:Sep;6ep;Megxaxp;Meakaqczp:Reczp:Sep;6ep;Megqaqp;Mep;Kep;Kep;Lepxbbbbbbbbbbbbbbbbp:4ep;Jepxb;:FSb;:FSb;:FSb;:FSgkp;Mepxbbn0bbn0bbn0bbn0grp;KepxFFbbFFbbFFbbFFbbgmp9oaxakp;Mearp;Keczp:Rep9qgxaqakp;Mearp;Keczp:ReaDakp;Mearp;Keamp9op9qgkpmbezHdiOAlvCXorQLgrp5baipblbpEb:T:j83ibaocwfarp5eaipblbpEe:T:j83ibawaxakpmwDKYqk8AExm35Ps8E8Fgkp5baipblbpEd:T:j83ibaocKfakp5eaipblbpEi:T:j83ibaocafhoavclfgval6mbkkdnalae9pmbaiaeciGgvcitgofcbcaao9R;8kbaiabalcitfgwao;8qbbdnavTmbaiaipblbgraipblzgDpmlvorxmPsCXQL358E8Fgqczp:Segkclp:RepklaaipxbbjZbbjZbbjZbbjZpx;Zl81Z;Zl81Z;Zl81Z;Zl81Zakpxibbbibbbibbbibbbp9qp;6ep;NegkaraDpmbediwDqkzHOAKY8AEgrczp:Reczp:Sep;6ep;MegDaDp;Meakarczp:Sep;6ep;Megxaxp;Meakaqczp:Reczp:Sep;6ep;Megqaqp;Mep;Kep;Kep;Lepxbbbbbbbbbbbbbbbbp:4ep;Jepxb;:FSb;:FSb;:FSb;:FSgkp;Mepxbbn0bbn0bbn0bbn0grp;KepxFFbbFFbbFFbbFFbbgmp9oaxakp;Mearp;Keczp:Rep9qgxaqakp;Mearp;Keczp:ReaDakp;Mearp;Keamp9op9qgkpmbezHdiOAlvCXorQLgrp5baipblapEb:T:j83ibaiarp5eaipblapEe:T:j83iwaiaxakpmwDKYqk8AExm35Ps8E8Fgkp5baipblapEd:T:j83izaiakp5eaipblapEi:T:j83iKkawaiao;8qbbkk:Pddiue978Jjjjjbc;ab9Rhidnadcd4ae2glc98GgvTmbcbhdabheinaeaepbbbgocwp:Recwp:Sep;6eaocep:SepxbbjZbbjZbbjZbbjZp:UepxbbjFbbjFbbjFbbjFp9op;Mepkbbaeczfheadclfgdav6mbkkdnaval9pmbaialciGgdcdtgeVcbc;abae9R;8kbaiabavcdtfgvae;8qbbdnadTmbaiaipblbgocwp:Recwp:Sep;6eaocep:SepxbbjZbbjZbbjZbbjZp:UepxbbjFbbjFbbjFbbjFp9op;Mepklbkavaiae;8qbbkk9teiucbcbydj1jjbgeabcifc98GfgbBdj1jjbdndnabZbcztgd9nmbcuhiabad9RcFFifcz4nbcuSmekaehikaikkkebcjwklz9Tbb\";\n\n\tvar detector = new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]);\n\tvar wasmpack = new Uint8Array([32,0,65,2,1,106,34,33,3,128,11,4,13,64,6,253,10,7,15,116,127,5,8,12,40,16,19,54,20,9,27,255,113,17,42,67,24,23,146,148,18,14,22,45,70,69,56,114,101,21,25,63,75,136,108,28,118,29,73,115]);\n\n\tif (typeof WebAssembly !== 'object') {\n\t\treturn {\n\t\t\tsupported: false,\n\t\t};\n\t}\n\n\tvar wasm = WebAssembly.validate(detector) ? wasm_simd : wasm_base;\n\n\tvar instance;\n\n\tvar ready =\n\t\tWebAssembly.instantiate(unpack(wasm), {})\n\t\t.then(function(result) {\n\t\t\tinstance = result.instance;\n\t\t\tinstance.exports.__wasm_call_ctors();\n\t\t});\n\n\tfunction unpack(data) {\n\t\tvar result = new Uint8Array(data.length);\n\t\tfor (var i = 0; i < data.length; ++i) {\n\t\t\tvar ch = data.charCodeAt(i);\n\t\t\tresult[i] = ch > 96 ? ch - 97 : ch > 64 ? ch - 39 : ch + 4;\n\t\t}\n\t\tvar write = 0;\n\t\tfor (var i = 0; i < data.length; ++i) {\n\t\t\tresult[write++] = (result[i] < 60) ? wasmpack[result[i]] : (result[i] - 60) * 64 + result[++i];\n\t\t}\n\t\treturn result.buffer.slice(0, write);\n\t}\n\n\tfunction decode(fun, target, count, size, source, filter) {\n\t\tvar sbrk = instance.exports.sbrk;\n\t\tvar count4 = (count + 3) & -4;\n\t\tvar tp = sbrk(count4 * size);\n\t\tvar sp = sbrk(source.length);\n\t\tvar heap = new Uint8Array(instance.exports.memory.buffer);\n\t\theap.set(source, sp);\n\t\tvar res = fun(tp, count, size, sp, source.length);\n\t\tif (res == 0 && filter) {\n\t\t\tfilter(tp, count4, size);\n\t\t}\n\t\ttarget.set(heap.subarray(tp, tp + count * size));\n\t\tsbrk(tp - sbrk(0));\n\t\tif (res != 0) {\n\t\t\tthrow new Error(\"Malformed buffer data: \" + res);\n\t\t}\n\t}\n\n\tvar filters = {\n\t\tNONE: \"\",\n\t\tOCTAHEDRAL: \"meshopt_decodeFilterOct\",\n\t\tQUATERNION: \"meshopt_decodeFilterQuat\",\n\t\tEXPONENTIAL: \"meshopt_decodeFilterExp\",\n\t};\n\n\tvar decoders = {\n\t\tATTRIBUTES: \"meshopt_decodeVertexBuffer\",\n\t\tTRIANGLES: \"meshopt_decodeIndexBuffer\",\n\t\tINDICES: \"meshopt_decodeIndexSequence\",\n\t};\n\n\tvar workers = [];\n\tvar requestId = 0;\n\n\tfunction createWorker(url) {\n\t\tvar worker = {\n\t\t\tobject: new Worker(url),\n\t\t\tpending: 0,\n\t\t\trequests: {}\n\t\t};\n\n\t\tworker.object.onmessage = function(event) {\n\t\t\tvar data = event.data;\n\n\t\t\tworker.pending -= data.count;\n\t\t\tworker.requests[data.id][data.action](data.value);\n\n\t\t\tdelete worker.requests[data.id];\n\t\t};\n\n\t\treturn worker;\n\t}\n\n\tfunction initWorkers(count) {\n\t\tvar source =\n\t\t\t\"var instance; var ready = WebAssembly.instantiate(new Uint8Array([\" + new Uint8Array(unpack(wasm)) + \"]), {})\" +\n\t\t\t\".then(function(result) { instance = result.instance; instance.exports.__wasm_call_ctors(); });\" +\n\t\t\t\"self.onmessage = workerProcess;\" +\n\t\t\tdecode.toString() + workerProcess.toString();\n\n\t\tvar blob = new Blob([source], {type: 'text/javascript'});\n\t\tvar url = URL.createObjectURL(blob);\n\n\t\tfor (var i = 0; i < count; ++i) {\n\t\t\tworkers[i] = createWorker(url);\n\t\t}\n\n\t\tURL.revokeObjectURL(url);\n\t}\n\n\tfunction decodeWorker(count, size, source, mode, filter) {\n\t\tvar worker = workers[0];\n\n\t\tfor (var i = 1; i < workers.length; ++i) {\n\t\t\tif (workers[i].pending < worker.pending) {\n\t\t\t\tworker = workers[i];\n\t\t\t}\n\t\t}\n\n\t\treturn new Promise(function (resolve, reject) {\n\t\t\tvar data = new Uint8Array(source);\n\t\t\tvar id = requestId++;\n\n\t\t\tworker.pending += count;\n\t\t\tworker.requests[id] = { resolve: resolve, reject: reject };\n\t\t\tworker.object.postMessage({ id: id, count: count, size: size, source: data, mode: mode, filter: filter }, [ data.buffer ]);\n\t\t});\n\t}\n\n\tfunction workerProcess(event) {\n\t\tready.then(function() {\n\t\t\tvar data = event.data;\n\t\t\ttry {\n\t\t\t\tvar target = new Uint8Array(data.count * data.size);\n\t\t\t\tdecode(instance.exports[data.mode], target, data.count, data.size, data.source, instance.exports[data.filter]);\n\t\t\t\tself.postMessage({ id: data.id, count: data.count, action: \"resolve\", value: target }, [ target.buffer ]);\n\t\t\t} catch (error) {\n\t\t\t\tself.postMessage({ id: data.id, count: data.count, action: \"reject\", value: error });\n\t\t\t}\n\t\t});\n\t}\n\n\treturn {\n\t\tready: ready,\n\t\tsupported: true,\n\t\tuseWorkers: function(count) {\n\t\t\tinitWorkers(count);\n\t\t},\n\t\tdecodeVertexBuffer: function(target, count, size, source, filter) {\n\t\t\tdecode(instance.exports.meshopt_decodeVertexBuffer, target, count, size, source, instance.exports[filters[filter]]);\n\t\t},\n\t\tdecodeIndexBuffer: function(target, count, size, source) {\n\t\t\tdecode(instance.exports.meshopt_decodeIndexBuffer, target, count, size, source);\n\t\t},\n\t\tdecodeIndexSequence: function(target, count, size, source) {\n\t\t\tdecode(instance.exports.meshopt_decodeIndexSequence, target, count, size, source);\n\t\t},\n\t\tdecodeGltfBuffer: function(target, count, size, source, mode, filter) {\n\t\t\tdecode(instance.exports[decoders[mode]], target, count, size, source, instance.exports[filters[filter]]);\n\t\t},\n\t\tdecodeGltfBufferAsync: function(count, size, source, mode, filter) {\n\t\t\tif (workers.length > 0) {\n\t\t\t\treturn decodeWorker(count, size, source, decoders[mode], filters[filter]);\n\t\t\t}\n\n\t\t\treturn ready.then(function() {\n\t\t\t\tvar target = new Uint8Array(count * size);\n\t\t\t\tdecode(instance.exports[decoders[mode]], target, count, size, source, instance.exports[filters[filter]]);\n\t\t\t\treturn target;\n\t\t\t});\n\t\t}\n\t};\n})();\n\n// o object_name | g group_name\nconst _object_pattern = /^[og]\\s*(.+)?/;\n// mtllib file_reference\nconst _material_library_pattern = /^mtllib /;\n// usemtl material_name\nconst _material_use_pattern = /^usemtl /;\n// usemap map_name\nconst _map_use_pattern = /^usemap /;\nconst _face_vertex_data_separator_pattern = /\\s+/;\n\nconst _vA = new Vector3();\nconst _vB = new Vector3();\nconst _vC = new Vector3();\n\nconst _ab = new Vector3();\nconst _cb = new Vector3();\n\nconst _color = new Color();\n\nfunction ParserState() {\n\n\tconst state = {\n\t\tobjects: [],\n\t\tobject: {},\n\n\t\tvertices: [],\n\t\tnormals: [],\n\t\tcolors: [],\n\t\tuvs: [],\n\n\t\tmaterials: {},\n\t\tmaterialLibraries: [],\n\n\t\tstartObject: function ( name, fromDeclaration ) {\n\n\t\t\t// If the current object (initial from reset) is not from a g/o declaration in the parsed\n\t\t\t// file. We need to use it for the first parsed g/o to keep things in sync.\n\t\t\tif ( this.object && this.object.fromDeclaration === false ) {\n\n\t\t\t\tthis.object.name = name;\n\t\t\t\tthis.object.fromDeclaration = ( fromDeclaration !== false );\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t\tconst previousMaterial = ( this.object && typeof this.object.currentMaterial === 'function' ? this.object.currentMaterial() : undefined );\n\n\t\t\tif ( this.object && typeof this.object._finalize === 'function' ) {\n\n\t\t\t\tthis.object._finalize( true );\n\n\t\t\t}\n\n\t\t\tthis.object = {\n\t\t\t\tname: name || '',\n\t\t\t\tfromDeclaration: ( fromDeclaration !== false ),\n\n\t\t\t\tgeometry: {\n\t\t\t\t\tvertices: [],\n\t\t\t\t\tnormals: [],\n\t\t\t\t\tcolors: [],\n\t\t\t\t\tuvs: [],\n\t\t\t\t\thasUVIndices: false\n\t\t\t\t},\n\t\t\t\tmaterials: [],\n\t\t\t\tsmooth: true,\n\n\t\t\t\tstartMaterial: function ( name, libraries ) {\n\n\t\t\t\t\tconst previous = this._finalize( false );\n\n\t\t\t\t\t// New usemtl declaration overwrites an inherited material, except if faces were declared\n\t\t\t\t\t// after the material, then it must be preserved for proper MultiMaterial continuation.\n\t\t\t\t\tif ( previous && ( previous.inherited || previous.groupCount <= 0 ) ) {\n\n\t\t\t\t\t\tthis.materials.splice( previous.index, 1 );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tconst material = {\n\t\t\t\t\t\tindex: this.materials.length,\n\t\t\t\t\t\tname: name || '',\n\t\t\t\t\t\tmtllib: ( Array.isArray( libraries ) && libraries.length > 0 ? libraries[ libraries.length - 1 ] : '' ),\n\t\t\t\t\t\tsmooth: ( previous !== undefined ? previous.smooth : this.smooth ),\n\t\t\t\t\t\tgroupStart: ( previous !== undefined ? previous.groupEnd : 0 ),\n\t\t\t\t\t\tgroupEnd: -1,\n\t\t\t\t\t\tgroupCount: -1,\n\t\t\t\t\t\tinherited: false,\n\n\t\t\t\t\t\tclone: function ( index ) {\n\n\t\t\t\t\t\t\tconst cloned = {\n\t\t\t\t\t\t\t\tindex: ( typeof index === 'number' ? index : this.index ),\n\t\t\t\t\t\t\t\tname: this.name,\n\t\t\t\t\t\t\t\tmtllib: this.mtllib,\n\t\t\t\t\t\t\t\tsmooth: this.smooth,\n\t\t\t\t\t\t\t\tgroupStart: 0,\n\t\t\t\t\t\t\t\tgroupEnd: -1,\n\t\t\t\t\t\t\t\tgroupCount: -1,\n\t\t\t\t\t\t\t\tinherited: false\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\tcloned.clone = this.clone.bind( cloned );\n\t\t\t\t\t\t\treturn cloned;\n\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\n\t\t\t\t\tthis.materials.push( material );\n\n\t\t\t\t\treturn material;\n\n\t\t\t\t},\n\n\t\t\t\tcurrentMaterial: function () {\n\n\t\t\t\t\tif ( this.materials.length > 0 ) {\n\n\t\t\t\t\t\treturn this.materials[ this.materials.length - 1 ];\n\n\t\t\t\t\t}\n\n\t\t\t\t\treturn undefined;\n\n\t\t\t\t},\n\n\t\t\t\t_finalize: function ( end ) {\n\n\t\t\t\t\tconst lastMultiMaterial = this.currentMaterial();\n\t\t\t\t\tif ( lastMultiMaterial && lastMultiMaterial.groupEnd === -1 ) {\n\n\t\t\t\t\t\tlastMultiMaterial.groupEnd = this.geometry.vertices.length / 3;\n\t\t\t\t\t\tlastMultiMaterial.groupCount = lastMultiMaterial.groupEnd - lastMultiMaterial.groupStart;\n\t\t\t\t\t\tlastMultiMaterial.inherited = false;\n\n\t\t\t\t\t}\n\n\t\t\t\t\t// Ignore objects tail materials if no face declarations followed them before a new o/g started.\n\t\t\t\t\tif ( end && this.materials.length > 1 ) {\n\n\t\t\t\t\t\tfor ( let mi = this.materials.length - 1; mi >= 0; mi -- ) {\n\n\t\t\t\t\t\t\tif ( this.materials[ mi ].groupCount <= 0 ) {\n\n\t\t\t\t\t\t\t\tthis.materials.splice( mi, 1 );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\t// Guarantee at least one empty material, this makes the creation later more straight forward.\n\t\t\t\t\tif ( end && this.materials.length === 0 ) {\n\n\t\t\t\t\t\tthis.materials.push( {\n\t\t\t\t\t\t\tname: '',\n\t\t\t\t\t\t\tsmooth: this.smooth\n\t\t\t\t\t\t} );\n\n\t\t\t\t\t}\n\n\t\t\t\t\treturn lastMultiMaterial;\n\n\t\t\t\t}\n\t\t\t};\n\n\t\t\t// Inherit previous objects material.\n\t\t\t// Spec tells us that a declared material must be set to all objects until a new material is declared.\n\t\t\t// If a usemtl declaration is encountered while this new object is being parsed, it will\n\t\t\t// overwrite the inherited material. Exception being that there was already face declarations\n\t\t\t// to the inherited material, then it will be preserved for proper MultiMaterial continuation.\n\n\t\t\tif ( previousMaterial && previousMaterial.name && typeof previousMaterial.clone === 'function' ) {\n\n\t\t\t\tconst declared = previousMaterial.clone( 0 );\n\t\t\t\tdeclared.inherited = true;\n\t\t\t\tthis.object.materials.push( declared );\n\n\t\t\t}\n\n\t\t\tthis.objects.push( this.object );\n\n\t\t},\n\n\t\tfinalize: function () {\n\n\t\t\tif ( this.object && typeof this.object._finalize === 'function' ) {\n\n\t\t\t\tthis.object._finalize( true );\n\n\t\t\t}\n\n\t\t},\n\n\t\tparseVertexIndex: function ( value, len ) {\n\n\t\t\tconst index = parseInt( value, 10 );\n\t\t\treturn ( index >= 0 ? index - 1 : index + len / 3 ) * 3;\n\n\t\t},\n\n\t\tparseNormalIndex: function ( value, len ) {\n\n\t\t\tconst index = parseInt( value, 10 );\n\t\t\treturn ( index >= 0 ? index - 1 : index + len / 3 ) * 3;\n\n\t\t},\n\n\t\tparseUVIndex: function ( value, len ) {\n\n\t\t\tconst index = parseInt( value, 10 );\n\t\t\treturn ( index >= 0 ? index - 1 : index + len / 2 ) * 2;\n\n\t\t},\n\n\t\taddVertex: function ( a, b, c ) {\n\n\t\t\tconst src = this.vertices;\n\t\t\tconst dst = this.object.geometry.vertices;\n\n\t\t\tdst.push( src[ a + 0 ], src[ a + 1 ], src[ a + 2 ] );\n\t\t\tdst.push( src[ b + 0 ], src[ b + 1 ], src[ b + 2 ] );\n\t\t\tdst.push( src[ c + 0 ], src[ c + 1 ], src[ c + 2 ] );\n\n\t\t},\n\n\t\taddVertexPoint: function ( a ) {\n\n\t\t\tconst src = this.vertices;\n\t\t\tconst dst = this.object.geometry.vertices;\n\n\t\t\tdst.push( src[ a + 0 ], src[ a + 1 ], src[ a + 2 ] );\n\n\t\t},\n\n\t\taddVertexLine: function ( a ) {\n\n\t\t\tconst src = this.vertices;\n\t\t\tconst dst = this.object.geometry.vertices;\n\n\t\t\tdst.push( src[ a + 0 ], src[ a + 1 ], src[ a + 2 ] );\n\n\t\t},\n\n\t\taddNormal: function ( a, b, c ) {\n\n\t\t\tconst src = this.normals;\n\t\t\tconst dst = this.object.geometry.normals;\n\n\t\t\tdst.push( src[ a + 0 ], src[ a + 1 ], src[ a + 2 ] );\n\t\t\tdst.push( src[ b + 0 ], src[ b + 1 ], src[ b + 2 ] );\n\t\t\tdst.push( src[ c + 0 ], src[ c + 1 ], src[ c + 2 ] );\n\n\t\t},\n\n\t\taddFaceNormal: function ( a, b, c ) {\n\n\t\t\tconst src = this.vertices;\n\t\t\tconst dst = this.object.geometry.normals;\n\n\t\t\t_vA.fromArray( src, a );\n\t\t\t_vB.fromArray( src, b );\n\t\t\t_vC.fromArray( src, c );\n\n\t\t\t_cb.subVectors( _vC, _vB );\n\t\t\t_ab.subVectors( _vA, _vB );\n\t\t\t_cb.cross( _ab );\n\n\t\t\t_cb.normalize();\n\n\t\t\tdst.push( _cb.x, _cb.y, _cb.z );\n\t\t\tdst.push( _cb.x, _cb.y, _cb.z );\n\t\t\tdst.push( _cb.x, _cb.y, _cb.z );\n\n\t\t},\n\n\t\taddColor: function ( a, b, c ) {\n\n\t\t\tconst src = this.colors;\n\t\t\tconst dst = this.object.geometry.colors;\n\n\t\t\tif ( src[ a ] !== undefined ) dst.push( src[ a + 0 ], src[ a + 1 ], src[ a + 2 ] );\n\t\t\tif ( src[ b ] !== undefined ) dst.push( src[ b + 0 ], src[ b + 1 ], src[ b + 2 ] );\n\t\t\tif ( src[ c ] !== undefined ) dst.push( src[ c + 0 ], src[ c + 1 ], src[ c + 2 ] );\n\n\t\t},\n\n\t\taddUV: function ( a, b, c ) {\n\n\t\t\tconst src = this.uvs;\n\t\t\tconst dst = this.object.geometry.uvs;\n\n\t\t\tdst.push( src[ a + 0 ], src[ a + 1 ] );\n\t\t\tdst.push( src[ b + 0 ], src[ b + 1 ] );\n\t\t\tdst.push( src[ c + 0 ], src[ c + 1 ] );\n\n\t\t},\n\n\t\taddDefaultUV: function () {\n\n\t\t\tconst dst = this.object.geometry.uvs;\n\n\t\t\tdst.push( 0, 0 );\n\t\t\tdst.push( 0, 0 );\n\t\t\tdst.push( 0, 0 );\n\n\t\t},\n\n\t\taddUVLine: function ( a ) {\n\n\t\t\tconst src = this.uvs;\n\t\t\tconst dst = this.object.geometry.uvs;\n\n\t\t\tdst.push( src[ a + 0 ], src[ a + 1 ] );\n\n\t\t},\n\n\t\taddFace: function ( a, b, c, ua, ub, uc, na, nb, nc ) {\n\n\t\t\tconst vLen = this.vertices.length;\n\n\t\t\tlet ia = this.parseVertexIndex( a, vLen );\n\t\t\tlet ib = this.parseVertexIndex( b, vLen );\n\t\t\tlet ic = this.parseVertexIndex( c, vLen );\n\n\t\t\tthis.addVertex( ia, ib, ic );\n\t\t\tthis.addColor( ia, ib, ic );\n\n\t\t\t// normals\n\n\t\t\tif ( na !== undefined && na !== '' ) {\n\n\t\t\t\tconst nLen = this.normals.length;\n\n\t\t\t\tia = this.parseNormalIndex( na, nLen );\n\t\t\t\tib = this.parseNormalIndex( nb, nLen );\n\t\t\t\tic = this.parseNormalIndex( nc, nLen );\n\n\t\t\t\tthis.addNormal( ia, ib, ic );\n\n\t\t\t} else {\n\n\t\t\t\tthis.addFaceNormal( ia, ib, ic );\n\n\t\t\t}\n\n\t\t\t// uvs\n\n\t\t\tif ( ua !== undefined && ua !== '' ) {\n\n\t\t\t\tconst uvLen = this.uvs.length;\n\n\t\t\t\tia = this.parseUVIndex( ua, uvLen );\n\t\t\t\tib = this.parseUVIndex( ub, uvLen );\n\t\t\t\tic = this.parseUVIndex( uc, uvLen );\n\n\t\t\t\tthis.addUV( ia, ib, ic );\n\n\t\t\t\tthis.object.geometry.hasUVIndices = true;\n\n\t\t\t} else {\n\n\t\t\t\t// add placeholder values (for inconsistent face definitions)\n\n\t\t\t\tthis.addDefaultUV();\n\n\t\t\t}\n\n\t\t},\n\n\t\taddPointGeometry: function ( vertices ) {\n\n\t\t\tthis.object.geometry.type = 'Points';\n\n\t\t\tconst vLen = this.vertices.length;\n\n\t\t\tfor ( let vi = 0, l = vertices.length; vi < l; vi ++ ) {\n\n\t\t\t\tconst index = this.parseVertexIndex( vertices[ vi ], vLen );\n\n\t\t\t\tthis.addVertexPoint( index );\n\t\t\t\tthis.addColor( index );\n\n\t\t\t}\n\n\t\t},\n\n\t\taddLineGeometry: function ( vertices, uvs ) {\n\n\t\t\tthis.object.geometry.type = 'Line';\n\n\t\t\tconst vLen = this.vertices.length;\n\t\t\tconst uvLen = this.uvs.length;\n\n\t\t\tfor ( let vi = 0, l = vertices.length; vi < l; vi ++ ) {\n\n\t\t\t\tthis.addVertexLine( this.parseVertexIndex( vertices[ vi ], vLen ) );\n\n\t\t\t}\n\n\t\t\tfor ( let uvi = 0, l = uvs.length; uvi < l; uvi ++ ) {\n\n\t\t\t\tthis.addUVLine( this.parseUVIndex( uvs[ uvi ], uvLen ) );\n\n\t\t\t}\n\n\t\t}\n\n\t};\n\n\tstate.startObject( '', false );\n\n\treturn state;\n\n}\n\n//\n\nclass OBJLoader extends Loader {\n\n\tconstructor( manager ) {\n\n\t\tsuper( manager );\n\n\t\tthis.materials = null;\n\n\t}\n\n\tload( url, onLoad, onProgress, onError ) {\n\n\t\tconst scope = this;\n\n\t\tconst loader = new FileLoader( this.manager );\n\t\tloader.setPath( this.path );\n\t\tloader.setRequestHeader( this.requestHeader );\n\t\tloader.setWithCredentials( this.withCredentials );\n\t\tloader.load( url, function ( text ) {\n\n\t\t\ttry {\n\n\t\t\t\tonLoad( scope.parse( text ) );\n\n\t\t\t} catch ( e ) {\n\n\t\t\t\tif ( onError ) {\n\n\t\t\t\t\tonError( e );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.error( e );\n\n\t\t\t\t}\n\n\t\t\t\tscope.manager.itemError( url );\n\n\t\t\t}\n\n\t\t}, onProgress, onError );\n\n\t}\n\n\tsetMaterials( materials ) {\n\n\t\tthis.materials = materials;\n\n\t\treturn this;\n\n\t}\n\n\tparse( text ) {\n\n\t\tconst state = new ParserState();\n\n\t\tif ( text.indexOf( '\\r\\n' ) !== -1 ) {\n\n\t\t\t// This is faster than String.split with regex that splits on both\n\t\t\ttext = text.replace( /\\r\\n/g, '\\n' );\n\n\t\t}\n\n\t\tif ( text.indexOf( '\\\\\\n' ) !== -1 ) {\n\n\t\t\t// join lines separated by a line continuation character (\\)\n\t\t\ttext = text.replace( /\\\\\\n/g, '' );\n\n\t\t}\n\n\t\tconst lines = text.split( '\\n' );\n\t\tlet result = [];\n\n\t\tfor ( let i = 0, l = lines.length; i < l; i ++ ) {\n\n\t\t\tconst line = lines[ i ].trimStart();\n\n\t\t\tif ( line.length === 0 ) continue;\n\n\t\t\tconst lineFirstChar = line.charAt( 0 );\n\n\t\t\t// @todo invoke passed in handler if any\n\t\t\tif ( lineFirstChar === '#' ) continue; // skip comments\n\n\t\t\tif ( lineFirstChar === 'v' ) {\n\n\t\t\t\tconst data = line.split( _face_vertex_data_separator_pattern );\n\n\t\t\t\tswitch ( data[ 0 ] ) {\n\n\t\t\t\t\tcase 'v':\n\t\t\t\t\t\tstate.vertices.push(\n\t\t\t\t\t\t\tparseFloat( data[ 1 ] ),\n\t\t\t\t\t\t\tparseFloat( data[ 2 ] ),\n\t\t\t\t\t\t\tparseFloat( data[ 3 ] )\n\t\t\t\t\t\t);\n\t\t\t\t\t\tif ( data.length >= 7 ) {\n\n\t\t\t\t\t\t\t_color.setRGB(\n\t\t\t\t\t\t\t\tparseFloat( data[ 4 ] ),\n\t\t\t\t\t\t\t\tparseFloat( data[ 5 ] ),\n\t\t\t\t\t\t\t\tparseFloat( data[ 6 ] ),\n\t\t\t\t\t\t\t\tSRGBColorSpace\n\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t\tstate.colors.push( _color.r, _color.g, _color.b );\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t// if no colors are defined, add placeholders so color and vertex indices match\n\n\t\t\t\t\t\t\tstate.colors.push( undefined, undefined, undefined );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'vn':\n\t\t\t\t\t\tstate.normals.push(\n\t\t\t\t\t\t\tparseFloat( data[ 1 ] ),\n\t\t\t\t\t\t\tparseFloat( data[ 2 ] ),\n\t\t\t\t\t\t\tparseFloat( data[ 3 ] )\n\t\t\t\t\t\t);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'vt':\n\t\t\t\t\t\tstate.uvs.push(\n\t\t\t\t\t\t\tparseFloat( data[ 1 ] ),\n\t\t\t\t\t\t\tparseFloat( data[ 2 ] )\n\t\t\t\t\t\t);\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t} else if ( lineFirstChar === 'f' ) {\n\n\t\t\t\tconst lineData = line.slice( 1 ).trim();\n\t\t\t\tconst vertexData = lineData.split( _face_vertex_data_separator_pattern );\n\t\t\t\tconst faceVertices = [];\n\n\t\t\t\t// Parse the face vertex data into an easy to work with format\n\n\t\t\t\tfor ( let j = 0, jl = vertexData.length; j < jl; j ++ ) {\n\n\t\t\t\t\tconst vertex = vertexData[ j ];\n\n\t\t\t\t\tif ( vertex.length > 0 ) {\n\n\t\t\t\t\t\tconst vertexParts = vertex.split( '/' );\n\t\t\t\t\t\tfaceVertices.push( vertexParts );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\t// Draw an edge between the first vertex and all subsequent vertices to form an n-gon\n\n\t\t\t\tconst v1 = faceVertices[ 0 ];\n\n\t\t\t\tfor ( let j = 1, jl = faceVertices.length - 1; j < jl; j ++ ) {\n\n\t\t\t\t\tconst v2 = faceVertices[ j ];\n\t\t\t\t\tconst v3 = faceVertices[ j + 1 ];\n\n\t\t\t\t\tstate.addFace(\n\t\t\t\t\t\tv1[ 0 ], v2[ 0 ], v3[ 0 ],\n\t\t\t\t\t\tv1[ 1 ], v2[ 1 ], v3[ 1 ],\n\t\t\t\t\t\tv1[ 2 ], v2[ 2 ], v3[ 2 ]\n\t\t\t\t\t);\n\n\t\t\t\t}\n\n\t\t\t} else if ( lineFirstChar === 'l' ) {\n\n\t\t\t\tconst lineParts = line.substring( 1 ).trim().split( ' ' );\n\t\t\t\tlet lineVertices = [];\n\t\t\t\tconst lineUVs = [];\n\n\t\t\t\tif ( line.indexOf( '/' ) === -1 ) {\n\n\t\t\t\t\tlineVertices = lineParts;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tfor ( let li = 0, llen = lineParts.length; li < llen; li ++ ) {\n\n\t\t\t\t\t\tconst parts = lineParts[ li ].split( '/' );\n\n\t\t\t\t\t\tif ( parts[ 0 ] !== '' ) lineVertices.push( parts[ 0 ] );\n\t\t\t\t\t\tif ( parts[ 1 ] !== '' ) lineUVs.push( parts[ 1 ] );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tstate.addLineGeometry( lineVertices, lineUVs );\n\n\t\t\t} else if ( lineFirstChar === 'p' ) {\n\n\t\t\t\tconst lineData = line.slice( 1 ).trim();\n\t\t\t\tconst pointData = lineData.split( ' ' );\n\n\t\t\t\tstate.addPointGeometry( pointData );\n\n\t\t\t} else if ( ( result = _object_pattern.exec( line ) ) !== null ) {\n\n\t\t\t\t// o object_name\n\t\t\t\t// or\n\t\t\t\t// g group_name\n\n\t\t\t\t// WORKAROUND: https://bugs.chromium.org/p/v8/issues/detail?id=2869\n\t\t\t\t// let name = result[ 0 ].slice( 1 ).trim();\n\t\t\t\tconst name = ( ' ' + result[ 0 ].slice( 1 ).trim() ).slice( 1 );\n\n\t\t\t\tstate.startObject( name );\n\n\t\t\t} else if ( _material_use_pattern.test( line ) ) {\n\n\t\t\t\t// material\n\n\t\t\t\tstate.object.startMaterial( line.substring( 7 ).trim(), state.materialLibraries );\n\n\t\t\t} else if ( _material_library_pattern.test( line ) ) {\n\n\t\t\t\t// mtl file\n\n\t\t\t\tstate.materialLibraries.push( line.substring( 7 ).trim() );\n\n\t\t\t} else if ( _map_use_pattern.test( line ) ) {\n\n\t\t\t\t// the line is parsed but ignored since the loader assumes textures are defined MTL files\n\t\t\t\t// (according to https://www.okino.com/conv/imp_wave.htm, 'usemap' is the old-style Wavefront texture reference method)\n\n\t\t\t\tconsole.warn( 'THREE.OBJLoader: Rendering identifier \"usemap\" not supported. Textures must be defined in MTL files.' );\n\n\t\t\t} else if ( lineFirstChar === 's' ) {\n\n\t\t\t\tresult = line.split( ' ' );\n\n\t\t\t\t// smooth shading\n\n\t\t\t\t// @todo Handle files that have varying smooth values for a set of faces inside one geometry,\n\t\t\t\t// but does not define a usemtl for each face set.\n\t\t\t\t// This should be detected and a dummy material created (later MultiMaterial and geometry groups).\n\t\t\t\t// This requires some care to not create extra material on each smooth value for \"normal\" obj files.\n\t\t\t\t// where explicit usemtl defines geometry groups.\n\t\t\t\t// Example asset: examples/models/obj/cerberus/Cerberus.obj\n\n\t\t\t\t/*\n\t\t\t\t\t * http://paulbourke.net/dataformats/obj/\n\t\t\t\t\t *\n\t\t\t\t\t * From chapter \"Grouping\" Syntax explanation \"s group_number\":\n\t\t\t\t\t * \"group_number is the smoothing group number. To turn off smoothing groups, use a value of 0 or off.\n\t\t\t\t\t * Polygonal elements use group numbers to put elements in different smoothing groups. For free-form\n\t\t\t\t\t * surfaces, smoothing groups are either turned on or off; there is no difference between values greater\n\t\t\t\t\t * than 0.\"\n\t\t\t\t\t */\n\t\t\t\tif ( result.length > 1 ) {\n\n\t\t\t\t\tconst value = result[ 1 ].trim().toLowerCase();\n\t\t\t\t\tstate.object.smooth = ( value !== '0' && value !== 'off' );\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// ZBrush can produce \"s\" lines #11707\n\t\t\t\t\tstate.object.smooth = true;\n\n\t\t\t\t}\n\n\t\t\t\tconst material = state.object.currentMaterial();\n\t\t\t\tif ( material ) material.smooth = state.object.smooth;\n\n\t\t\t} else {\n\n\t\t\t\t// Handle null terminated files without exception\n\t\t\t\tif ( line === '\\0' ) continue;\n\n\t\t\t\tconsole.warn( 'THREE.OBJLoader: Unexpected line: \"' + line + '\"' );\n\n\t\t\t}\n\n\t\t}\n\n\t\tstate.finalize();\n\n\t\tconst container = new Group();\n\t\tcontainer.materialLibraries = [].concat( state.materialLibraries );\n\n\t\tconst hasPrimitives = ! ( state.objects.length === 1 && state.objects[ 0 ].geometry.vertices.length === 0 );\n\n\t\tif ( hasPrimitives === true ) {\n\n\t\t\tfor ( let i = 0, l = state.objects.length; i < l; i ++ ) {\n\n\t\t\t\tconst object = state.objects[ i ];\n\t\t\t\tconst geometry = object.geometry;\n\t\t\t\tconst materials = object.materials;\n\t\t\t\tconst isLine = ( geometry.type === 'Line' );\n\t\t\t\tconst isPoints = ( geometry.type === 'Points' );\n\t\t\t\tlet hasVertexColors = false;\n\n\t\t\t\t// Skip o/g line declarations that did not follow with any faces\n\t\t\t\tif ( geometry.vertices.length === 0 ) continue;\n\n\t\t\t\tconst buffergeometry = new BufferGeometry();\n\n\t\t\t\tbuffergeometry.setAttribute( 'position', new Float32BufferAttribute( geometry.vertices, 3 ) );\n\n\t\t\t\tif ( geometry.normals.length > 0 ) {\n\n\t\t\t\t\tbuffergeometry.setAttribute( 'normal', new Float32BufferAttribute( geometry.normals, 3 ) );\n\n\t\t\t\t}\n\n\t\t\t\tif ( geometry.colors.length > 0 ) {\n\n\t\t\t\t\thasVertexColors = true;\n\t\t\t\t\tbuffergeometry.setAttribute( 'color', new Float32BufferAttribute( geometry.colors, 3 ) );\n\n\t\t\t\t}\n\n\t\t\t\tif ( geometry.hasUVIndices === true ) {\n\n\t\t\t\t\tbuffergeometry.setAttribute( 'uv', new Float32BufferAttribute( geometry.uvs, 2 ) );\n\n\t\t\t\t}\n\n\t\t\t\t// Create materials\n\n\t\t\t\tconst createdMaterials = [];\n\n\t\t\t\tfor ( let mi = 0, miLen = materials.length; mi < miLen; mi ++ ) {\n\n\t\t\t\t\tconst sourceMaterial = materials[ mi ];\n\t\t\t\t\tconst materialHash = sourceMaterial.name + '_' + sourceMaterial.smooth + '_' + hasVertexColors;\n\t\t\t\t\tlet material = state.materials[ materialHash ];\n\n\t\t\t\t\tif ( this.materials !== null ) {\n\n\t\t\t\t\t\tmaterial = this.materials.create( sourceMaterial.name );\n\n\t\t\t\t\t\t// mtl etc. loaders probably can't create line materials correctly, copy properties to a line material.\n\t\t\t\t\t\tif ( isLine && material && ! ( material instanceof LineBasicMaterial ) ) {\n\n\t\t\t\t\t\t\tconst materialLine = new LineBasicMaterial();\n\t\t\t\t\t\t\tMaterial.prototype.copy.call( materialLine, material );\n\t\t\t\t\t\t\tmaterialLine.color.copy( material.color );\n\t\t\t\t\t\t\tmaterial = materialLine;\n\n\t\t\t\t\t\t} else if ( isPoints && material && ! ( material instanceof PointsMaterial ) ) {\n\n\t\t\t\t\t\t\tconst materialPoints = new PointsMaterial( { size: 10, sizeAttenuation: false } );\n\t\t\t\t\t\t\tMaterial.prototype.copy.call( materialPoints, material );\n\t\t\t\t\t\t\tmaterialPoints.color.copy( material.color );\n\t\t\t\t\t\t\tmaterialPoints.map = material.map;\n\t\t\t\t\t\t\tmaterial = materialPoints;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( material === undefined ) {\n\n\t\t\t\t\t\tif ( isLine ) {\n\n\t\t\t\t\t\t\tmaterial = new LineBasicMaterial();\n\n\t\t\t\t\t\t} else if ( isPoints ) {\n\n\t\t\t\t\t\t\tmaterial = new PointsMaterial( { size: 1, sizeAttenuation: false } );\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tmaterial = new MeshPhongMaterial();\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tmaterial.name = sourceMaterial.name;\n\t\t\t\t\t\tmaterial.flatShading = sourceMaterial.smooth ? false : true;\n\t\t\t\t\t\tmaterial.vertexColors = hasVertexColors;\n\n\t\t\t\t\t\tstate.materials[ materialHash ] = material;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tcreatedMaterials.push( material );\n\n\t\t\t\t}\n\n\t\t\t\t// Create mesh\n\n\t\t\t\tlet mesh;\n\n\t\t\t\tif ( createdMaterials.length > 1 ) {\n\n\t\t\t\t\tfor ( let mi = 0, miLen = materials.length; mi < miLen; mi ++ ) {\n\n\t\t\t\t\t\tconst sourceMaterial = materials[ mi ];\n\t\t\t\t\t\tbuffergeometry.addGroup( sourceMaterial.groupStart, sourceMaterial.groupCount, mi );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( isLine ) {\n\n\t\t\t\t\t\tmesh = new LineSegments( buffergeometry, createdMaterials );\n\n\t\t\t\t\t} else if ( isPoints ) {\n\n\t\t\t\t\t\tmesh = new Points( buffergeometry, createdMaterials );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tmesh = new Mesh( buffergeometry, createdMaterials );\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tif ( isLine ) {\n\n\t\t\t\t\t\tmesh = new LineSegments( buffergeometry, createdMaterials[ 0 ] );\n\n\t\t\t\t\t} else if ( isPoints ) {\n\n\t\t\t\t\t\tmesh = new Points( buffergeometry, createdMaterials[ 0 ] );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tmesh = new Mesh( buffergeometry, createdMaterials[ 0 ] );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tmesh.name = object.name;\n\n\t\t\t\tcontainer.add( mesh );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\t// if there is only the default parser state object with no geometry data, interpret data as point cloud\n\n\t\t\tif ( state.vertices.length > 0 ) {\n\n\t\t\t\tconst material = new PointsMaterial( { size: 1, sizeAttenuation: false } );\n\n\t\t\t\tconst buffergeometry = new BufferGeometry();\n\n\t\t\t\tbuffergeometry.setAttribute( 'position', new Float32BufferAttribute( state.vertices, 3 ) );\n\n\t\t\t\tif ( state.colors.length > 0 && state.colors[ 0 ] !== undefined ) {\n\n\t\t\t\t\tbuffergeometry.setAttribute( 'color', new Float32BufferAttribute( state.colors, 3 ) );\n\t\t\t\t\tmaterial.vertexColors = true;\n\n\t\t\t\t}\n\n\t\t\t\tconst points = new Points( buffergeometry, material );\n\t\t\t\tcontainer.add( points );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn container;\n\n\t}\n\n}\n\n/**\n * Description: A THREE loader for STL ASCII files, as created by Solidworks and other CAD programs.\n *\n * Supports both binary and ASCII encoded files, with automatic detection of type.\n *\n * The loader returns a non-indexed buffer geometry.\n *\n * Limitations:\n *  Binary decoding supports \"Magics\" color format (http://en.wikipedia.org/wiki/STL_(file_format)#Color_in_binary_STL).\n *  There is perhaps some question as to how valid it is to always assume little-endian-ness.\n *  ASCII decoding assumes file is UTF-8.\n *\n * Usage:\n *  const loader = new STLLoader();\n *  loader.load( './models/stl/slotted_disk.stl', function ( geometry ) {\n *    scene.add( new THREE.Mesh( geometry ) );\n *  });\n *\n * For binary STLs geometry might contain colors for vertices. To use it:\n *  // use the same code to load STL as above\n *  if (geometry.hasColors) {\n *    material = new THREE.MeshPhongMaterial({ opacity: geometry.alpha, vertexColors: true });\n *  } else { .... }\n *  const mesh = new THREE.Mesh( geometry, material );\n *\n * For ASCII STLs containing multiple solids, each solid is assigned to a different group.\n * Groups can be used to assign a different color by defining an array of materials with the same length of\n * geometry.groups and passing it to the Mesh constructor:\n *\n * const mesh = new THREE.Mesh( geometry, material );\n *\n * For example:\n *\n *  const materials = [];\n *  const nGeometryGroups = geometry.groups.length;\n *\n *  const colorMap = ...; // Some logic to index colors.\n *\n *  for (let i = 0; i < nGeometryGroups; i++) {\n *\n *\t\tconst material = new THREE.MeshPhongMaterial({\n *\t\t\tcolor: colorMap[i],\n *\t\t\twireframe: false\n *\t\t});\n *\n *  }\n *\n *  materials.push(material);\n *  const mesh = new THREE.Mesh(geometry, materials);\n */\n\n\nclass STLLoader extends Loader {\n\n\tconstructor( manager ) {\n\n\t\tsuper( manager );\n\n\t}\n\n\tload( url, onLoad, onProgress, onError ) {\n\n\t\tconst scope = this;\n\n\t\tconst loader = new FileLoader( this.manager );\n\t\tloader.setPath( this.path );\n\t\tloader.setResponseType( 'arraybuffer' );\n\t\tloader.setRequestHeader( this.requestHeader );\n\t\tloader.setWithCredentials( this.withCredentials );\n\n\t\tloader.load( url, function ( text ) {\n\n\t\t\ttry {\n\n\t\t\t\tonLoad( scope.parse( text ) );\n\n\t\t\t} catch ( e ) {\n\n\t\t\t\tif ( onError ) {\n\n\t\t\t\t\tonError( e );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.error( e );\n\n\t\t\t\t}\n\n\t\t\t\tscope.manager.itemError( url );\n\n\t\t\t}\n\n\t\t}, onProgress, onError );\n\n\t}\n\n\tparse( data ) {\n\n\t\tfunction isBinary( data ) {\n\n\t\t\tconst reader = new DataView( data );\n\t\t\tconst face_size = ( 32 / 8 * 3 ) + ( ( 32 / 8 * 3 ) * 3 ) + ( 16 / 8 );\n\t\t\tconst n_faces = reader.getUint32( 80, true );\n\t\t\tconst expect = 80 + ( 32 / 8 ) + ( n_faces * face_size );\n\n\t\t\tif ( expect === reader.byteLength ) {\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\t\t\t// An ASCII STL data must begin with 'solid ' as the first six bytes.\n\t\t\t// However, ASCII STLs lacking the SPACE after the 'd' are known to be\n\t\t\t// plentiful.  So, check the first 5 bytes for 'solid'.\n\n\t\t\t// Several encodings, such as UTF-8, precede the text with up to 5 bytes:\n\t\t\t// https://en.wikipedia.org/wiki/Byte_order_mark#Byte_order_marks_by_encoding\n\t\t\t// Search for \"solid\" to start anywhere after those prefixes.\n\n\t\t\t// US-ASCII ordinal values for 's', 'o', 'l', 'i', 'd'\n\n\t\t\tconst solid = [ 115, 111, 108, 105, 100 ];\n\n\t\t\tfor ( let off = 0; off < 5; off ++ ) {\n\n\t\t\t\t// If \"solid\" text is matched to the current offset, declare it to be an ASCII STL.\n\n\t\t\t\tif ( matchDataViewAt( solid, reader, off ) ) return false;\n\n\t\t\t}\n\n\t\t\t// Couldn't find \"solid\" text at the beginning; it is binary STL.\n\n\t\t\treturn true;\n\n\t\t}\n\n\t\tfunction matchDataViewAt( query, reader, offset ) {\n\n\t\t\t// Check if each byte in query matches the corresponding byte from the current offset\n\n\t\t\tfor ( let i = 0, il = query.length; i < il; i ++ ) {\n\n\t\t\t\tif ( query[ i ] !== reader.getUint8( offset + i ) ) return false;\n\n\t\t\t}\n\n\t\t\treturn true;\n\n\t\t}\n\n\t\tfunction parseBinary( data ) {\n\n\t\t\tconst reader = new DataView( data );\n\t\t\tconst faces = reader.getUint32( 80, true );\n\n\t\t\tlet r, g, b, hasColors = false, colors;\n\t\t\tlet defaultR, defaultG, defaultB, alpha;\n\n\t\t\t// process STL header\n\t\t\t// check for default color in header (\"COLOR=rgba\" sequence).\n\n\t\t\tfor ( let index = 0; index < 80 - 10; index ++ ) {\n\n\t\t\t\tif ( ( reader.getUint32( index, false ) == 0x434F4C4F /*COLO*/ ) &&\n\t\t\t\t\t( reader.getUint8( index + 4 ) == 0x52 /*'R'*/ ) &&\n\t\t\t\t\t( reader.getUint8( index + 5 ) == 0x3D /*'='*/ ) ) {\n\n\t\t\t\t\thasColors = true;\n\t\t\t\t\tcolors = new Float32Array( faces * 3 * 3 );\n\n\t\t\t\t\tdefaultR = reader.getUint8( index + 6 ) / 255;\n\t\t\t\t\tdefaultG = reader.getUint8( index + 7 ) / 255;\n\t\t\t\t\tdefaultB = reader.getUint8( index + 8 ) / 255;\n\t\t\t\t\talpha = reader.getUint8( index + 9 ) / 255;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tconst dataOffset = 84;\n\t\t\tconst faceLength = 12 * 4 + 2;\n\n\t\t\tconst geometry = new BufferGeometry();\n\n\t\t\tconst vertices = new Float32Array( faces * 3 * 3 );\n\t\t\tconst normals = new Float32Array( faces * 3 * 3 );\n\n\t\t\tconst color = new Color();\n\n\t\t\tfor ( let face = 0; face < faces; face ++ ) {\n\n\t\t\t\tconst start = dataOffset + face * faceLength;\n\t\t\t\tconst normalX = reader.getFloat32( start, true );\n\t\t\t\tconst normalY = reader.getFloat32( start + 4, true );\n\t\t\t\tconst normalZ = reader.getFloat32( start + 8, true );\n\n\t\t\t\tif ( hasColors ) {\n\n\t\t\t\t\tconst packedColor = reader.getUint16( start + 48, true );\n\n\t\t\t\t\tif ( ( packedColor & 0x8000 ) === 0 ) {\n\n\t\t\t\t\t\t// facet has its own unique color\n\n\t\t\t\t\t\tr = ( packedColor & 0x1F ) / 31;\n\t\t\t\t\t\tg = ( ( packedColor >> 5 ) & 0x1F ) / 31;\n\t\t\t\t\t\tb = ( ( packedColor >> 10 ) & 0x1F ) / 31;\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tr = defaultR;\n\t\t\t\t\t\tg = defaultG;\n\t\t\t\t\t\tb = defaultB;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tfor ( let i = 1; i <= 3; i ++ ) {\n\n\t\t\t\t\tconst vertexstart = start + i * 12;\n\t\t\t\t\tconst componentIdx = ( face * 3 * 3 ) + ( ( i - 1 ) * 3 );\n\n\t\t\t\t\tvertices[ componentIdx ] = reader.getFloat32( vertexstart, true );\n\t\t\t\t\tvertices[ componentIdx + 1 ] = reader.getFloat32( vertexstart + 4, true );\n\t\t\t\t\tvertices[ componentIdx + 2 ] = reader.getFloat32( vertexstart + 8, true );\n\n\t\t\t\t\tnormals[ componentIdx ] = normalX;\n\t\t\t\t\tnormals[ componentIdx + 1 ] = normalY;\n\t\t\t\t\tnormals[ componentIdx + 2 ] = normalZ;\n\n\t\t\t\t\tif ( hasColors ) {\n\n\t\t\t\t\t\tcolor.setRGB( r, g, b, SRGBColorSpace );\n\n\t\t\t\t\t\tcolors[ componentIdx ] = color.r;\n\t\t\t\t\t\tcolors[ componentIdx + 1 ] = color.g;\n\t\t\t\t\t\tcolors[ componentIdx + 2 ] = color.b;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tgeometry.setAttribute( 'position', new BufferAttribute( vertices, 3 ) );\n\t\t\tgeometry.setAttribute( 'normal', new BufferAttribute( normals, 3 ) );\n\n\t\t\tif ( hasColors ) {\n\n\t\t\t\tgeometry.setAttribute( 'color', new BufferAttribute( colors, 3 ) );\n\t\t\t\tgeometry.hasColors = true;\n\t\t\t\tgeometry.alpha = alpha;\n\n\t\t\t}\n\n\t\t\treturn geometry;\n\n\t\t}\n\n\t\tfunction parseASCII( data ) {\n\n\t\t\tconst geometry = new BufferGeometry();\n\t\t\tconst patternSolid = /solid([\\s\\S]*?)endsolid/g;\n\t\t\tconst patternFace = /facet([\\s\\S]*?)endfacet/g;\n\t\t\tconst patternName = /solid\\s(.+)/;\n\t\t\tlet faceCounter = 0;\n\n\t\t\tconst patternFloat = /[\\s]+([+-]?(?:\\d*)(?:\\.\\d*)?(?:[eE][+-]?\\d+)?)/.source;\n\t\t\tconst patternVertex = new RegExp( 'vertex' + patternFloat + patternFloat + patternFloat, 'g' );\n\t\t\tconst patternNormal = new RegExp( 'normal' + patternFloat + patternFloat + patternFloat, 'g' );\n\n\t\t\tconst vertices = [];\n\t\t\tconst normals = [];\n\t\t\tconst groupNames = [];\n\n\t\t\tconst normal = new Vector3();\n\n\t\t\tlet result;\n\n\t\t\tlet groupCount = 0;\n\t\t\tlet startVertex = 0;\n\t\t\tlet endVertex = 0;\n\n\t\t\twhile ( ( result = patternSolid.exec( data ) ) !== null ) {\n\n\t\t\t\tstartVertex = endVertex;\n\n\t\t\t\tconst solid = result[ 0 ];\n\n\t\t\t\tconst name = ( result = patternName.exec( solid ) ) !== null ? result[ 1 ] : '';\n\t\t\t\tgroupNames.push( name );\n\n\t\t\t\twhile ( ( result = patternFace.exec( solid ) ) !== null ) {\n\n\t\t\t\t\tlet vertexCountPerFace = 0;\n\t\t\t\t\tlet normalCountPerFace = 0;\n\n\t\t\t\t\tconst text = result[ 0 ];\n\n\t\t\t\t\twhile ( ( result = patternNormal.exec( text ) ) !== null ) {\n\n\t\t\t\t\t\tnormal.x = parseFloat( result[ 1 ] );\n\t\t\t\t\t\tnormal.y = parseFloat( result[ 2 ] );\n\t\t\t\t\t\tnormal.z = parseFloat( result[ 3 ] );\n\t\t\t\t\t\tnormalCountPerFace ++;\n\n\t\t\t\t\t}\n\n\t\t\t\t\twhile ( ( result = patternVertex.exec( text ) ) !== null ) {\n\n\t\t\t\t\t\tvertices.push( parseFloat( result[ 1 ] ), parseFloat( result[ 2 ] ), parseFloat( result[ 3 ] ) );\n\t\t\t\t\t\tnormals.push( normal.x, normal.y, normal.z );\n\t\t\t\t\t\tvertexCountPerFace ++;\n\t\t\t\t\t\tendVertex ++;\n\n\t\t\t\t\t}\n\n\t\t\t\t\t// every face have to own ONE valid normal\n\n\t\t\t\t\tif ( normalCountPerFace !== 1 ) {\n\n\t\t\t\t\t\tconsole.error( 'THREE.STLLoader: Something isn\\'t right with the normal of face number ' + faceCounter );\n\n\t\t\t\t\t}\n\n\t\t\t\t\t// each face have to own THREE valid vertices\n\n\t\t\t\t\tif ( vertexCountPerFace !== 3 ) {\n\n\t\t\t\t\t\tconsole.error( 'THREE.STLLoader: Something isn\\'t right with the vertices of face number ' + faceCounter );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfaceCounter ++;\n\n\t\t\t\t}\n\n\t\t\t\tconst start = startVertex;\n\t\t\t\tconst count = endVertex - startVertex;\n\n\t\t\t\tgeometry.userData.groupNames = groupNames;\n\n\t\t\t\tgeometry.addGroup( start, count, groupCount );\n\t\t\t\tgroupCount ++;\n\n\t\t\t}\n\n\t\t\tgeometry.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\t\t\tgeometry.setAttribute( 'normal', new Float32BufferAttribute( normals, 3 ) );\n\n\t\t\treturn geometry;\n\n\t\t}\n\n\t\tfunction ensureString( buffer ) {\n\n\t\t\tif ( typeof buffer !== 'string' ) {\n\n\t\t\t\treturn new TextDecoder().decode( buffer );\n\n\t\t\t}\n\n\t\t\treturn buffer;\n\n\t\t}\n\n\t\tfunction ensureBinary( buffer ) {\n\n\t\t\tif ( typeof buffer === 'string' ) {\n\n\t\t\t\tconst array_buffer = new Uint8Array( buffer.length );\n\t\t\t\tfor ( let i = 0; i < buffer.length; i ++ ) {\n\n\t\t\t\t\tarray_buffer[ i ] = buffer.charCodeAt( i ) & 0xff; // implicitly assumes little-endian\n\n\t\t\t\t}\n\n\t\t\t\treturn array_buffer.buffer || array_buffer;\n\n\t\t\t} else {\n\n\t\t\t\treturn buffer;\n\n\t\t\t}\n\n\t\t}\n\n\t\t// start\n\n\t\tconst binData = ensureBinary( data );\n\n\t\treturn isBinary( binData ) ? parseBinary( binData ) : parseASCII( ensureString( data ) );\n\n\t}\n\n}\n\n// https://github.com/mrdoob/three.js/issues/5552\n// http://en.wikipedia.org/wiki/RGBE_image_format\n\nclass RGBELoader extends DataTextureLoader {\n\n\tconstructor( manager ) {\n\n\t\tsuper( manager );\n\n\t\tthis.type = HalfFloatType;\n\n\t}\n\n\t// adapted from http://www.graphics.cornell.edu/~bjw/rgbe.html\n\n\tparse( buffer ) {\n\n\t\tconst\n\t\t\t/* default error routine.  change this to change error handling */\n\t\t\trgbe_read_error = 1,\n\t\t\trgbe_write_error = 2,\n\t\t\trgbe_format_error = 3,\n\t\t\trgbe_memory_error = 4,\n\t\t\trgbe_error = function ( rgbe_error_code, msg ) {\n\n\t\t\t\tswitch ( rgbe_error_code ) {\n\n\t\t\t\t\tcase rgbe_read_error: throw new Error( 'THREE.RGBELoader: Read Error: ' + ( msg || '' ) );\n\t\t\t\t\tcase rgbe_write_error: throw new Error( 'THREE.RGBELoader: Write Error: ' + ( msg || '' ) );\n\t\t\t\t\tcase rgbe_format_error: throw new Error( 'THREE.RGBELoader: Bad File Format: ' + ( msg || '' ) );\n\t\t\t\t\tdefault:\n\t\t\t\t\tcase rgbe_memory_error: throw new Error( 'THREE.RGBELoader: Memory Error: ' + ( msg || '' ) );\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\t/* offsets to red, green, and blue components in a data (float) pixel */\n\t\t\t//RGBE_DATA_RED = 0,\n\t\t\t//RGBE_DATA_GREEN = 1,\n\t\t\t//RGBE_DATA_BLUE = 2,\n\n\t\t\t/* number of floats per pixel, use 4 since stored in rgba image format */\n\t\t\t//RGBE_DATA_SIZE = 4,\n\n\t\t\t/* flags indicating which fields in an rgbe_header_info are valid */\n\t\t\tRGBE_VALID_PROGRAMTYPE = 1,\n\t\t\tRGBE_VALID_FORMAT = 2,\n\t\t\tRGBE_VALID_DIMENSIONS = 4,\n\n\t\t\tNEWLINE = '\\n',\n\n\t\t\tfgets = function ( buffer, lineLimit, consume ) {\n\n\t\t\t\tconst chunkSize = 128;\n\n\t\t\t\tlineLimit = ! lineLimit ? 1024 : lineLimit;\n\t\t\t\tlet p = buffer.pos,\n\t\t\t\t\ti = -1, len = 0, s = '',\n\t\t\t\t\tchunk = String.fromCharCode.apply( null, new Uint16Array( buffer.subarray( p, p + chunkSize ) ) );\n\n\t\t\t\twhile ( ( 0 > ( i = chunk.indexOf( NEWLINE ) ) ) && ( len < lineLimit ) && ( p < buffer.byteLength ) ) {\n\n\t\t\t\t\ts += chunk; len += chunk.length;\n\t\t\t\t\tp += chunkSize;\n\t\t\t\t\tchunk += String.fromCharCode.apply( null, new Uint16Array( buffer.subarray( p, p + chunkSize ) ) );\n\n\t\t\t\t}\n\n\t\t\t\tif ( -1 < i ) {\n\n\t\t\t\t\t/*for (i=l-1; i>=0; i--) {\n\t\t\t\t\t\tbyteCode = m.charCodeAt(i);\n\t\t\t\t\t\tif (byteCode > 0x7f && byteCode <= 0x7ff) byteLen++;\n\t\t\t\t\t\telse if (byteCode > 0x7ff && byteCode <= 0xffff) byteLen += 2;\n\t\t\t\t\t\tif (byteCode >= 0xDC00 && byteCode <= 0xDFFF) i--; //trail surrogate\n\t\t\t\t\t}*/\n\t\t\t\t\tbuffer.pos += len + i + 1;\n\t\t\t\t\treturn s + chunk.slice( 0, i );\n\n\t\t\t\t}\n\n\t\t\t\treturn false;\n\n\t\t\t},\n\n\t\t\t/* minimal header reading.  modify if you want to parse more information */\n\t\t\tRGBE_ReadHeader = function ( buffer ) {\n\n\n\t\t\t\t// regexes to parse header info fields\n\t\t\t\tconst magic_token_re = /^#\\?(\\S+)/,\n\t\t\t\t\tgamma_re = /^\\s*GAMMA\\s*=\\s*(\\d+(\\.\\d+)?)\\s*$/,\n\t\t\t\t\texposure_re = /^\\s*EXPOSURE\\s*=\\s*(\\d+(\\.\\d+)?)\\s*$/,\n\t\t\t\t\tformat_re = /^\\s*FORMAT=(\\S+)\\s*$/,\n\t\t\t\t\tdimensions_re = /^\\s*\\-Y\\s+(\\d+)\\s+\\+X\\s+(\\d+)\\s*$/,\n\n\t\t\t\t\t// RGBE format header struct\n\t\t\t\t\theader = {\n\n\t\t\t\t\t\tvalid: 0, /* indicate which fields are valid */\n\n\t\t\t\t\t\tstring: '', /* the actual header string */\n\n\t\t\t\t\t\tcomments: '', /* comments found in header */\n\n\t\t\t\t\t\tprogramtype: 'RGBE', /* listed at beginning of file to identify it after \"#?\". defaults to \"RGBE\" */\n\n\t\t\t\t\t\tformat: '', /* RGBE format, default 32-bit_rle_rgbe */\n\n\t\t\t\t\t\tgamma: 1.0, /* image has already been gamma corrected with given gamma. defaults to 1.0 (no correction) */\n\n\t\t\t\t\t\texposure: 1.0, /* a value of 1.0 in an image corresponds to <exposure> watts/steradian/m^2. defaults to 1.0 */\n\n\t\t\t\t\t\twidth: 0, height: 0 /* image dimensions, width/height */\n\n\t\t\t\t\t};\n\n\t\t\t\tlet line, match;\n\n\t\t\t\tif ( buffer.pos >= buffer.byteLength || ! ( line = fgets( buffer ) ) ) {\n\n\t\t\t\t\trgbe_error( rgbe_read_error, 'no header found' );\n\n\t\t\t\t}\n\n\t\t\t\t/* if you want to require the magic token then uncomment the next line */\n\t\t\t\tif ( ! ( match = line.match( magic_token_re ) ) ) {\n\n\t\t\t\t\trgbe_error( rgbe_format_error, 'bad initial token' );\n\n\t\t\t\t}\n\n\t\t\t\theader.valid |= RGBE_VALID_PROGRAMTYPE;\n\t\t\t\theader.programtype = match[ 1 ];\n\t\t\t\theader.string += line + '\\n';\n\n\t\t\t\twhile ( true ) {\n\n\t\t\t\t\tline = fgets( buffer );\n\t\t\t\t\tif ( false === line ) break;\n\t\t\t\t\theader.string += line + '\\n';\n\n\t\t\t\t\tif ( '#' === line.charAt( 0 ) ) {\n\n\t\t\t\t\t\theader.comments += line + '\\n';\n\t\t\t\t\t\tcontinue; // comment line\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( match = line.match( gamma_re ) ) {\n\n\t\t\t\t\t\theader.gamma = parseFloat( match[ 1 ] );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( match = line.match( exposure_re ) ) {\n\n\t\t\t\t\t\theader.exposure = parseFloat( match[ 1 ] );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( match = line.match( format_re ) ) {\n\n\t\t\t\t\t\theader.valid |= RGBE_VALID_FORMAT;\n\t\t\t\t\t\theader.format = match[ 1 ];//'32-bit_rle_rgbe';\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( match = line.match( dimensions_re ) ) {\n\n\t\t\t\t\t\theader.valid |= RGBE_VALID_DIMENSIONS;\n\t\t\t\t\t\theader.height = parseInt( match[ 1 ], 10 );\n\t\t\t\t\t\theader.width = parseInt( match[ 2 ], 10 );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( ( header.valid & RGBE_VALID_FORMAT ) && ( header.valid & RGBE_VALID_DIMENSIONS ) ) break;\n\n\t\t\t\t}\n\n\t\t\t\tif ( ! ( header.valid & RGBE_VALID_FORMAT ) ) {\n\n\t\t\t\t\trgbe_error( rgbe_format_error, 'missing format specifier' );\n\n\t\t\t\t}\n\n\t\t\t\tif ( ! ( header.valid & RGBE_VALID_DIMENSIONS ) ) {\n\n\t\t\t\t\trgbe_error( rgbe_format_error, 'missing image size specifier' );\n\n\t\t\t\t}\n\n\t\t\t\treturn header;\n\n\t\t\t},\n\n\t\t\tRGBE_ReadPixels_RLE = function ( buffer, w, h ) {\n\n\t\t\t\tconst scanline_width = w;\n\n\t\t\t\tif (\n\t\t\t\t\t// run length encoding is not allowed so read flat\n\t\t\t\t\t( ( scanline_width < 8 ) || ( scanline_width > 0x7fff ) ) ||\n\t\t\t\t\t// this file is not run length encoded\n\t\t\t\t\t( ( 2 !== buffer[ 0 ] ) || ( 2 !== buffer[ 1 ] ) || ( buffer[ 2 ] & 0x80 ) )\n\t\t\t\t) {\n\n\t\t\t\t\t// return the flat buffer\n\t\t\t\t\treturn new Uint8Array( buffer );\n\n\t\t\t\t}\n\n\t\t\t\tif ( scanline_width !== ( ( buffer[ 2 ] << 8 ) | buffer[ 3 ] ) ) {\n\n\t\t\t\t\trgbe_error( rgbe_format_error, 'wrong scanline width' );\n\n\t\t\t\t}\n\n\t\t\t\tconst data_rgba = new Uint8Array( 4 * w * h );\n\n\t\t\t\tif ( ! data_rgba.length ) {\n\n\t\t\t\t\trgbe_error( rgbe_memory_error, 'unable to allocate buffer space' );\n\n\t\t\t\t}\n\n\t\t\t\tlet offset = 0, pos = 0;\n\n\t\t\t\tconst ptr_end = 4 * scanline_width;\n\t\t\t\tconst rgbeStart = new Uint8Array( 4 );\n\t\t\t\tconst scanline_buffer = new Uint8Array( ptr_end );\n\t\t\t\tlet num_scanlines = h;\n\n\t\t\t\t// read in each successive scanline\n\t\t\t\twhile ( ( num_scanlines > 0 ) && ( pos < buffer.byteLength ) ) {\n\n\t\t\t\t\tif ( pos + 4 > buffer.byteLength ) {\n\n\t\t\t\t\t\trgbe_error( rgbe_read_error );\n\n\t\t\t\t\t}\n\n\t\t\t\t\trgbeStart[ 0 ] = buffer[ pos ++ ];\n\t\t\t\t\trgbeStart[ 1 ] = buffer[ pos ++ ];\n\t\t\t\t\trgbeStart[ 2 ] = buffer[ pos ++ ];\n\t\t\t\t\trgbeStart[ 3 ] = buffer[ pos ++ ];\n\n\t\t\t\t\tif ( ( 2 != rgbeStart[ 0 ] ) || ( 2 != rgbeStart[ 1 ] ) || ( ( ( rgbeStart[ 2 ] << 8 ) | rgbeStart[ 3 ] ) != scanline_width ) ) {\n\n\t\t\t\t\t\trgbe_error( rgbe_format_error, 'bad rgbe scanline format' );\n\n\t\t\t\t\t}\n\n\t\t\t\t\t// read each of the four channels for the scanline into the buffer\n\t\t\t\t\t// first red, then green, then blue, then exponent\n\t\t\t\t\tlet ptr = 0, count;\n\n\t\t\t\t\twhile ( ( ptr < ptr_end ) && ( pos < buffer.byteLength ) ) {\n\n\t\t\t\t\t\tcount = buffer[ pos ++ ];\n\t\t\t\t\t\tconst isEncodedRun = count > 128;\n\t\t\t\t\t\tif ( isEncodedRun ) count -= 128;\n\n\t\t\t\t\t\tif ( ( 0 === count ) || ( ptr + count > ptr_end ) ) {\n\n\t\t\t\t\t\t\trgbe_error( rgbe_format_error, 'bad scanline data' );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif ( isEncodedRun ) {\n\n\t\t\t\t\t\t\t// a (encoded) run of the same value\n\t\t\t\t\t\t\tconst byteValue = buffer[ pos ++ ];\n\t\t\t\t\t\t\tfor ( let i = 0; i < count; i ++ ) {\n\n\t\t\t\t\t\t\t\tscanline_buffer[ ptr ++ ] = byteValue;\n\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t//ptr += count;\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t// a literal-run\n\t\t\t\t\t\t\tscanline_buffer.set( buffer.subarray( pos, pos + count ), ptr );\n\t\t\t\t\t\t\tptr += count; pos += count;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\n\t\t\t\t\t// now convert data from buffer into rgba\n\t\t\t\t\t// first red, then green, then blue, then exponent (alpha)\n\t\t\t\t\tconst l = scanline_width; //scanline_buffer.byteLength;\n\t\t\t\t\tfor ( let i = 0; i < l; i ++ ) {\n\n\t\t\t\t\t\tlet off = 0;\n\t\t\t\t\t\tdata_rgba[ offset ] = scanline_buffer[ i + off ];\n\t\t\t\t\t\toff += scanline_width; //1;\n\t\t\t\t\t\tdata_rgba[ offset + 1 ] = scanline_buffer[ i + off ];\n\t\t\t\t\t\toff += scanline_width; //1;\n\t\t\t\t\t\tdata_rgba[ offset + 2 ] = scanline_buffer[ i + off ];\n\t\t\t\t\t\toff += scanline_width; //1;\n\t\t\t\t\t\tdata_rgba[ offset + 3 ] = scanline_buffer[ i + off ];\n\t\t\t\t\t\toffset += 4;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tnum_scanlines --;\n\n\t\t\t\t}\n\n\t\t\t\treturn data_rgba;\n\n\t\t\t};\n\n\t\tconst RGBEByteToRGBFloat = function ( sourceArray, sourceOffset, destArray, destOffset ) {\n\n\t\t\tconst e = sourceArray[ sourceOffset + 3 ];\n\t\t\tconst scale = Math.pow( 2.0, e - 128.0 ) / 255.0;\n\n\t\t\tdestArray[ destOffset + 0 ] = sourceArray[ sourceOffset + 0 ] * scale;\n\t\t\tdestArray[ destOffset + 1 ] = sourceArray[ sourceOffset + 1 ] * scale;\n\t\t\tdestArray[ destOffset + 2 ] = sourceArray[ sourceOffset + 2 ] * scale;\n\t\t\tdestArray[ destOffset + 3 ] = 1;\n\n\t\t};\n\n\t\tconst RGBEByteToRGBHalf = function ( sourceArray, sourceOffset, destArray, destOffset ) {\n\n\t\t\tconst e = sourceArray[ sourceOffset + 3 ];\n\t\t\tconst scale = Math.pow( 2.0, e - 128.0 ) / 255.0;\n\n\t\t\t// clamping to 65504, the maximum representable value in float16\n\t\t\tdestArray[ destOffset + 0 ] = DataUtils.toHalfFloat( Math.min( sourceArray[ sourceOffset + 0 ] * scale, 65504 ) );\n\t\t\tdestArray[ destOffset + 1 ] = DataUtils.toHalfFloat( Math.min( sourceArray[ sourceOffset + 1 ] * scale, 65504 ) );\n\t\t\tdestArray[ destOffset + 2 ] = DataUtils.toHalfFloat( Math.min( sourceArray[ sourceOffset + 2 ] * scale, 65504 ) );\n\t\t\tdestArray[ destOffset + 3 ] = DataUtils.toHalfFloat( 1 );\n\n\t\t};\n\n\t\tconst byteArray = new Uint8Array( buffer );\n\t\tbyteArray.pos = 0;\n\t\tconst rgbe_header_info = RGBE_ReadHeader( byteArray );\n\n\t\tconst w = rgbe_header_info.width,\n\t\t\th = rgbe_header_info.height,\n\t\t\timage_rgba_data = RGBE_ReadPixels_RLE( byteArray.subarray( byteArray.pos ), w, h );\n\n\n\t\tlet data, type;\n\t\tlet numElements;\n\n\t\tswitch ( this.type ) {\n\n\t\t\tcase FloatType:\n\n\t\t\t\tnumElements = image_rgba_data.length / 4;\n\t\t\t\tconst floatArray = new Float32Array( numElements * 4 );\n\n\t\t\t\tfor ( let j = 0; j < numElements; j ++ ) {\n\n\t\t\t\t\tRGBEByteToRGBFloat( image_rgba_data, j * 4, floatArray, j * 4 );\n\n\t\t\t\t}\n\n\t\t\t\tdata = floatArray;\n\t\t\t\ttype = FloatType;\n\t\t\t\tbreak;\n\n\t\t\tcase HalfFloatType:\n\n\t\t\t\tnumElements = image_rgba_data.length / 4;\n\t\t\t\tconst halfArray = new Uint16Array( numElements * 4 );\n\n\t\t\t\tfor ( let j = 0; j < numElements; j ++ ) {\n\n\t\t\t\t\tRGBEByteToRGBHalf( image_rgba_data, j * 4, halfArray, j * 4 );\n\n\t\t\t\t}\n\n\t\t\t\tdata = halfArray;\n\t\t\t\ttype = HalfFloatType;\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\n\t\t\t\tthrow new Error( 'THREE.RGBELoader: unsupported type: ', this.type );\n\n\t\t}\n\n\t\treturn {\n\t\t\twidth: w, height: h,\n\t\t\tdata: data,\n\t\t\theader: rgbe_header_info.string,\n\t\t\tgamma: rgbe_header_info.gamma,\n\t\t\texposure: rgbe_header_info.exposure,\n\t\t\ttype: type\n\t\t};\n\n\t}\n\n\tsetDataType( value ) {\n\n\t\tthis.type = value;\n\t\treturn this;\n\n\t}\n\n\tload( url, onLoad, onProgress, onError ) {\n\n\t\tfunction onLoadCallback( texture, texData ) {\n\n\t\t\tswitch ( texture.type ) {\n\n\t\t\t\tcase FloatType:\n\t\t\t\tcase HalfFloatType:\n\n\t\t\t\t\ttexture.colorSpace = LinearSRGBColorSpace;\n\t\t\t\t\ttexture.minFilter = LinearFilter;\n\t\t\t\t\ttexture.magFilter = LinearFilter;\n\t\t\t\t\ttexture.generateMipmaps = false;\n\t\t\t\t\ttexture.flipY = true;\n\n\t\t\t\t\t//texture.gamma = texData.gamma;\n\t\t\t\t\t//texture.exposure = texData.exposure;\n\t\t\t\t\t//texture.userData = texData;\n\n\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t\tif ( onLoad ) onLoad( texture, texData );\n\n\t\t}\n\n\t\treturn super.load( url, onLoadCallback, onProgress, onError );\n\n\t}\n\n}\n\n/**\n * OpenEXR loader currently supports uncompressed, ZIP(S), RLE, PIZ and DWA/B compression.\n * Supports reading as UnsignedByte, HalfFloat and Float type data texture.\n *\n * Referred to the original Industrial Light & Magic OpenEXR implementation and the TinyEXR / Syoyo Fujita\n * implementation, so I have preserved their copyright notices.\n */\n\n// /*\n// Copyright (c) 2014 - 2017, Syoyo Fujita\n// All rights reserved.\n\n// Redistribution and use in source and binary forms, with or without\n// modification, are permitted provided that the following conditions are met:\n//     * Redistributions of source code must retain the above copyright\n//       notice, this list of conditions and the following disclaimer.\n//     * Redistributions in binary form must reproduce the above copyright\n//       notice, this list of conditions and the following disclaimer in the\n//       documentation and/or other materials provided with the distribution.\n//     * Neither the name of the Syoyo Fujita nor the\n//       names of its contributors may be used to endorse or promote products\n//       derived from this software without specific prior written permission.\n\n// THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n// ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n// WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n// DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> BE LIABLE FOR ANY\n// DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n// (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n// LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n// ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n// (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n// SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n// */\n\n// // TinyEXR contains some OpenEXR code, which is licensed under ------------\n\n// ///////////////////////////////////////////////////////////////////////////\n// //\n// // Copyright (c) 2002, Industrial Light & Magic, a division of Lucas\n// // Digital Ltd. LLC\n// //\n// // All rights reserved.\n// //\n// // Redistribution and use in source and binary forms, with or without\n// // modification, are permitted provided that the following conditions are\n// // met:\n// // *       Redistributions of source code must retain the above copyright\n// // notice, this list of conditions and the following disclaimer.\n// // *       Redistributions in binary form must reproduce the above\n// // copyright notice, this list of conditions and the following disclaimer\n// // in the documentation and/or other materials provided with the\n// // distribution.\n// // *       Neither the name of Industrial Light & Magic nor the names of\n// // its contributors may be used to endorse or promote products derived\n// // from this software without specific prior written permission.\n// //\n// // THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n// // \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n// // LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n// // A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n// // OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n// // SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n// // LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n// // DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n// // THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n// // (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n// // OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n// //\n// ///////////////////////////////////////////////////////////////////////////\n\n// // End of OpenEXR license -------------------------------------------------\n\nclass EXRLoader extends DataTextureLoader {\n\n\tconstructor( manager ) {\n\n\t\tsuper( manager );\n\n\t\tthis.type = HalfFloatType;\n\n\t}\n\n\tparse( buffer ) {\n\n\t\tconst USHORT_RANGE = ( 1 << 16 );\n\t\tconst BITMAP_SIZE = ( USHORT_RANGE >> 3 );\n\n\t\tconst HUF_ENCBITS = 16; // literal (value) bit length\n\t\tconst HUF_DECBITS = 14; // decoding bit size (>= 8)\n\n\t\tconst HUF_ENCSIZE = ( 1 << HUF_ENCBITS ) + 1; // encoding table size\n\t\tconst HUF_DECSIZE = 1 << HUF_DECBITS; // decoding table size\n\t\tconst HUF_DECMASK = HUF_DECSIZE - 1;\n\n\t\tconst NBITS = 16;\n\t\tconst A_OFFSET = 1 << ( NBITS - 1 );\n\t\tconst MOD_MASK = ( 1 << NBITS ) - 1;\n\n\t\tconst SHORT_ZEROCODE_RUN = 59;\n\t\tconst LONG_ZEROCODE_RUN = 63;\n\t\tconst SHORTEST_LONG_RUN = 2 + LONG_ZEROCODE_RUN - SHORT_ZEROCODE_RUN;\n\n\t\tconst ULONG_SIZE = 8;\n\t\tconst FLOAT32_SIZE = 4;\n\t\tconst INT32_SIZE = 4;\n\t\tconst INT16_SIZE = 2;\n\t\tconst INT8_SIZE = 1;\n\n\t\tconst STATIC_HUFFMAN = 0;\n\t\tconst DEFLATE = 1;\n\n\t\tconst UNKNOWN = 0;\n\t\tconst LOSSY_DCT = 1;\n\t\tconst RLE = 2;\n\n\t\tconst logBase = Math.pow( 2.7182818, 2.2 );\n\n\t\tfunction reverseLutFromBitmap( bitmap, lut ) {\n\n\t\t\tlet k = 0;\n\n\t\t\tfor ( let i = 0; i < USHORT_RANGE; ++ i ) {\n\n\t\t\t\tif ( ( i == 0 ) || ( bitmap[ i >> 3 ] & ( 1 << ( i & 7 ) ) ) ) {\n\n\t\t\t\t\tlut[ k ++ ] = i;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tconst n = k - 1;\n\n\t\t\twhile ( k < USHORT_RANGE ) lut[ k ++ ] = 0;\n\n\t\t\treturn n;\n\n\t\t}\n\n\t\tfunction hufClearDecTable( hdec ) {\n\n\t\t\tfor ( let i = 0; i < HUF_DECSIZE; i ++ ) {\n\n\t\t\t\thdec[ i ] = {};\n\t\t\t\thdec[ i ].len = 0;\n\t\t\t\thdec[ i ].lit = 0;\n\t\t\t\thdec[ i ].p = null;\n\n\t\t\t}\n\n\t\t}\n\n\t\tconst getBitsReturn = { l: 0, c: 0, lc: 0 };\n\n\t\tfunction getBits( nBits, c, lc, uInt8Array, inOffset ) {\n\n\t\t\twhile ( lc < nBits ) {\n\n\t\t\t\tc = ( c << 8 ) | parseUint8Array( uInt8Array, inOffset );\n\t\t\t\tlc += 8;\n\n\t\t\t}\n\n\t\t\tlc -= nBits;\n\n\t\t\tgetBitsReturn.l = ( c >> lc ) & ( ( 1 << nBits ) - 1 );\n\t\t\tgetBitsReturn.c = c;\n\t\t\tgetBitsReturn.lc = lc;\n\n\t\t}\n\n\t\tconst hufTableBuffer = new Array( 59 );\n\n\t\tfunction hufCanonicalCodeTable( hcode ) {\n\n\t\t\tfor ( let i = 0; i <= 58; ++ i ) hufTableBuffer[ i ] = 0;\n\t\t\tfor ( let i = 0; i < HUF_ENCSIZE; ++ i ) hufTableBuffer[ hcode[ i ] ] += 1;\n\n\t\t\tlet c = 0;\n\n\t\t\tfor ( let i = 58; i > 0; -- i ) {\n\n\t\t\t\tconst nc = ( ( c + hufTableBuffer[ i ] ) >> 1 );\n\t\t\t\thufTableBuffer[ i ] = c;\n\t\t\t\tc = nc;\n\n\t\t\t}\n\n\t\t\tfor ( let i = 0; i < HUF_ENCSIZE; ++ i ) {\n\n\t\t\t\tconst l = hcode[ i ];\n\t\t\t\tif ( l > 0 ) hcode[ i ] = l | ( hufTableBuffer[ l ] ++ << 6 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction hufUnpackEncTable( uInt8Array, inOffset, ni, im, iM, hcode ) {\n\n\t\t\tconst p = inOffset;\n\t\t\tlet c = 0;\n\t\t\tlet lc = 0;\n\n\t\t\tfor ( ; im <= iM; im ++ ) {\n\n\t\t\t\tif ( p.value - inOffset.value > ni ) return false;\n\n\t\t\t\tgetBits( 6, c, lc, uInt8Array, p );\n\n\t\t\t\tconst l = getBitsReturn.l;\n\t\t\t\tc = getBitsReturn.c;\n\t\t\t\tlc = getBitsReturn.lc;\n\n\t\t\t\thcode[ im ] = l;\n\n\t\t\t\tif ( l == LONG_ZEROCODE_RUN ) {\n\n\t\t\t\t\tif ( p.value - inOffset.value > ni ) {\n\n\t\t\t\t\t\tthrow new Error( 'Something wrong with hufUnpackEncTable' );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tgetBits( 8, c, lc, uInt8Array, p );\n\n\t\t\t\t\tlet zerun = getBitsReturn.l + SHORTEST_LONG_RUN;\n\t\t\t\t\tc = getBitsReturn.c;\n\t\t\t\t\tlc = getBitsReturn.lc;\n\n\t\t\t\t\tif ( im + zerun > iM + 1 ) {\n\n\t\t\t\t\t\tthrow new Error( 'Something wrong with hufUnpackEncTable' );\n\n\t\t\t\t\t}\n\n\t\t\t\t\twhile ( zerun -- ) hcode[ im ++ ] = 0;\n\n\t\t\t\t\tim --;\n\n\t\t\t\t} else if ( l >= SHORT_ZEROCODE_RUN ) {\n\n\t\t\t\t\tlet zerun = l - SHORT_ZEROCODE_RUN + 2;\n\n\t\t\t\t\tif ( im + zerun > iM + 1 ) {\n\n\t\t\t\t\t\tthrow new Error( 'Something wrong with hufUnpackEncTable' );\n\n\t\t\t\t\t}\n\n\t\t\t\t\twhile ( zerun -- ) hcode[ im ++ ] = 0;\n\n\t\t\t\t\tim --;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\thufCanonicalCodeTable( hcode );\n\n\t\t}\n\n\t\tfunction hufLength( code ) {\n\n\t\t\treturn code & 63;\n\n\t\t}\n\n\t\tfunction hufCode( code ) {\n\n\t\t\treturn code >> 6;\n\n\t\t}\n\n\t\tfunction hufBuildDecTable( hcode, im, iM, hdecod ) {\n\n\t\t\tfor ( ; im <= iM; im ++ ) {\n\n\t\t\t\tconst c = hufCode( hcode[ im ] );\n\t\t\t\tconst l = hufLength( hcode[ im ] );\n\n\t\t\t\tif ( c >> l ) {\n\n\t\t\t\t\tthrow new Error( 'Invalid table entry' );\n\n\t\t\t\t}\n\n\t\t\t\tif ( l > HUF_DECBITS ) {\n\n\t\t\t\t\tconst pl = hdecod[ ( c >> ( l - HUF_DECBITS ) ) ];\n\n\t\t\t\t\tif ( pl.len ) {\n\n\t\t\t\t\t\tthrow new Error( 'Invalid table entry' );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tpl.lit ++;\n\n\t\t\t\t\tif ( pl.p ) {\n\n\t\t\t\t\t\tconst p = pl.p;\n\t\t\t\t\t\tpl.p = new Array( pl.lit );\n\n\t\t\t\t\t\tfor ( let i = 0; i < pl.lit - 1; ++ i ) {\n\n\t\t\t\t\t\t\tpl.p[ i ] = p[ i ];\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tpl.p = new Array( 1 );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tpl.p[ pl.lit - 1 ] = im;\n\n\t\t\t\t} else if ( l ) {\n\n\t\t\t\t\tlet plOffset = 0;\n\n\t\t\t\t\tfor ( let i = 1 << ( HUF_DECBITS - l ); i > 0; i -- ) {\n\n\t\t\t\t\t\tconst pl = hdecod[ ( c << ( HUF_DECBITS - l ) ) + plOffset ];\n\n\t\t\t\t\t\tif ( pl.len || pl.p ) {\n\n\t\t\t\t\t\t\tthrow new Error( 'Invalid table entry' );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tpl.len = l;\n\t\t\t\t\t\tpl.lit = im;\n\n\t\t\t\t\t\tplOffset ++;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn true;\n\n\t\t}\n\n\t\tconst getCharReturn = { c: 0, lc: 0 };\n\n\t\tfunction getChar( c, lc, uInt8Array, inOffset ) {\n\n\t\t\tc = ( c << 8 ) | parseUint8Array( uInt8Array, inOffset );\n\t\t\tlc += 8;\n\n\t\t\tgetCharReturn.c = c;\n\t\t\tgetCharReturn.lc = lc;\n\n\t\t}\n\n\t\tconst getCodeReturn = { c: 0, lc: 0 };\n\n\t\tfunction getCode( po, rlc, c, lc, uInt8Array, inOffset, outBuffer, outBufferOffset, outBufferEndOffset ) {\n\n\t\t\tif ( po == rlc ) {\n\n\t\t\t\tif ( lc < 8 ) {\n\n\t\t\t\t\tgetChar( c, lc, uInt8Array, inOffset );\n\t\t\t\t\tc = getCharReturn.c;\n\t\t\t\t\tlc = getCharReturn.lc;\n\n\t\t\t\t}\n\n\t\t\t\tlc -= 8;\n\n\t\t\t\tlet cs = ( c >> lc );\n\t\t\t\tcs = new Uint8Array( [ cs ] )[ 0 ];\n\n\t\t\t\tif ( outBufferOffset.value + cs > outBufferEndOffset ) {\n\n\t\t\t\t\treturn false;\n\n\t\t\t\t}\n\n\t\t\t\tconst s = outBuffer[ outBufferOffset.value - 1 ];\n\n\t\t\t\twhile ( cs -- > 0 ) {\n\n\t\t\t\t\toutBuffer[ outBufferOffset.value ++ ] = s;\n\n\t\t\t\t}\n\n\t\t\t} else if ( outBufferOffset.value < outBufferEndOffset ) {\n\n\t\t\t\toutBuffer[ outBufferOffset.value ++ ] = po;\n\n\t\t\t} else {\n\n\t\t\t\treturn false;\n\n\t\t\t}\n\n\t\t\tgetCodeReturn.c = c;\n\t\t\tgetCodeReturn.lc = lc;\n\n\t\t}\n\n\t\tfunction UInt16( value ) {\n\n\t\t\treturn ( value & 0xFFFF );\n\n\t\t}\n\n\t\tfunction Int16( value ) {\n\n\t\t\tconst ref = UInt16( value );\n\t\t\treturn ( ref > 0x7FFF ) ? ref - 0x10000 : ref;\n\n\t\t}\n\n\t\tconst wdec14Return = { a: 0, b: 0 };\n\n\t\tfunction wdec14( l, h ) {\n\n\t\t\tconst ls = Int16( l );\n\t\t\tconst hs = Int16( h );\n\n\t\t\tconst hi = hs;\n\t\t\tconst ai = ls + ( hi & 1 ) + ( hi >> 1 );\n\n\t\t\tconst as = ai;\n\t\t\tconst bs = ai - hi;\n\n\t\t\twdec14Return.a = as;\n\t\t\twdec14Return.b = bs;\n\n\t\t}\n\n\t\tfunction wdec16( l, h ) {\n\n\t\t\tconst m = UInt16( l );\n\t\t\tconst d = UInt16( h );\n\n\t\t\tconst bb = ( m - ( d >> 1 ) ) & MOD_MASK;\n\t\t\tconst aa = ( d + bb - A_OFFSET ) & MOD_MASK;\n\n\t\t\twdec14Return.a = aa;\n\t\t\twdec14Return.b = bb;\n\n\t\t}\n\n\t\tfunction wav2Decode( buffer, j, nx, ox, ny, oy, mx ) {\n\n\t\t\tconst w14 = mx < ( 1 << 14 );\n\t\t\tconst n = ( nx > ny ) ? ny : nx;\n\t\t\tlet p = 1;\n\t\t\tlet p2;\n\t\t\tlet py;\n\n\t\t\twhile ( p <= n ) p <<= 1;\n\n\t\t\tp >>= 1;\n\t\t\tp2 = p;\n\t\t\tp >>= 1;\n\n\t\t\twhile ( p >= 1 ) {\n\n\t\t\t\tpy = 0;\n\t\t\t\tconst ey = py + oy * ( ny - p2 );\n\t\t\t\tconst oy1 = oy * p;\n\t\t\t\tconst oy2 = oy * p2;\n\t\t\t\tconst ox1 = ox * p;\n\t\t\t\tconst ox2 = ox * p2;\n\t\t\t\tlet i00, i01, i10, i11;\n\n\t\t\t\tfor ( ; py <= ey; py += oy2 ) {\n\n\t\t\t\t\tlet px = py;\n\t\t\t\t\tconst ex = py + ox * ( nx - p2 );\n\n\t\t\t\t\tfor ( ; px <= ex; px += ox2 ) {\n\n\t\t\t\t\t\tconst p01 = px + ox1;\n\t\t\t\t\t\tconst p10 = px + oy1;\n\t\t\t\t\t\tconst p11 = p10 + ox1;\n\n\t\t\t\t\t\tif ( w14 ) {\n\n\t\t\t\t\t\t\twdec14( buffer[ px + j ], buffer[ p10 + j ] );\n\n\t\t\t\t\t\t\ti00 = wdec14Return.a;\n\t\t\t\t\t\t\ti10 = wdec14Return.b;\n\n\t\t\t\t\t\t\twdec14( buffer[ p01 + j ], buffer[ p11 + j ] );\n\n\t\t\t\t\t\t\ti01 = wdec14Return.a;\n\t\t\t\t\t\t\ti11 = wdec14Return.b;\n\n\t\t\t\t\t\t\twdec14( i00, i01 );\n\n\t\t\t\t\t\t\tbuffer[ px + j ] = wdec14Return.a;\n\t\t\t\t\t\t\tbuffer[ p01 + j ] = wdec14Return.b;\n\n\t\t\t\t\t\t\twdec14( i10, i11 );\n\n\t\t\t\t\t\t\tbuffer[ p10 + j ] = wdec14Return.a;\n\t\t\t\t\t\t\tbuffer[ p11 + j ] = wdec14Return.b;\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\twdec16( buffer[ px + j ], buffer[ p10 + j ] );\n\n\t\t\t\t\t\t\ti00 = wdec14Return.a;\n\t\t\t\t\t\t\ti10 = wdec14Return.b;\n\n\t\t\t\t\t\t\twdec16( buffer[ p01 + j ], buffer[ p11 + j ] );\n\n\t\t\t\t\t\t\ti01 = wdec14Return.a;\n\t\t\t\t\t\t\ti11 = wdec14Return.b;\n\n\t\t\t\t\t\t\twdec16( i00, i01 );\n\n\t\t\t\t\t\t\tbuffer[ px + j ] = wdec14Return.a;\n\t\t\t\t\t\t\tbuffer[ p01 + j ] = wdec14Return.b;\n\n\t\t\t\t\t\t\twdec16( i10, i11 );\n\n\t\t\t\t\t\t\tbuffer[ p10 + j ] = wdec14Return.a;\n\t\t\t\t\t\t\tbuffer[ p11 + j ] = wdec14Return.b;\n\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( nx & p ) {\n\n\t\t\t\t\t\tconst p10 = px + oy1;\n\n\t\t\t\t\t\tif ( w14 )\n\t\t\t\t\t\t\twdec14( buffer[ px + j ], buffer[ p10 + j ] );\n\t\t\t\t\t\telse\n\t\t\t\t\t\t\twdec16( buffer[ px + j ], buffer[ p10 + j ] );\n\n\t\t\t\t\t\ti00 = wdec14Return.a;\n\t\t\t\t\t\tbuffer[ p10 + j ] = wdec14Return.b;\n\n\t\t\t\t\t\tbuffer[ px + j ] = i00;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tif ( ny & p ) {\n\n\t\t\t\t\tlet px = py;\n\t\t\t\t\tconst ex = py + ox * ( nx - p2 );\n\n\t\t\t\t\tfor ( ; px <= ex; px += ox2 ) {\n\n\t\t\t\t\t\tconst p01 = px + ox1;\n\n\t\t\t\t\t\tif ( w14 )\n\t\t\t\t\t\t\twdec14( buffer[ px + j ], buffer[ p01 + j ] );\n\t\t\t\t\t\telse\n\t\t\t\t\t\t\twdec16( buffer[ px + j ], buffer[ p01 + j ] );\n\n\t\t\t\t\t\ti00 = wdec14Return.a;\n\t\t\t\t\t\tbuffer[ p01 + j ] = wdec14Return.b;\n\n\t\t\t\t\t\tbuffer[ px + j ] = i00;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tp2 = p;\n\t\t\t\tp >>= 1;\n\n\t\t\t}\n\n\t\t\treturn py;\n\n\t\t}\n\n\t\tfunction hufDecode( encodingTable, decodingTable, uInt8Array, inOffset, ni, rlc, no, outBuffer, outOffset ) {\n\n\t\t\tlet c = 0;\n\t\t\tlet lc = 0;\n\t\t\tconst outBufferEndOffset = no;\n\t\t\tconst inOffsetEnd = Math.trunc( inOffset.value + ( ni + 7 ) / 8 );\n\n\t\t\twhile ( inOffset.value < inOffsetEnd ) {\n\n\t\t\t\tgetChar( c, lc, uInt8Array, inOffset );\n\n\t\t\t\tc = getCharReturn.c;\n\t\t\t\tlc = getCharReturn.lc;\n\n\t\t\t\twhile ( lc >= HUF_DECBITS ) {\n\n\t\t\t\t\tconst index = ( c >> ( lc - HUF_DECBITS ) ) & HUF_DECMASK;\n\t\t\t\t\tconst pl = decodingTable[ index ];\n\n\t\t\t\t\tif ( pl.len ) {\n\n\t\t\t\t\t\tlc -= pl.len;\n\n\t\t\t\t\t\tgetCode( pl.lit, rlc, c, lc, uInt8Array, inOffset, outBuffer, outOffset, outBufferEndOffset );\n\n\t\t\t\t\t\tc = getCodeReturn.c;\n\t\t\t\t\t\tlc = getCodeReturn.lc;\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tif ( ! pl.p ) {\n\n\t\t\t\t\t\t\tthrow new Error( 'hufDecode issues' );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tlet j;\n\n\t\t\t\t\t\tfor ( j = 0; j < pl.lit; j ++ ) {\n\n\t\t\t\t\t\t\tconst l = hufLength( encodingTable[ pl.p[ j ] ] );\n\n\t\t\t\t\t\t\twhile ( lc < l && inOffset.value < inOffsetEnd ) {\n\n\t\t\t\t\t\t\t\tgetChar( c, lc, uInt8Array, inOffset );\n\n\t\t\t\t\t\t\t\tc = getCharReturn.c;\n\t\t\t\t\t\t\t\tlc = getCharReturn.lc;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif ( lc >= l ) {\n\n\t\t\t\t\t\t\t\tif ( hufCode( encodingTable[ pl.p[ j ] ] ) == ( ( c >> ( lc - l ) ) & ( ( 1 << l ) - 1 ) ) ) {\n\n\t\t\t\t\t\t\t\t\tlc -= l;\n\n\t\t\t\t\t\t\t\t\tgetCode( pl.p[ j ], rlc, c, lc, uInt8Array, inOffset, outBuffer, outOffset, outBufferEndOffset );\n\n\t\t\t\t\t\t\t\t\tc = getCodeReturn.c;\n\t\t\t\t\t\t\t\t\tlc = getCodeReturn.lc;\n\n\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif ( j == pl.lit ) {\n\n\t\t\t\t\t\t\tthrow new Error( 'hufDecode issues' );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tconst i = ( 8 - ni ) & 7;\n\n\t\t\tc >>= i;\n\t\t\tlc -= i;\n\n\t\t\twhile ( lc > 0 ) {\n\n\t\t\t\tconst pl = decodingTable[ ( c << ( HUF_DECBITS - lc ) ) & HUF_DECMASK ];\n\n\t\t\t\tif ( pl.len ) {\n\n\t\t\t\t\tlc -= pl.len;\n\n\t\t\t\t\tgetCode( pl.lit, rlc, c, lc, uInt8Array, inOffset, outBuffer, outOffset, outBufferEndOffset );\n\n\t\t\t\t\tc = getCodeReturn.c;\n\t\t\t\t\tlc = getCodeReturn.lc;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tthrow new Error( 'hufDecode issues' );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn true;\n\n\t\t}\n\n\t\tfunction hufUncompress( uInt8Array, inDataView, inOffset, nCompressed, outBuffer, nRaw ) {\n\n\t\t\tconst outOffset = { value: 0 };\n\t\t\tconst initialInOffset = inOffset.value;\n\n\t\t\tconst im = parseUint32( inDataView, inOffset );\n\t\t\tconst iM = parseUint32( inDataView, inOffset );\n\n\t\t\tinOffset.value += 4;\n\n\t\t\tconst nBits = parseUint32( inDataView, inOffset );\n\n\t\t\tinOffset.value += 4;\n\n\t\t\tif ( im < 0 || im >= HUF_ENCSIZE || iM < 0 || iM >= HUF_ENCSIZE ) {\n\n\t\t\t\tthrow new Error( 'Something wrong with HUF_ENCSIZE' );\n\n\t\t\t}\n\n\t\t\tconst freq = new Array( HUF_ENCSIZE );\n\t\t\tconst hdec = new Array( HUF_DECSIZE );\n\n\t\t\thufClearDecTable( hdec );\n\n\t\t\tconst ni = nCompressed - ( inOffset.value - initialInOffset );\n\n\t\t\thufUnpackEncTable( uInt8Array, inOffset, ni, im, iM, freq );\n\n\t\t\tif ( nBits > 8 * ( nCompressed - ( inOffset.value - initialInOffset ) ) ) {\n\n\t\t\t\tthrow new Error( 'Something wrong with hufUncompress' );\n\n\t\t\t}\n\n\t\t\thufBuildDecTable( freq, im, iM, hdec );\n\n\t\t\thufDecode( freq, hdec, uInt8Array, inOffset, nBits, iM, nRaw, outBuffer, outOffset );\n\n\t\t}\n\n\t\tfunction applyLut( lut, data, nData ) {\n\n\t\t\tfor ( let i = 0; i < nData; ++ i ) {\n\n\t\t\t\tdata[ i ] = lut[ data[ i ] ];\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction predictor( source ) {\n\n\t\t\tfor ( let t = 1; t < source.length; t ++ ) {\n\n\t\t\t\tconst d = source[ t - 1 ] + source[ t ] - 128;\n\t\t\t\tsource[ t ] = d;\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction interleaveScalar( source, out ) {\n\n\t\t\tlet t1 = 0;\n\t\t\tlet t2 = Math.floor( ( source.length + 1 ) / 2 );\n\t\t\tlet s = 0;\n\t\t\tconst stop = source.length - 1;\n\n\t\t\twhile ( true ) {\n\n\t\t\t\tif ( s > stop ) break;\n\t\t\t\tout[ s ++ ] = source[ t1 ++ ];\n\n\t\t\t\tif ( s > stop ) break;\n\t\t\t\tout[ s ++ ] = source[ t2 ++ ];\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction decodeRunLength( source ) {\n\n\t\t\tlet size = source.byteLength;\n\t\t\tconst out = new Array();\n\t\t\tlet p = 0;\n\n\t\t\tconst reader = new DataView( source );\n\n\t\t\twhile ( size > 0 ) {\n\n\t\t\t\tconst l = reader.getInt8( p ++ );\n\n\t\t\t\tif ( l < 0 ) {\n\n\t\t\t\t\tconst count = - l;\n\t\t\t\t\tsize -= count + 1;\n\n\t\t\t\t\tfor ( let i = 0; i < count; i ++ ) {\n\n\t\t\t\t\t\tout.push( reader.getUint8( p ++ ) );\n\n\t\t\t\t\t}\n\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconst count = l;\n\t\t\t\t\tsize -= 2;\n\n\t\t\t\t\tconst value = reader.getUint8( p ++ );\n\n\t\t\t\t\tfor ( let i = 0; i < count + 1; i ++ ) {\n\n\t\t\t\t\t\tout.push( value );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn out;\n\n\t\t}\n\n\t\tfunction lossyDctDecode( cscSet, rowPtrs, channelData, acBuffer, dcBuffer, outBuffer ) {\n\n\t\t\tlet dataView = new DataView( outBuffer.buffer );\n\n\t\t\tconst width = channelData[ cscSet.idx[ 0 ] ].width;\n\t\t\tconst height = channelData[ cscSet.idx[ 0 ] ].height;\n\n\t\t\tconst numComp = 3;\n\n\t\t\tconst numFullBlocksX = Math.floor( width / 8.0 );\n\t\t\tconst numBlocksX = Math.ceil( width / 8.0 );\n\t\t\tconst numBlocksY = Math.ceil( height / 8.0 );\n\t\t\tconst leftoverX = width - ( numBlocksX - 1 ) * 8;\n\t\t\tconst leftoverY = height - ( numBlocksY - 1 ) * 8;\n\n\t\t\tconst currAcComp = { value: 0 };\n\t\t\tconst currDcComp = new Array( numComp );\n\t\t\tconst dctData = new Array( numComp );\n\t\t\tconst halfZigBlock = new Array( numComp );\n\t\t\tconst rowBlock = new Array( numComp );\n\t\t\tconst rowOffsets = new Array( numComp );\n\n\t\t\tfor ( let comp = 0; comp < numComp; ++ comp ) {\n\n\t\t\t\trowOffsets[ comp ] = rowPtrs[ cscSet.idx[ comp ] ];\n\t\t\t\tcurrDcComp[ comp ] = ( comp < 1 ) ? 0 : currDcComp[ comp - 1 ] + numBlocksX * numBlocksY;\n\t\t\t\tdctData[ comp ] = new Float32Array( 64 );\n\t\t\t\thalfZigBlock[ comp ] = new Uint16Array( 64 );\n\t\t\t\trowBlock[ comp ] = new Uint16Array( numBlocksX * 64 );\n\n\t\t\t}\n\n\t\t\tfor ( let blocky = 0; blocky < numBlocksY; ++ blocky ) {\n\n\t\t\t\tlet maxY = 8;\n\n\t\t\t\tif ( blocky == numBlocksY - 1 )\n\t\t\t\t\tmaxY = leftoverY;\n\n\t\t\t\tlet maxX = 8;\n\n\t\t\t\tfor ( let blockx = 0; blockx < numBlocksX; ++ blockx ) {\n\n\t\t\t\t\tif ( blockx == numBlocksX - 1 )\n\t\t\t\t\t\tmaxX = leftoverX;\n\n\t\t\t\t\tfor ( let comp = 0; comp < numComp; ++ comp ) {\n\n\t\t\t\t\t\thalfZigBlock[ comp ].fill( 0 );\n\n\t\t\t\t\t\t// set block DC component\n\t\t\t\t\t\thalfZigBlock[ comp ][ 0 ] = dcBuffer[ currDcComp[ comp ] ++ ];\n\t\t\t\t\t\t// set block AC components\n\t\t\t\t\t\tunRleAC( currAcComp, acBuffer, halfZigBlock[ comp ] );\n\n\t\t\t\t\t\t// UnZigZag block to float\n\t\t\t\t\t\tunZigZag( halfZigBlock[ comp ], dctData[ comp ] );\n\t\t\t\t\t\t// decode float dct\n\t\t\t\t\t\tdctInverse( dctData[ comp ] );\n\n\t\t\t\t\t}\n\n\t\t\t\t\t{\n\n\t\t\t\t\t\tcsc709Inverse( dctData );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfor ( let comp = 0; comp < numComp; ++ comp ) {\n\n\t\t\t\t\t\tconvertToHalf( dctData[ comp ], rowBlock[ comp ], blockx * 64 );\n\n\t\t\t\t\t}\n\n\t\t\t\t} // blockx\n\n\t\t\t\tlet offset = 0;\n\n\t\t\t\tfor ( let comp = 0; comp < numComp; ++ comp ) {\n\n\t\t\t\t\tconst type = channelData[ cscSet.idx[ comp ] ].type;\n\n\t\t\t\t\tfor ( let y = 8 * blocky; y < 8 * blocky + maxY; ++ y ) {\n\n\t\t\t\t\t\toffset = rowOffsets[ comp ][ y ];\n\n\t\t\t\t\t\tfor ( let blockx = 0; blockx < numFullBlocksX; ++ blockx ) {\n\n\t\t\t\t\t\t\tconst src = blockx * 64 + ( ( y & 0x7 ) * 8 );\n\n\t\t\t\t\t\t\tdataView.setUint16( offset + 0 * INT16_SIZE * type, rowBlock[ comp ][ src + 0 ], true );\n\t\t\t\t\t\t\tdataView.setUint16( offset + 1 * INT16_SIZE * type, rowBlock[ comp ][ src + 1 ], true );\n\t\t\t\t\t\t\tdataView.setUint16( offset + 2 * INT16_SIZE * type, rowBlock[ comp ][ src + 2 ], true );\n\t\t\t\t\t\t\tdataView.setUint16( offset + 3 * INT16_SIZE * type, rowBlock[ comp ][ src + 3 ], true );\n\n\t\t\t\t\t\t\tdataView.setUint16( offset + 4 * INT16_SIZE * type, rowBlock[ comp ][ src + 4 ], true );\n\t\t\t\t\t\t\tdataView.setUint16( offset + 5 * INT16_SIZE * type, rowBlock[ comp ][ src + 5 ], true );\n\t\t\t\t\t\t\tdataView.setUint16( offset + 6 * INT16_SIZE * type, rowBlock[ comp ][ src + 6 ], true );\n\t\t\t\t\t\t\tdataView.setUint16( offset + 7 * INT16_SIZE * type, rowBlock[ comp ][ src + 7 ], true );\n\n\t\t\t\t\t\t\toffset += 8 * INT16_SIZE * type;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\t// handle partial X blocks\n\t\t\t\t\tif ( numFullBlocksX != numBlocksX ) {\n\n\t\t\t\t\t\tfor ( let y = 8 * blocky; y < 8 * blocky + maxY; ++ y ) {\n\n\t\t\t\t\t\t\tconst offset = rowOffsets[ comp ][ y ] + 8 * numFullBlocksX * INT16_SIZE * type;\n\t\t\t\t\t\t\tconst src = numFullBlocksX * 64 + ( ( y & 0x7 ) * 8 );\n\n\t\t\t\t\t\t\tfor ( let x = 0; x < maxX; ++ x ) {\n\n\t\t\t\t\t\t\t\tdataView.setUint16( offset + x * INT16_SIZE * type, rowBlock[ comp ][ src + x ], true );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t} // comp\n\n\t\t\t} // blocky\n\n\t\t\tconst halfRow = new Uint16Array( width );\n\t\t\tdataView = new DataView( outBuffer.buffer );\n\n\t\t\t// convert channels back to float, if needed\n\t\t\tfor ( let comp = 0; comp < numComp; ++ comp ) {\n\n\t\t\t\tchannelData[ cscSet.idx[ comp ] ].decoded = true;\n\t\t\t\tconst type = channelData[ cscSet.idx[ comp ] ].type;\n\n\t\t\t\tif ( channelData[ comp ].type != 2 ) continue;\n\n\t\t\t\tfor ( let y = 0; y < height; ++ y ) {\n\n\t\t\t\t\tconst offset = rowOffsets[ comp ][ y ];\n\n\t\t\t\t\tfor ( let x = 0; x < width; ++ x ) {\n\n\t\t\t\t\t\thalfRow[ x ] = dataView.getUint16( offset + x * INT16_SIZE * type, true );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfor ( let x = 0; x < width; ++ x ) {\n\n\t\t\t\t\t\tdataView.setFloat32( offset + x * INT16_SIZE * type, decodeFloat16( halfRow[ x ] ), true );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction unRleAC( currAcComp, acBuffer, halfZigBlock ) {\n\n\t\t\tlet acValue;\n\t\t\tlet dctComp = 1;\n\n\t\t\twhile ( dctComp < 64 ) {\n\n\t\t\t\tacValue = acBuffer[ currAcComp.value ];\n\n\t\t\t\tif ( acValue == 0xff00 ) {\n\n\t\t\t\t\tdctComp = 64;\n\n\t\t\t\t} else if ( acValue >> 8 == 0xff ) {\n\n\t\t\t\t\tdctComp += acValue & 0xff;\n\n\t\t\t\t} else {\n\n\t\t\t\t\thalfZigBlock[ dctComp ] = acValue;\n\t\t\t\t\tdctComp ++;\n\n\t\t\t\t}\n\n\t\t\t\tcurrAcComp.value ++;\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction unZigZag( src, dst ) {\n\n\t\t\tdst[ 0 ] = decodeFloat16( src[ 0 ] );\n\t\t\tdst[ 1 ] = decodeFloat16( src[ 1 ] );\n\t\t\tdst[ 2 ] = decodeFloat16( src[ 5 ] );\n\t\t\tdst[ 3 ] = decodeFloat16( src[ 6 ] );\n\t\t\tdst[ 4 ] = decodeFloat16( src[ 14 ] );\n\t\t\tdst[ 5 ] = decodeFloat16( src[ 15 ] );\n\t\t\tdst[ 6 ] = decodeFloat16( src[ 27 ] );\n\t\t\tdst[ 7 ] = decodeFloat16( src[ 28 ] );\n\t\t\tdst[ 8 ] = decodeFloat16( src[ 2 ] );\n\t\t\tdst[ 9 ] = decodeFloat16( src[ 4 ] );\n\n\t\t\tdst[ 10 ] = decodeFloat16( src[ 7 ] );\n\t\t\tdst[ 11 ] = decodeFloat16( src[ 13 ] );\n\t\t\tdst[ 12 ] = decodeFloat16( src[ 16 ] );\n\t\t\tdst[ 13 ] = decodeFloat16( src[ 26 ] );\n\t\t\tdst[ 14 ] = decodeFloat16( src[ 29 ] );\n\t\t\tdst[ 15 ] = decodeFloat16( src[ 42 ] );\n\t\t\tdst[ 16 ] = decodeFloat16( src[ 3 ] );\n\t\t\tdst[ 17 ] = decodeFloat16( src[ 8 ] );\n\t\t\tdst[ 18 ] = decodeFloat16( src[ 12 ] );\n\t\t\tdst[ 19 ] = decodeFloat16( src[ 17 ] );\n\n\t\t\tdst[ 20 ] = decodeFloat16( src[ 25 ] );\n\t\t\tdst[ 21 ] = decodeFloat16( src[ 30 ] );\n\t\t\tdst[ 22 ] = decodeFloat16( src[ 41 ] );\n\t\t\tdst[ 23 ] = decodeFloat16( src[ 43 ] );\n\t\t\tdst[ 24 ] = decodeFloat16( src[ 9 ] );\n\t\t\tdst[ 25 ] = decodeFloat16( src[ 11 ] );\n\t\t\tdst[ 26 ] = decodeFloat16( src[ 18 ] );\n\t\t\tdst[ 27 ] = decodeFloat16( src[ 24 ] );\n\t\t\tdst[ 28 ] = decodeFloat16( src[ 31 ] );\n\t\t\tdst[ 29 ] = decodeFloat16( src[ 40 ] );\n\n\t\t\tdst[ 30 ] = decodeFloat16( src[ 44 ] );\n\t\t\tdst[ 31 ] = decodeFloat16( src[ 53 ] );\n\t\t\tdst[ 32 ] = decodeFloat16( src[ 10 ] );\n\t\t\tdst[ 33 ] = decodeFloat16( src[ 19 ] );\n\t\t\tdst[ 34 ] = decodeFloat16( src[ 23 ] );\n\t\t\tdst[ 35 ] = decodeFloat16( src[ 32 ] );\n\t\t\tdst[ 36 ] = decodeFloat16( src[ 39 ] );\n\t\t\tdst[ 37 ] = decodeFloat16( src[ 45 ] );\n\t\t\tdst[ 38 ] = decodeFloat16( src[ 52 ] );\n\t\t\tdst[ 39 ] = decodeFloat16( src[ 54 ] );\n\n\t\t\tdst[ 40 ] = decodeFloat16( src[ 20 ] );\n\t\t\tdst[ 41 ] = decodeFloat16( src[ 22 ] );\n\t\t\tdst[ 42 ] = decodeFloat16( src[ 33 ] );\n\t\t\tdst[ 43 ] = decodeFloat16( src[ 38 ] );\n\t\t\tdst[ 44 ] = decodeFloat16( src[ 46 ] );\n\t\t\tdst[ 45 ] = decodeFloat16( src[ 51 ] );\n\t\t\tdst[ 46 ] = decodeFloat16( src[ 55 ] );\n\t\t\tdst[ 47 ] = decodeFloat16( src[ 60 ] );\n\t\t\tdst[ 48 ] = decodeFloat16( src[ 21 ] );\n\t\t\tdst[ 49 ] = decodeFloat16( src[ 34 ] );\n\n\t\t\tdst[ 50 ] = decodeFloat16( src[ 37 ] );\n\t\t\tdst[ 51 ] = decodeFloat16( src[ 47 ] );\n\t\t\tdst[ 52 ] = decodeFloat16( src[ 50 ] );\n\t\t\tdst[ 53 ] = decodeFloat16( src[ 56 ] );\n\t\t\tdst[ 54 ] = decodeFloat16( src[ 59 ] );\n\t\t\tdst[ 55 ] = decodeFloat16( src[ 61 ] );\n\t\t\tdst[ 56 ] = decodeFloat16( src[ 35 ] );\n\t\t\tdst[ 57 ] = decodeFloat16( src[ 36 ] );\n\t\t\tdst[ 58 ] = decodeFloat16( src[ 48 ] );\n\t\t\tdst[ 59 ] = decodeFloat16( src[ 49 ] );\n\n\t\t\tdst[ 60 ] = decodeFloat16( src[ 57 ] );\n\t\t\tdst[ 61 ] = decodeFloat16( src[ 58 ] );\n\t\t\tdst[ 62 ] = decodeFloat16( src[ 62 ] );\n\t\t\tdst[ 63 ] = decodeFloat16( src[ 63 ] );\n\n\t\t}\n\n\t\tfunction dctInverse( data ) {\n\n\t\t\tconst a = 0.5 * Math.cos( 3.14159 / 4.0 );\n\t\t\tconst b = 0.5 * Math.cos( 3.14159 / 16.0 );\n\t\t\tconst c = 0.5 * Math.cos( 3.14159 / 8.0 );\n\t\t\tconst d = 0.5 * Math.cos( 3.0 * 3.14159 / 16.0 );\n\t\t\tconst e = 0.5 * Math.cos( 5.0 * 3.14159 / 16.0 );\n\t\t\tconst f = 0.5 * Math.cos( 3.0 * 3.14159 / 8.0 );\n\t\t\tconst g = 0.5 * Math.cos( 7.0 * 3.14159 / 16.0 );\n\n\t\t\tconst alpha = new Array( 4 );\n\t\t\tconst beta = new Array( 4 );\n\t\t\tconst theta = new Array( 4 );\n\t\t\tconst gamma = new Array( 4 );\n\n\t\t\tfor ( let row = 0; row < 8; ++ row ) {\n\n\t\t\t\tconst rowPtr = row * 8;\n\n\t\t\t\talpha[ 0 ] = c * data[ rowPtr + 2 ];\n\t\t\t\talpha[ 1 ] = f * data[ rowPtr + 2 ];\n\t\t\t\talpha[ 2 ] = c * data[ rowPtr + 6 ];\n\t\t\t\talpha[ 3 ] = f * data[ rowPtr + 6 ];\n\n\t\t\t\tbeta[ 0 ] = b * data[ rowPtr + 1 ] + d * data[ rowPtr + 3 ] + e * data[ rowPtr + 5 ] + g * data[ rowPtr + 7 ];\n\t\t\t\tbeta[ 1 ] = d * data[ rowPtr + 1 ] - g * data[ rowPtr + 3 ] - b * data[ rowPtr + 5 ] - e * data[ rowPtr + 7 ];\n\t\t\t\tbeta[ 2 ] = e * data[ rowPtr + 1 ] - b * data[ rowPtr + 3 ] + g * data[ rowPtr + 5 ] + d * data[ rowPtr + 7 ];\n\t\t\t\tbeta[ 3 ] = g * data[ rowPtr + 1 ] - e * data[ rowPtr + 3 ] + d * data[ rowPtr + 5 ] - b * data[ rowPtr + 7 ];\n\n\t\t\t\ttheta[ 0 ] = a * ( data[ rowPtr + 0 ] + data[ rowPtr + 4 ] );\n\t\t\t\ttheta[ 3 ] = a * ( data[ rowPtr + 0 ] - data[ rowPtr + 4 ] );\n\t\t\t\ttheta[ 1 ] = alpha[ 0 ] + alpha[ 3 ];\n\t\t\t\ttheta[ 2 ] = alpha[ 1 ] - alpha[ 2 ];\n\n\t\t\t\tgamma[ 0 ] = theta[ 0 ] + theta[ 1 ];\n\t\t\t\tgamma[ 1 ] = theta[ 3 ] + theta[ 2 ];\n\t\t\t\tgamma[ 2 ] = theta[ 3 ] - theta[ 2 ];\n\t\t\t\tgamma[ 3 ] = theta[ 0 ] - theta[ 1 ];\n\n\t\t\t\tdata[ rowPtr + 0 ] = gamma[ 0 ] + beta[ 0 ];\n\t\t\t\tdata[ rowPtr + 1 ] = gamma[ 1 ] + beta[ 1 ];\n\t\t\t\tdata[ rowPtr + 2 ] = gamma[ 2 ] + beta[ 2 ];\n\t\t\t\tdata[ rowPtr + 3 ] = gamma[ 3 ] + beta[ 3 ];\n\n\t\t\t\tdata[ rowPtr + 4 ] = gamma[ 3 ] - beta[ 3 ];\n\t\t\t\tdata[ rowPtr + 5 ] = gamma[ 2 ] - beta[ 2 ];\n\t\t\t\tdata[ rowPtr + 6 ] = gamma[ 1 ] - beta[ 1 ];\n\t\t\t\tdata[ rowPtr + 7 ] = gamma[ 0 ] - beta[ 0 ];\n\n\t\t\t}\n\n\t\t\tfor ( let column = 0; column < 8; ++ column ) {\n\n\t\t\t\talpha[ 0 ] = c * data[ 16 + column ];\n\t\t\t\talpha[ 1 ] = f * data[ 16 + column ];\n\t\t\t\talpha[ 2 ] = c * data[ 48 + column ];\n\t\t\t\talpha[ 3 ] = f * data[ 48 + column ];\n\n\t\t\t\tbeta[ 0 ] = b * data[ 8 + column ] + d * data[ 24 + column ] + e * data[ 40 + column ] + g * data[ 56 + column ];\n\t\t\t\tbeta[ 1 ] = d * data[ 8 + column ] - g * data[ 24 + column ] - b * data[ 40 + column ] - e * data[ 56 + column ];\n\t\t\t\tbeta[ 2 ] = e * data[ 8 + column ] - b * data[ 24 + column ] + g * data[ 40 + column ] + d * data[ 56 + column ];\n\t\t\t\tbeta[ 3 ] = g * data[ 8 + column ] - e * data[ 24 + column ] + d * data[ 40 + column ] - b * data[ 56 + column ];\n\n\t\t\t\ttheta[ 0 ] = a * ( data[ column ] + data[ 32 + column ] );\n\t\t\t\ttheta[ 3 ] = a * ( data[ column ] - data[ 32 + column ] );\n\n\t\t\t\ttheta[ 1 ] = alpha[ 0 ] + alpha[ 3 ];\n\t\t\t\ttheta[ 2 ] = alpha[ 1 ] - alpha[ 2 ];\n\n\t\t\t\tgamma[ 0 ] = theta[ 0 ] + theta[ 1 ];\n\t\t\t\tgamma[ 1 ] = theta[ 3 ] + theta[ 2 ];\n\t\t\t\tgamma[ 2 ] = theta[ 3 ] - theta[ 2 ];\n\t\t\t\tgamma[ 3 ] = theta[ 0 ] - theta[ 1 ];\n\n\t\t\t\tdata[ 0 + column ] = gamma[ 0 ] + beta[ 0 ];\n\t\t\t\tdata[ 8 + column ] = gamma[ 1 ] + beta[ 1 ];\n\t\t\t\tdata[ 16 + column ] = gamma[ 2 ] + beta[ 2 ];\n\t\t\t\tdata[ 24 + column ] = gamma[ 3 ] + beta[ 3 ];\n\n\t\t\t\tdata[ 32 + column ] = gamma[ 3 ] - beta[ 3 ];\n\t\t\t\tdata[ 40 + column ] = gamma[ 2 ] - beta[ 2 ];\n\t\t\t\tdata[ 48 + column ] = gamma[ 1 ] - beta[ 1 ];\n\t\t\t\tdata[ 56 + column ] = gamma[ 0 ] - beta[ 0 ];\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction csc709Inverse( data ) {\n\n\t\t\tfor ( let i = 0; i < 64; ++ i ) {\n\n\t\t\t\tconst y = data[ 0 ][ i ];\n\t\t\t\tconst cb = data[ 1 ][ i ];\n\t\t\t\tconst cr = data[ 2 ][ i ];\n\n\t\t\t\tdata[ 0 ][ i ] = y + 1.5747 * cr;\n\t\t\t\tdata[ 1 ][ i ] = y - 0.1873 * cb - 0.4682 * cr;\n\t\t\t\tdata[ 2 ][ i ] = y + 1.8556 * cb;\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction convertToHalf( src, dst, idx ) {\n\n\t\t\tfor ( let i = 0; i < 64; ++ i ) {\n\n\t\t\t\tdst[ idx + i ] = DataUtils.toHalfFloat( toLinear( src[ i ] ) );\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction toLinear( float ) {\n\n\t\t\tif ( float <= 1 ) {\n\n\t\t\t\treturn Math.sign( float ) * Math.pow( Math.abs( float ), 2.2 );\n\n\t\t\t} else {\n\n\t\t\t\treturn Math.sign( float ) * Math.pow( logBase, Math.abs( float ) - 1.0 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction uncompressRAW( info ) {\n\n\t\t\treturn new DataView( info.array.buffer, info.offset.value, info.size );\n\n\t\t}\n\n\t\tfunction uncompressRLE( info ) {\n\n\t\t\tconst compressed = info.viewer.buffer.slice( info.offset.value, info.offset.value + info.size );\n\n\t\t\tconst rawBuffer = new Uint8Array( decodeRunLength( compressed ) );\n\t\t\tconst tmpBuffer = new Uint8Array( rawBuffer.length );\n\n\t\t\tpredictor( rawBuffer ); // revert predictor\n\n\t\t\tinterleaveScalar( rawBuffer, tmpBuffer ); // interleave pixels\n\n\t\t\treturn new DataView( tmpBuffer.buffer );\n\n\t\t}\n\n\t\tfunction uncompressZIP( info ) {\n\n\t\t\tconst compressed = info.array.slice( info.offset.value, info.offset.value + info.size );\n\n\t\t\tconst rawBuffer = unzlibSync( compressed );\n\t\t\tconst tmpBuffer = new Uint8Array( rawBuffer.length );\n\n\t\t\tpredictor( rawBuffer ); // revert predictor\n\n\t\t\tinterleaveScalar( rawBuffer, tmpBuffer ); // interleave pixels\n\n\t\t\treturn new DataView( tmpBuffer.buffer );\n\n\t\t}\n\n\t\tfunction uncompressPIZ( info ) {\n\n\t\t\tconst inDataView = info.viewer;\n\t\t\tconst inOffset = { value: info.offset.value };\n\n\t\t\tconst outBuffer = new Uint16Array( info.columns * info.lines * ( info.inputChannels.length * info.type ) );\n\t\t\tconst bitmap = new Uint8Array( BITMAP_SIZE );\n\n\t\t\t// Setup channel info\n\t\t\tlet outBufferEnd = 0;\n\t\t\tconst pizChannelData = new Array( info.inputChannels.length );\n\t\t\tfor ( let i = 0, il = info.inputChannels.length; i < il; i ++ ) {\n\n\t\t\t\tpizChannelData[ i ] = {};\n\t\t\t\tpizChannelData[ i ][ 'start' ] = outBufferEnd;\n\t\t\t\tpizChannelData[ i ][ 'end' ] = pizChannelData[ i ][ 'start' ];\n\t\t\t\tpizChannelData[ i ][ 'nx' ] = info.columns;\n\t\t\t\tpizChannelData[ i ][ 'ny' ] = info.lines;\n\t\t\t\tpizChannelData[ i ][ 'size' ] = info.type;\n\n\t\t\t\toutBufferEnd += pizChannelData[ i ].nx * pizChannelData[ i ].ny * pizChannelData[ i ].size;\n\n\t\t\t}\n\n\t\t\t// Read range compression data\n\n\t\t\tconst minNonZero = parseUint16( inDataView, inOffset );\n\t\t\tconst maxNonZero = parseUint16( inDataView, inOffset );\n\n\t\t\tif ( maxNonZero >= BITMAP_SIZE ) {\n\n\t\t\t\tthrow new Error( 'Something is wrong with PIZ_COMPRESSION BITMAP_SIZE' );\n\n\t\t\t}\n\n\t\t\tif ( minNonZero <= maxNonZero ) {\n\n\t\t\t\tfor ( let i = 0; i < maxNonZero - minNonZero + 1; i ++ ) {\n\n\t\t\t\t\tbitmap[ i + minNonZero ] = parseUint8( inDataView, inOffset );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// Reverse LUT\n\t\t\tconst lut = new Uint16Array( USHORT_RANGE );\n\t\t\tconst maxValue = reverseLutFromBitmap( bitmap, lut );\n\n\t\t\tconst length = parseUint32( inDataView, inOffset );\n\n\t\t\t// Huffman decoding\n\t\t\thufUncompress( info.array, inDataView, inOffset, length, outBuffer, outBufferEnd );\n\n\t\t\t// Wavelet decoding\n\t\t\tfor ( let i = 0; i < info.inputChannels.length; ++ i ) {\n\n\t\t\t\tconst cd = pizChannelData[ i ];\n\n\t\t\t\tfor ( let j = 0; j < pizChannelData[ i ].size; ++ j ) {\n\n\t\t\t\t\twav2Decode(\n\t\t\t\t\t\toutBuffer,\n\t\t\t\t\t\tcd.start + j,\n\t\t\t\t\t\tcd.nx,\n\t\t\t\t\t\tcd.size,\n\t\t\t\t\t\tcd.ny,\n\t\t\t\t\t\tcd.nx * cd.size,\n\t\t\t\t\t\tmaxValue\n\t\t\t\t\t);\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// Expand the pixel data to their original range\n\t\t\tapplyLut( lut, outBuffer, outBufferEnd );\n\n\t\t\t// Rearrange the pixel data into the format expected by the caller.\n\t\t\tlet tmpOffset = 0;\n\t\t\tconst tmpBuffer = new Uint8Array( outBuffer.buffer.byteLength );\n\t\t\tfor ( let y = 0; y < info.lines; y ++ ) {\n\n\t\t\t\tfor ( let c = 0; c < info.inputChannels.length; c ++ ) {\n\n\t\t\t\t\tconst cd = pizChannelData[ c ];\n\n\t\t\t\t\tconst n = cd.nx * cd.size;\n\t\t\t\t\tconst cp = new Uint8Array( outBuffer.buffer, cd.end * INT16_SIZE, n * INT16_SIZE );\n\n\t\t\t\t\ttmpBuffer.set( cp, tmpOffset );\n\t\t\t\t\ttmpOffset += n * INT16_SIZE;\n\t\t\t\t\tcd.end += n;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn new DataView( tmpBuffer.buffer );\n\n\t\t}\n\n\t\tfunction uncompressPXR( info ) {\n\n\t\t\tconst compressed = info.array.slice( info.offset.value, info.offset.value + info.size );\n\n\t\t\tconst rawBuffer = unzlibSync( compressed );\n\n\t\t\tconst byteSize = info.inputChannels.length * info.lines * info.columns * info.totalBytes;\n\t\t\tconst tmpBuffer = new ArrayBuffer( byteSize );\n\t\t\tconst viewer = new DataView( tmpBuffer );\n\n\t\t\tlet tmpBufferEnd = 0;\n\t\t\tlet writePtr = 0;\n\t\t\tconst ptr = new Array( 4 );\n\n\t\t\tfor ( let y = 0; y < info.lines; y ++ ) {\n\n\t\t\t\tfor ( let c = 0; c < info.inputChannels.length; c ++ ) {\n\n\t\t\t\t\tlet pixel = 0;\n\n\t\t\t\t\tconst type = info.inputChannels[ c ].pixelType;\n\t\t\t\t\tswitch ( type ) {\n\n\t\t\t\t\t\tcase 1:\n\n\t\t\t\t\t\t\tptr[ 0 ] = tmpBufferEnd;\n\t\t\t\t\t\t\tptr[ 1 ] = ptr[ 0 ] + info.columns;\n\t\t\t\t\t\t\ttmpBufferEnd = ptr[ 1 ] + info.columns;\n\n\t\t\t\t\t\t\tfor ( let j = 0; j < info.columns; ++ j ) {\n\n\t\t\t\t\t\t\t\tconst diff = ( rawBuffer[ ptr[ 0 ] ++ ] << 8 ) | rawBuffer[ ptr[ 1 ] ++ ];\n\n\t\t\t\t\t\t\t\tpixel += diff;\n\n\t\t\t\t\t\t\t\tviewer.setUint16( writePtr, pixel, true );\n\t\t\t\t\t\t\t\twritePtr += 2;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 2:\n\n\t\t\t\t\t\t\tptr[ 0 ] = tmpBufferEnd;\n\t\t\t\t\t\t\tptr[ 1 ] = ptr[ 0 ] + info.columns;\n\t\t\t\t\t\t\tptr[ 2 ] = ptr[ 1 ] + info.columns;\n\t\t\t\t\t\t\ttmpBufferEnd = ptr[ 2 ] + info.columns;\n\n\t\t\t\t\t\t\tfor ( let j = 0; j < info.columns; ++ j ) {\n\n\t\t\t\t\t\t\t\tconst diff = ( rawBuffer[ ptr[ 0 ] ++ ] << 24 ) | ( rawBuffer[ ptr[ 1 ] ++ ] << 16 ) | ( rawBuffer[ ptr[ 2 ] ++ ] << 8 );\n\n\t\t\t\t\t\t\t\tpixel += diff;\n\n\t\t\t\t\t\t\t\tviewer.setUint32( writePtr, pixel, true );\n\t\t\t\t\t\t\t\twritePtr += 4;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn viewer;\n\n\t\t}\n\n\t\tfunction uncompressDWA( info ) {\n\n\t\t\tconst inDataView = info.viewer;\n\t\t\tconst inOffset = { value: info.offset.value };\n\t\t\tconst outBuffer = new Uint8Array( info.columns * info.lines * ( info.inputChannels.length * info.type * INT16_SIZE ) );\n\n\t\t\t// Read compression header information\n\t\t\tconst dwaHeader = {\n\n\t\t\t\tversion: parseInt64( inDataView, inOffset ),\n\t\t\t\tunknownUncompressedSize: parseInt64( inDataView, inOffset ),\n\t\t\t\tunknownCompressedSize: parseInt64( inDataView, inOffset ),\n\t\t\t\tacCompressedSize: parseInt64( inDataView, inOffset ),\n\t\t\t\tdcCompressedSize: parseInt64( inDataView, inOffset ),\n\t\t\t\trleCompressedSize: parseInt64( inDataView, inOffset ),\n\t\t\t\trleUncompressedSize: parseInt64( inDataView, inOffset ),\n\t\t\t\trleRawSize: parseInt64( inDataView, inOffset ),\n\t\t\t\ttotalAcUncompressedCount: parseInt64( inDataView, inOffset ),\n\t\t\t\ttotalDcUncompressedCount: parseInt64( inDataView, inOffset ),\n\t\t\t\tacCompression: parseInt64( inDataView, inOffset )\n\n\t\t\t};\n\n\t\t\tif ( dwaHeader.version < 2 )\n\t\t\t\tthrow new Error( 'EXRLoader.parse: ' + EXRHeader.compression + ' version ' + dwaHeader.version + ' is unsupported' );\n\n\t\t\t// Read channel ruleset information\n\t\t\tconst channelRules = new Array();\n\t\t\tlet ruleSize = parseUint16( inDataView, inOffset ) - INT16_SIZE;\n\n\t\t\twhile ( ruleSize > 0 ) {\n\n\t\t\t\tconst name = parseNullTerminatedString( inDataView.buffer, inOffset );\n\t\t\t\tconst value = parseUint8( inDataView, inOffset );\n\t\t\t\tconst compression = ( value >> 2 ) & 3;\n\t\t\t\tconst csc = ( value >> 4 ) - 1;\n\t\t\t\tconst index = new Int8Array( [ csc ] )[ 0 ];\n\t\t\t\tconst type = parseUint8( inDataView, inOffset );\n\n\t\t\t\tchannelRules.push( {\n\t\t\t\t\tname: name,\n\t\t\t\t\tindex: index,\n\t\t\t\t\ttype: type,\n\t\t\t\t\tcompression: compression,\n\t\t\t\t} );\n\n\t\t\t\truleSize -= name.length + 3;\n\n\t\t\t}\n\n\t\t\t// Classify channels\n\t\t\tconst channels = EXRHeader.channels;\n\t\t\tconst channelData = new Array( info.inputChannels.length );\n\n\t\t\tfor ( let i = 0; i < info.inputChannels.length; ++ i ) {\n\n\t\t\t\tconst cd = channelData[ i ] = {};\n\t\t\t\tconst channel = channels[ i ];\n\n\t\t\t\tcd.name = channel.name;\n\t\t\t\tcd.compression = UNKNOWN;\n\t\t\t\tcd.decoded = false;\n\t\t\t\tcd.type = channel.pixelType;\n\t\t\t\tcd.pLinear = channel.pLinear;\n\t\t\t\tcd.width = info.columns;\n\t\t\t\tcd.height = info.lines;\n\n\t\t\t}\n\n\t\t\tconst cscSet = {\n\t\t\t\tidx: new Array( 3 )\n\t\t\t};\n\n\t\t\tfor ( let offset = 0; offset < info.inputChannels.length; ++ offset ) {\n\n\t\t\t\tconst cd = channelData[ offset ];\n\n\t\t\t\tfor ( let i = 0; i < channelRules.length; ++ i ) {\n\n\t\t\t\t\tconst rule = channelRules[ i ];\n\n\t\t\t\t\tif ( cd.name == rule.name ) {\n\n\t\t\t\t\t\tcd.compression = rule.compression;\n\n\t\t\t\t\t\tif ( rule.index >= 0 ) {\n\n\t\t\t\t\t\t\tcscSet.idx[ rule.index ] = offset;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tcd.offset = offset;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tlet acBuffer, dcBuffer, rleBuffer;\n\n\t\t\t// Read DCT - AC component data\n\t\t\tif ( dwaHeader.acCompressedSize > 0 ) {\n\n\t\t\t\tswitch ( dwaHeader.acCompression ) {\n\n\t\t\t\t\tcase STATIC_HUFFMAN:\n\n\t\t\t\t\t\tacBuffer = new Uint16Array( dwaHeader.totalAcUncompressedCount );\n\t\t\t\t\t\thufUncompress( info.array, inDataView, inOffset, dwaHeader.acCompressedSize, acBuffer, dwaHeader.totalAcUncompressedCount );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase DEFLATE:\n\n\t\t\t\t\t\tconst compressed = info.array.slice( inOffset.value, inOffset.value + dwaHeader.totalAcUncompressedCount );\n\t\t\t\t\t\tconst data = unzlibSync( compressed );\n\t\t\t\t\t\tacBuffer = new Uint16Array( data.buffer );\n\t\t\t\t\t\tinOffset.value += dwaHeader.totalAcUncompressedCount;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\n\t\t\t}\n\n\t\t\t// Read DCT - DC component data\n\t\t\tif ( dwaHeader.dcCompressedSize > 0 ) {\n\n\t\t\t\tconst zlibInfo = {\n\t\t\t\t\tarray: info.array,\n\t\t\t\t\toffset: inOffset,\n\t\t\t\t\tsize: dwaHeader.dcCompressedSize\n\t\t\t\t};\n\t\t\t\tdcBuffer = new Uint16Array( uncompressZIP( zlibInfo ).buffer );\n\t\t\t\tinOffset.value += dwaHeader.dcCompressedSize;\n\n\t\t\t}\n\n\t\t\t// Read RLE compressed data\n\t\t\tif ( dwaHeader.rleRawSize > 0 ) {\n\n\t\t\t\tconst compressed = info.array.slice( inOffset.value, inOffset.value + dwaHeader.rleCompressedSize );\n\t\t\t\tconst data = unzlibSync( compressed );\n\t\t\t\trleBuffer = decodeRunLength( data.buffer );\n\n\t\t\t\tinOffset.value += dwaHeader.rleCompressedSize;\n\n\t\t\t}\n\n\t\t\t// Prepare outbuffer data offset\n\t\t\tlet outBufferEnd = 0;\n\t\t\tconst rowOffsets = new Array( channelData.length );\n\t\t\tfor ( let i = 0; i < rowOffsets.length; ++ i ) {\n\n\t\t\t\trowOffsets[ i ] = new Array();\n\n\t\t\t}\n\n\t\t\tfor ( let y = 0; y < info.lines; ++ y ) {\n\n\t\t\t\tfor ( let chan = 0; chan < channelData.length; ++ chan ) {\n\n\t\t\t\t\trowOffsets[ chan ].push( outBufferEnd );\n\t\t\t\t\toutBufferEnd += channelData[ chan ].width * info.type * INT16_SIZE;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// Lossy DCT decode RGB channels\n\t\t\tlossyDctDecode( cscSet, rowOffsets, channelData, acBuffer, dcBuffer, outBuffer );\n\n\t\t\t// Decode other channels\n\t\t\tfor ( let i = 0; i < channelData.length; ++ i ) {\n\n\t\t\t\tconst cd = channelData[ i ];\n\n\t\t\t\tif ( cd.decoded ) continue;\n\n\t\t\t\tswitch ( cd.compression ) {\n\n\t\t\t\t\tcase RLE:\n\n\t\t\t\t\t\tlet row = 0;\n\t\t\t\t\t\tlet rleOffset = 0;\n\n\t\t\t\t\t\tfor ( let y = 0; y < info.lines; ++ y ) {\n\n\t\t\t\t\t\t\tlet rowOffsetBytes = rowOffsets[ i ][ row ];\n\n\t\t\t\t\t\t\tfor ( let x = 0; x < cd.width; ++ x ) {\n\n\t\t\t\t\t\t\t\tfor ( let byte = 0; byte < INT16_SIZE * cd.type; ++ byte ) {\n\n\t\t\t\t\t\t\t\t\toutBuffer[ rowOffsetBytes ++ ] = rleBuffer[ rleOffset + byte * cd.width * cd.height ];\n\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\trleOffset ++;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\trow ++;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase LOSSY_DCT: // skip\n\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tthrow new Error( 'EXRLoader.parse: unsupported channel compression' );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn new DataView( outBuffer.buffer );\n\n\t\t}\n\n\t\tfunction parseNullTerminatedString( buffer, offset ) {\n\n\t\t\tconst uintBuffer = new Uint8Array( buffer );\n\t\t\tlet endOffset = 0;\n\n\t\t\twhile ( uintBuffer[ offset.value + endOffset ] != 0 ) {\n\n\t\t\t\tendOffset += 1;\n\n\t\t\t}\n\n\t\t\tconst stringValue = new TextDecoder().decode(\n\t\t\t\tuintBuffer.slice( offset.value, offset.value + endOffset )\n\t\t\t);\n\n\t\t\toffset.value = offset.value + endOffset + 1;\n\n\t\t\treturn stringValue;\n\n\t\t}\n\n\t\tfunction parseFixedLengthString( buffer, offset, size ) {\n\n\t\t\tconst stringValue = new TextDecoder().decode(\n\t\t\t\tnew Uint8Array( buffer ).slice( offset.value, offset.value + size )\n\t\t\t);\n\n\t\t\toffset.value = offset.value + size;\n\n\t\t\treturn stringValue;\n\n\t\t}\n\n\t\tfunction parseRational( dataView, offset ) {\n\n\t\t\tconst x = parseInt32( dataView, offset );\n\t\t\tconst y = parseUint32( dataView, offset );\n\n\t\t\treturn [ x, y ];\n\n\t\t}\n\n\t\tfunction parseTimecode( dataView, offset ) {\n\n\t\t\tconst x = parseUint32( dataView, offset );\n\t\t\tconst y = parseUint32( dataView, offset );\n\n\t\t\treturn [ x, y ];\n\n\t\t}\n\n\t\tfunction parseInt32( dataView, offset ) {\n\n\t\t\tconst Int32 = dataView.getInt32( offset.value, true );\n\n\t\t\toffset.value = offset.value + INT32_SIZE;\n\n\t\t\treturn Int32;\n\n\t\t}\n\n\t\tfunction parseUint32( dataView, offset ) {\n\n\t\t\tconst Uint32 = dataView.getUint32( offset.value, true );\n\n\t\t\toffset.value = offset.value + INT32_SIZE;\n\n\t\t\treturn Uint32;\n\n\t\t}\n\n\t\tfunction parseUint8Array( uInt8Array, offset ) {\n\n\t\t\tconst Uint8 = uInt8Array[ offset.value ];\n\n\t\t\toffset.value = offset.value + INT8_SIZE;\n\n\t\t\treturn Uint8;\n\n\t\t}\n\n\t\tfunction parseUint8( dataView, offset ) {\n\n\t\t\tconst Uint8 = dataView.getUint8( offset.value );\n\n\t\t\toffset.value = offset.value + INT8_SIZE;\n\n\t\t\treturn Uint8;\n\n\t\t}\n\n\t\tconst parseInt64 = function ( dataView, offset ) {\n\n\t\t\tlet int;\n\n\t\t\tif ( 'getBigInt64' in DataView.prototype ) {\n\n\t\t\t\tint = Number( dataView.getBigInt64( offset.value, true ) );\n\n\t\t\t} else {\n\n\t\t\t\tint = dataView.getUint32( offset.value + 4, true ) + Number( dataView.getUint32( offset.value, true ) << 32 );\n\n\t\t\t}\n\n\t\t\toffset.value += ULONG_SIZE;\n\n\t\t\treturn int;\n\n\t\t};\n\n\t\tfunction parseFloat32( dataView, offset ) {\n\n\t\t\tconst float = dataView.getFloat32( offset.value, true );\n\n\t\t\toffset.value += FLOAT32_SIZE;\n\n\t\t\treturn float;\n\n\t\t}\n\n\t\tfunction decodeFloat32( dataView, offset ) {\n\n\t\t\treturn DataUtils.toHalfFloat( parseFloat32( dataView, offset ) );\n\n\t\t}\n\n\t\t// https://stackoverflow.com/questions/5678432/decompressing-half-precision-floats-in-javascript\n\t\tfunction decodeFloat16( binary ) {\n\n\t\t\tconst exponent = ( binary & 0x7C00 ) >> 10,\n\t\t\t\tfraction = binary & 0x03FF;\n\n\t\t\treturn ( binary >> 15 ? -1 : 1 ) * (\n\t\t\t\texponent ?\n\t\t\t\t\t(\n\t\t\t\t\t\texponent === 0x1F ?\n\t\t\t\t\t\t\tfraction ? NaN : Infinity :\n\t\t\t\t\t\t\tMath.pow( 2, exponent - 15 ) * ( 1 + fraction / 0x400 )\n\t\t\t\t\t) :\n\t\t\t\t\t6.103515625e-5 * ( fraction / 0x400 )\n\t\t\t);\n\n\t\t}\n\n\t\tfunction parseUint16( dataView, offset ) {\n\n\t\t\tconst Uint16 = dataView.getUint16( offset.value, true );\n\n\t\t\toffset.value += INT16_SIZE;\n\n\t\t\treturn Uint16;\n\n\t\t}\n\n\t\tfunction parseFloat16( buffer, offset ) {\n\n\t\t\treturn decodeFloat16( parseUint16( buffer, offset ) );\n\n\t\t}\n\n\t\tfunction parseChlist( dataView, buffer, offset, size ) {\n\n\t\t\tconst startOffset = offset.value;\n\t\t\tconst channels = [];\n\n\t\t\twhile ( offset.value < ( startOffset + size - 1 ) ) {\n\n\t\t\t\tconst name = parseNullTerminatedString( buffer, offset );\n\t\t\t\tconst pixelType = parseInt32( dataView, offset );\n\t\t\t\tconst pLinear = parseUint8( dataView, offset );\n\t\t\t\toffset.value += 3; // reserved, three chars\n\t\t\t\tconst xSampling = parseInt32( dataView, offset );\n\t\t\t\tconst ySampling = parseInt32( dataView, offset );\n\n\t\t\t\tchannels.push( {\n\t\t\t\t\tname: name,\n\t\t\t\t\tpixelType: pixelType,\n\t\t\t\t\tpLinear: pLinear,\n\t\t\t\t\txSampling: xSampling,\n\t\t\t\t\tySampling: ySampling\n\t\t\t\t} );\n\n\t\t\t}\n\n\t\t\toffset.value += 1;\n\n\t\t\treturn channels;\n\n\t\t}\n\n\t\tfunction parseChromaticities( dataView, offset ) {\n\n\t\t\tconst redX = parseFloat32( dataView, offset );\n\t\t\tconst redY = parseFloat32( dataView, offset );\n\t\t\tconst greenX = parseFloat32( dataView, offset );\n\t\t\tconst greenY = parseFloat32( dataView, offset );\n\t\t\tconst blueX = parseFloat32( dataView, offset );\n\t\t\tconst blueY = parseFloat32( dataView, offset );\n\t\t\tconst whiteX = parseFloat32( dataView, offset );\n\t\t\tconst whiteY = parseFloat32( dataView, offset );\n\n\t\t\treturn { redX: redX, redY: redY, greenX: greenX, greenY: greenY, blueX: blueX, blueY: blueY, whiteX: whiteX, whiteY: whiteY };\n\n\t\t}\n\n\t\tfunction parseCompression( dataView, offset ) {\n\n\t\t\tconst compressionCodes = [\n\t\t\t\t'NO_COMPRESSION',\n\t\t\t\t'RLE_COMPRESSION',\n\t\t\t\t'ZIPS_COMPRESSION',\n\t\t\t\t'ZIP_COMPRESSION',\n\t\t\t\t'PIZ_COMPRESSION',\n\t\t\t\t'PXR24_COMPRESSION',\n\t\t\t\t'B44_COMPRESSION',\n\t\t\t\t'B44A_COMPRESSION',\n\t\t\t\t'DWAA_COMPRESSION',\n\t\t\t\t'DWAB_COMPRESSION'\n\t\t\t];\n\n\t\t\tconst compression = parseUint8( dataView, offset );\n\n\t\t\treturn compressionCodes[ compression ];\n\n\t\t}\n\n\t\tfunction parseBox2i( dataView, offset ) {\n\n\t\t\tconst xMin = parseInt32( dataView, offset );\n\t\t\tconst yMin = parseInt32( dataView, offset );\n\t\t\tconst xMax = parseInt32( dataView, offset );\n\t\t\tconst yMax = parseInt32( dataView, offset );\n\n\t\t\treturn { xMin: xMin, yMin: yMin, xMax: xMax, yMax: yMax };\n\n\t\t}\n\n\t\tfunction parseLineOrder( dataView, offset ) {\n\n\t\t\tconst lineOrders = [\n\t\t\t\t'INCREASING_Y',\n\t\t\t\t'DECREASING_Y',\n\t\t\t\t'RANDOM_Y',\n\t\t\t];\n\n\t\t\tconst lineOrder = parseUint8( dataView, offset );\n\n\t\t\treturn lineOrders[ lineOrder ];\n\n\t\t}\n\n\t\tfunction parseEnvmap( dataView, offset ) {\n\n\t\t\tconst envmaps = [\n\t\t\t\t'ENVMAP_LATLONG',\n\t\t\t\t'ENVMAP_CUBE'\n\t\t\t];\n\n\t\t\tconst envmap = parseUint8( dataView, offset );\n\n\t\t\treturn envmaps[ envmap ];\n\n\t\t}\n\n\t\tfunction parseTiledesc( dataView, offset ) {\n\n\t\t\tconst levelModes = [\n\t\t\t\t'ONE_LEVEL',\n\t\t\t\t'MIPMAP_LEVELS',\n\t\t\t\t'RIPMAP_LEVELS',\n\t\t\t];\n\n\t\t\tconst roundingModes = [\n\t\t\t\t'ROUND_DOWN',\n\t\t\t\t'ROUND_UP',\n\t\t\t];\n\n\t\t\tconst xSize = parseUint32( dataView, offset );\n\t\t\tconst ySize = parseUint32( dataView, offset );\n\t\t\tconst modes = parseUint8( dataView, offset );\n\n\t\t\treturn {\n\t\t\t\txSize: xSize,\n\t\t\t\tySize: ySize,\n\t\t\t\tlevelMode: levelModes[ modes & 0xf ],\n\t\t\t\troundingMode: roundingModes[ modes >> 4 ]\n\t\t\t};\n\n\t\t}\n\n\t\tfunction parseV2f( dataView, offset ) {\n\n\t\t\tconst x = parseFloat32( dataView, offset );\n\t\t\tconst y = parseFloat32( dataView, offset );\n\n\t\t\treturn [ x, y ];\n\n\t\t}\n\n\t\tfunction parseV3f( dataView, offset ) {\n\n\t\t\tconst x = parseFloat32( dataView, offset );\n\t\t\tconst y = parseFloat32( dataView, offset );\n\t\t\tconst z = parseFloat32( dataView, offset );\n\n\t\t\treturn [ x, y, z ];\n\n\t\t}\n\n\t\tfunction parseValue( dataView, buffer, offset, type, size ) {\n\n\t\t\tif ( type === 'string' || type === 'stringvector' || type === 'iccProfile' ) {\n\n\t\t\t\treturn parseFixedLengthString( buffer, offset, size );\n\n\t\t\t} else if ( type === 'chlist' ) {\n\n\t\t\t\treturn parseChlist( dataView, buffer, offset, size );\n\n\t\t\t} else if ( type === 'chromaticities' ) {\n\n\t\t\t\treturn parseChromaticities( dataView, offset );\n\n\t\t\t} else if ( type === 'compression' ) {\n\n\t\t\t\treturn parseCompression( dataView, offset );\n\n\t\t\t} else if ( type === 'box2i' ) {\n\n\t\t\t\treturn parseBox2i( dataView, offset );\n\n\t\t\t} else if ( type === 'envmap' ) {\n\n\t\t\t\treturn parseEnvmap( dataView, offset );\n\n\t\t\t} else if ( type === 'tiledesc' ) {\n\n\t\t\t\treturn parseTiledesc( dataView, offset );\n\n\t\t\t} else if ( type === 'lineOrder' ) {\n\n\t\t\t\treturn parseLineOrder( dataView, offset );\n\n\t\t\t} else if ( type === 'float' ) {\n\n\t\t\t\treturn parseFloat32( dataView, offset );\n\n\t\t\t} else if ( type === 'v2f' ) {\n\n\t\t\t\treturn parseV2f( dataView, offset );\n\n\t\t\t} else if ( type === 'v3f' ) {\n\n\t\t\t\treturn parseV3f( dataView, offset );\n\n\t\t\t} else if ( type === 'int' ) {\n\n\t\t\t\treturn parseInt32( dataView, offset );\n\n\t\t\t} else if ( type === 'rational' ) {\n\n\t\t\t\treturn parseRational( dataView, offset );\n\n\t\t\t} else if ( type === 'timecode' ) {\n\n\t\t\t\treturn parseTimecode( dataView, offset );\n\n\t\t\t} else if ( type === 'preview' ) {\n\n\t\t\t\toffset.value += size;\n\t\t\t\treturn 'skipped';\n\n\t\t\t} else {\n\n\t\t\t\toffset.value += size;\n\t\t\t\treturn undefined;\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction roundLog2( x, mode ) {\n\n\t\t\tconst log2 = Math.log2( x );\n\t\t\treturn mode == 'ROUND_DOWN' ? Math.floor( log2 ) : Math.ceil( log2 );\n\n\t\t}\n\n\t\tfunction calculateTileLevels( tiledesc, w, h ) {\n\n\t\t\tlet num = 0;\n\n\t\t\tswitch ( tiledesc.levelMode ) {\n\n\t\t\t\tcase 'ONE_LEVEL':\n\t\t\t\t\tnum = 1;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'MIPMAP_LEVELS':\n\t\t\t\t\tnum = roundLog2( Math.max( w, h ), tiledesc.roundingMode ) + 1;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'RIPMAP_LEVELS':\n\t\t\t\t\tthrow new Error( 'THREE.EXRLoader: RIPMAP_LEVELS tiles currently unsupported.' );\n\n\t\t\t}\n\n\t\t\treturn num;\n\n\t\t}\n\n\t\tfunction calculateTiles( count, dataSize, size, roundingMode ) {\n\n\t\t\tconst tiles = new Array( count );\n\n\t\t\tfor ( let i = 0; i < count; i ++ ) {\n\n\t\t\t\tconst b = ( 1 << i );\n\t\t\t\tlet s = ( dataSize / b ) | 0;\n\n\t\t\t\tif ( roundingMode == 'ROUND_UP' && s * b < dataSize ) s += 1;\n\n\t\t\t\tconst l = Math.max( s, 1 );\n\n\t\t\t\ttiles[ i ] = ( ( l + size - 1 ) / size ) | 0;\n\n\t\t\t}\n\n\t\t\treturn tiles;\n\n\t\t}\n\n\t\tfunction parseTiles() {\n\n\t\t\tconst EXRDecoder = this;\n\t\t\tconst offset = EXRDecoder.offset;\n\t\t\tconst tmpOffset = { value: 0 };\n\n\t\t\tfor ( let tile = 0; tile < EXRDecoder.tileCount; tile ++ ) {\n\n\t\t\t\tconst tileX = parseInt32( EXRDecoder.viewer, offset );\n\t\t\t\tconst tileY = parseInt32( EXRDecoder.viewer, offset );\n\t\t\t\toffset.value += 8; // skip levels - only parsing top-level\n\t\t\t\tEXRDecoder.size = parseUint32( EXRDecoder.viewer, offset );\n\n\t\t\t\tconst startX = tileX * EXRDecoder.blockWidth;\n\t\t\t\tconst startY = tileY * EXRDecoder.blockHeight;\n\t\t\t\tEXRDecoder.columns = ( startX + EXRDecoder.blockWidth > EXRDecoder.width ) ? EXRDecoder.width - startX : EXRDecoder.blockWidth;\n\t\t\t\tEXRDecoder.lines = ( startY + EXRDecoder.blockHeight > EXRDecoder.height ) ? EXRDecoder.height - startY : EXRDecoder.blockHeight;\n\n\t\t\t\tconst bytesBlockLine = EXRDecoder.columns * EXRDecoder.totalBytes;\n\t\t\t\tconst isCompressed = EXRDecoder.size < EXRDecoder.lines * bytesBlockLine;\n\t\t\t\tconst viewer = isCompressed ? EXRDecoder.uncompress( EXRDecoder ) : uncompressRAW( EXRDecoder );\n\n\t\t\t\toffset.value += EXRDecoder.size;\n\n\t\t\t\tfor ( let line = 0; line < EXRDecoder.lines; line ++ ) {\n\n\t\t\t\t\tconst lineOffset = line * EXRDecoder.columns * EXRDecoder.totalBytes;\n\n\t\t\t\t\tfor ( let channelID = 0; channelID < EXRDecoder.inputChannels.length; channelID ++ ) {\n\n\t\t\t\t\t\tconst name = EXRHeader.channels[ channelID ].name;\n\t\t\t\t\t\tconst lOff = EXRDecoder.channelByteOffsets[ name ] * EXRDecoder.columns;\n\t\t\t\t\t\tconst cOff = EXRDecoder.decodeChannels[ name ];\n\n\t\t\t\t\t\tif ( cOff === undefined ) continue;\n\n\t\t\t\t\t\ttmpOffset.value = lineOffset + lOff;\n\t\t\t\t\t\tconst outLineOffset = ( EXRDecoder.height - ( 1 + startY + line ) ) * EXRDecoder.outLineWidth;\n\n\t\t\t\t\t\tfor ( let x = 0; x < EXRDecoder.columns; x ++ ) {\n\n\t\t\t\t\t\t\tconst outIndex = outLineOffset + ( x + startX ) * EXRDecoder.outputChannels + cOff;\n\t\t\t\t\t\t\tEXRDecoder.byteArray[ outIndex ] = EXRDecoder.getter( viewer, tmpOffset );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction parseScanline() {\n\n\t\t\tconst EXRDecoder = this;\n\t\t\tconst offset = EXRDecoder.offset;\n\t\t\tconst tmpOffset = { value: 0 };\n\n\t\t\tfor ( let scanlineBlockIdx = 0; scanlineBlockIdx < EXRDecoder.height / EXRDecoder.blockHeight; scanlineBlockIdx ++ ) {\n\n\t\t\t\tconst line = parseInt32( EXRDecoder.viewer, offset ) - EXRHeader.dataWindow.yMin; // line_no\n\t\t\t\tEXRDecoder.size = parseUint32( EXRDecoder.viewer, offset ); // data_len\n\t\t\t\tEXRDecoder.lines = ( ( line + EXRDecoder.blockHeight > EXRDecoder.height ) ? ( EXRDecoder.height - line ) : EXRDecoder.blockHeight );\n\n\t\t\t\tconst bytesPerLine = EXRDecoder.columns * EXRDecoder.totalBytes;\n\t\t\t\tconst isCompressed = EXRDecoder.size < EXRDecoder.lines * bytesPerLine;\n\t\t\t\tconst viewer = isCompressed ? EXRDecoder.uncompress( EXRDecoder ) : uncompressRAW( EXRDecoder );\n\n\t\t\t\toffset.value += EXRDecoder.size;\n\n\t\t\t\tfor ( let line_y = 0; line_y < EXRDecoder.blockHeight; line_y ++ ) {\n\n\t\t\t\t\tconst scan_y = scanlineBlockIdx * EXRDecoder.blockHeight;\n\t\t\t\t\tconst true_y = line_y + EXRDecoder.scanOrder( scan_y );\n\t\t\t\t\tif ( true_y >= EXRDecoder.height ) continue;\n\n\t\t\t\t\tconst lineOffset = line_y * bytesPerLine;\n\t\t\t\t\tconst outLineOffset = ( EXRDecoder.height - 1 - true_y ) * EXRDecoder.outLineWidth;\n\n\t\t\t\t\tfor ( let channelID = 0; channelID < EXRDecoder.inputChannels.length; channelID ++ ) {\n\n\t\t\t\t\t\tconst name = EXRHeader.channels[ channelID ].name;\n\t\t\t\t\t\tconst lOff = EXRDecoder.channelByteOffsets[ name ] * EXRDecoder.columns;\n\t\t\t\t\t\tconst cOff = EXRDecoder.decodeChannels[ name ];\n\n\t\t\t\t\t\tif ( cOff === undefined ) continue;\n\n\t\t\t\t\t\ttmpOffset.value = lineOffset + lOff;\n\n\t\t\t\t\t\tfor ( let x = 0; x < EXRDecoder.columns; x ++ ) {\n\n\t\t\t\t\t\t\tconst outIndex = outLineOffset + x * EXRDecoder.outputChannels + cOff;\n\t\t\t\t\t\t\tEXRDecoder.byteArray[ outIndex ] = EXRDecoder.getter( viewer, tmpOffset );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction parseHeader( dataView, buffer, offset ) {\n\n\t\t\tconst EXRHeader = {};\n\n\t\t\tif ( dataView.getUint32( 0, true ) != 20000630 ) { // magic\n\n\t\t\t\tthrow new Error( 'THREE.EXRLoader: Provided file doesn\\'t appear to be in OpenEXR format.' );\n\n\t\t\t}\n\n\t\t\tEXRHeader.version = dataView.getUint8( 4 );\n\n\t\t\tconst spec = dataView.getUint8( 5 ); // fullMask\n\n\t\t\tEXRHeader.spec = {\n\t\t\t\tsingleTile: !! ( spec & 2 ),\n\t\t\t\tlongName: !! ( spec & 4 ),\n\t\t\t\tdeepFormat: !! ( spec & 8 ),\n\t\t\t\tmultiPart: !! ( spec & 16 ),\n\t\t\t};\n\n\t\t\t// start of header\n\n\t\t\toffset.value = 8; // start at 8 - after pre-amble\n\n\t\t\tlet keepReading = true;\n\n\t\t\twhile ( keepReading ) {\n\n\t\t\t\tconst attributeName = parseNullTerminatedString( buffer, offset );\n\n\t\t\t\tif ( attributeName == 0 ) {\n\n\t\t\t\t\tkeepReading = false;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconst attributeType = parseNullTerminatedString( buffer, offset );\n\t\t\t\t\tconst attributeSize = parseUint32( dataView, offset );\n\t\t\t\t\tconst attributeValue = parseValue( dataView, buffer, offset, attributeType, attributeSize );\n\n\t\t\t\t\tif ( attributeValue === undefined ) {\n\n\t\t\t\t\t\tconsole.warn( `THREE.EXRLoader: Skipped unknown header attribute type \\'${attributeType}\\'.` );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tEXRHeader[ attributeName ] = attributeValue;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( ( spec & -7 ) != 0 ) { // unsupported deep-image, multi-part\n\n\t\t\t\tconsole.error( 'THREE.EXRHeader:', EXRHeader );\n\t\t\t\tthrow new Error( 'THREE.EXRLoader: Provided file is currently unsupported.' );\n\n\t\t\t}\n\n\t\t\treturn EXRHeader;\n\n\t\t}\n\n\t\tfunction setupDecoder( EXRHeader, dataView, uInt8Array, offset, outputType ) {\n\n\t\t\tconst EXRDecoder = {\n\t\t\t\tsize: 0,\n\t\t\t\tviewer: dataView,\n\t\t\t\tarray: uInt8Array,\n\t\t\t\toffset: offset,\n\t\t\t\twidth: EXRHeader.dataWindow.xMax - EXRHeader.dataWindow.xMin + 1,\n\t\t\t\theight: EXRHeader.dataWindow.yMax - EXRHeader.dataWindow.yMin + 1,\n\t\t\t\tinputChannels: EXRHeader.channels,\n\t\t\t\tchannelByteOffsets: {},\n\t\t\t\tscanOrder: null,\n\t\t\t\ttotalBytes: null,\n\t\t\t\tcolumns: null,\n\t\t\t\tlines: null,\n\t\t\t\ttype: null,\n\t\t\t\tuncompress: null,\n\t\t\t\tgetter: null,\n\t\t\t\tformat: null,\n\t\t\t\tcolorSpace: LinearSRGBColorSpace,\n\t\t\t};\n\n\t\t\tswitch ( EXRHeader.compression ) {\n\n\t\t\t\tcase 'NO_COMPRESSION':\n\t\t\t\t\tEXRDecoder.blockHeight = 1;\n\t\t\t\t\tEXRDecoder.uncompress = uncompressRAW;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'RLE_COMPRESSION':\n\t\t\t\t\tEXRDecoder.blockHeight = 1;\n\t\t\t\t\tEXRDecoder.uncompress = uncompressRLE;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'ZIPS_COMPRESSION':\n\t\t\t\t\tEXRDecoder.blockHeight = 1;\n\t\t\t\t\tEXRDecoder.uncompress = uncompressZIP;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'ZIP_COMPRESSION':\n\t\t\t\t\tEXRDecoder.blockHeight = 16;\n\t\t\t\t\tEXRDecoder.uncompress = uncompressZIP;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'PIZ_COMPRESSION':\n\t\t\t\t\tEXRDecoder.blockHeight = 32;\n\t\t\t\t\tEXRDecoder.uncompress = uncompressPIZ;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'PXR24_COMPRESSION':\n\t\t\t\t\tEXRDecoder.blockHeight = 16;\n\t\t\t\t\tEXRDecoder.uncompress = uncompressPXR;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'DWAA_COMPRESSION':\n\t\t\t\t\tEXRDecoder.blockHeight = 32;\n\t\t\t\t\tEXRDecoder.uncompress = uncompressDWA;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'DWAB_COMPRESSION':\n\t\t\t\t\tEXRDecoder.blockHeight = 256;\n\t\t\t\t\tEXRDecoder.uncompress = uncompressDWA;\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\tthrow new Error( 'EXRLoader.parse: ' + EXRHeader.compression + ' is unsupported' );\n\n\t\t\t}\n\n\t\t\tconst channels = {};\n\t\t\tfor ( const channel of EXRHeader.channels ) {\n\n\t\t\t\tswitch ( channel.name ) {\n\n\t\t\t\t\tcase 'Y':\n\t\t\t\t\tcase 'R':\n\t\t\t\t\tcase 'G':\n\t\t\t\t\tcase 'B':\n\t\t\t\t\tcase 'A':\n\t\t\t\t\t\tchannels[ channel.name ] = true;\n\t\t\t\t\t\tEXRDecoder.type = channel.pixelType;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// RGB images will be converted to RGBA format, preventing software emulation in select devices.\n\t\t\tlet fillAlpha = false;\n\n\t\t\tif ( channels.R && channels.G && channels.B ) {\n\n\t\t\t\tfillAlpha = ! channels.A;\n\t\t\t\tEXRDecoder.outputChannels = 4;\n\t\t\t\tEXRDecoder.decodeChannels = { R: 0, G: 1, B: 2, A: 3 };\n\n\t\t\t} else if ( channels.Y ) {\n\n\t\t\t\tEXRDecoder.outputChannels = 1;\n\t\t\t\tEXRDecoder.decodeChannels = { Y: 0 };\n\n\t\t\t} else {\n\n\t\t\t\tthrow new Error( 'EXRLoader.parse: file contains unsupported data channels.' );\n\n\t\t\t}\n\n\t\t\tif ( EXRDecoder.type == 1 ) {\n\n\t\t\t\t// half\n\t\t\t\tswitch ( outputType ) {\n\n\t\t\t\t\tcase FloatType:\n\t\t\t\t\t\tEXRDecoder.getter = parseFloat16;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase HalfFloatType:\n\t\t\t\t\t\tEXRDecoder.getter = parseUint16;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t} else if ( EXRDecoder.type == 2 ) {\n\n\t\t\t\t// float\n\t\t\t\tswitch ( outputType ) {\n\n\t\t\t\t\tcase FloatType:\n\t\t\t\t\t\tEXRDecoder.getter = parseFloat32;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase HalfFloatType:\n\t\t\t\t\t\tEXRDecoder.getter = decodeFloat32;\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tthrow new Error( 'EXRLoader.parse: unsupported pixelType ' + EXRDecoder.type + ' for ' + EXRHeader.compression + '.' );\n\n\t\t\t}\n\n\t\t\tEXRDecoder.columns = EXRDecoder.width;\n\t\t\tconst size = EXRDecoder.width * EXRDecoder.height * EXRDecoder.outputChannels;\n\n\t\t\tswitch ( outputType ) {\n\n\t\t\t\tcase FloatType:\n\t\t\t\t\tEXRDecoder.byteArray = new Float32Array( size );\n\n\t\t\t\t\t// Fill initially with 1s for the alpha value if the texture is not RGBA, RGB values will be overwritten\n\t\t\t\t\tif ( fillAlpha )\n\t\t\t\t\t\tEXRDecoder.byteArray.fill( 1, 0, size );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase HalfFloatType:\n\t\t\t\t\tEXRDecoder.byteArray = new Uint16Array( size );\n\n\t\t\t\t\tif ( fillAlpha )\n\t\t\t\t\t\tEXRDecoder.byteArray.fill( 0x3C00, 0, size ); // Uint16Array holds half float data, 0x3C00 is 1\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\tconsole.error( 'THREE.EXRLoader: unsupported type: ', outputType );\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t\tlet byteOffset = 0;\n\t\t\tfor ( const channel of EXRHeader.channels ) {\n\n\t\t\t\tif ( EXRDecoder.decodeChannels[ channel.name ] !== undefined ) {\n\n\t\t\t\t\tEXRDecoder.channelByteOffsets[ channel.name ] = byteOffset;\n\n\t\t\t\t}\n\n\t\t\t\tbyteOffset += channel.pixelType * 2;\n\n\t\t\t}\n\n\t\t\tEXRDecoder.totalBytes = byteOffset;\n\t\t\tEXRDecoder.outLineWidth = EXRDecoder.width * EXRDecoder.outputChannels;\n\n\t\t\tif ( EXRHeader.lineOrder === 'INCREASING_Y' ) {\n\n\t\t\t\tEXRDecoder.scanOrder = ( y ) => y;\n\n\t\t\t} else {\n\n\t\t\t\tEXRDecoder.scanOrder = ( y ) => EXRDecoder.height - 1 - y;\n\n\t\t\t}\n\n\t\t\tif ( EXRDecoder.outputChannels == 4 ) {\n\n\t\t\t\tEXRDecoder.format = RGBAFormat;\n\t\t\t\tEXRDecoder.colorSpace = LinearSRGBColorSpace;\n\n\t\t\t} else {\n\n\t\t\t\tEXRDecoder.format = RedFormat;\n\t\t\t\tEXRDecoder.colorSpace = NoColorSpace;\n\n\t\t\t}\n\n\t\t\tif ( EXRHeader.spec.singleTile ) {\n\n\t\t\t\tEXRDecoder.blockHeight = EXRHeader.tiles.ySize;\n\t\t\t\tEXRDecoder.blockWidth = EXRHeader.tiles.xSize;\n\n\t\t\t\tconst numXLevels = calculateTileLevels( EXRHeader.tiles, EXRDecoder.width, EXRDecoder.height );\n\t\t\t\t// const numYLevels = calculateTileLevels( EXRHeader.tiles, EXRDecoder.width, EXRDecoder.height );\n\n\t\t\t\tconst numXTiles = calculateTiles( numXLevels, EXRDecoder.width, EXRHeader.tiles.xSize, EXRHeader.tiles.roundingMode );\n\t\t\t\tconst numYTiles = calculateTiles( numXLevels, EXRDecoder.height, EXRHeader.tiles.ySize, EXRHeader.tiles.roundingMode );\n\n\t\t\t\tEXRDecoder.tileCount = numXTiles[ 0 ] * numYTiles[ 0 ];\n\n\t\t\t\tfor ( let l = 0; l < numXLevels; l ++ )\n\t\t\t\t\tfor ( let y = 0; y < numYTiles[ l ]; y ++ )\n\t\t\t\t\t\tfor ( let x = 0; x < numXTiles[ l ]; x ++ )\n\t\t\t\t\t\t\tparseInt64( dataView, offset ); // tileOffset\n\n\t\t\t\tEXRDecoder.decode = parseTiles.bind( EXRDecoder );\n\n\t\t\t} else {\n\n\t\t\t\tEXRDecoder.blockWidth = EXRDecoder.width;\n\t\t\t\tconst blockCount = Math.ceil( EXRDecoder.height / EXRDecoder.blockHeight );\n\n\t\t\t\tfor ( let i = 0; i < blockCount; i ++ )\n\t\t\t\t\tparseInt64( dataView, offset ); // scanlineOffset\n\n\t\t\t\tEXRDecoder.decode = parseScanline.bind( EXRDecoder );\n\n\t\t\t}\n\n\t\t\treturn EXRDecoder;\n\n\t\t}\n\n\t\t// start parsing file [START]\n\t\tconst offset = { value: 0 };\n\t\tconst bufferDataView = new DataView( buffer );\n\t\tconst uInt8Array = new Uint8Array( buffer );\n\n\t\t// get header information and validate format.\n\t\tconst EXRHeader = parseHeader( bufferDataView, buffer, offset );\n\n\t\t// get input compression information and prepare decoding.\n\t\tconst EXRDecoder = setupDecoder( EXRHeader, bufferDataView, uInt8Array, offset, this.type );\n\n\t\t// parse input data\n\t\tEXRDecoder.decode();\n\n\t\treturn {\n\t\t\theader: EXRHeader,\n\t\t\twidth: EXRDecoder.width,\n\t\t\theight: EXRDecoder.height,\n\t\t\tdata: EXRDecoder.byteArray,\n\t\t\tformat: EXRDecoder.format,\n\t\t\tcolorSpace: EXRDecoder.colorSpace,\n\t\t\ttype: this.type,\n\t\t};\n\n\t}\n\n\tsetDataType( value ) {\n\n\t\tthis.type = value;\n\t\treturn this;\n\n\t}\n\n\tload( url, onLoad, onProgress, onError ) {\n\n\t\tfunction onLoadCallback( texture, texData ) {\n\n\t\t\ttexture.colorSpace = texData.colorSpace;\n\t\t\ttexture.minFilter = LinearFilter;\n\t\t\ttexture.magFilter = LinearFilter;\n\t\t\ttexture.generateMipmaps = false;\n\t\t\ttexture.flipY = false;\n\n\t\t\tif ( onLoad ) onLoad( texture, texData );\n\n\t\t}\n\n\t\treturn super.load( url, onLoadCallback, onProgress, onError );\n\n\t}\n\n}\n\n/**\n * @author Deepkolos / https://github.com/deepkolos\n */\n\nclass WorkerPool {\n\n\tconstructor( pool = 4 ) {\n\n\t\tthis.pool = pool;\n\t\tthis.queue = [];\n\t\tthis.workers = [];\n\t\tthis.workersResolve = [];\n\t\tthis.workerStatus = 0;\n\n\t}\n\n\t_initWorker( workerId ) {\n\n\t\tif ( ! this.workers[ workerId ] ) {\n\n\t\t\tconst worker = this.workerCreator();\n\t\t\tworker.addEventListener( 'message', this._onMessage.bind( this, workerId ) );\n\t\t\tthis.workers[ workerId ] = worker;\n\n\t\t}\n\n\t}\n\n\t_getIdleWorker() {\n\n\t\tfor ( let i = 0; i < this.pool; i ++ )\n\t\t\tif ( ! ( this.workerStatus & ( 1 << i ) ) ) return i;\n\n\t\treturn -1;\n\n\t}\n\n\t_onMessage( workerId, msg ) {\n\n\t\tconst resolve = this.workersResolve[ workerId ];\n\t\tresolve && resolve( msg );\n\n\t\tif ( this.queue.length ) {\n\n\t\t\tconst { resolve, msg, transfer } = this.queue.shift();\n\t\t\tthis.workersResolve[ workerId ] = resolve;\n\t\t\tthis.workers[ workerId ].postMessage( msg, transfer );\n\n\t\t} else {\n\n\t\t\tthis.workerStatus ^= 1 << workerId;\n\n\t\t}\n\n\t}\n\n\tsetWorkerCreator( workerCreator ) {\n\n\t\tthis.workerCreator = workerCreator;\n\n\t}\n\n\tsetWorkerLimit( pool ) {\n\n\t\tthis.pool = pool;\n\n\t}\n\n\tpostMessage( msg, transfer ) {\n\n\t\treturn new Promise( ( resolve ) => {\n\n\t\t\tconst workerId = this._getIdleWorker();\n\n\t\t\tif ( workerId !== -1 ) {\n\n\t\t\t\tthis._initWorker( workerId );\n\t\t\t\tthis.workerStatus |= 1 << workerId;\n\t\t\t\tthis.workersResolve[ workerId ] = resolve;\n\t\t\t\tthis.workers[ workerId ].postMessage( msg, transfer );\n\n\t\t\t} else {\n\n\t\t\t\tthis.queue.push( { resolve, msg, transfer } );\n\n\t\t\t}\n\n\t\t} );\n\n\t}\n\n\tdispose() {\n\n\t\tthis.workers.forEach( ( worker ) => worker.terminate() );\n\t\tthis.workersResolve.length = 0;\n\t\tthis.workers.length = 0;\n\t\tthis.queue.length = 0;\n\t\tthis.workerStatus = 0;\n\n\t}\n\n}\n\nconst t=0,n=2,p=1,x=2,E=0,F=1,X=10,nt=0,ct=9,gt=15,yt=16,dt=22,Ot=37,Ft=43,$t=76,se=83,pe=97,xe=100,de=103,Ae=109,Sn=165,In=166,_i=1000066e3;class Si{constructor(){this.vkFormat=0,this.typeSize=1,this.pixelWidth=0,this.pixelHeight=0,this.pixelDepth=0,this.layerCount=0,this.faceCount=1,this.supercompressionScheme=0,this.levels=[],this.dataFormatDescriptor=[{vendorId:0,descriptorType:0,descriptorBlockSize:0,versionNumber:2,colorModel:0,colorPrimaries:1,transferFunction:2,flags:0,texelBlockDimension:[0,0,0,0],bytesPlane:[0,0,0,0,0,0,0,0],samples:[]}],this.keyValue={},this.globalData=null;}}class Ii{constructor(t,e,n,i){this._dataView=new DataView(t.buffer,t.byteOffset+e,n),this._littleEndian=i,this._offset=0;}_nextUint8(){const t=this._dataView.getUint8(this._offset);return this._offset+=1,t}_nextUint16(){const t=this._dataView.getUint16(this._offset,this._littleEndian);return this._offset+=2,t}_nextUint32(){const t=this._dataView.getUint32(this._offset,this._littleEndian);return this._offset+=4,t}_nextUint64(){const t=this._dataView.getUint32(this._offset,this._littleEndian)+2**32*this._dataView.getUint32(this._offset+4,this._littleEndian);return this._offset+=8,t}_nextInt32(){const t=this._dataView.getInt32(this._offset,this._littleEndian);return this._offset+=4,t}_skip(t){return this._offset+=t,this}_scan(t,e=0){const n=this._offset;let i=0;for(;this._dataView.getUint8(this._offset)!==e&&i<t;)i++,this._offset++;return i<t&&this._offset++,new Uint8Array(this._dataView.buffer,this._dataView.byteOffset+n,i)}}const Ti=[171,75,84,88,32,50,48,187,13,10,26,10];function Ei(t){return \"undefined\"!=typeof TextDecoder?(new TextDecoder).decode(t):Buffer.from(t).toString(\"utf8\")}function Pi(t){const e=new Uint8Array(t.buffer,t.byteOffset,Ti.length);if(e[0]!==Ti[0]||e[1]!==Ti[1]||e[2]!==Ti[2]||e[3]!==Ti[3]||e[4]!==Ti[4]||e[5]!==Ti[5]||e[6]!==Ti[6]||e[7]!==Ti[7]||e[8]!==Ti[8]||e[9]!==Ti[9]||e[10]!==Ti[10]||e[11]!==Ti[11])throw new Error(\"Missing KTX 2.0 identifier.\");const n=new Si,i=17*Uint32Array.BYTES_PER_ELEMENT,s=new Ii(t,Ti.length,i,true);n.vkFormat=s._nextUint32(),n.typeSize=s._nextUint32(),n.pixelWidth=s._nextUint32(),n.pixelHeight=s._nextUint32(),n.pixelDepth=s._nextUint32(),n.layerCount=s._nextUint32(),n.faceCount=s._nextUint32();const a=s._nextUint32();n.supercompressionScheme=s._nextUint32();const r=s._nextUint32(),o=s._nextUint32(),l=s._nextUint32(),f=s._nextUint32(),U=s._nextUint64(),c=s._nextUint64(),h=new Ii(t,Ti.length+i,3*a*8,true);for(let e=0;e<a;e++)n.levels.push({levelData:new Uint8Array(t.buffer,t.byteOffset+h._nextUint64(),h._nextUint64()),uncompressedByteLength:h._nextUint64()});const _=new Ii(t,r,o,true),p={vendorId:_._skip(4)._nextUint16(),descriptorType:_._nextUint16(),versionNumber:_._nextUint16(),descriptorBlockSize:_._nextUint16(),colorModel:_._nextUint8(),colorPrimaries:_._nextUint8(),transferFunction:_._nextUint8(),flags:_._nextUint8(),texelBlockDimension:[_._nextUint8(),_._nextUint8(),_._nextUint8(),_._nextUint8()],bytesPlane:[_._nextUint8(),_._nextUint8(),_._nextUint8(),_._nextUint8(),_._nextUint8(),_._nextUint8(),_._nextUint8(),_._nextUint8()],samples:[]},g=(p.descriptorBlockSize/4-6)/4;for(let t=0;t<g;t++){const e={bitOffset:_._nextUint16(),bitLength:_._nextUint8(),channelType:_._nextUint8(),samplePosition:[_._nextUint8(),_._nextUint8(),_._nextUint8(),_._nextUint8()],sampleLower:-Infinity,sampleUpper:Infinity};64&e.channelType?(e.sampleLower=_._nextInt32(),e.sampleUpper=_._nextInt32()):(e.sampleLower=_._nextUint32(),e.sampleUpper=_._nextUint32()),p.samples[t]=e;}n.dataFormatDescriptor.length=0,n.dataFormatDescriptor.push(p);const y=new Ii(t,l,f,true);for(;y._offset<f;){const t=y._nextUint32(),e=y._scan(t),i=Ei(e),s=y._scan(t-e.byteLength);n.keyValue[i]=i.match(/^ktx/i)?Ei(s):s,y._offset%4&&y._skip(4-y._offset%4);}if(c<=0)return n;const x=new Ii(t,U,c,true),u=x._nextUint16(),b=x._nextUint16(),d=x._nextUint32(),m=x._nextUint32(),w=x._nextUint32(),D=x._nextUint32(),B=[];for(let t=0;t<a;t++)B.push({imageFlags:x._nextUint32(),rgbSliceByteOffset:x._nextUint32(),rgbSliceByteLength:x._nextUint32(),alphaSliceByteOffset:x._nextUint32(),alphaSliceByteLength:x._nextUint32()});const L=U+x._offset,A=L+d,k=A+m,v=k+w,S=new Uint8Array(t.buffer,t.byteOffset+L,d),I=new Uint8Array(t.buffer,t.byteOffset+A,m),O=new Uint8Array(t.buffer,t.byteOffset+k,w),T=new Uint8Array(t.buffer,t.byteOffset+v,D);return n.globalData={endpointCount:u,selectorCount:b,imageDescs:B,endpointsData:S,selectorsData:I,tablesData:O,extendedData:T},n}\n\nlet A,I,B;const g={env:{emscripten_notify_memory_growth:function(A){B=new Uint8Array(I.exports.memory.buffer);}}};class Q{init(){return A||(A=\"undefined\"!=typeof fetch?fetch(\"data:application/wasm;base64,\"+C).then(A=>A.arrayBuffer()).then(A=>WebAssembly.instantiate(A,g)).then(this._init):WebAssembly.instantiate(Buffer.from(C,\"base64\"),g).then(this._init),A)}_init(A){I=A.instance,g.env.emscripten_notify_memory_growth(0);}decode(A,g=0){if(!I)throw new Error(\"ZSTDDecoder: Await .init() before decoding.\");const Q=A.byteLength,C=I.exports.malloc(Q);B.set(A,C),g=g||Number(I.exports.ZSTD_findDecompressedSize(C,Q));const E=I.exports.malloc(g),i=I.exports.ZSTD_decompress(E,g,C,Q),D=B.slice(E,E+i);return I.exports.free(C),I.exports.free(E),D}}const C=\"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IAMNACAEQQNxBEADQCACRQ0FIAAgAkF/aiICaiIDIAEgAmotAAA6AAAgA0EDcQ0ACwsgAkEDTQ0AA0AgACACQXxqIgJqIAEgAmooAgA2AgAgAkEDSw0ACwsgAkUNAgNAIAAgAkF/aiICaiABIAJqLQAAOgAAIAINAAsMAgsgAkEDTQ0AIAIhBANAIAMgASgCADYCACABQQRqIQEgA0EEaiEDIARBfGoiBEEDSw0ACyACQQNxIQILIAJFDQADQCADIAEtAAA6AAAgA0EBaiEDIAFBAWohASACQX9qIgINAAsLIAAL8wICAn8BfgJAIAJFDQAgACACaiIDQX9qIAE6AAAgACABOgAAIAJBA0kNACADQX5qIAE6AAAgACABOgABIANBfWogAToAACAAIAE6AAIgAkEHSQ0AIANBfGogAToAACAAIAE6AAMgAkEJSQ0AIABBACAAa0EDcSIEaiIDIAFB/wFxQYGChAhsIgE2AgAgAyACIARrQXxxIgRqIgJBfGogATYCACAEQQlJDQAgAyABNgIIIAMgATYCBCACQXhqIAE2AgAgAkF0aiABNgIAIARBGUkNACADIAE2AhggAyABNgIUIAMgATYCECADIAE2AgwgAkFwaiABNgIAIAJBbGogATYCACACQWhqIAE2AgAgAkFkaiABNgIAIAQgA0EEcUEYciIEayICQSBJDQAgAa0iBUIghiAFhCEFIAMgBGohAQNAIAEgBTcDGCABIAU3AxAgASAFNwMIIAEgBTcDACABQSBqIQEgAkFgaiICQR9LDQALCyAACy8BAn8gACgCBCAAKAIAQQJ0aiICLQACIQMgACACLwEAIAEgAi0AAxAIajYCACADCy8BAn8gACgCBCAAKAIAQQJ0aiICLQACIQMgACACLwEAIAEgAi0AAxAFajYCACADCx8AIAAgASACKAIEEAg2AgAgARAEGiAAIAJBCGo2AgQLCAAgAGdBH3MLugUBDX8jAEEQayIKJAACfyAEQQNNBEAgCkEANgIMIApBDGogAyAEEAsaIAAgASACIApBDGpBBBAVIgBBbCAAEAMbIAAgACAESxsMAQsgAEEAIAEoAgBBAXRBAmoQECENQVQgAygAACIGQQ9xIgBBCksNABogAiAAQQVqNgIAIAMgBGoiAkF8aiEMIAJBeWohDiACQXtqIRAgAEEGaiELQQQh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ASIDNgLE4AEgACgCvOABIQQgACABNgK84AEgACABIAJqNgK44AEgACABIAQgA2tqNgLA4AELpgEBAX8gACAAKALs4QEQFjYCyOABIABCADcD+OABIABCADcDuOABIABBwOABakIANwMAIABBqNAAaiIBQYyAgOAANgIAIABBADYCmOIBIABCADcDiOEBIABCAzcDgOEBIABBrNABakHgEikCADcCACAAQbTQAWpB6BIoAgA2AgAgACABNgIMIAAgAEGYIGo2AgggACAAQaAwajYCBCAAIABBEGo2AgALYQEBf0G4fyEDAkAgAUEDSQ0AIAIgABAhIgFBA3YiADYCCCACIAFBAXE2AgQgAiABQQF2QQNxIgM2AgACQCADQX9qIgFBAksNAAJAIAFBAWsOAgEAAgtBbA8LIAAhAwsgAwsMACAAIAEgAkEAEC4LiAQCA38CfiADEBYhBCAAQQBBKBAQIQAgBCACSwRAIAQPCyABRQRAQX8PCwJAAkAgA0EBRg0AIAEoAAAiBkGo6r5pRg0AQXYhAyAGQXBxQdDUtMIBRw0BQQghAyACQQhJDQEgAEEAQSgQECEAIAEoAAQhASAAQQE2AhQgACABrTcDAEEADwsgASACIAMQLyIDIAJLDQAgACADNgIYQXIhAyABIARqIgVBf2otAAAiAkEIcQ0AIAJBIHEiBkUEQEFwIQMgBS0AACIFQacBSw0BIAVBB3GtQgEgBUEDdkEKaq2GIgdCA4h+IAd8IQggBEEBaiEECyACQQZ2IQMgAkECdiEFAkAgAkEDcUF/aiICQQJLBEBBACECDAELAkACQAJAIAJBAWsOAgECAAsgASAEai0AACECIARBAWohBAwCCyABIARqLwAAIQIgBEECaiEEDAELIAEgBGooAAAhAiAEQQRqIQQLIAVBAXEhBQJ+AkACQAJAIANBf2oiA0ECTQRAIANBAWsOAgIDAQtCfyAGRQ0DGiABIARqMQAADAMLIAEgBGovAACtQoACfAwCCyABIARqKAAArQwBCyABIARqKQAACyEHIAAgBTYCICAAIAI2AhwgACAHNwMAQQAhAyAAQQA2AhQgACAHIAggBhsiBzcDCCAAIAdCgIAIIAdCgIAIVBs+AhALIAMLWwEBf0G4fyEDIAIQFiICIAFNBH8gACACakF/ai0AACIAQQNxQQJ0QaAeaigCACACaiAAQQZ2IgFBAnRBsB5qKAIAaiAAQSBxIgBFaiABRSAAQQV2cWoFQbh/CwsdACAAKAKQ4gEQWiAAQQA2AqDiASAAQgA3A5DiAQu1AwEFfyMAQZACayIKJABBuH8hBgJAIAVFDQAgBCwAACIIQf8BcSEHAkAgCEF/TARAIAdBgn9qQQF2IgggBU8NAkFsIQYgB0GBf2oiBUGAAk8NAiAEQQFqIQdBACEGA0AgBiAFTwRAIAUhBiAIIQcMAwUgACAGaiAHIAZBAXZqIgQtAABBBHY6AAAgACAGQQFyaiAELQAAQQ9xOgAAIAZBAmohBgwBCwAACwALIAcgBU8NASAAIARBAWogByAKEFMiBhADDQELIAYhBEEAIQYgAUEAQTQQECEJQQAhBQNAIAQgBkcEQCAAIAZqIggtAAAiAUELSwRAQWwhBgwDBSAJIAFBAnRqIgEgASgCAEEBajYCACAGQQFqIQZBASAILQAAdEEBdSAFaiEFDAILAAsLQWwhBiAFRQ0AIAUQFEEBaiIBQQxLDQAgAyABNgIAQQFBASABdCAFayIDEBQiAXQgA0cNACAAIARqIAFBAWoiADoAACAJIABBAnRqIgAgACgCAEEBajYCACAJKAIEIgBBAkkgAEEBcXINACACIARBAWo2AgAgB0EBaiEGCyAKQZACaiQAIAYLxhEBDH8jAEHwAGsiBSQAQWwhCwJAIANBCkkNACACLwAAIQogAi8AAiEJIAIvAAQhByAFQQhqIAQQDgJAIAMgByAJIApqakEGaiIMSQ0AIAUtAAohCCAFQdgAaiACQQZqIgIgChAGIgsQAw0BIAVBQGsgAiAKaiICIAkQBiILEAMNASAFQShqIAIgCWoiAiAHEAYiCxADDQEgBUEQaiACIAdqIAMgDGsQBiILEAMNASAAIAFqIg9BfWohECAEQQRqIQZBASELIAAgAUEDakECdiIDaiIMIANqIgIgA2oiDiEDIAIhBCAMIQcDQCALIAMgEElxBEAgACAGIAVB2ABqIAgQAkECdGoiCS8BADsAACAFQdgAaiAJLQACEAEgCS0AAyELIAcgBiAFQUBrIAgQAkECdGoiCS8BADsAACAFQUBrIAktAAIQASAJLQADIQogBCAGIAVBKGogCBACQQJ0aiIJLwEAOwAAIAVBKGogCS0AAhABIAktAAMhCSADIAYgBUEQaiAIEAJBAnRqIg0vAQA7AAAgBUEQaiANLQACEAEgDS0AAyENIAAgC2oiCyAGIAVB2ABqIAgQAkECdGoiAC8BADsAACAFQdgAaiAALQACEAEgAC0AAyEAIAcgCmoiCiAGIAVBQGsgCBACQQJ0aiIHLwEAOwAAIAVBQGsgBy0AAhABIActAAMhByAEIAlqIgkgBiAFQShqIAgQAkECdGoiBC8BADsAACAFQShqIAQtAAIQASAELQADIQQgAyANaiIDIAYgBUEQaiAIEAJBAnRqIg0vAQA7AAAgBUEQaiANLQACEAEgACALaiEAIAcgCmohByAEIAlqIQQgAyANLQADaiEDIAVB2ABqEA0gBUFAaxANciAFQShqEA1yIAVBEGoQDXJFIQsMAQsLIAQgDksgByACS3INAEFsIQsgACAMSw0BIAxBfWohCQNAQQAgACAJSSAFQdgAahAEGwRAIAAgBiAFQdgAaiAIEAJBAnRqIgovAQA7AAAgBUHYAGogCi0AAhABIAAgCi0AA2oiACAGIAVB2ABqIAgQAkECdGoiCi8BADsAACAFQdgAaiAKLQACEAEgACAKLQADaiEADAEFIAxBfmohCgNAIAVB2ABqEAQgACAKS3JFBEAgACAGIAVB2ABqIAgQAkECdGoiCS8BADsAACAFQdgAaiAJLQACEAEgACAJLQADaiEADAELCwNAIAAgCk0EQCAAIAYgBUHYAGogCBACQQJ0aiIJLwEAOwAAIAVB2ABqIAktAAIQASAAIAktAANqIQAMAQsLAkAgACAMTw0AIAAgBiAFQdgAaiAIEAIiAEECdGoiDC0AADoAACAMLQADQQFGBEAgBUHYAGogDC0AAhABDAELIAUoAlxBH0sNACAFQdgAaiAGIABBAnRqLQACEAEgBSgCXEEhSQ0AIAVBIDYCXAsgAkF9aiEMA0BBACAHIAxJIAVBQGsQBBsEQCAHIAYgBUFAayAIEAJBAnRqIgAvAQA7AAAgBUFAayAALQACEAEgByAALQADaiIAIAYgBUFAayAIEAJBAnRqIgcvAQA7AAAgBUFAayAHLQACEAEgACAHLQADaiEHDAEFIAJBfmohDANAIAVBQGsQBCAHIAxLckUEQCAHIAYgBUFAayAIEAJBAnRqIgAvAQA7AAAgBUFAayAALQACEAEgByAALQADaiEHDAELCwNAIAcgDE0EQCAHIAYgBUFAayAIEAJBAnRqIgAvAQA7AAAgBUFAayAALQACEAEgByAALQADaiEHDAELCwJAIAcgAk8NACAHIAYgBUFAayAIEAIiAEECdGoiAi0AADoAACACLQADQQFGBEAgBUFAayACLQACEAEMAQsgBSgCREEfSw0AIAVBQGsgBiAAQQJ0ai0AAhABIAUoAkRBIUkNACAFQSA2AkQLIA5BfWohAgNAQQAgBCACSSAFQShqEAQbBEAgBCAGIAVBKGogCBACQQJ0aiIALwEAOwAAIAVBKGogAC0AAhABIAQgAC0AA2oiACAGIAVBKGogCBACQQJ0aiIELwEAOwAAIAVBKGogBC0AAhABIAAgBC0AA2ohBAwBBSAOQX5qIQIDQCAFQShqEAQgBCACS3JFBEAgBCAGIAVBKGogCBACQQJ0aiIALwEAOwAAIAVBKGogAC0AAhABIAQgAC0AA2ohBAwBCwsDQCAEIAJNBEAgBCAGIAVBKGogCBACQQJ0aiIALwEAOwAAIAVBKGogAC0AAhABIAQgAC0AA2ohBAwBCwsCQCAEIA5PDQAgBCAGIAVBKGogCBACIgBBAnRqIgItAAA6AAAgAi0AA0EBRgRAIAVBKGogAi0AAhABDAELIAUoAixBH0sNACAFQShqIAYgAEECdGotAAIQASAFKAIsQSFJDQAgBUEgNgIsCwNAQQAgAyAQSSAFQRBqEAQbBEAgAyAGIAVBEGogCBACQQJ0aiIALwEAOwAAIAVBEGogAC0AAhABIAMgAC0AA2oiACAGIAVBEGogCBACQQJ0aiICLwEAOwAAIAVBEGogAi0AAhABIAAgAi0AA2ohAwwBBSAPQX5qIQIDQCAFQRBqEAQgAyACS3JFBEAgAyAGIAVBEGogCBACQQJ0aiIALwEAOwAAIAVBEGogAC0AAhABIAMgAC0AA2ohAwwBCwsDQCADIAJNBEAgAyAGIAVBEGogCBACQQJ0aiIALwEAOwAAIAVBEGogAC0AAhABIAMgAC0AA2ohAwwBCwsCQCADIA9PDQAgAyAGIAVBEGogCBACIgBBAnRqIgItAAA6AAAgAi0AA0EBRgRAIAVBEGogAi0AAhABDAELIAUoAhRBH0sNACAFQRBqIAYgAEECdGotAAIQASAFKAIUQSFJDQAgBUEgNgIUCyABQWwgBUHYAGoQCiAFQUBrEApxIAVBKGoQCnEgBUEQahAKcRshCwwJCwAACwALAAALAAsAAAsACwAACwALQWwhCwsgBUHwAGokACALC7UEAQ5/IwBBEGsiBiQAIAZBBGogABAOQVQhBQJAIARB3AtJDQAgBi0ABCEHIANB8ARqQQBB7AAQECEIIAdBDEsNACADQdwJaiIJIAggBkEIaiAGQQxqIAEgAhAxIhAQA0UEQCAGKAIMIgQgB0sNASADQdwFaiEPIANBpAVqIREgAEEEaiESIANBqAVqIQEgBCEFA0AgBSICQX9qIQUgCCACQQJ0aigCAEUNAAsgAkEBaiEOQQEhBQNAIAUgDk9FBEAgCCAFQQJ0IgtqKAIAIQwgASALaiAKNgIAIAVBAWohBSAKIAxqIQoMAQsLIAEgCjYCAEEAIQUgBigCCCELA0AgBSALRkUEQCABIAUgCWotAAAiDEECdGoiDSANKAIAIg1BAWo2AgAgDyANQQF0aiINIAw6AAEgDSAFOgAAIAVBAWohBQwBCwtBACEBIANBADYCqAUgBEF/cyAHaiEJQQEhBQNAIAUgDk9FBEAgCCAFQQJ0IgtqKAIAIQwgAyALaiABNgIAIAwgBSAJanQgAWohASAFQQFqIQUMAQsLIAcgBEEBaiIBIAJrIgRrQQFqIQgDQEEBIQUgBCAIT0UEQANAIAUgDk9FBEAgBUECdCIJIAMgBEE0bGpqIAMgCWooAgAgBHY2AgAgBUEBaiEFDAELCyAEQQFqIQQMAQsLIBIgByAPIAogESADIAIgARBkIAZBAToABSAGIAc6AAYgACAGKAIENgIACyAQIQULIAZBEGokACAFC8ENAQt/IwBB8ABrIgUkAEFsIQkCQCADQQpJDQAgAi8AACEKIAIvAAIhDCACLwAEIQYgBUEIaiAEEA4CQCADIAYgCiAMampBBmoiDUkNACAFLQAKIQcgBUHYAGogAkEGaiICIAoQBiIJEAMNASAFQUBrIAIgCmoiAiAMEAYiCRADDQEgBUEoaiACIAxqIgIgBhAGIgkQAw0BIAVBEGogAiAGaiADIA1rEAYiCRADDQEgACABaiIOQX1qIQ8gBEEEaiEGQQEhCSAAIAFBA2pBAnYiAmoiCiACaiIMIAJqIg0hAyAMIQQgCiECA0AgCSADIA9JcQRAIAYgBUHYAGogBxACQQF0aiIILQAAIQsgBUHYAGogCC0AARABIAAgCzoAACAGIAVBQGsgBxACQQF0aiIILQAAIQsgBUFAayAILQABEAEgAiALOgAAIAYgBUEoaiAHEAJBAXRqIggtAAAhCyAFQShqIAgtAAEQASAEIAs6AAAgBiAFQRBqIAcQAkEBdGoiCC0AACELIAVBEGogCC0AARABIAMgCzoAACAGIAVB2ABqIAcQAkEBdGoiCC0AACELIAVB2ABqIAgtAAEQASAAIAs6AAEgBiAFQUBrIAcQAkEBdGoiCC0AACELIAVBQGsgCC0AARABIAIgCzoAASAGIAVBKGogBxACQQF0aiIILQAAIQsgBUEoaiAILQABEAEgBCALOgABIAYgBUEQaiAHEAJBAXRqIggtAAAhCyAFQRBqIAgtAAEQASADIAs6AAEgA0ECaiEDIARBAmohBCACQQJqIQIgAEECaiEAIAkgBUHYAGoQDUVxIAVBQGsQDUVxIAVBKGoQDUVxIAVBEGoQDUVxIQkMAQsLIAQgDUsgAiAMS3INAEFsIQkgACAKSw0BIApBfWohCQNAIAVB2ABqEAQgACAJT3JFBEAgBiAFQdgAaiAHEAJBAXRqIggtAAAhCyAFQdgAaiAILQABEAEgACALOgAAIAYgBUHYAGogBxACQQF0aiIILQAAIQsgBUHYAGogCC0AARABIAAgCzoAASAAQQJqIQAMAQsLA0AgBUHYAGoQBCAAIApPckUEQCAGIAVB2ABqIAcQAkEBdGoiCS0AACEIIAVB2ABqIAktAAEQASAAIAg6AAAgAEEBaiEADAELCwNAIAAgCkkEQCAGIAVB2ABqIAcQAkEBdGoiCS0AACEIIAVB2ABqIAktAAEQASAAIAg6AAAgAEEBaiEADAELCyAMQX1qIQADQCAFQUBrEAQgAiAAT3JFBEAgBiAFQUBrIAcQAkEBdGoiCi0AACEJIAVBQGsgCi0AARABIAIgCToAACAGIAVBQGsgBxACQQF0aiIKLQAAIQkgBUFAayAKLQABEAEgAiAJOgABIAJBAmohAgwBCwsDQCAFQUBrEAQgAiAMT3JFBEAgBiAFQUBrIAcQAkEBdGoiAC0AACEKIAVBQGsgAC0AARABIAIgCjoAACACQQFqIQIMAQsLA0AgAiAMSQRAIAYgBUFAayAHEAJBAXRqIgAtAAAhCiAFQUBrIAAtAAEQASACIAo6AAAgAkEBaiECDAELCyANQX1qIQADQCAFQShqEAQgBCAAT3JFBEAgBiAFQShqIAcQAkEBdGoiAi0AACEKIAVBKGogAi0AARABIAQgCjoAACAGIAVBKGogBxACQQF0aiICLQAAIQogBUEoaiACLQABEAEgBCAKOgABIARBAmohBAwBCwsDQCAFQShqEAQgBCANT3JFBEAgBiAFQShqIAcQAkEBdGoiAC0AACECIAVBKGogAC0AARABIAQgAjoAACAEQQFqIQQMAQsLA0AgBCANSQRAIAYgBUEoaiAHEAJBAXRqIgAtAAAhAiAFQShqIAAtAAEQASAEIAI6AAAgBEEBaiEEDAELCwNAIAVBEGoQBCADIA9PckUEQCAGIAVBEGogBxACQQF0aiIALQAAIQIgBUEQaiAALQABEAEgAyACOgAAIAYgBUEQaiAHEAJBAXRqIgAtAAAhAiAFQRBqIAAtAAEQASADIAI6AAEgA0ECaiEDDAELCwNAIAVBEGoQBCADIA5PckUEQCAGIAVBEGogBxACQQF0aiIALQAAIQIgBUEQaiAALQABEAEgAyACOgAAIANBAWohAwwBCwsDQCADIA5JBEAgBiAFQRBqIAcQAkEBdGoiAC0AACECIAVBEGogAC0AARABIAMgAjoAACADQQFqIQMMAQsLIAFBbCAFQdgAahAKIAVBQGsQCnEgBUEoahAKcSAFQRBqEApxGyEJDAELQWwhCQsgBUHwAGokACAJC8oCAQR/IwBBIGsiBSQAIAUgBBAOIAUtAAIhByAFQQhqIAIgAxAGIgIQA0UEQCAEQQRqIQIgACABaiIDQX1qIQQDQCAFQQhqEAQgACAET3JFBEAgAiAFQQhqIAcQAkEBdGoiBi0AACEIIAVBCGogBi0AARABIAAgCDoAACACIAVBCGogBxACQQF0aiIGLQAAIQggBUEIaiAGLQABEAEgACAIOgABIABBAmohAAwBCwsDQCAFQQhqEAQgACADT3JFBEAgAiAFQQhqIAcQAkEBdGoiBC0AACEGIAVBCGogBC0AARABIAAgBjoAACAAQQFqIQAMAQsLA0AgACADT0UEQCACIAVBCGogBxACQQF0aiIELQAAIQYgBUEIaiAELQABEAEgACAGOgAAIABBAWohAAwBCwsgAUFsIAVBCGoQChshAgsgBUEgaiQAIAILtgMBCX8jAEEQayIGJAAgBkEANgIMIAZBADYCCEFUIQQCQAJAIANBQGsiDCADIAZBCGogBkEMaiABIAIQMSICEAMNACAGQQRqIAAQDiAGKAIMIgcgBi0ABEEBaksNASAAQQRqIQogBkEAOgAFIAYgBzoABiAAIAYoAgQ2AgAgB0EBaiEJQQEhBANAIAQgCUkEQCADIARBAnRqIgEoAgAhACABIAU2AgAgACAEQX9qdCAFaiEFIARBAWohBAwBCwsgB0EBaiEHQQAhBSAGKAIIIQkDQCAFIAlGDQEgAyAFIAxqLQAAIgRBAnRqIgBBASAEdEEBdSILIAAoAgAiAWoiADYCACAHIARrIQhBACEEAkAgC0EDTQRAA0AgBCALRg0CIAogASAEakEBdGoiACAIOgABIAAgBToAACAEQQFqIQQMAAALAAsDQCABIABPDQEgCiABQQF0aiIEIAg6AAEgBCAFOgAAIAQgCDoAAyAEIAU6AAIgBCAIOgAFIAQgBToABCAEIAg6AAcgBCAFOgAGIAFBBGohAQwAAAsACyAFQQFqIQUMAAALAAsgAiEECyAGQRBqJAAgBAutAQECfwJAQYQgKAIAIABHIAAoAgBBAXYiAyABa0F4aiICQXhxQQhHcgR/IAIFIAMQJ0UNASACQQhqC0EQSQ0AIAAgACgCACICQQFxIAAgAWpBD2pBeHEiASAAa0EBdHI2AgAgASAANgIEIAEgASgCAEEBcSAAIAJBAXZqIAFrIgJBAXRyNgIAQYQgIAEgAkH/////B3FqQQRqQYQgKAIAIABGGyABNgIAIAEQJQsLygIBBX8CQAJAAkAgAEEIIABBCEsbZ0EfcyAAaUEBR2oiAUEESSAAIAF2cg0AIAFBAnRB/B5qKAIAIgJFDQADQCACQXhqIgMoAgBBAXZBeGoiBSAATwRAIAIgBUEIIAVBCEsbZ0Efc0ECdEGAH2oiASgCAEYEQCABIAIoAgQ2AgALDAMLIARBHksNASAEQQFqIQQgAigCBCICDQALC0EAIQMgAUEgTw0BA0AgAUECdEGAH2ooAgAiAkUEQCABQR5LIQIgAUEBaiEBIAJFDQEMAwsLIAIgAkF4aiIDKAIAQQF2QXhqIgFBCCABQQhLG2dBH3NBAnRBgB9qIgEoAgBGBEAgASACKAIENgIACwsgAigCACIBBEAgASACKAIENgIECyACKAIEIgEEQCABIAIoAgA2AgALIAMgAygCAEEBcjYCACADIAAQNwsgAwvhCwINfwV+IwBB8ABrIgckACAHIAAoAvDhASIINgJcIAEgAmohDSAIIAAoAoDiAWohDwJAAkAgBUUEQCABIQQMAQsgACgCxOABIRAgACgCwOABIREgACgCvOABIQ4gAEEBNgKM4QFBACEIA0AgCEEDRwRAIAcgCEECdCICaiAAIAJqQazQAWooAgA2AkQgCEEBaiEIDAELC0FsIQwgB0EYaiADIAQQBhADDQEgB0EsaiAHQRhqIAAoAgAQEyAHQTRqIAdBGGogACgCCBATIAdBPGogB0EYaiAAKAIEEBMgDUFgaiESIAEhBEEAIQwDQCAHKAIwIAcoAixBA3RqKQIAIhRCEIinQf8BcSEIIAcoAkAgBygCPEEDdGopAgAiFUIQiKdB/wFxIQsgBygCOCAHKAI0QQN0aikCACIWQiCIpyEJIBVCIIghFyAUQiCIpyECAkAgFkIQiKdB/wFxIgNBAk8EQAJAIAZFIANBGUlyRQRAIAkgB0EYaiADQSAgBygCHGsiCiAKIANLGyIKEAUgAyAKayIDdGohCSAHQRhqEAQaIANFDQEgB0EYaiADEAUgCWohCQwBCyAHQRhqIAMQBSAJaiEJIAdBGGoQBBoLIAcpAkQhGCAHIAk2AkQgByAYNwNIDAELAkAgA0UEQCACBEAgBygCRCEJDAMLIAcoAkghCQwBCwJAAkAgB0EYakEBEAUgCSACRWpqIgNBA0YEQCAHKAJEQX9qIgMgA0VqIQkMAQsgA0ECdCAHaigCRCIJIAlFaiEJIANBAUYNAQsgByAHKAJINgJMCwsgByAHKAJENgJIIAcgCTYCRAsgF6chAyALBEAgB0EYaiALEAUgA2ohAwsgCCALakEUTwRAIAdBGGoQBBoLIAgEQCAHQRhqIAgQBSACaiECCyAHQRhqEAQaIAcgB0EYaiAUQhiIp0H/AXEQCCAUp0H//wNxajYCLCAHIAdBGGogFUIYiKdB/wFxEAggFadB//8DcWo2AjwgB0EYahAEGiAHIAdBGGogFkIYiKdB/wFxEAggFqdB//8DcWo2AjQgByACNgJgIAcoAlwhCiAHIAk2AmggByADNgJkAkACQAJAIAQgAiADaiILaiASSw0AIAIgCmoiEyAPSw0AIA0gBGsgC0Egak8NAQsgByAHKQNoNwMQIAcgBykDYDcDCCAEIA0gB0EIaiAHQdwAaiAPIA4gESAQEB4hCwwBCyACIARqIQggBCAKEAcgAkERTwRAIARBEGohAgNAIAIgCkEQaiIKEAcgAkEQaiICIAhJDQALCyAIIAlrIQIgByATNgJcIAkgCCAOa0sEQCAJIAggEWtLBEBBbCELDAILIBAgAiAOayICaiIKIANqIBBNBEAgCCAKIAMQDxoMAgsgCCAKQQAgAmsQDyEIIAcgAiADaiIDNgJkIAggAmshCCAOIQILIAlBEE8EQCADIAhqIQMDQCAIIAIQByACQRBqIQIgCEEQaiIIIANJDQALDAELAkAgCUEHTQRAIAggAi0AADoAACAIIAItAAE6AAEgCCACLQACOgACIAggAi0AAzoAAyAIQQRqIAIgCUECdCIDQcAeaigCAGoiAhAXIAIgA0HgHmooAgBrIQIgBygCZCEDDAELIAggAhAMCyADQQlJDQAgAyAIaiEDIAhBCGoiCCACQQhqIgJrQQ9MBEADQCAIIAIQDCACQQhqIQIgCEEIaiIIIANJDQAMAgALAAsDQCAIIAIQByACQRBqIQIgCEEQaiIIIANJDQALCyAHQRhqEAQaIAsgDCALEAMiAhshDCAEIAQgC2ogAhshBCAFQX9qIgUNAAsgDBADDQFBbCEMIAdBGGoQBEECSQ0BQQAhCANAIAhBA0cEQCAAIAhBAnQiAmpBrNABaiACIAdqKAJENgIAIAhBAWohCAwBCwsgBygCXCEIC0G6fyEMIA8gCGsiACANIARrSw0AIAQEfyAEIAggABALIABqBUEACyABayEMCyAHQfAAaiQAIAwLkRcCFn8FfiMAQdABayIHJAAgByAAKALw4QEiCDYCvAEgASACaiESIAggACgCgOIBaiETAkACQCAFRQRAIAEhAwwBCyAAKALE4AEhESAAKALA4AEhFSAAKAK84AEhDyAAQQE2AozhAUEAIQgDQCAIQQNHBEAgByAIQQJ0IgJqIAAgAmpBrNABaigCADYCVCAIQQFqIQgMAQsLIAcgETYCZCAHIA82AmAgByABIA9rNgJoQWwhECAHQShqIAMgBBAGEAMNASAFQQQgBUEESBshFyAHQTxqIAdBKGogACgCABATIAdBxABqIAdBKGogACgCCBATIAdBzABqIAdB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IAdB0AFqJAAgEAslACAAQgA3AgAgAEEAOwEIIABBADoACyAAIAE2AgwgACACOgAKC7QFAQN/IwBBMGsiBCQAIABB/wFqIgVBfWohBgJAIAMvAQIEQCAEQRhqIAEgAhAGIgIQAw0BIARBEGogBEEYaiADEBwgBEEIaiAEQRhqIAMQHCAAIQMDQAJAIARBGGoQBCADIAZPckUEQCADIARBEGogBEEYahASOgAAIAMgBEEIaiAEQRhqEBI6AAEgBEEYahAERQ0BIANBAmohAwsgBUF+aiEFAn8DQEG6fyECIAMiASAFSw0FIAEgBEEQaiAEQRhqEBI6AAAgAUEBaiEDIARBGGoQBEEDRgRAQQIhAiAEQQhqDAILIAMgBUsNBSABIARBCGogBEEYahASOgABIAFBAmohA0EDIQIgBEEYahAEQQNHDQALIARBEGoLIQUgAyAFIARBGGoQEjoAACABIAJqIABrIQIMAwsgAyAEQRBqIARBGGoQEjoAAiADIARBCGogBEEYahASOgADIANBBGohAwwAAAsACyAEQRhqIAEgAhAGIgIQAw0AIARBEGogBEEYaiADEBwgBEEIaiAEQRhqIAMQHCAAIQMDQAJAIARBGGoQBCADIAZPckUEQCADIARBEGogBEEYahAROgAAIAMgBEEIaiAEQRhqEBE6AAEgBEEYahAERQ0BIANBAmohAwsgBUF+aiEFAn8DQEG6fyECIAMiASAFSw0EIAEgBEEQaiAEQRhqEBE6AAAgAUEBaiEDIARBGGoQBEEDRgRAQQIhAiAEQQhqDAILIAMgBUsNBCABIARBCGogBEEYahAROgABIAFBAmohA0EDIQIgBEEYahAEQQNHDQALIARBEGoLIQUgAyAFIARBGGoQEToAACABIAJqIABrIQIMAgsgAyAEQRBqIARBGGoQEToAAiADIARBCGogBEEYahAROgADIANBBGohAwwAAAsACyAEQTBqJAAgAgtpAQF/An8CQAJAIAJBB00NACABKAAAQbfIwuF+Rw0AIAAgASgABDYCmOIBQWIgAEEQaiABIAIQPiIDEAMNAhogAEKBgICAEDcDiOEBIAAgASADaiACIANrECoMAQsgACABIAIQKgtBAAsLrQMBBn8jAEGAAWsiAyQAQWIhCAJAIAJBCUkNACAAQZjQAGogAUEIaiIEIAJBeGogAEGY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wOABCwutAgIEfwF+IwBBQGoiBCQAAkACQCACQQhJDQAgASgAAEFwcUHQ1LTCAUcNACABIAIQIiEBIABCADcDCCAAQQA2AgQgACABNgIADAELIARBGGogASACEC0iAxADBEAgACADEBoMAQsgAwRAIABBuH8QGgwBCyACIAQoAjAiA2shAiABIANqIQMDQAJAIAAgAyACIARBCGoQLCIFEAMEfyAFBSACIAVBA2oiBU8NAUG4fwsQGgwCCyAGQQFqIQYgAiAFayECIAMgBWohAyAEKAIMRQ0ACyAEKAI4BEAgAkEDTQRAIABBuH8QGgwCCyADQQRqIQMLIAQoAighAiAEKQMYIQcgAEEANgIEIAAgAyABazYCACAAIAIgBmytIAcgB0J/URs3AwgLIARBQGskAAslAQF/IwBBEGsiAiQAIAIgACABEFEgAigCACEAIAJBEGokACAAC30BBH8jAEGQBGsiBCQAIARB/wE2AggCQCAEQRBqIARBCGogBEEMaiABIAIQFSIGEAMEQCAGIQUMAQtBVCEFIAQoAgwiB0EGSw0AIAMgBEEQaiAEKAIIIAcQQSIFEAMNACAAIAEgBmogAiAGayADEDwhBQsgBEGQBGokACAFC4cBAgJ/An5BABAWIQMCQANAIAEgA08EQAJAIAAoAABBcHFB0NS0wgFGBEAgACABECIiAhADRQ0BQn4PCyAAIAEQVSIEQn1WDQMgBCAFfCIFIARUIQJCfiEEIAINAyAAIAEQUiICEAMNAwsgASACayEBIAAgAmohAAwBCwtCfiAFIAEbIQQLIAQLPwIBfwF+IwBBMGsiAiQAAn5CfiACQQhqIAAgARAtDQAaQgAgAigCHEEBRg0AGiACKQMICyEDIAJBMGokACADC40BAQJ/IwBBMGsiASQAAkAgAEUNACAAKAKI4gENACABIABB/OEBaigCADYCKCABIAApAvThATcDICAAEDAgACgCqOIBIQIgASABKAIoNgIYIAEgASkDIDcDECACIAFBEGoQGyAAQQA2AqjiASABIAEoAig2AgggASABKQMgNwMAIAAgARAbCyABQTBqJAALKgECfyMAQRBrIgAkACAAQQA2AgggAEIANwMAIAAQWCEBIABBEGokACABC4cBAQN/IwBBEGsiAiQAAkAgACgCAEUgACgCBEVzDQAgAiAAKAIINgIIIAIgACkCADcDAAJ/IAIoAgAiAQRAIAIoAghBqOMJIAERBQAMAQtBqOMJECgLIgFFDQAgASAAKQIANwL04QEgAUH84QFqIAAoAgg2AgAgARBZIAEhAwsgAkEQaiQAIAMLywEBAn8jAEEgayIBJAAgAEGBgIDAADYCtOIBIABBADYCiOIBIABBADYC7OEBIABCADcDkOIBIABBADYCpOMJIABBADYC3OIBIABCADcCzOIBIABBADYCvOIBIABBADYCxOABIABCADcCnOIBIABBpOIBakIANwIAIABBrOIBakEANgIAIAFCADcCECABQgA3AhggASABKQMYNwMIIAEgASkDEDcDACABKAIIQQh2QQFxIQIgAEEANgLg4gEgACACNgKM4gEgAUEgaiQAC3YBA38jAEEwayIBJAAgAARAIAEgAEHE0AFqIgIoAgA2AiggASAAKQK80AE3AyAgACgCACEDIAEgAigCADYCGCABIAApArzQATcDECADIAFBEGoQGyABIAEoAig2AgggASABKQMgNwMAIAAgARAbCyABQTBqJAALzAEBAX8gACABKAK00AE2ApjiASAAIAEoAgQiAjYCwOABIAAgAjYCvOABIAAgAiABKAIIaiICNgK44AEgACACNgLE4AEgASgCuNABBEAgAEKBgICAEDcDiOEBIAAgAUGk0ABqNgIMIAAgAUGUIGo2AgggACABQZwwajYCBCAAIAFBDGo2AgAgAEGs0AFqIAFBqNABaigCADYCACAAQbDQAWogAUGs0AFqKAIANgIAIABBtNABaiABQbDQAWooAgA2AgAPCyAAQgA3A4jhAQs7ACACRQRAQbp/DwsgBEUEQEFsDwsgAiAEEGAEQCAAIAEgAiADIAQgBRBhDwsgACABIAIgAyAEIAUQZQtGAQF/IwBBEGsiBSQAIAVBCGogBBAOAn8gBS0ACQRAIAAgASACIAMgBBAyDAELIAAgASACIAMgBBA0CyEAIAVBEGokACAACzQAIAAgAyAEIAUQNiIFEAMEQCAFDwsgBSAESQR/IAEgAiADIAVqIAQgBWsgABA1BUG4fwsLRgEBfyMAQRBrIgUkACAFQQhqIAQQDgJ/IAUtAAkEQCAAIAEgAiADIAQQYgwBCyAAIAEgAiADIAQQNQshACAFQRBqJAAgAAtZAQF/QQ8hAiABIABJBEAgAUEE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\";\n\nconst DisplayP3ColorSpace = 'display-p3';\nconst LinearDisplayP3ColorSpace = 'display-p3-linear';\n\n/**\n * Loader for KTX 2.0 GPU Texture containers.\n *\n * KTX 2.0 is a container format for various GPU texture formats. The loader\n * supports Basis Universal GPU textures, which can be quickly transcoded to\n * a wide variety of GPU texture compression formats, as well as some\n * uncompressed DataTexture and Data3DTexture formats.\n *\n * References:\n * - KTX: http://github.khronos.org/KTX-Specification/\n * - DFD: https://www.khronos.org/registry/DataFormat/specs/1.3/dataformat.1.3.html#basicdescriptor\n * - BasisU HDR: https://github.com/BinomialLLC/basis_universal/wiki/UASTC-HDR-Texture-Specification-v1.0\n */\n\n\nconst _taskCache = new WeakMap();\n\nlet _activeLoaders = 0;\n\nlet _zstd;\n\nclass KTX2Loader extends Loader {\n\n\tconstructor( manager ) {\n\n\t\tsuper( manager );\n\n\t\tthis.transcoderPath = '';\n\t\tthis.transcoderBinary = null;\n\t\tthis.transcoderPending = null;\n\n\t\tthis.workerPool = new WorkerPool();\n\t\tthis.workerSourceURL = '';\n\t\tthis.workerConfig = null;\n\n\t\tif ( typeof MSC_TRANSCODER !== 'undefined' ) {\n\n\t\t\tconsole.warn(\n\n\t\t\t\t'THREE.KTX2Loader: Please update to latest \"basis_transcoder\".'\n\t\t\t\t+ ' \"msc_basis_transcoder\" is no longer supported in three.js r125+.'\n\n\t\t\t);\n\n\t\t}\n\n\t}\n\n\tsetTranscoderPath( path ) {\n\n\t\tthis.transcoderPath = path;\n\n\t\treturn this;\n\n\t}\n\n\tsetWorkerLimit( num ) {\n\n\t\tthis.workerPool.setWorkerLimit( num );\n\n\t\treturn this;\n\n\t}\n\n\tasync detectSupportAsync( renderer ) {\n\n\t\tthis.workerConfig = {\n\t\t\tastcSupported: await renderer.hasFeatureAsync( 'texture-compression-astc' ),\n\t\t\tastcHDRSupported: false, // https://github.com/gpuweb/gpuweb/issues/3856\n\t\t\tetc1Supported: await renderer.hasFeatureAsync( 'texture-compression-etc1' ),\n\t\t\tetc2Supported: await renderer.hasFeatureAsync( 'texture-compression-etc2' ),\n\t\t\tdxtSupported: await renderer.hasFeatureAsync( 'texture-compression-bc' ),\n\t\t\tbptcSupported: await renderer.hasFeatureAsync( 'texture-compression-bptc' ),\n\t\t\tpvrtcSupported: await renderer.hasFeatureAsync( 'texture-compression-pvrtc' )\n\t\t};\n\n\t\treturn this;\n\n\t}\n\n\tdetectSupport( renderer ) {\n\n\t\tif ( renderer.isWebGPURenderer === true ) {\n\n\t\t\tthis.workerConfig = {\n\t\t\t\tastcSupported: renderer.hasFeature( 'texture-compression-astc' ),\n\t\t\t\tastcHDRSupported: false, // https://github.com/gpuweb/gpuweb/issues/3856\n\t\t\t\tetc1Supported: renderer.hasFeature( 'texture-compression-etc1' ),\n\t\t\t\tetc2Supported: renderer.hasFeature( 'texture-compression-etc2' ),\n\t\t\t\tdxtSupported: renderer.hasFeature( 'texture-compression-bc' ),\n\t\t\t\tbptcSupported: renderer.hasFeature( 'texture-compression-bptc' ),\n\t\t\t\tpvrtcSupported: renderer.hasFeature( 'texture-compression-pvrtc' )\n\t\t\t};\n\n\t\t} else {\n\n\t\t\tthis.workerConfig = {\n\t\t\t\tastcSupported: renderer.extensions.has( 'WEBGL_compressed_texture_astc' ),\n\t\t\t\tastcHDRSupported: renderer.extensions.has( 'WEBGL_compressed_texture_astc' )\n\t\t\t\t\t&& renderer.extensions.get( 'WEBGL_compressed_texture_astc' ).getSupportedProfiles().includes( 'hdr' ),\n\t\t\t\tetc1Supported: renderer.extensions.has( 'WEBGL_compressed_texture_etc1' ),\n\t\t\t\tetc2Supported: renderer.extensions.has( 'WEBGL_compressed_texture_etc' ),\n\t\t\t\tdxtSupported: renderer.extensions.has( 'WEBGL_compressed_texture_s3tc' ),\n\t\t\t\tbptcSupported: renderer.extensions.has( 'EXT_texture_compression_bptc' ),\n\t\t\t\tpvrtcSupported: renderer.extensions.has( 'WEBGL_compressed_texture_pvrtc' )\n\t\t\t\t\t|| renderer.extensions.has( 'WEBKIT_WEBGL_compressed_texture_pvrtc' )\n\t\t\t};\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tinit() {\n\n\t\tif ( ! this.transcoderPending ) {\n\n\t\t\t// Load transcoder wrapper.\n\t\t\tconst jsLoader = new FileLoader( this.manager );\n\t\t\tjsLoader.setPath( this.transcoderPath );\n\t\t\tjsLoader.setWithCredentials( this.withCredentials );\n\t\t\tconst jsContent = jsLoader.loadAsync( 'basis_transcoder.js' );\n\n\t\t\t// Load transcoder WASM binary.\n\t\t\tconst binaryLoader = new FileLoader( this.manager );\n\t\t\tbinaryLoader.setPath( this.transcoderPath );\n\t\t\tbinaryLoader.setResponseType( 'arraybuffer' );\n\t\t\tbinaryLoader.setWithCredentials( this.withCredentials );\n\t\t\tconst binaryContent = binaryLoader.loadAsync( 'basis_transcoder.wasm' );\n\n\t\t\tthis.transcoderPending = Promise.all( [ jsContent, binaryContent ] )\n\t\t\t\t.then( ( [ jsContent, binaryContent ] ) => {\n\n\t\t\t\t\tconst fn = KTX2Loader.BasisWorker.toString();\n\n\t\t\t\t\tconst body = [\n\t\t\t\t\t\t'/* constants */',\n\t\t\t\t\t\t'let _EngineFormat = ' + JSON.stringify( KTX2Loader.EngineFormat ),\n\t\t\t\t\t\t'let _EngineType = ' + JSON.stringify( KTX2Loader.EngineType ),\n\t\t\t\t\t\t'let _TranscoderFormat = ' + JSON.stringify( KTX2Loader.TranscoderFormat ),\n\t\t\t\t\t\t'let _BasisFormat = ' + JSON.stringify( KTX2Loader.BasisFormat ),\n\t\t\t\t\t\t'/* basis_transcoder.js */',\n\t\t\t\t\t\tjsContent,\n\t\t\t\t\t\t'/* worker */',\n\t\t\t\t\t\tfn.substring( fn.indexOf( '{' ) + 1, fn.lastIndexOf( '}' ) )\n\t\t\t\t\t].join( '\\n' );\n\n\t\t\t\t\tthis.workerSourceURL = URL.createObjectURL( new Blob( [ body ] ) );\n\t\t\t\t\tthis.transcoderBinary = binaryContent;\n\n\t\t\t\t\tthis.workerPool.setWorkerCreator( () => {\n\n\t\t\t\t\t\tconst worker = new Worker( this.workerSourceURL );\n\t\t\t\t\t\tconst transcoderBinary = this.transcoderBinary.slice( 0 );\n\n\t\t\t\t\t\tworker.postMessage( { type: 'init', config: this.workerConfig, transcoderBinary }, [ transcoderBinary ] );\n\n\t\t\t\t\t\treturn worker;\n\n\t\t\t\t\t} );\n\n\t\t\t\t} );\n\n\t\t\tif ( _activeLoaders > 0 ) {\n\n\t\t\t\t// Each instance loads a transcoder and allocates workers, increasing network and memory cost.\n\n\t\t\t\tconsole.warn(\n\n\t\t\t\t\t'THREE.KTX2Loader: Multiple active KTX2 loaders may cause performance issues.'\n\t\t\t\t\t+ ' Use a single KTX2Loader instance, or call .dispose() on old instances.'\n\n\t\t\t\t);\n\n\t\t\t}\n\n\t\t\t_activeLoaders ++;\n\n\t\t}\n\n\t\treturn this.transcoderPending;\n\n\t}\n\n\tload( url, onLoad, onProgress, onError ) {\n\n\t\tif ( this.workerConfig === null ) {\n\n\t\t\tthrow new Error( 'THREE.KTX2Loader: Missing initialization with `.detectSupport( renderer )`.' );\n\n\t\t}\n\n\t\tconst loader = new FileLoader( this.manager );\n\n\t\tloader.setResponseType( 'arraybuffer' );\n\t\tloader.setWithCredentials( this.withCredentials );\n\n\t\tloader.load( url, ( buffer ) => {\n\n\t\t\tthis.parse( buffer, onLoad, onError );\n\n\t\t}, onProgress, onError );\n\n\t}\n\n\tparse( buffer, onLoad, onError ) {\n\n\t\tif ( this.workerConfig === null ) {\n\n\t\t\tthrow new Error( 'THREE.KTX2Loader: Missing initialization with `.detectSupport( renderer )`.' );\n\n\t\t}\n\n\t\t// Check for an existing task using this buffer. A transferred buffer cannot be transferred\n\t\t// again from this thread.\n\t\tif ( _taskCache.has( buffer ) ) {\n\n\t\t\tconst cachedTask = _taskCache.get( buffer );\n\n\t\t\treturn cachedTask.promise.then( onLoad ).catch( onError );\n\n\t\t}\n\n\t\tthis._createTexture( buffer )\n\t\t\t.then( ( texture ) => onLoad ? onLoad( texture ) : null )\n\t\t\t.catch( onError );\n\n\t}\n\n\t_createTextureFrom( transcodeResult, container ) {\n\n\t\tconst { type: messageType, error, data: { faces, width, height, format, type, dfdFlags } } = transcodeResult;\n\n\t\tif ( messageType === 'error' ) return Promise.reject( error );\n\n\t\tlet texture;\n\n\t\tif ( container.faceCount === 6 ) {\n\n\t\t\ttexture = new CompressedCubeTexture( faces, format, type );\n\n\t\t} else {\n\n\t\t\tconst mipmaps = faces[ 0 ].mipmaps;\n\n\t\t\ttexture = container.layerCount > 1\n\t\t\t\t? new CompressedArrayTexture( mipmaps, width, height, container.layerCount, format, type )\n\t\t\t\t: new CompressedTexture( mipmaps, width, height, format, type );\n\n\t\t}\n\n\t\ttexture.minFilter = faces[ 0 ].mipmaps.length === 1 ? LinearFilter : LinearMipmapLinearFilter;\n\t\ttexture.magFilter = LinearFilter;\n\t\ttexture.generateMipmaps = false;\n\n\t\ttexture.needsUpdate = true;\n\t\ttexture.colorSpace = parseColorSpace( container );\n\t\ttexture.premultiplyAlpha = !! ( dfdFlags & p );\n\n\t\treturn texture;\n\n\t}\n\n\t/**\n\t * @param {ArrayBuffer} buffer\n\t * @param {?Object} config\n\t * @return {Promise<CompressedTexture|CompressedArrayTexture|DataTexture|Data3DTexture>}\n\t */\n\tasync _createTexture( buffer, config = {} ) {\n\n\t\tconst container = Pi( new Uint8Array( buffer ) );\n\n\t\t// Basis UASTC HDR is a subset of ASTC, which can be transcoded efficiently\n\t\t// to BC6H. To detect whether a KTX2 file uses Basis UASTC HDR, or default\n\t\t// ASTC, inspect the DFD color model.\n\t\t//\n\t\t// Source: https://github.com/BinomialLLC/basis_universal/issues/381\n\t\tconst isBasisHDR = container.vkFormat === _i\n\t\t\t&& container.dataFormatDescriptor[ 0 ].colorModel === 0xA7;\n\n\t\t// If the device supports ASTC, Basis UASTC HDR requires no transcoder.\n\t\tconst needsTranscoder = container.vkFormat === nt\n\t\t\t|| isBasisHDR && ! this.workerConfig.astcHDRSupported;\n\n\t\tif ( ! needsTranscoder ) {\n\n\t\t\treturn createRawTexture( container );\n\n\t\t}\n\n\t\t//\n\t\tconst taskConfig = config;\n\t\tconst texturePending = this.init().then( () => {\n\n\t\t\treturn this.workerPool.postMessage( { type: 'transcode', buffer, taskConfig: taskConfig }, [ buffer ] );\n\n\t\t} ).then( ( e ) => this._createTextureFrom( e.data, container ) );\n\n\t\t// Cache the task result.\n\t\t_taskCache.set( buffer, { promise: texturePending } );\n\n\t\treturn texturePending;\n\n\t}\n\n\tdispose() {\n\n\t\tthis.workerPool.dispose();\n\t\tif ( this.workerSourceURL ) URL.revokeObjectURL( this.workerSourceURL );\n\n\t\t_activeLoaders --;\n\n\t\treturn this;\n\n\t}\n\n}\n\n\n/* CONSTANTS */\n\nKTX2Loader.BasisFormat = {\n\tETC1S: 0,\n\tUASTC: 1,\n\tUASTC_HDR: 2,\n};\n\n// Source: https://github.com/BinomialLLC/basis_universal/blob/master/webgl/texture_test/index.html\nKTX2Loader.TranscoderFormat = {\n\tETC1: 0,\n\tETC2: 1,\n\tBC1: 2,\n\tBC3: 3,\n\tBC4: 4,\n\tBC5: 5,\n\tBC7_M6_OPAQUE_ONLY: 6,\n\tBC7_M5: 7,\n\tPVRTC1_4_RGB: 8,\n\tPVRTC1_4_RGBA: 9,\n\tASTC_4x4: 10,\n\tATC_RGB: 11,\n\tATC_RGBA_INTERPOLATED_ALPHA: 12,\n\tRGBA32: 13,\n\tRGB565: 14,\n\tBGR565: 15,\n\tRGBA4444: 16,\n\tBC6H: 22,\n\tRGB_HALF: 24,\n\tRGBA_HALF: 25,\n};\n\nKTX2Loader.EngineFormat = {\n\tRGBAFormat: RGBAFormat,\n\tRGBA_ASTC_4x4_Format: RGBA_ASTC_4x4_Format,\n\tRGB_BPTC_UNSIGNED_Format: RGB_BPTC_UNSIGNED_Format,\n\tRGBA_BPTC_Format: RGBA_BPTC_Format,\n\tRGBA_ETC2_EAC_Format: RGBA_ETC2_EAC_Format,\n\tRGBA_PVRTC_4BPPV1_Format: RGBA_PVRTC_4BPPV1_Format,\n\tRGBA_S3TC_DXT5_Format: RGBA_S3TC_DXT5_Format,\n\tRGB_ETC1_Format: RGB_ETC1_Format,\n\tRGB_ETC2_Format: RGB_ETC2_Format,\n\tRGB_PVRTC_4BPPV1_Format: RGB_PVRTC_4BPPV1_Format,\n\tRGBA_S3TC_DXT1_Format: RGBA_S3TC_DXT1_Format,\n};\n\nKTX2Loader.EngineType = {\n\tUnsignedByteType: UnsignedByteType,\n\tHalfFloatType: HalfFloatType,\n\tFloatType: FloatType,\n};\n\n/* WEB WORKER */\n\nKTX2Loader.BasisWorker = function () {\n\n\tlet config;\n\tlet transcoderPending;\n\tlet BasisModule;\n\n\tconst EngineFormat = _EngineFormat; // eslint-disable-line no-undef\n\tconst EngineType = _EngineType; // eslint-disable-line no-undef\n\tconst TranscoderFormat = _TranscoderFormat; // eslint-disable-line no-undef\n\tconst BasisFormat = _BasisFormat; // eslint-disable-line no-undef\n\n\tself.addEventListener( 'message', function ( e ) {\n\n\t\tconst message = e.data;\n\n\t\tswitch ( message.type ) {\n\n\t\t\tcase 'init':\n\t\t\t\tconfig = message.config;\n\t\t\t\tinit( message.transcoderBinary );\n\t\t\t\tbreak;\n\n\t\t\tcase 'transcode':\n\t\t\t\ttranscoderPending.then( () => {\n\n\t\t\t\t\ttry {\n\n\t\t\t\t\t\tconst { faces, buffers, width, height, hasAlpha, format, type, dfdFlags } = transcode( message.buffer );\n\n\t\t\t\t\t\tself.postMessage( { type: 'transcode', id: message.id, data: { faces, width, height, hasAlpha, format, type, dfdFlags } }, buffers );\n\n\t\t\t\t\t} catch ( error ) {\n\n\t\t\t\t\t\tconsole.error( error );\n\n\t\t\t\t\t\tself.postMessage( { type: 'error', id: message.id, error: error.message } );\n\n\t\t\t\t\t}\n\n\t\t\t\t} );\n\t\t\t\tbreak;\n\n\t\t}\n\n\t} );\n\n\tfunction init( wasmBinary ) {\n\n\t\ttranscoderPending = new Promise( ( resolve ) => {\n\n\t\t\tBasisModule = { wasmBinary, onRuntimeInitialized: resolve };\n\t\t\tBASIS( BasisModule ); // eslint-disable-line no-undef\n\n\t\t} ).then( () => {\n\n\t\t\tBasisModule.initializeBasis();\n\n\t\t\tif ( BasisModule.KTX2File === undefined ) {\n\n\t\t\t\tconsole.warn( 'THREE.KTX2Loader: Please update Basis Universal transcoder.' );\n\n\t\t\t}\n\n\t\t} );\n\n\t}\n\n\tfunction transcode( buffer ) {\n\n\t\tconst ktx2File = new BasisModule.KTX2File( new Uint8Array( buffer ) );\n\n\t\tfunction cleanup() {\n\n\t\t\tktx2File.close();\n\t\t\tktx2File.delete();\n\n\t\t}\n\n\t\tif ( ! ktx2File.isValid() ) {\n\n\t\t\tcleanup();\n\t\t\tthrow new Error( 'THREE.KTX2Loader:\tInvalid or unsupported .ktx2 file' );\n\n\t\t}\n\n\t\tlet basisFormat;\n\n\t\tif ( ktx2File.isUASTC() ) {\n\n\t\t\tbasisFormat = BasisFormat.UASTC;\n\n\t\t} else if ( ktx2File.isETC1S() ) {\n\n\t\t\tbasisFormat = BasisFormat.ETC1S;\n\n\t\t} else if ( ktx2File.isHDR() ) {\n\n\t\t\tbasisFormat = BasisFormat.UASTC_HDR;\n\n\t\t} else {\n\n\t\t\tthrow new Error( 'THREE.KTX2Loader: Unknown Basis encoding' );\n\n\t\t}\n\n\t\tconst width = ktx2File.getWidth();\n\t\tconst height = ktx2File.getHeight();\n\t\tconst layerCount = ktx2File.getLayers() || 1;\n\t\tconst levelCount = ktx2File.getLevels();\n\t\tconst faceCount = ktx2File.getFaces();\n\t\tconst hasAlpha = ktx2File.getHasAlpha();\n\t\tconst dfdFlags = ktx2File.getDFDFlags();\n\n\t\tconst { transcoderFormat, engineFormat, engineType } = getTranscoderFormat( basisFormat, width, height, hasAlpha );\n\n\t\tif ( ! width || ! height || ! levelCount ) {\n\n\t\t\tcleanup();\n\t\t\tthrow new Error( 'THREE.KTX2Loader:\tInvalid texture' );\n\n\t\t}\n\n\t\tif ( ! ktx2File.startTranscoding() ) {\n\n\t\t\tcleanup();\n\t\t\tthrow new Error( 'THREE.KTX2Loader: .startTranscoding failed' );\n\n\t\t}\n\n\t\tconst faces = [];\n\t\tconst buffers = [];\n\n\t\tfor ( let face = 0; face < faceCount; face ++ ) {\n\n\t\t\tconst mipmaps = [];\n\n\t\t\tfor ( let mip = 0; mip < levelCount; mip ++ ) {\n\n\t\t\t\tconst layerMips = [];\n\n\t\t\t\tlet mipWidth, mipHeight;\n\n\t\t\t\tfor ( let layer = 0; layer < layerCount; layer ++ ) {\n\n\t\t\t\t\tconst levelInfo = ktx2File.getImageLevelInfo( mip, layer, face );\n\n\t\t\t\t\tif ( face === 0 && mip === 0 && layer === 0 && ( levelInfo.origWidth % 4 !== 0 || levelInfo.origHeight % 4 !== 0 ) ) {\n\n\t\t\t\t\t\tconsole.warn( 'THREE.KTX2Loader: ETC1S and UASTC textures should use multiple-of-four dimensions.' );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( levelCount > 1 ) {\n\n\t\t\t\t\t\tmipWidth = levelInfo.origWidth;\n\t\t\t\t\t\tmipHeight = levelInfo.origHeight;\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\t// Handles non-multiple-of-four dimensions in textures without mipmaps. Textures with\n\t\t\t\t\t\t// mipmaps must use multiple-of-four dimensions, for some texture formats and APIs.\n\t\t\t\t\t\t// See mrdoob/three.js#25908.\n\t\t\t\t\t\tmipWidth = levelInfo.width;\n\t\t\t\t\t\tmipHeight = levelInfo.height;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tlet dst = new Uint8Array( ktx2File.getImageTranscodedSizeInBytes( mip, layer, 0, transcoderFormat ) );\n\t\t\t\t\tconst status = ktx2File.transcodeImage( dst, mip, layer, face, transcoderFormat, 0, -1, -1 );\n\n\t\t\t\t\tif ( engineType === EngineType.HalfFloatType ) {\n\n\t\t\t\t\t\tdst = new Uint16Array( dst.buffer, dst.byteOffset, dst.byteLength / Uint16Array.BYTES_PER_ELEMENT );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( ! status ) {\n\n\t\t\t\t\t\tcleanup();\n\t\t\t\t\t\tthrow new Error( 'THREE.KTX2Loader: .transcodeImage failed.' );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tlayerMips.push( dst );\n\n\t\t\t\t}\n\n\t\t\t\tconst mipData = concat( layerMips );\n\n\t\t\t\tmipmaps.push( { data: mipData, width: mipWidth, height: mipHeight } );\n\t\t\t\tbuffers.push( mipData.buffer );\n\n\t\t\t}\n\n\t\t\tfaces.push( { mipmaps, width, height, format: engineFormat, type: engineType } );\n\n\t\t}\n\n\t\tcleanup();\n\n\t\treturn { faces, buffers, width, height, hasAlpha, dfdFlags, format: engineFormat, type: engineType };\n\n\t}\n\n\t//\n\n\t// Optimal choice of a transcoder target format depends on the Basis format (ETC1S, UASTC, or\n\t// UASTC HDR), device capabilities, and texture dimensions. The list below ranks the formats\n\t// separately for each format. Currently, priority is assigned based on:\n\t//\n\t//   high quality > low quality > uncompressed\n\t//\n\t// Prioritization may be revisited, or exposed for configuration, in the future.\n\t//\n\t// Reference: https://github.com/KhronosGroup/3D-Formats-Guidelines/blob/main/KTXDeveloperGuide.md\n\tconst FORMAT_OPTIONS = [\n\t\t{\n\t\t\tif: 'astcSupported',\n\t\t\tbasisFormat: [ BasisFormat.UASTC ],\n\t\t\ttranscoderFormat: [ TranscoderFormat.ASTC_4x4, TranscoderFormat.ASTC_4x4 ],\n\t\t\tengineFormat: [ EngineFormat.RGBA_ASTC_4x4_Format, EngineFormat.RGBA_ASTC_4x4_Format ],\n\t\t\tengineType: [ EngineType.UnsignedByteType ],\n\t\t\tpriorityETC1S: Infinity,\n\t\t\tpriorityUASTC: 1,\n\t\t\tneedsPowerOfTwo: false,\n\t\t},\n\t\t{\n\t\t\tif: 'bptcSupported',\n\t\t\tbasisFormat: [ BasisFormat.ETC1S, BasisFormat.UASTC ],\n\t\t\ttranscoderFormat: [ TranscoderFormat.BC7_M5, TranscoderFormat.BC7_M5 ],\n\t\t\tengineFormat: [ EngineFormat.RGBA_BPTC_Format, EngineFormat.RGBA_BPTC_Format ],\n\t\t\tengineType: [ EngineType.UnsignedByteType ],\n\t\t\tpriorityETC1S: 3,\n\t\t\tpriorityUASTC: 2,\n\t\t\tneedsPowerOfTwo: false,\n\t\t},\n\t\t{\n\t\t\tif: 'dxtSupported',\n\t\t\tbasisFormat: [ BasisFormat.ETC1S, BasisFormat.UASTC ],\n\t\t\ttranscoderFormat: [ TranscoderFormat.BC1, TranscoderFormat.BC3 ],\n\t\t\tengineFormat: [ EngineFormat.RGBA_S3TC_DXT1_Format, EngineFormat.RGBA_S3TC_DXT5_Format ],\n\t\t\tengineType: [ EngineType.UnsignedByteType ],\n\t\t\tpriorityETC1S: 4,\n\t\t\tpriorityUASTC: 5,\n\t\t\tneedsPowerOfTwo: false,\n\t\t},\n\t\t{\n\t\t\tif: 'etc2Supported',\n\t\t\tbasisFormat: [ BasisFormat.ETC1S, BasisFormat.UASTC ],\n\t\t\ttranscoderFormat: [ TranscoderFormat.ETC1, TranscoderFormat.ETC2 ],\n\t\t\tengineFormat: [ EngineFormat.RGB_ETC2_Format, EngineFormat.RGBA_ETC2_EAC_Format ],\n\t\t\tengineType: [ EngineType.UnsignedByteType ],\n\t\t\tpriorityETC1S: 1,\n\t\t\tpriorityUASTC: 3,\n\t\t\tneedsPowerOfTwo: false,\n\t\t},\n\t\t{\n\t\t\tif: 'etc1Supported',\n\t\t\tbasisFormat: [ BasisFormat.ETC1S, BasisFormat.UASTC ],\n\t\t\ttranscoderFormat: [ TranscoderFormat.ETC1 ],\n\t\t\tengineFormat: [ EngineFormat.RGB_ETC1_Format ],\n\t\t\tengineType: [ EngineType.UnsignedByteType ],\n\t\t\tpriorityETC1S: 2,\n\t\t\tpriorityUASTC: 4,\n\t\t\tneedsPowerOfTwo: false,\n\t\t},\n\t\t{\n\t\t\tif: 'pvrtcSupported',\n\t\t\tbasisFormat: [ BasisFormat.ETC1S, BasisFormat.UASTC ],\n\t\t\ttranscoderFormat: [ TranscoderFormat.PVRTC1_4_RGB, TranscoderFormat.PVRTC1_4_RGBA ],\n\t\t\tengineFormat: [ EngineFormat.RGB_PVRTC_4BPPV1_Format, EngineFormat.RGBA_PVRTC_4BPPV1_Format ],\n\t\t\tengineType: [ EngineType.UnsignedByteType ],\n\t\t\tpriorityETC1S: 5,\n\t\t\tpriorityUASTC: 6,\n\t\t\tneedsPowerOfTwo: true,\n\t\t},\n\t\t{\n\t\t\tif: 'bptcSupported',\n\t\t\tbasisFormat: [ BasisFormat.UASTC_HDR ],\n\t\t\ttranscoderFormat: [ TranscoderFormat.BC6H ],\n\t\t\tengineFormat: [ EngineFormat.RGB_BPTC_UNSIGNED_Format ],\n\t\t\tengineType: [ EngineType.HalfFloatType ],\n\t\t\tpriorityHDR: 1,\n\t\t\tneedsPowerOfTwo: false,\n\t\t},\n\n\t\t// Uncompressed fallbacks.\n\n\t\t{\n\t\t\tbasisFormat: [ BasisFormat.ETC1S, BasisFormat.UASTC ],\n\t\t\ttranscoderFormat: [ TranscoderFormat.RGBA32, TranscoderFormat.RGBA32 ],\n\t\t\tengineFormat: [ EngineFormat.RGBAFormat, EngineFormat.RGBAFormat ],\n\t\t\tengineType: [ EngineType.UnsignedByteType, EngineType.UnsignedByteType ],\n\t\t\tpriorityETC1S: 100,\n\t\t\tpriorityUASTC: 100,\n\t\t\tneedsPowerOfTwo: false,\n\t\t},\n\t\t{\n\t\t\tbasisFormat: [ BasisFormat.UASTC_HDR ],\n\t\t\ttranscoderFormat: [ TranscoderFormat.RGBA_HALF ],\n\t\t\tengineFormat: [ EngineFormat.RGBAFormat ],\n\t\t\tengineType: [ EngineType.HalfFloatType ],\n\t\t\tpriorityHDR: 100,\n\t\t\tneedsPowerOfTwo: false,\n\t\t}\n\t];\n\n\tconst OPTIONS = {\n\t\t// TODO: For ETC1S we intentionally sort by _UASTC_ priority, preserving\n\t\t// a historical accident shown to avoid performance pitfalls for Linux with\n\t\t// Firefox & AMD GPU (RadeonSI). Further work needed.\n\t\t// See https://github.com/mrdoob/three.js/pull/29730.\n\t\t[ BasisFormat.ETC1S ]: FORMAT_OPTIONS\n\t\t\t.filter( ( opt ) => opt.basisFormat.includes( BasisFormat.ETC1S ) )\n\t\t\t.sort( ( a, b ) => a.priorityUASTC - b.priorityUASTC ),\n\n\t\t[ BasisFormat.UASTC ]: FORMAT_OPTIONS\n\t\t\t.filter( ( opt ) => opt.basisFormat.includes( BasisFormat.UASTC ) )\n\t\t\t.sort( ( a, b ) => a.priorityUASTC - b.priorityUASTC ),\n\n\t\t[ BasisFormat.UASTC_HDR ]: FORMAT_OPTIONS\n\t\t\t.filter( ( opt ) => opt.basisFormat.includes( BasisFormat.UASTC_HDR ) )\n\t\t\t.sort( ( a, b ) => a.priorityHDR - b.priorityHDR ),\n\t};\n\n\tfunction getTranscoderFormat( basisFormat, width, height, hasAlpha ) {\n\n\t\tconst options = OPTIONS[ basisFormat ];\n\n\t\tfor ( let i = 0; i < options.length; i ++ ) {\n\n\t\t\tconst opt = options[ i ];\n\n\t\t\tif ( opt.if && ! config[ opt.if ] ) continue;\n\t\t\tif ( ! opt.basisFormat.includes( basisFormat ) ) continue;\n\t\t\tif ( hasAlpha && opt.transcoderFormat.length < 2 ) continue;\n\t\t\tif ( opt.needsPowerOfTwo && ! ( isPowerOfTwo( width ) && isPowerOfTwo( height ) ) ) continue;\n\n\t\t\tconst transcoderFormat = opt.transcoderFormat[ hasAlpha ? 1 : 0 ];\n\t\t\tconst engineFormat = opt.engineFormat[ hasAlpha ? 1 : 0 ];\n\t\t\tconst engineType = opt.engineType[ 0 ];\n\n\t\t\treturn { transcoderFormat, engineFormat, engineType };\n\n\t\t}\n\n\t\tthrow new Error( 'THREE.KTX2Loader: Failed to identify transcoding target.' );\n\n\t}\n\n\tfunction isPowerOfTwo( value ) {\n\n\t\tif ( value <= 2 ) return true;\n\n\t\treturn ( value & ( value - 1 ) ) === 0 && value !== 0;\n\n\t}\n\n\t/**\n\t * Concatenates N byte arrays.\n\t *\n\t * @param {Uint8Array[]} arrays\n\t * @return {Uint8Array}\n\t */\n\tfunction concat( arrays ) {\n\n\t\tif ( arrays.length === 1 ) return arrays[ 0 ];\n\n\t\tlet totalByteLength = 0;\n\n\t\tfor ( let i = 0; i < arrays.length; i ++ ) {\n\n\t\t\tconst array = arrays[ i ];\n\t\t\ttotalByteLength += array.byteLength;\n\n\t\t}\n\n\t\tconst result = new Uint8Array( totalByteLength );\n\n\t\tlet byteOffset = 0;\n\n\t\tfor ( let i = 0; i < arrays.length; i ++ ) {\n\n\t\t\tconst array = arrays[ i ];\n\t\t\tresult.set( array, byteOffset );\n\n\t\t\tbyteOffset += array.byteLength;\n\n\t\t}\n\n\t\treturn result;\n\n\t}\n\n};\n\n// Parsing for non-Basis textures. These textures may have supercompression\n// like Zstd, but they do not require transcoding.\n\nconst UNCOMPRESSED_FORMATS = new Set( [ RGBAFormat, RGFormat, RedFormat ] );\n\nconst FORMAT_MAP = {\n\n\t[ Ae ]: RGBAFormat,\n\t[ pe ]: RGBAFormat,\n\t[ Ot ]: RGBAFormat,\n\t[ Ft ]: RGBAFormat,\n\n\t[ de ]: RGFormat,\n\t[ se ]: RGFormat,\n\t[ yt ]: RGFormat,\n\t[ dt ]: RGFormat,\n\n\t[ xe ]: RedFormat,\n\t[ $t ]: RedFormat,\n\t[ gt ]: RedFormat,\n\t[ ct ]: RedFormat,\n\n\t[ _i ]: RGBA_ASTC_4x4_Format,\n\t[ In ]: RGBA_ASTC_6x6_Format,\n\t[ Sn ]: RGBA_ASTC_6x6_Format,\n\n};\n\nconst TYPE_MAP = {\n\n\t[ Ae ]: FloatType,\n\t[ pe ]: HalfFloatType,\n\t[ Ot ]: UnsignedByteType,\n\t[ Ft ]: UnsignedByteType,\n\n\t[ de ]: FloatType,\n\t[ se ]: HalfFloatType,\n\t[ yt ]: UnsignedByteType,\n\t[ dt ]: UnsignedByteType,\n\n\t[ xe ]: FloatType,\n\t[ $t ]: HalfFloatType,\n\t[ gt ]: UnsignedByteType,\n\t[ ct ]: UnsignedByteType,\n\n\t[ _i ]: HalfFloatType,\n\t[ In ]: UnsignedByteType,\n\t[ Sn ]: UnsignedByteType,\n\n};\n\nasync function createRawTexture( container ) {\n\n\tconst { vkFormat } = container;\n\n\tif ( FORMAT_MAP[ vkFormat ] === undefined ) {\n\n\t\tthrow new Error( 'THREE.KTX2Loader: Unsupported vkFormat.' );\n\n\t}\n\n\t//\n\n\tlet zstd;\n\n\tif ( container.supercompressionScheme === n ) {\n\n\t\tif ( ! _zstd ) {\n\n\t\t\t_zstd = new Promise( async ( resolve ) => {\n\n\t\t\t\tconst zstd = new Q();\n\t\t\t\tawait zstd.init();\n\t\t\t\tresolve( zstd );\n\n\t\t\t} );\n\n\t\t}\n\n\t\tzstd = await _zstd;\n\n\t}\n\n\t//\n\n\tconst mipmaps = [];\n\n\n\tfor ( let levelIndex = 0; levelIndex < container.levels.length; levelIndex ++ ) {\n\n\t\tconst levelWidth = Math.max( 1, container.pixelWidth >> levelIndex );\n\t\tconst levelHeight = Math.max( 1, container.pixelHeight >> levelIndex );\n\t\tconst levelDepth = container.pixelDepth ? Math.max( 1, container.pixelDepth >> levelIndex ) : 0;\n\n\t\tconst level = container.levels[ levelIndex ];\n\n\t\tlet levelData;\n\n\t\tif ( container.supercompressionScheme === t ) {\n\n\t\t\tlevelData = level.levelData;\n\n\t\t} else if ( container.supercompressionScheme === n ) {\n\n\t\t\tlevelData = zstd.decode( level.levelData, level.uncompressedByteLength );\n\n\t\t} else {\n\n\t\t\tthrow new Error( 'THREE.KTX2Loader: Unsupported supercompressionScheme.' );\n\n\t\t}\n\n\t\tlet data;\n\n\t\tif ( TYPE_MAP[ vkFormat ] === FloatType ) {\n\n\t\t\tdata = new Float32Array(\n\n\t\t\t\tlevelData.buffer,\n\t\t\t\tlevelData.byteOffset,\n\t\t\t\tlevelData.byteLength / Float32Array.BYTES_PER_ELEMENT\n\n\t\t\t);\n\n\t\t} else if ( TYPE_MAP[ vkFormat ] === HalfFloatType ) {\n\n\t\t\tdata = new Uint16Array(\n\n\t\t\t\tlevelData.buffer,\n\t\t\t\tlevelData.byteOffset,\n\t\t\t\tlevelData.byteLength / Uint16Array.BYTES_PER_ELEMENT\n\n\t\t\t);\n\n\t\t} else {\n\n\t\t\tdata = levelData;\n\n\t\t}\n\n\t\tmipmaps.push( {\n\n\t\t\tdata: data,\n\t\t\twidth: levelWidth,\n\t\t\theight: levelHeight,\n\t\t\tdepth: levelDepth,\n\n\t\t} );\n\n\t}\n\n\tlet texture;\n\n\tif ( UNCOMPRESSED_FORMATS.has( FORMAT_MAP[ vkFormat ] ) ) {\n\n\t\ttexture = container.pixelDepth === 0\n\t\t\t? new DataTexture( mipmaps[ 0 ].data, container.pixelWidth, container.pixelHeight )\n\t\t\t: new Data3DTexture( mipmaps[ 0 ].data, container.pixelWidth, container.pixelHeight, container.pixelDepth );\n\n\t} else {\n\n\t\tif ( container.pixelDepth > 0 ) throw new Error( 'THREE.KTX2Loader: Unsupported pixelDepth.' );\n\n\t\ttexture = new CompressedTexture( mipmaps, container.pixelWidth, container.pixelHeight );\n\n\t\ttexture.minFilter = mipmaps.length === 1 ? LinearFilter : LinearMipmapLinearFilter;\n\t\ttexture.magFilter = LinearFilter;\n\n\t}\n\n\ttexture.mipmaps = mipmaps;\n\n\ttexture.type = TYPE_MAP[ vkFormat ];\n\ttexture.format = FORMAT_MAP[ vkFormat ];\n\ttexture.colorSpace = parseColorSpace( container );\n\ttexture.needsUpdate = true;\n\n\t//\n\n\treturn Promise.resolve( texture );\n\n}\n\nfunction parseColorSpace( container ) {\n\n\tconst dfd = container.dataFormatDescriptor[ 0 ];\n\n\tif ( dfd.colorPrimaries === F ) {\n\n\t\treturn dfd.transferFunction === x ? SRGBColorSpace : LinearSRGBColorSpace;\n\n\t} else if ( dfd.colorPrimaries === X ) {\n\n\t\treturn dfd.transferFunction === x ? DisplayP3ColorSpace : LinearDisplayP3ColorSpace;\n\n\t} else if ( dfd.colorPrimaries === E ) {\n\n\t\treturn NoColorSpace;\n\n\t} else {\n\n\t\tconsole.warn( `THREE.KTX2Loader: Unsupported color primaries, \"${ dfd.colorPrimaries }\"` );\n\t\treturn NoColorSpace;\n\n\t}\n\n}\n\nvar lzma = function(){var pp, n0 = 0x10000000000000000, n1 = 4294967295, n2 = 2147483647, n3 = 2147483648;\nfunction r(e,r){pp({action:nr,cbn:r,result:e});}function o(e){var r=[];return r[e-1]=void 0,r}function n(e,r){return i(e[0]+r[0],e[1]+r[1])}\nfunction t(e,r){var o,n;return e[0]==r[0]&&e[1]==r[1]?0:(o=0>e[1],n=0>r[1],o&&!n?-1:!o&&n?1:d(e,r)[1]<0?-1:1)}\nfunction i(e,r){var o,n;for(r%=n0,e%=n0,o=r%ir,n=Math.floor(e/ir)*ir,r=r-o+n,e=e-n+o;0>e;)e+=ir,r-=ir;for(;e>n1;)e-=ir,r+=ir;for(r%=n0;r>0x7fffffff00000000;)r-=n0;for(;-18446744073709552e3>r;)r+=n0;return [e,r]}\nfunction u(e){return e>=0?[e,0]:[e+ir,-4294967296]}function s(e){return e[0]>=n3?~~Math.max(Math.min(e[0]-ir,n2),-2147483648):~~Math.max(Math.min(e[0],n2),-2147483648)}function d(e,r){return i(e[0]-r[0],e[1]-r[1])}\nfunction c(e,r){return e.ab=r,e.cb=0,e.O=r.length,e}function m(e){return e.cb>=e.O?-1:255&e.ab[e.cb++]}function a(e){return e.ab=o(32),e.O=0,e}function _(e){var r=e.ab;return r.length=e.O,r}\nfunction f(e,r,o,n){p(r,o,e.ab,e.O,n),e.O+=n;}function p(e,r,o,n,t){for(var i=0;t>i;++i)o[n+i]=e[r+i];}\nfunction D(e,r,o){var n,t,i,s,d=\"\",c=[];for(t=0;5>t;++t){if(i=m(r),-1==i)throw Error(\"truncated input\");c[t]=i<<24>>24;}if(n=N({}),!z(n,c))throw Error(\"corrupted input\");\nfor(t=0;64>t;t+=8){if(i=m(r),-1==i)throw Error(\"truncated input\");i=i.toString(16),1==i.length&&(i=\"0\"+i),d=i+\"\"+d;}/^0+$|^f+$/i.test(d)?e.N=ur:(s=parseInt(d,16),e.N=s>n1?ur:u(s)),e.Q=B(n,r,o,e.N);}\nfunction l(e,r){return e.S=a({}),D(e,c({},r),e.S),e}function g(e,r,o){var n=e.D-r-1;for(0>n&&(n+=e.c);0!=o;--o)n>=e.c&&(n=0),e.x[e.D++]=e.x[n++],e.D>=e.c&&w(e);}\nfunction v(e,r){(null==e.x||e.c!=r)&&(e.x=o(r)),e.c=r,e.D=0,e.w=0;}function w(e){var r=e.D-e.w;r&&(f(e.V,e.x,e.w,r),e.D>=e.c&&(e.D=0),e.w=e.D);}\nfunction R(e,r){var o=e.D-r-1;return 0>o&&(o+=e.c),e.x[o]}function h(e,r){e.x[e.D++]=r,e.D>=e.c&&w(e);}function P(e){w(e),e.V=null;}function C(e){return e-=2,4>e?e:3}\nfunction S(e){return 4>e?0:10>e?e-3:e-6}function M(e,r){return e.h=r,e.bb=null,e.X=1,e}function L(e){if(!e.X)throw Error(\"bad state\");if(e.bb)throw Error(\"No encoding\");return y(e),e.X}\nfunction y(e){var r=I(e.h);if(-1==r)throw Error(\"corrupted input\");e.$=ur,e.Z=e.h.d,(r||t(e.h.U,sr)>=0&&t(e.h.d,e.h.U)>=0)&&(w(e.h.b),P(e.h.b),e.h.a.K=null,e.X=0);}\nfunction B(e,r,o,n){return e.a.K=r,P(e.b),e.b.V=o,b(e),e.f=0,e.l=0,e.T=0,e.R=0,e._=0,e.U=n,e.d=sr,e.I=0,M({},e)}\nfunction I(e){ var r,o,i,d,c,m;if(m=s(e.d)&e.P,Q(e.a,e.q,(e.f<<4)+m)){if(Q(e.a,e.E,e.f))i=0,\nQ(e.a,e.s,e.f)?(Q(e.a,e.u,e.f)?(Q(e.a,e.r,e.f)?(o=e._,e._=e.R):o=e.R,e.R=e.T):o=e.T,e.T=e.l,e.l=o):Q(e.a,e.n,(e.f<<4)+m)||(e.f=7>e.f?9:11,i=1),\ni||(i=x(e.o,e.a,m)+2,e.f=7>e.f?8:11);else if(e._=e.R,e.R=e.T,e.T=e.l,i=2+x(e.C,e.a,m),e.f=7>e.f?7:10,c=q(e.j[C(i)],e.a),c>=4){if(d=(c>>1)-1,e.l=(2|1&c)<<d,14>c)e.l+=J(e.J,e.l-c-1,e.a,d);\nelse if(e.l+=U(e.a,d-4)<<4,e.l+=F(e.t,e.a),0>e.l)return  -1==e.l?1:-1}else e.l=c;if(t(u(e.l),e.d)>=0||e.l>=e.m)return  -1;\ng(e.b,e.l,i),e.d=n(e.d,u(i)),e.I=R(e.b,0);}else r=Z(e.k,s(e.d),e.I),e.I=7>e.f?T(r,e.a):$(r,e.a,R(e.b,e.l)),h(e.b,e.I),e.f=S(e.f),e.d=n(e.d,dr);return 0}\nfunction N(e){e.b={},e.a={},e.q=o(192),e.E=o(12),e.s=o(12),e.u=o(12),e.r=o(12),e.n=o(192),e.j=o(4),e.J=o(114),e.t=K({},4),e.C=G({}),e.o=G({}),e.k={};for(var r=0;4>r;++r)e.j[r]=K({},6);return e}\nfunction b(e){e.b.w=0,e.b.D=0,X(e.q),X(e.n),X(e.E),X(e.s),X(e.u),X(e.r),X(e.J),H(e.k);for(var r=0;4>r;++r)X(e.j[r].B);A(e.C),A(e.o),X(e.t.B),V(e.a);}\nfunction z(e,r){var o,n,t,i,u,s,d;if(5>r.length)return 0;for(d=255&r[0],t=d%9,s=~~(d/9),i=s%5,u=~~(s/5),o=0,n=0;4>n;++n)o+=(255&r[1+n])<<8*n;return o>99999999||!W(e,t,i,u)?0:O(e,o)}\nfunction O(e,r){return 0>r?0:(e.z!=r&&(e.z=r,e.m=Math.max(e.z,1),v(e.b,Math.max(e.m,4096))),1)}\nfunction W(e,r,o,n){if(r>8||o>4||n>4)return 0;E(e.k,o,r);var t=1<<n;return k(e.C,t),k(e.o,t),e.P=t-1,1}function k(e,r){for(;r>e.e;++e.e)e.G[e.e]=K({},3),e.H[e.e]=K({},3);}\nfunction x(e,r,o){if(!Q(r,e.M,0))return q(e.G[o],r);var n=8;return n+=Q(r,e.M,1)?8+q(e.L,r):q(e.H[o],r)}function G(e){return e.M=o(2),e.G=o(16),e.H=o(16),e.L=K({},8),e.e=0,e}\nfunction A(e){X(e.M);for(var r=0;e.e>r;++r)X(e.G[r].B),X(e.H[r].B);X(e.L.B);}\nfunction E(e,r,n){var t,i;if(null==e.F||e.g!=n||e.y!=r)for(e.y=r,e.Y=(1<<r)-1,e.g=n,i=1<<e.g+e.y,e.F=o(i),t=0;i>t;++t)e.F[t]=j({});}\nfunction Z(e,r,o){return e.F[((r&e.Y)<<e.g)+((255&o)>>>8-e.g)]}function H(e){var r,o;for(o=1<<e.g+e.y,r=0;o>r;++r)X(e.F[r].v);}\nfunction T(e,r){var o=1;do o=o<<1|Q(r,e.v,o);while(256>o);return o<<24>>24}\nfunction $(e,r,o){var n,t,i=1;do if(t=o>>7&1,o<<=1,n=Q(r,e.v,(1+t<<8)+i),i=i<<1|n,t!=n){for(;256>i;)i=i<<1|Q(r,e.v,i);break}while(256>i);return i<<24>>24}\nfunction j(e){return e.v=o(768),e}function K(e,r){return e.A=r,e.B=o(1<<r),e}function q(e,r){var o,n=1;for(o=e.A;0!=o;--o)n=(n<<1)+Q(r,e.B,n);return n-(1<<e.A)}\nfunction F(e,r){var o,n,t=1,i=0;for(n=0;e.A>n;++n)o=Q(r,e.B,t),t<<=1,t+=o,i|=o<<n;return i}function J(e,r,o,n){var t,i,u=1,s=0;for(i=0;n>i;++i)t=Q(o,e,r+u),u<<=1,u+=t,s|=t<<i;return s}\nfunction Q(e,r,o){var n,t=r[o];return n=(e.i>>>11)*t,(-2147483648^n)>(-2147483648^e.p)?(e.i=n,r[o]=t+(2048-t>>>5)<<16>>16,-16777216&e.i||(e.p=e.p<<8|m(e.K),e.i<<=8),0):(e.i-=n,e.p-=n,r[o]=t-(t>>>5)<<16>>16,\n-16777216&e.i||(e.p=e.p<<8|m(e.K),e.i<<=8),1)}\nfunction U(e,r){var o,n,t=0;for(o=r;0!=o;--o)e.i>>>=1,n=e.p-e.i>>>31,e.p-=e.i&n-1,t=t<<1|1-n,-16777216&e.i||(e.p=e.p<<8|m(e.K),e.i<<=8);return t}\nfunction V(e){e.p=0,e.i=-1;for(var r=0;5>r;++r)e.p=e.p<<8|m(e.K);}function X(e){for(var r=e.length-1;r>=0;--r)e[r]=1024;}\nfunction Y(e){ for(var r,o,n,t=0,i=0,u=e.length,s=[],d=[];u>t;++t,++i){\nif(r=255&e[t],128&r)if(192==(224&r)){if(t+1>=u)return e;if(o=255&e[++t],128!=(192&o))return e;d[i]=(31&r)<<6|63&o;}else {if(224!=(240&r))return e;if(t+2>=u)return e;\nif(o=255&e[++t],128!=(192&o))return e;if(n=255&e[++t],128!=(192&n))return e;d[i]=(15&r)<<12|(63&o)<<6|63&n;}else {if(!r)return e;\nd[i]=r;}16383==i&&(s.push(String.fromCharCode.apply(String,d)),i=-1);}return i>0&&(d.length=i,s.push(String.fromCharCode.apply(String,d))),s.join(\"\")}\nfunction er(e){return e[1]+e[0]}\nfunction rr(e,o,n){function t(){try{for(var e,r=0,u=(new Date).getTime();L(c.d.Q);)if(++r%1e3==0&&(new Date).getTime()-u>200)return s&&(i=er(c.d.Q.h.d)/d,n(i)),tr(t,0),0;\nn(1),e=Y(_(c.d.S)),tr(o.bind(null,e),0);}catch(m){o(null,m);}} var i,u,s,d,c={},m=void 0===o&&void 0===n;\nif(\"function\"!=typeof o&&(u=o,o=n=0),n=n||function(e){return void 0!==u?r(s?e:-1,u):void 0},\no=o||function(e,r){return void 0!==u?pp({action:or,cbn:u,result:e,error:r}):void 0},m){for(c.d=l({},e);L(c.d.Q););return Y(_(c.d.S))}\ntry{c.d=l({},e),d=er(c.d.N),s=d>-1,n(0);}catch(a){return o(null,a)}tr(t,0);}\nvar or=2,nr=3,tr=\"function\"==typeof setImmediate?setImmediate:setTimeout,ir=4294967296,ur=[n1,-4294967296],sr=[0,0],dr=[1,0];\nreturn {decompress:rr}\n}();\n\nconst LZMA = {\n\n    decompress:( r, callback ) => {\n        lzma.decompress( new Uint8Array( r ), callback );\n    },\n};\n/*\n  var action_compress   = 1, action_decompress = 2, action_progress   = 3\n\n  export class LZMA {\n\n    constructor( lzma_path ) {\n   // export class LZMA = function (lzma_path) {\n        \n            \n            this.callback_obj = {}\n            \n            ///NOTE: Node.js needs something like \"./\" or \"../\" at the beginning.\n            this.lzma_worker = new Worker(lzma_path || \"./lzma_worker-min.js\");\n        \n        this.lzma_worker.onmessage = function onmessage(e) {\n            if (e.data.action === action_progress) {\n                if (this.callback_obj[e.data.cbn] && typeof this.callback_obj[e.data.cbn].on_progress === \"function\") {\n                    this.callback_obj[e.data.cbn].on_progress(e.data.result);\n                }\n            } else {\n                if (this.callback_obj[e.data.cbn] && typeof this.callback_obj[e.data.cbn].on_finish === \"function\") {\n                    this.callback_obj[e.data.cbn].on_finish(e.data.result, e.data.error);\n                    \n                    /// Since the (de)compression is complete, the callbacks are no longer needed.\n                    delete this.callback_obj[e.data.cbn];\n                }\n            }\n        }.bind(this)\n        \n        /// Very simple error handling.\n        this.lzma_worker.onerror = function(event) {\n            var err = new Error(event.message + \" (\" + event.filename + \":\" + event.lineno + \")\");\n            \n            for (var cbn in this.callback_obj) {\n                this.callback_obj[cbn].on_finish(null, err);\n            }\n            \n            console.error('Uncaught error in lzma_worker', err);\n        }.bind(this)\n        \n    }\n\n    send_to_worker(action, data, mode, on_finish, on_progress) {\n        var cbn;\n        \n        do {\n            cbn = Math.floor(Math.random() * (10000000));\n        } while(typeof this.callback_obj[cbn] !== \"undefined\");\n        \n        this.callback_obj[cbn] = {\n            on_finish:   on_finish,\n            on_progress: on_progress\n        };\n        \n        this.lzma_worker.postMessage({\n            action: action, /// action_compress = 1, action_decompress = 2, action_progress = 3\n            cbn:    cbn,    /// callback number\n            data:   data,\n            mode:   mode\n        });\n    }\n\n    compress(mixed, mode, on_finish, on_progress) {\n        this.send_to_worker(action_compress, mixed, mode, on_finish, on_progress);\n    }\n    decompress(byte_arr, on_finish, on_progress) {\n        this.send_to_worker(action_decompress, byte_arr, false, on_finish, on_progress);\n    }\n    worker() {\n        return this.lzma_worker;\n    }\n}\n*/\n\n/** __\n*    _)_|_|_\n*   __) |_| | 2022\n* @author lo.th / https://github.com/lo-th\n*/\n\nlet isGL2 = true;\nlet isInit = false;\n\nlet renderer$1 = null;\n//let mode = ''\n\n//const mats = {}\n\nconst materials = new Map();\n\nconst uniforms = {\n\n\trenderMode: { value: 0 },\n    fogMode: { value: 1 },\n    depthPacking: { value: 1 },\n\n\ttime: { value: 0.0 },\n\n\tshadow: { value: 0.5 },\n    shadowGamma: { value: 0.25 },//1\n    shadowLuma: { value: 0 },//0.75\n    shadowContrast: { value: 1 },//2.5\n    \n\t//shadowAlpha: { value: 1.0 }\n\n    lightSizeUV: { value: 1 },//3\n    nearPlane: { value: 1 },//9.5\n    rings:{ value: 4 },//11\n    nSample:{ value: 16 },//17\n    \n    noiseIntensity:{ value: 1 },\n    softness:{ value: 1.6 },\n\n    noiseMap:{ value: null },\n    useNoiseMap:{ value: 0 },\n\n    \n};\n\n\nclass Shader {\n\n    get renderer() { return renderer$1; }\n    set renderer( r ) { renderer$1 = r; }\n\n    static setGl2 ( b ) { isGL2 = b; }\n    static getGl2 ( b ) { return isGL2 }\n\n    static setting () {\n        return uniforms\n    }\n\n    static getRandomUv(){\n        return randomUV;\n    }\n\n    static addParsFragment( s, adds ){\n        s.fragmentShader = s.fragmentShader.replace( '#include <clipping_planes_pars_fragment>', '#include <clipping_planes_pars_fragment>' + adds );\n    }\n\n    /*static addToParsFragment( fragment, adds ){\n        return fragment.replace( '#include <clipping_planes_pars_fragment>', '#include <clipping_planes_pars_fragment>' + adds );\n    }*/\n\n\n\tstatic init ( o = {} ) {\n        const activeShadowPCSS = o.shadowType === 'PCSS';\n\n        // Set CustomToneMapping to Uncharted2\n        // source: http://filmicworlds.com/blog/filmic-tonemapping-operators/\n\n        ShaderChunk.tonemapping_pars_fragment = ShaderChunk.tonemapping_pars_fragment.replace(\n            'vec3 CustomToneMapping( vec3 color ) { return color; }',\n            `#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )\n            float toneMappingWhitePoint = 1.0;\n            vec3 CustomToneMapping( vec3 color ) {\n                color *= toneMappingExposure;\n                return saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );\n            }`\n        );\n\n        \n\n        // native three\n        if(!activeShadowPCSS) return\n\n        //if( mode === 'LOW' ) return\n\n        let s;\n\n        this.up( o );\n\n        if( activeShadowPCSS ) {\n\n            //defines['NUM_SAMPLES'] = 17\n            //defines['NUM_RINGS'] = 11\n\n            s = ShaderChunk.shadowmap_pars_fragment;\n\n            s = s.replace(\n                '#ifdef USE_SHADOWMAP', shadowPCSS\n            );\n\n            s = s.replace(//BasicShadowMap\n                'shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );',`\n                return PCSS( shadowMap, shadowCoord );\n            `);\n\n            /*s = s.replace(\n                '#if defined( SHADOWMAP_TYPE_PCF )',`\n                return PCSS( shadowMap, shadowCoord );\n                #if defined( SHADOWMAP_TYPE_PCF )\n            `)*/\n\n            ShaderChunk.shadowmap_pars_fragment = s;\n\n        }\n\n\t\t//return;\n\n\t\ts = ShaderChunk.common;\n        s = s.replace( '#define EPSILON 1e-6', `\n        \t#define EPSILON 1e-6\n        \tuniform float shadow;\n            uniform float shadowLuma;\n            uniform float shadowContrast;\n            uniform float shadowGamma;\n\n            uniform int renderMode;\n            uniform int fogMode;\n            uniform int depthPacking;\n\n            varying vec2 vZW;\n            varying vec3 rayDir;\n            varying vec3 rayDir2;\n            varying vec3 rayOri;\n            //varying float fDist;\n\n            float shadowValue = 1.0;\n            float shadowTmp = 1.0;\n            vec3 shadowColor = vec3(1.0);\n            \n            float color_distance( vec3 a, vec3 b){\n                vec3 s = vec3( a - b );\n                float dist = sqrt( s.r * s.r + s.g * s.g + s.b * s.b );\n                return clamp(dist, 0.0, 1.0);\n            }\n\n            vec3 adjustContrast(vec3 color, float value) {\n                const vec3 zero = vec3(0.);\n                return max(zero, 0.5 + value * (color - 0.5));\n            }\n\n            vec3 hsv2rgb(vec3 c){\n                vec4 K = vec4(1.0, 2.0 / 3.0, 1.0 / 3.0, 3.0);\n                vec3 p = abs(fract(c.xxx + K.xyz) * 6.0 - K.www);\n                return c.z * mix(K.xxx, clamp(p - K.xxx, 0.0, 1.0), c.y);\n            }\n\n            vec3 rgb2hsv(vec3 rgb) {\n                float Cmax = max(rgb.r, max(rgb.g, rgb.b));\n                float Cmin = min(rgb.r, min(rgb.g, rgb.b));\n                float delta = Cmax - Cmin;\n                vec3 hsv = vec3(0., 0., Cmax);\n                if (Cmax > Cmin) {\n                    hsv.y = delta / Cmax;\n                    if (rgb.r == Cmax) hsv.x = (rgb.g - rgb.b) / delta;\n                    else {\n                        if (rgb.g == Cmax) hsv.x = 2. + (rgb.b - rgb.r) / delta;\n                        else hsv.x = 4. + (rgb.r - rgb.g) / delta;\n                    }\n                    hsv.x = fract(hsv.x / 6.);\n                }\n                return hsv;\n            }\n\n            /*\n            vec3 rgb2hsv(vec3 c){\n                vec4 K = vec4(0.0, -1.0 / 3.0, 2.0 / 3.0, -1.0);\n                vec4 p = mix(vec4(c.bg, K.wz), vec4(c.gb, K.xy), step(c.b, c.g));\n                vec4 q = mix(vec4(p.xyw, c.r), vec4(c.r, p.yzx), step(p.x, c.r));\n\n                float d = q.x - min(q.w, q.y);\n                float e = 1.0e-10;\n                return vec3(abs(q.z + (q.w - q.y) / (6.0 * d + e)), d / (q.x + e), q.x);\n            }\n\n            vec3 brightnessContrastCorrection(vec3 value, float brightness, float contrast){\n                return (value - 0.5) * contrast + 0.5 + brightness;\n            }\n\n            vec3 GammaCorrection(vec3 value, float param){\n                return vec3(pow(abs(value.r), param),pow(abs(value.g), param),pow(abs(value.b), param));\n            }\n            */\n            \n\n        `);\n\n        ShaderChunk.common = s;\n\n        /*ShaderChunk.project_vertex = `\n            vec4 mvPosition = vec4( transformed, 1.0 );\n\n            #ifdef USE_INSTANCING\n                mvPosition = instanceMatrix * mvPosition;\n            #endif\n\n            mvPosition = modelViewMatrix * mvPosition;\n            gl_Position = projectionMatrix * mvPosition;\n        `;*/\n\n\n\n\n\n        /*ShaderChunk.begin_vertex = `\n        vZW = gl_Position.zw;\n        vec3 transformed = vec3( position );\n        `;*/\n\n\n        ShaderChunk.clipping_planes_vertex = `\n            #if NUM_CLIPPING_PLANES > 0\n                vClipPosition = - mvPosition.xyz;\n            #endif\n            vZW = gl_Position.zw;\n        `;\n\n        s = ShaderChunk.lights_fragment_begin;\n\n        // point\n        s = s.replace( 'directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;', `\n            shadowTmp = 1.0;\n            shadowTmp *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;;\n            //directLight.color *= shadowTmp;\n            shadowValue *= shadowTmp;\n        `);\n\n        // spot\n        s = s.replace( 'directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;', `\n            shadowTmp = 1.0;\n            shadowTmp *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n            //directLight.color *= shadowTmp;\n            shadowValue *= shadowTmp;\n        `);\n\n        // directional\n        s = s.replace( 'directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;', `\n            shadowTmp = 1.0;\n            shadowTmp *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n            //directLight.color *= shadowTmp;\n            shadowValue *= shadowTmp;\n        `);\n\n        ShaderChunk.lights_fragment_begin = s;\n\n       /* s = ShaderChunk.tonemapping_fragment;\n\n        s = s.replace( '#if defined( TONE_MAPPING )', `\n            #if defined( USE_SHADOWMAP )\n            gl_FragColor.rgb = mix( gl_FragColor.rgb, gl_FragColor.rgb * shadowR, Shadow);\n            #endif\n\n            #if defined( TONE_MAPPING )\n        `);\n\n        ShaderChunk.tonemapping_fragment = s;*/\n\n        {\n            ShaderChunk.fog_vertex = FogVertex;\n            ShaderChunk.fog_fragment = FogFragment;\n        }\n\n        \n        \n\n\n\n\n        s = ShaderChunk.opaque_fragment;//output_fragment;\n\n        s = s.replace( 'gl_FragColor = vec4( outgoingLight, diffuseColor.a );', `\n\n            gl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\n        \t#if defined( USE_SHADOWMAP )\n\n            shadowValue = (shadowValue - 0.5) * shadowContrast + 0.5 + shadowLuma;\n            shadowValue = pow(abs(shadowValue), shadowGamma );\n            shadowValue = clamp( shadowValue, 0.0, 1.0 );\n\n            shadowColor = vec3( shadowValue );\n\n            ///shadowColor = vec3( 0.0,0.0,1.0-shadowValue );\n\n            //vec3 sColor = vec3( 0.1, 0.1, 0.8 );\n            //shadowColor.b += 1.0-shadowValue ;\n\n\n\n            // TODO find better shadow variation\n\n            vec3 invert = vec3( 1.0 - gl_FragColor.rgb );\n            vec3 dd = vec3(0.38,0.42,0.63);\n            float gray = ((gl_FragColor.r + gl_FragColor.g + gl_FragColor.b) / 3.0);\n            vec3 invColor = gray * dd;\n            invColor = invColor * mix( invColor, invert, 1.0-gray*0.5 );\n\n\n\n\n                    \n\n\n            //gl_FragColor.rgb = mix( gl_FragColor.rgb, gl_FragColor.rgb * shadowColor, (1.0-shadowValue) * shadow );\n\n            //gl_FragColor.rgb *= ((1.0-shadowValue) * (1.0-shadow)) + shadowColor;\n\n            //gl_FragColor.rgb = mix( gl_FragColor.rgb, gl_FragColor.rgb * invColor, (1.0-shadowValue) * shadow );\n\n            gl_FragColor.rgb = mix( gl_FragColor.rgb, invColor, (1.0-shadowValue) * shadow );\n\n            //gl_FragColor.rgb = invColor;\n\n            //gl_FragColor.rgb = gl_FragColor.rgb * shadowColor;\n\n            //gl_FragColor.rgb *= ((1.0-shadowValue) * shadow) * invColor;\n\n\n        \t#endif\n            \n        `);\n\n        //ShaderChunk.fog_fragment = s;\n        ShaderChunk.opaque_fragment = s;//output_fragment = s\n\n      //  ShaderChunk.tonemapping_fragment = s;\n\n\n        //console.log('shadow modif on')\n\n        s = ShaderChunk.dithering_fragment;\n\n        s = s.replace( '#endif', `\n\n            #endif\n\n            #ifdef STANDARD\n\n            if( renderMode == 1 ){ \n                float fz = 0.5 * vZW[0] / vZW[1] + 0.5;\n                gl_FragColor = depthPacking == 1 ? packDepthToRGBA( fz ) : vec4( vec3( 1.0 - fz ), opacity );// depth render\n            }\n            if( renderMode == 2 ) gl_FragColor = vec4(  packNormalToRGB( normal ), opacity );// normal render\n            if( renderMode == 3 ) gl_FragColor = vec4(  shadowColor, opacity );// normal render\n\n            #else\n\n            if( renderMode != 0 ) discard;\n\n            #endif\n\n        `);\n\n        ShaderChunk.dithering_fragment = s;\n\n\n\n        s = ShaderChunk.color_vertex;\n        s = s.replace( 'vColor.xyz *= instanceColor.xyz;', `vColor.xyz = instanceColor.xyz;`);\n        ShaderChunk.color_vertex = s;\n\n\n        isInit = true;\n\n\n\n\n\n\n\t\t//this.shaders=[];\n\t\t//this.uniforms = {};\n\n\t}\n\n    static add ( m, beforeCompile = null ) {\n\n        if( !isInit ) return\n\n        if( !m ) return\n\n        let name = m.name;\n        if ( materials.has( name ) ) { \n            console.log('already add', name);\n            return \n        }\n\n        //console.log('add', name)\n        materials.set( name, true );\n        \n        if( m.shadowSide === null ) m.shadowSide = DoubleSide;\n\n        //m.format = sRGBEncoding;\n        /*if(!m.isEncod){\n            if( m.map ) m.map.colorSpace = SRGBColorSpace\n            m.color.convertSRGBToLinear()\n            m.isEncod = true\n        }*/\n\n        m.onBeforeCompile = function ( shader ) {\n            Shader.modify( shader );\n            if(beforeCompile) beforeCompile(shader);\n        };\n\n        /*if(!m.defines){ \n            m.defines = defines\n        } else {\n            Shader.setDefines( m )\n        }*/\n         //\n\n    } \n\n    static refresh () {\n\n      /* console.log( 'refresh', materials )\n\n        materials.forEach( (value, key)=>{\n\n\n            //console.log( value, key )\n\n\n\n            value.needsUpdate = true \n\n        })*/\n    }\n\n    static setDefines ( m ) {\n        \n        //for( var o in defines ) m.defines[o] = defines[o]\n\n        //if(!mats[m.name]) mats[m.name] = m\n\n       // console.log(m.name)\n\n    }\n\n\n    static modify ( s ) {\n\n        if( !isInit ) return\n\n       // if( mode === 'LOW' ) return\n\n       //shaders.push( s );\n       // apply global uniform\n       for( let n in uniforms ){\n\n       \t    s.uniforms[n] = uniforms[n];\n\n       }\n\n       // start add\n\n       /*let fragment = s.fragmentShader;\n\n        fragment.replace( 'vec4 diffuseColor = vec4( diffuse, opacity );', `\n            vec4 diffuseColor = vec4( diffuse, opacity );\n            vec3 shadowR = vec3(1.0);\n        `);\n        s.fragmentShader = fragment;*/\n\n    }\n\n    static up ( o ) {\n\n        //if( mode === 'LOW' ) return\n\n        for( let n in o ){\n\n            if( uniforms[n] ){ \n                if( uniforms[n].value.isColor ) uniforms[n].value.setHex( o[n] );\n                else uniforms[n].value = o[n];\n\n            }\n\n            /*if( defines[n] ){\n\n                for( let m in mats ){ \n                    console.log(m)\n                    mats[m].defines[n] = o[n]\n                }\n\n            }*/\n            \n\n        }\n\n    \t/*for ( let s of shaders ){\n\n    \t\tfor( let n in o ){\n\n    \t\t\tif( s.uniforms[n] ){ \n                    if( s.uniforms[n].value.isColor ) s.uniforms[n].value.setHex( o[n] );\n                    else s.uniforms[n].value = o[n];\n\n                }\n    \t\t}\n\n    \t}*/\n\n    }\n\n    static reset (){\n        materials.clear();\n    }\n\n}\n/*THREE.ShaderChunk.fog_fragment = THREE.ShaderChunk.fog_fragment.replace(\n                    'gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );',\n                    `\n                    vec4 CCF = vec4(fogColor, 1.0);\n                    #if defined( TONE_MAPPING )\n                    CCF.rgb = toneMapping( CCF.rgb );\n                    CCF = linearToOutputTexel( CCF );\n                    #endif\n                    gl_FragColor.rgb = mix( gl_FragColor.rgb, CCF.rgb, fogFactor );\n                    `\n                );*/\n\n\n//---------------------\n//     FOG SHADER\n//---------------------\n\n// https://iquilezles.org/articles/fog/\n\nconst FogVertex = /* glsl */`\n\n#ifdef USE_FOG\n\n    vFogDepth = - mvPosition.z;\n\n    rayDir2 = normalize( worldPosition.xyz - cameraPosition );\n    rayDir = normalize( mvPosition.xyz );\n    rayOri = cameraPosition.xyz;\n\n    //rayOri = worldPosition.xyz; //( cameraPosition-worldPosition.xyz  );\n    //vec3 tt = vec3(cameraPosition-mvPosition);\n    //float fDist = sqrt(tt.x*tt.x+tt.y*tt.y+tt.z*tt.z);\n    //fDist = distance(cameraPosition.xyz, mvPosition.xyz);\n\n#endif\n`;\n\nconst FogFragment = /* glsl */`\n\n#ifdef USE_FOG\n\n    #ifdef FOG_EXP2\n\n        float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\n    #else\n\n        float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n        float fogDensity = 0.01;\n\n    #endif\n\n    \n\n    /*vec4 CCF = vec4(fogColor, 1.0);\n    #if defined( TONE_MAPPING )\n        CCF.rgb = toneMapping( CCF.rgb );\n        //CCF = linearToOutputTexel( CCF );\n    #endif*/\n\n    if( fogMode == 0 ){\n\n        gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n    } \n\n    if( fogMode == 1 ){\n\n        vec3 fcolor = fogColor;\n\n        #if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\n            float aa = fogDensity * fogDensity * 1.0;\n            float bb = fogDensity * fogDensity * 12.0;\n            //bb = pow(bb, 0.8);\n            float distance = vFogDepth * vFogDepth;\n\n            fogFactor = 1.0 - exp( -distance*bb );\n            fogFactor = (aa/bb) * exp(-rayOri.y*bb) * (1.0-exp( -distance*rayDir2.y*bb ))/rayDir2.y;\n            fogFactor = clamp( fogFactor, 0.0, 1.0 );\n\n            vec3 sunDir = normalize( directionalLights[ 0 ].direction );\n            vec3 sunColor = directionalLights[ 0 ].color;\n            // sunColor = vec3(1,0,0);\n            float sunAmount = max( dot( rayDir, sunDir ), 0.0 );\n            //float sunAdd = clamp( pow(sunAmount, 60.0), 0.0, 1.0 );\n            float sunAdd = pow(sunAmount, 16.0);\n            fcolor = mix( fogColor, sunColor, sunAdd ); // 8.0\n\n        #endif\n\n        gl_FragColor.rgb = gl_FragColor.rgb * (1.0-fogFactor) + fcolor * fogFactor;\n\n    }\n\n#endif\n`;\n\n//---------------------\n//     shadow PCSS\n//---------------------\n\nconst shadowPCSS = /* glsl */`\n\n#ifdef USE_SHADOWMAP\n\nuniform float lightSizeUV;\nuniform float nearPlane;\nuniform float rings;\nuniform int nSample;\nuniform float noiseIntensity;\nuniform float softness;\n\n//#define LIGHT_WORLD_SIZE 0.005\n//#define LIGHT_FRUSTUM_WIDTH 3.75\n//#define LIGHT_SIZE_UV (LIGHT_WORLD_SIZE / LIGHT_FRUSTUM_WIDTH)\n//#define NEAR_PLANE 9.5\n\n#define SAMPLE 16\n#define RINGS 4\n\nvec2 poissonDisk[32];\n\nvoid initPoissonSamples( const in vec2 randomSeed ) {\n\n    float ANGLE_STEP = PI2 * float(rings) / float( nSample );\n    float INV_NUM_SAMPLES = 1.0 / float( nSample );\n\n    // jsfiddle that shows sample pattern: https://jsfiddle.net/a16ff1p7/\n    float angle = rand( randomSeed ) * PI2;\n    float radius = INV_NUM_SAMPLES;\n    float radiusStep = radius;\n\n    for( int i = 0; i < nSample; i ++ ) {\n        poissonDisk[i] = vec2( cos( angle ), sin( angle ) ) * pow( radius, 0.75 );\n        radius += radiusStep;\n        angle += ANGLE_STEP;\n    }\n}\n\nfloat penumbraSize( const in float zReceiver, const in float zBlocker ) { // Parallel plane estimation\n    return (zReceiver - zBlocker) / zBlocker;\n}\n\nfloat findBlocker( sampler2D shadowMap, const in vec2 uv, const in float zReceiver, float ls ) {\n\n    // This uses similar triangles to compute what\n    // area of the shadow map we should search\n    float searchRadius = ls * ( zReceiver - nearPlane ) / zReceiver;\n    float blockerDepthSum = 0.0;\n    int numBlockers = 0;\n    float shadowMapDepth = 0.0;\n\n    for( int i = 0; i < nSample; i++ ) {\n        shadowMapDepth = unpackRGBAToDepth(texture2D(shadowMap, uv + poissonDisk[i] * searchRadius));\n        if ( shadowMapDepth < zReceiver ) {\n            blockerDepthSum += shadowMapDepth;\n            numBlockers ++;\n        }\n    }\n\n    if( numBlockers == 0 ) return -1.0;\n\n    return blockerDepthSum / float( numBlockers );\n\n}\n\nfloat PCF_Filter(sampler2D shadowMap, vec2 uv, float zReceiver, float filterRadius ) {\n    \n    /*\n    int numSample = nSample;\n    float sum = 0.0;\n    float depth;\n    #pragma unroll_loop_start\n    for( int i = 0; i < nSample; i ++ ) {\n        depth = unpackRGBAToDepth( texture2D( shadowMap, uv + poissonDisk[ i ] * filterRadius ) );\n        if( zReceiver <= depth ) sum += 1.0;\n    }\n    #pragma unroll_loop_end\n    #pragma unroll_loop_start\n    for( int i = 0; i < nSample; i ++ ) {\n        depth = unpackRGBAToDepth( texture2D( shadowMap, uv + -poissonDisk[ i ].yx * filterRadius ) );\n        if( zReceiver <= depth ) sum += 1.0;\n    }\n    #pragma unroll_loop_end\n    return sum / ( 2.0 * float( nSample ) );\n    */\n\n    \n    float sum = 0.0;\n    float top = 0.0;\n    float low = 0.0;\n    #pragma unroll_loop_start\n    for( int i = 0; i < 16; i ++ ) {\n        top = unpackRGBAToDepth( texture2D( shadowMap, uv + poissonDisk[ i ] * filterRadius ) );\n        low = unpackRGBAToDepth( texture2D( shadowMap, uv + -poissonDisk[ i ].yx * filterRadius ) );\n        if( zReceiver <= top ) sum += 1.0;\n        if( zReceiver <= low ) sum += 1.0;\n    }\n    #pragma unroll_loop_end\n    return sum / ( 2.0 * float( nSample ) );\n}\n\nfloat PCSS ( sampler2D shadowMap, vec4 coords ) {\n\n    vec2 uv = coords.xy;\n    float zReceiver = coords.z; // Assumed to be eye-space z in this code\n    //float lightSizeUV = LIGHT_WORLD_SIZE / LIGHT_FRUSTUM_WIDTH;\n\n    float ls = lightSizeUV * 0.001;\n\n    initPoissonSamples( uv );\n    // STEP 1: blocker search\n    float avgBlockerDepth = findBlocker( shadowMap, uv, zReceiver, ls );\n\n    //There are no occluders so early out (this saves filtering)\n    if( avgBlockerDepth == -1.0 ) return 1.0;\n\n    // STEP 2: penumbra size\n    float penumbraRatio = penumbraSize( zReceiver, avgBlockerDepth );\n    float filterRadius = penumbraRatio * ls * nearPlane / zReceiver;\n\n    // STEP 3: filtering\n    //return avgBlockerDepth;\n    return PCF_Filter( shadowMap, uv, zReceiver, filterRadius * softness );\n}\n\n\n`;\n\n\n//---------------------\n//     random UV\n//---------------------\n\n\nconst randomUV = /* glsl */`\n\nuniform sampler2D noiseMap;\nuniform float useNoiseMap;\n\nfloat directNoise(vec2 p){\n    vec2 ip = floor(p);\n    vec2 u = fract(p);\n    u = u*u*(3.0-2.0*u);\n    \n    float res = mix(\n        mix(rand(ip),rand(ip+vec2(1.0,0.0)),u.x),\n        mix(rand(ip+vec2(0.0,1.0)),rand(ip+vec2(1.0,1.0)),u.x),u.y);\n    return res*res;\n}\n\nfloat sum( vec4 v ) { return v.x+v.y+v.z; }\n\nvec4 textureNoTile( sampler2D mapper, in vec2 uv ){\n\n    // sample variation pattern\n    float k = 0.0;\n    if( useNoiseMap == 1.0 ) k = texture2D( noiseMap, 0.005*uv ).x;\n    else k = directNoise( uv );\n    \n    // compute index    \n    float index = k*8.0;\n    float f = fract( index );\n\n    float ia = floor( index );\n    float ib = ia + 1.0;\n    // or\n    //float ia = floor(index+0.5); // suslik's method (see comments)\n    //float ib = floor(index);\n    //f = min(f, 1.0-f)*2.0;\n\n    // offsets for the different virtual patterns    \n    vec2 offa = sin(vec2(3.0,7.0)*ia); // can replace with any other hash    \n    vec2 offb = sin(vec2(3.0,7.0)*ib); // can replace with any other hash    \n\n    // compute derivatives for mip-mapping    \n    vec2 dx = dFdx(uv);\n    vec2 dy = dFdy(uv);\n    \n    // sample the two closest virtual patterns    \n    vec4 cola = textureGrad( mapper, uv + offa, dx, dy );\n    vec4 colb = textureGrad( mapper, uv + offb, dx, dy );\n\n    // interpolate between the two virtual patterns    \n    return mix( cola, colb, smoothstep(0.2,0.8,f-0.1*sum(cola-colb)) );\n\n}\n`;\n\nconst GlbTool = {\n\n\tgetMesh:( scene, multyMaterialGroup ) => {\n        let meshs = {};\n\n        if( multyMaterialGroup ){\n\n            let oldGroup = [];\n            let nMesh = [];\n            scene.traverse( ( child ) => {\n                if ( child.isGroup ){ \n                    let m = GlbTool.groupToMesh(child);\n\n                    if(m){\n                        oldGroup.push(child);\n                        nMesh.push(m);\n                    }\n                }\n            });\n\n            // remove old group and add remplace mesh\n            let i = oldGroup.length, p;\n            while(i--){\n                p = oldGroup[i].parent;\n                p.remove(oldGroup[i]);\n                p.add(nMesh[i]);\n            }\n\n        }\n        //if( keepMaterial ) GlbTool.keepMaterial( scene )\n        scene.traverse( ( child ) => {\n            if ( child.isMesh ) meshs[ child.name ] = child;\n        });\n        return meshs;\n    },\n\n    keepMaterial: ( scene ) => {\n\n        let Mats = {}, m; \n\n        scene.traverse( ( child ) => {\n            if ( child.isMesh ){ \n                m = child.material;\n                if( !Mats[m.name] ){\n                    Shader.add( m );\n                    console.log(m.name);\n                    Mats[m.name] = true;\n                }\n            }\n        });\n\n    },\n\n    getGroup:( scene, autoMesh, autoMaterial ) => {\n        const groups = {};\n        let mats = null;\n        //if( autoMaterial ) mats = GlbTool.getMaterial( scene, true ) \n        scene.traverse( ( child ) => {\n            if ( child.isGroup ){ \n            \t//if( autoMaterial ) mats = GlbTool.getMaterial( scene, true ) \n            \tgroups[ child.name ] = autoMesh ? GlbTool.groupToMesh(child, mats) : child;\n            }\n        });\n        return groups;\n    },\n\n    // Material should be name like \n    // 0_concret\n    // 10_silver ...\n\n    getMaterial:( scene ) => {\n\n    \tconst Mats = {};\n        let names = [];\n        let m;\n\n        scene.traverse( ( child ) => {\n\n            if ( child.isMesh ){ \n\n            \tm = child.material;\n\n            \tif( names.indexOf(m.name) === -1 ){\n\n                    names.push(m.name);\n            \t\tShader.add( m );\n                    \n            \t\tMats[m.name] = m;\n\n                    if( m.color ) m.color.convertSRGBToLinear();\n                    if( m.vertexColors ) m.vertexColors = false;\n            \t\t\n            \t}\n\n            }\n        });\n\n        return Mats;\n    },\n\n    // convert multymaterial group to mesh\n\n    groupToMesh: ( group ) => {\n\n    \tif( group.children[0].name !== (group.name + '_1') ) return false\n    \tif( !group.children[0].isMesh ) return false\n\n    \tlet geometry = [];\n        let material = [];\n        let i = group.children.length;\n\n        while(i--){\n\n            material[i] = group.children[i].material;\n\t\t\tgeometry[i] = group.children[i].geometry;\n            geometry[i].group = i;\n\n\t\t}\n\n\t\tlet mesh = new THREE.Mesh( new mergeGeometries( geometry, true ), material);\n\t\tmesh.name = group.name;\n\t\treturn mesh;\n\n    },\n\n    symetric: ( g ) => {\n\n\t\tif( g.isMesh ) g = g.geometry;\n\n        let uv = g.attributes.uv.array;\n        let i = uv.length*0.5;\n\n        while( i-- ){\n        \tif( uv[i*2] < 0 ) uv[i*2]*=-1;\n        }\n        g.attributes.uv.needsUpdate = true;\n\n    },\n\n    uv2: ( g ) => {\n\n\t\tif( g.isMesh ) g = g.geometry;\n        g.setAttribute( 'uv2', g.attributes.uv );\n\n    },\n\n\n    autoMorph: ( mod, meshs, normal = true, relative = false ) => {\n\n    \tlet morph = {};\n    \tlet tmpMesh = [];\n        mod.traverse( ( node ) => { \n            if ( node.isMesh && node.name.search('__M__') !== -1){ \n            \tmorph[ node.name ] = node.geometry;\n            \ttmpMesh.push(node);\n            }\n        });\n\n\t\tlet oName, tName, target, id, g, gm, j, dp, dn, ar, m;\n\t\t\n\n\t\tfor ( let name in morph ){\n\n\t\t\toName = name.substring( 0, name.indexOf('__') );\n            tName = name.substring( name.lastIndexOf('__') + 2 );\n\n            target = meshs[ oName ];\n\n\t\t\tif( target ){\n\n\t\t\t\tg = target.geometry;\n\t\t\t\tgm = morph[name];\n\n\t\t\t\tg.morphTargetsRelative = relative;\n\n\t\t\t\tif( g.attributes.position.count === gm.attributes.position.count ){\n\n\t\t\t\t\tif( !g.morphAttributes.position ){\n                        g.morphAttributes.position = [];\n                        if( normal ) g.morphAttributes.normal = [];\n                        target.morphTargetInfluences = [];\n                        target.morphTargetDictionary = {};\n                    }\n\n                    id = g.morphAttributes.position.length;\n\n                    // position\n                    if( relative ){\n                        j = gm.attributes.position.array.length;\n                        ar = []; \n                        while(j--) ar[j] = gm.attributes.position.array[j] - g.attributes.position.array[j];\n                        dp = new Float32BufferAttribute( ar, 3 );\n                    } else {\n                        dp = new Float32BufferAttribute( gm.attributes.position.array, 3 );\n                    }\n\n                    g.morphAttributes.position.push( dp );\n\n                    // normal\n                    if( normal ){\n                        /*if( relative ){\n                            j = gm.attributes.normal.length;\n                            ar = [];\n                            while(j--) ar[j] = gm.attributes.normal.array[j] - g.attributes.normal.array[j]\n                            dn = new Float32BufferAttribute( ar, 3 );\n                        } else {\n                            dn = new Float32BufferAttribute( gm.attributes.normal.array, 3 );\n                        }*/\n\n                        dn = new Float32BufferAttribute( gm.attributes.normal.array, 3 );\n\n                        g.morphAttributes.normal.push( dn );\n\n                    }\n\n                    target.morphTargetInfluences.push(0);\n                    target.morphTargetDictionary[ tName ] = id;\n\n                    /*if( !target.morph ) {\n                        target.morph = function ( name, value ){\n                            //console.log(this.morphTargetInfluences)\n                            if(!this.morphTargetInfluences) return\n                            if(this.morphTargetDictionary[name] === undefined ) return\n                            this.morphTargetInfluences[ this.morphTargetDictionary[name] ] = value;\n                        }\n\n                        \n                    }*/\n                    //console.log( target.name + ' have morph call '+ tName )\n\n\t\t\t\t} else {\n\t\t\t\t\tconsole.warn( 'Morph '+ tName + ' target is no good on ' + target.name );\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tmorph = {};\n\n\t\t// claer garbege\n\t\tj = tmpMesh.length;\n\t\twhile(j--){\n            m = tmpMesh[j];\n\t\t\tif( m.parent ) m.parent.remove( m );\n\t\t\tif( m.material ) m.material.dispose();\n\t\t\tif( m.geometry ) m.geometry.dispose();\n\t\t}\n\n\t},\n\n\n};\n\n/** __\n*    _)_|_|_\n*   __) |_| | 2023\n* @author lo.th / https://github.com/lo-th\n*/\n\nconst Pool = {\n\n    manager: new LoadingManager(),\n    renderer: null,\n\n    msg:'',\n    inLoad:false,\n\n    clip:[],\n    data: new Map(),\n    tmp: [],\n\n    lzma:null,\n    //extraTexture: [],\n    dracoLoader: null,\n    //dracoLoaderType:'js',\n    dracoPath:'./src/libs/draco/',\n    basisPath:'./src/jsm/libs/basis/',\n\n    maxAnisotropy:1,\n\n    onLoad:() => {},\n    onEnd:() => {},\n    log: ( msg ) => {},\n\n    materialRoot:(n) => {console.log( n );},\n\n    setLoadEvent:( onload, onend ) => {\n        Pool.onLoad = onload;\n        Pool.onEnd = onend;\n    },\n\n    prefix:( type ) => {\n        let p = '';\n        switch( type ){\n            case 'S': case 'sound': case 'mp3': case 'wav': case 'ogg': p = 'S_';  break;\n            case 'I': case 'image': case 'jpg': case 'png': p = 'I_';  break;\n            case 'E': case 'hdr': case 'env': p = 'T_';  break;\n            case 'J': case 'json': p = 'J_';  break;\n            case 'JS': case 'js': p = 'JS_';  break;\n            case 'H':  case 'bin': case 'hex': p = 'H_';  break;\n            \n            case 'O': case 'object3d': p = 'O_';  break;\n            case 'M': case 'material': p = 'M_';  break;\n            case 'T': case 'texture': p = 'T_';  break;\n        }\n        return p\n    },\n\n    dispose:() => {\n\n        Pool.data.forEach( function( node, key ) {\n\n            if( node.isMaterial || node.isTexture ){ \n                node.dispose();\n                Pool.data.delete( key );\n                //console.log( key + ' is delete')\n            }\n\n            if( node.isObject3D ){\n                node.traverse( function ( snode ) {\n                    if ( snode.isMesh ){\n                        if( snode.geometry ) snode.geometry.dispose();\n                        if( snode.material ){ \n                            if(snode.material.dispose) snode.material.dispose();\n                        }\n                    }\n                });\n                Pool.data.delete( key );\n            }\n           \n\n        });\n\n        //console.log('clear extra texture !!')\n        /*let i = Pool.extraTexture.length\n        while(i--){\n            let p = Pool.get( Pool.extraTexture[i], 'T' )\n            if(p) p.dispose();\n            Pool.delete( Pool.extraTexture[i], 'T' )\n        }\n        Pool.extraTexture = [];*/\n    \n    },\n    \n    createElementNS: ( name ) => ( document.createElementNS( 'http://www.w3.org/1999/xhtml', name ) ),\n    exist: ( name, type = '' ) => ( Pool.get( name, type ) ? true : false ),\n    delete: ( name, type = '' ) => ( Pool.data.delete( Pool.prefix( type ) + name ) ),\n    get: ( name, type = '' ) => ( Pool.data.get( Pool.prefix( type ) + name ) ),\n\n    set: ( name, node, type = '', direct ) => {\n        if( !node ){ \n            console.log('Loading error on ' + name); \n            return; \n        }\n        if( node.isMaterial ){ \n            type = 'material';\n            node.name = name;\n            Pool.materialRoot( node, direct );\n        }\n        if( node.isTexture ) type = 'texture';\n        if( node.isObject3D ) type = 'object3d';\n        \n        if( Pool.get( name, type ) ) return\n        Pool.data.set( Pool.prefix( type ) + name, node );\n    },\n\n    getScript: ( name ) => ( Pool.data.get( Pool.prefix( 'js' ) + name ) ),\n\n    getMaterials:( obj ) => {\n        if( typeof obj === 'string' ) obj = Pool.get( obj, 'O' );\n        return GlbTool.getMaterial( obj )\n    },\n\n    getGLB:( obj, keepMaterial ) => {\n        if( typeof obj === 'string' ) obj = Pool.get( obj, 'O' );\n        if(!obj) return console.error('Not find Model ?')\n        return obj\n    },\n\n    /*getMaterialList:( obj, keepMaterial ) => {\n        if( typeof obj === 'string' ) obj = Pool.get( obj, 'O' );\n        if(!obj) return console.error('Not find Model ?')\n        return GlbTool.getMesh( obj, keepMaterial )\n    },*/\n\n    getMesh:( obj, multyMaterialGroup ) => {\n\n        if( typeof obj === 'string' ) obj = Pool.get( obj, 'O' );\n        if(!obj) return console.error('Not find Model ?')\n        return GlbTool.getMesh( obj, multyMaterialGroup );\n\n    },\n\n    getGroup:( obj, autoMesh, autoMaterial ) => {\n        if( typeof obj === 'string' ) obj = Pool.get( obj, 'O' );\n        return GlbTool.getGroup( obj, autoMesh, autoMaterial )\n    },\n\n    applyMorph( modelName, meshs = null, normal = true, relative = true ){\n\n        let model;\n        if( modelName.isObject3D ) model = modelName;\n        else model = Pool.get( modelName, 'O' );\n\n        if( !meshs ) meshs = Pool.getMesh( modelName );\n        if( !model || !meshs ) return\n        GlbTool.autoMorph( model, meshs, normal, relative );\n\n    },\n\n    uv2( model ){\n        GlbTool.uv2( model );\n    },\n\n    symetric( model ){\n        GlbTool.symetric( model );\n    },\n\n    objectSpaceNormal( model ){\n        // glTF currently supports only tangent-space normal maps.\n        // this model has been modified to demonstrate the use of an object-space normal map.\n\n        model.material.normalMapType = ObjectSpaceNormalMap;\n\n        // attribute normals are not required with an object-space normal map. remove them.\n        //model.geometry.deleteAttribute( 'normal' );\n        //model.geometry.deleteAttribute( 'tangent' );\n\n        //console.log(model, model.material)\n    },\n\n    add: ( name, node, type ) => {\n        Pool.set( name, node, type );\n        Pool.next();\n        //console.log( name, type )\n    },\n\n    getMaterial:( name ) => ( Pool.data.get( 'M_' + name ) ),\n\n    //getMap:( name, o = {} ) => ( Pool.getTexture(name, o) ),\n\n\n    //--------------------\n    //   TEXTURES\n    //--------------------\n\n    texture:( o = {} ) => {\n\n        if( !Pool.loaderMap ) Pool.loaderMap = new TextureLoader();\n\n        let name = o.name || '';\n\n        if( o.url ){ \n            if( o.url.lastIndexOf('.') !==-1 ) name = o.url.substring( o.url.lastIndexOf('/')+1, o.url.lastIndexOf('.') );\n            else name = o.url.substring( o.url.lastIndexOf('/')+1 );\n        }\n\n        if( name.search('_c') !== -1 || name.search('_l') !== -1 || name.search('_u') !== -1|| name.search('_d') !== -1) o.srgb = true;\n\n        if( Pool.exist( name, 'texture' )) return Pool.get( name, 'texture' );\n        else if( Pool.exist( name, 'image' )) {\n            //console.log('preload', name )\n            return Pool.getTexture( name, o );\n        } else {\n\n            return Pool.loaderMap.load( o.url, function ( t ) { \n                //console.log('use TextureLoader !!', name )\n                Pool.setTextureOption( t, o );\n                Pool.data.set( 'T_' + name, t );\n                if( o.callback ) o.callback();\n                return t\n            })\n        }\n            \n        \n\n    },\n\n    getTexture:( name, o = {} ) => {\n\n        let k = o.quality ? o.quality+'k_' : ''; \n        name = k + name;\n\n        //console.log(name)\n\n        let t = Pool.get( name, 'texture' );\n        if(!t){\n            let im = Pool.get( name, 'image' );\n            if(!im){ \n                //console.log('not find image', name );\n                return null\n            }\n            t = new Texture( im );\n            if( name.search('_c') !== -1 || name.search('_d') !== -1 || name.search('_l') !== -1 || name.search('_u') !== -1 ) o.srgb = true;\n            Pool.data.set( 'T_' + name, t );\n        }\n        Pool.setTextureOption( t, o );\n        return t;\n    },\n\n    setTextureOption:( t, o = {} ) => {\n\n        //if( o.colorSpace ) t.colorSpace = o.colorSpace;\n        if( o.encoding ) t.colorSpace = SRGBColorSpace;\n        if( o.srgb ) t.colorSpace = SRGBColorSpace;\n        t.flipY = o.flipY!== undefined || o.flip !== undefined ? o.flipY : false;\n        t.anisotropy = o.anisotropy !== undefined ? o.anisotropy : Pool.maxAnisotropy;   \n        //if( o.anisotropy !== undefined ) t.anisotropy = o.anisotropy\n        if( o.generateMipmaps !== undefined ) t.generateMipmaps = o.generateMipmaps;\n        if( o.repeat ){\n            t.repeat.fromArray( o.repeat );\n            t.wrapS = t.wrapT = RepeatWrapping;\n        }\n\n        if( o.center ) t.center.fromArray( o.center );\n        if( o.offset ) t.offset.fromArray( o.offset );\n        \n        if( o.filter ){\n            if( o.filter === 'near' ){\n                t.minFilter = NearestFilter;\n                t.magFilter = NearestFilter;\n            }\n        }\n\n        if( o.channel ) t.channel = o.channel;\n        t.needsUpdate = true;\n\n    },\n\n    \n\n    ///\n\n    loadAsync: ( Urls, Path = '', msg = '' ) => {\n\n        return new Promise((resolve, reject) => {\n\n            Pool.waiting = true;\n            Pool.load( Urls, () => { Pool.waiting = false; }, Path, msg );\n\n            //if (!Pool.waiting) resolve()\n            //Pool.load( Urls, resolve, Path, msg );\n\n        })\n\n    },\n\n    ///\n\n    load: ( Urls, Callback, Path = '', msg = '', quality = 0 ) => {\n\n        Pool.msg = msg;\n\n        let urls = [];\n        let callback = Callback || function(){};\n        let start = ( typeof performance === 'undefined' ? Date : performance ).now();\n\n        if ( typeof Urls === 'string' || Urls instanceof String ) urls.push( Urls );\n        else urls = urls.concat( Urls );\n\n        Pool.tmp.push( { urls:urls, path:Path, callback:callback, start:start, quality:quality } );\n\n        if( !Pool.inLoad ) Pool.loadOne();\n\n    },\n\n    loadOne: () => {\n\n        Pool.inLoad = true;\n        Pool.onLoad();\n\n        let url = Pool.tmp[0].path + Pool.tmp[0].urls[0];\n        let name = url.substring( url.lastIndexOf('/')+1, url.lastIndexOf('.') );\n        let type = url.substring( url.lastIndexOf('.')+1 ).toLowerCase();\n\n        if( type==='jpg' || type==='png' ) name = (Pool.tmp[0].quality ? Pool.tmp[0].quality+'k_':'') + name;\n\n        //console.log(name)\n\n        if( Pool.exist( name, type ) ) Pool.next();\n        else Pool.loading( url, name, type );\n\n    },\n\n    next: () => {\n\n        Pool.tmp[0].urls.shift();\n\n        if( Pool.tmp[0].urls.length === 0 ){\n\n            Math.floor(( typeof performance === 'undefined' ? Date : performance ).now() - Pool.tmp[0].start);\n\n            //if( end !== 0 ) console.log( 'pool load time:', end, 'ms' );\n            \n            Pool.tmp[0].callback();\n            Pool.tmp.shift();\n\n            if( Pool.tmp.length > 0 ) Pool.loadOne();\n            else {\n                Pool.inLoad = false;\n                Pool.clearDRACO();\n                Pool.onEnd();\n            }\n\n        } else {\n\n            Pool.loadOne();\n\n        }\n\n    },\n\n    loading: ( url, name, type ) => {\n\n        Pool.log( Pool.msg );\n\n        switch( type ){\n            \n            case 'glb': case 'gltf': Pool.load_GLTF( url, name );  break;\n            case 'fbx': case 'FBX': Pool.load_FBX( url, name ); break;\n            case 'obj': Pool.load_OBJ( url, name ); break;\n            case 'stl': Pool.load_STL( url, name ); break;\n\n            case 'ktx2': Pool.load_KTX2( url, name );  break;\n            case 'hdr': Pool.load_RGBE( url, name ); break;\n            case 'exr': Pool.load_EXR( url, name ); break;\n            default: Pool.extand( url, name, type );\n        }\n\n    },\n\n    extand: ( url, name, type ) => {\n\n        if( !Pool.XHTTP ) Pool.XHTTP = new XMLHttpRequest();\n        const xml = Pool.XHTTP;\n\n        xml.open('GET', url, true );\n        if(type === \"json\") xml.overrideMimeType( \"application/json\");\n\n        switch( type ){\n\n            case 'bin': case 'hex': case 'wasm': case 'mp3': case 'wav': case 'ogg': xml.responseType = \"arraybuffer\"; break;\n            case 'jpg': case 'png': xml.responseType = 'blob'; break;\n            case 'bvh': case 'glsl': case 'js':  case 'json': xml.responseType = 'text'; break;\n\n        }\n\n        xml.onreadystatechange = function () {\n\n            if ( xml.readyState === 4 ) {\n            \tif (xml.status >= 300) {\n                    console.log(\"Error, status code = \" + xml.status);\n                } else {\n                    //console.log(xml.response)\n                \tPool.direct( xml.response, name, type );\n                    //Pool.add( name, JSON.parse( xhr.responseText ), 'json' )\n                }\n                //if ( Pool.XML.status === 200 || Pool.XML.status === 0 ) Pool.load_direct( Pool.XML.response, name, type );\n                //else console.error( \"Couldn't load [\"+ name + \"] [\" + Pool.XML.status + \"]\" );\n            }\n\n        };\n\n        if ('onprogress' in xml){\n            xml.onprogress = function(e) {\n                //console.log( parseInt((e.loaded / e.total) * 100) );\n            };\n        }\n\n        xml.send(null);\n\n    },\n\n    direct: ( response, name, type ) => {\n\n        switch( type ){\n        \tcase 'jpg': case 'png':\n                let img = Pool.createElementNS('img');\n                img.onload = function(e) {\n                    window.URL.revokeObjectURL( img.src ); // Clean up after yourself.\n                    Pool.add( name, img, 'image' );\n                };\n                img.src = window.URL.createObjectURL( response );\n\n        \t    /*let img = Pool.createElementNS('img');\n\t            img.src = window.URL.createObjectURL( new Blob([response]) );\n                //img.onload = function(){\n                    console.log(img)\n                    Pool.add( name, img, 'image' );\n                //}*/\n        \tbreak;\n            case 'mp3': case 'wav': case 'ogg':\n                AudioContext.getContext().decodeAudioData(\n                    response.slice( 0 ),\n                    function( buffer ){ Pool.add( name, buffer, 'sound' ); },\n                    function( error ){ console.error('decodeAudioData error', error); }\n                );\n            break;\n            case 'hex': case 'bin': LZMA.decompress( response, ( result ) => { Pool.add( name, result, type ); }); break;\n            case 'wasm': Pool.add( name, new Uint8Array( response ), type ); break;\n            case 'json': Pool.add( name, JSON.parse( response ), type ); break;\n            case 'js': Pool.add( name, response, type ); break;\n            default: Pool.add( name, response, type );\n\n        }\n\n    },\n\n    //////////////////////////////////\n\n    clearDRACO: () => {\n\n        if( Pool.dracoLoader ){\n            Pool.dracoLoader.dispose();\n            Pool.dracoLoader = null;\n        }\n\n        if( Pool.GLTF ){\n            Pool.GLTF = null;\n        }\n\n    },\n\n    loaderDRACO: () => {\n\n        if( Pool.dracoLoader ) return Pool.dracoLoader\n\n        if( !Pool.dracoLoaderType ){\n            if ( navigator.userAgentData ) Pool.dracoLoaderType = 'wasm';\n            else {\n                let ua = navigator.userAgent.toLowerCase();\n                Pool.dracoLoaderType = (ua.indexOf('safari') !== -1 && ua.indexOf('chrome') === -1) ? 'js' : 'wasm';\n            }\n\n            //console.log(Pool.dracoLoaderType)\n        }\n\n        \n\n        Pool.dracoLoader = new DRACOLoader().setDecoderPath( Pool.dracoPath );\n        //Pool.dracoLoader.setWorkerLimit(1)\n        Pool.dracoLoader.setDecoderConfig( { type: Pool.dracoLoaderType } );\n        return Pool.dracoLoader\n\n    },\n\n    loaderKTX2: () => {\n\n        if( !Pool.KTX2 ){\n            Pool.KTX2 = new KTX2Loader( Pool.manager )\n                .setTranscoderPath( Pool.basisPath )\n                .detectSupport( Pool.renderer );\n        }\n        return Pool.KTX2\n\n    },\n\n    loaderGLTF: () => {\n\n        if( !Pool.GLTF ){\n            Pool.GLTF = new GLTFLoader( Pool.manager )\n            .setCrossOrigin('anonymous')\n            .setDRACOLoader( Pool.loaderDRACO() )\n            .setKTX2Loader( Pool.loaderKTX2() )\n            .setMeshoptDecoder( MeshoptDecoder );\n        }\n        return Pool.GLTF\n\n    },\n\n    loaderFBX: () => {\n\n        if( !Pool.FBX ) Pool.FBX = new FBXLoader( Pool.manager );\n        return Pool.FBX\n\n    },\n\n    loaderSTL: () => {\n\n        if( !Pool.STL ) Pool.STL = new STLLoader( Pool.manager );\n        return Pool.STL\n\n    },\n\n    loaderOBJ: () => {\n\n        if( !Pool.OBJ ) Pool.OBJ = new OBJLoader( Pool.manager );\n        return Pool.OBJ\n\n    },\n\n    loaderRGBE: () => {\n\n        if( !Pool.RGBE ) Pool.RGBE = new RGBELoader( Pool.manager );\n        return Pool.RGBE\n\n    },\n\n    loaderEXR: () => {\n\n        if( !Pool.EXR ) Pool.EXR = new EXRLoader( Pool.manager );\n        return Pool.EXR\n\n    },\n\n    //////////////////////////////////\n\n    load_GLTF: ( url, name ) => {\n\n        /*Pool.loaderGLTF().setDRACOLoader( Pool.loaderDRACO() ).load( url, function ( gltf ) { \n            Pool.add( name, gltf.scene )\n            Pool.dracoLoader.dispose()\n        })*/\n\n        Pool.loaderGLTF().load( url, function ( gltf ) {\n\n            const model = gltf.scene;\n\n            //console.log(gltf.animations)\n\n            if( gltf.animations ){ \n                const animations = gltf.animations;\n                const mixer = new AnimationMixer( gltf.scene );\n                model.mixer = mixer;\n                model.actions = {};\n                for ( let i = 0; i < animations.length; i ++ ) {\n                    let anim = animations[ i ];\n                    model.actions[ anim.name ] = mixer.clipAction( anim );\n                    //model.actions[ anim.name ].play()\n                }\n\n                model.play = (name) => {\n                    if(model.actions[ name ]){ \n                        model.actions[ name ].paused = false;\n                        model.actions[ name ].time = 0;\n                        model.actions[ name ].play();\n                    }\n                };\n                model.pause = (name, v=true) => {\n                    if(model.actions[ name ]) model.actions[ name ].paused = v;\n                };\n            }\n            \n            Pool.add( name, model );\n            //Pool.clearDRACO()\n        });\n\n    },\n\n    load_FBX: ( url, name ) => {\n\n        Pool.loaderFBX().load( url, function ( node ) { Pool.add( name, node ); });\n\n    },\n\n    load_OBJ: ( url, name ) => {\n\n        Pool.loaderOBJ().load( url, function ( node ) { Pool.add( name, node ); });\n\n    },\n\n    load_STL: ( url, name ) => {\n\n        Pool.loaderSTL().load( url, function ( node ) { \n            let object = new Mesh( node );\n            Pool.add( name, object ); \n        });\n\n    },\n\n    load_KTX2: ( url, name, cb ) => {\n\n        Pool.loaderKTX2().load( url, function ( texture ) {\n            Pool.add( name, texture ); \n            //console.log(texture)\n            //if(cb) cb(texture)\n            return texture\n        });\n\n    },\n\n    load_RGBE: ( url, name ) => {\n\n        Pool.loaderRGBE().load( url, function ( texture ) {\n            texture.mapping = EquirectangularReflectionMapping; \n            Pool.add( name, texture ); \n        });\n\n    },\n\n    load_EXR: ( url, name, cb ) => {\n\n        Pool.loaderEXR().load( url, function ( texture ) {\n            //Pool.add( name, texture ) \n            //console.log(texture)\n            if(cb) cb(texture);\n            return texture\n        });\n\n    },\n\n    direct_EXR: ( data, name ) => {\n\n        Pool.loaderEXR().parse( url, function ( texture ) {\n            Pool.add( name, texture );\n            return texture\n        });\n\n    },\n\n};\n\nclass Tension {\n\n\tconstructor( origin, target ) {\n\n\n\t\tthis.target = target || origin;\n\n\t\tthis.baseGeometry = origin.geometry;\n\t\tthis.geometry = this.target.geometry;\n\n\t\tthis.V = [ new Vector3(), new Vector3(), new Vector3() ];\n\t\tthis.X = [ new Vector4(), new Vector4(), new Matrix4() ];\n\t\tthis.M = [ new Vector3(), new Vector3(), new Vector3() ];\n\n\t\tthis.isMorph = this.target.morphTargetInfluences ? true : false;\n\t\tthis.isSkin = this.target.isSkinnedMesh ? true : false;\n\n\t\tthis.init();\n\n\t}\n\n\tinit(){\n\n\t\tif( this.geometry.attributes.position.count !== this.baseGeometry.attributes.position.count ){\n\t\t\tconsole.log('object not have same number of vertices !!');\n\t\t\treturn\n\t\t}\n\n\t\tthis.length = this.baseGeometry.attributes.position.count;\n\t\tthis.indexLength = this.baseGeometry.index.count / 3 ;\n\n\t\t//console.log( this.length, this.indexLength )\n\t\t\n\n\t\tthis.originEdges = new Array(this.length).fill(0);\n\t\tthis.targetEdges = new Array(this.length).fill(0);\n\n\t\tif( this.isSkin || this.isMorph) this.back = new Array( this.length * 3 ).fill(0);\n\t\tthis.num = new Array( this.length ).fill(0);\n\n\t\tthis.getEdge( this.baseGeometry, this.originEdges );\n\t\tthis.addColor();\n\n\t\tsetTimeout( this.start.bind(this), 100 );\n\n\t}\n\n\tstart(){\n\t\tthis.ready = true;\n\t\tthis.update();\n\t}\n\n\taddColor(){\n\n\t\tconst g = this.geometry;\n\t\t//if( g.attributes.color ) return;\n\t\tlet lng = g.attributes.position.array.length;\n\t\tg.setAttribute( 'color', new Float32BufferAttribute( new Array(lng).fill(0), 3 ) );\n\n\t}\n\n\tresetEdge( edges )\n\t{\n\t\tlet j = edges.length;\n\t\twhile(j--) edges[j] = 0;\n\t}\n\n\tgetEdge( g, edges, isSkin = false, isMorph = false ) \n\t{\n\t\tlet positions = g.attributes.position.array;\n\t\tconst indices = g.index.array;\n\t\tlet vA = this.V[0], vB = this.V[1], vC = this.V[2];\n\t\tlet j, i=0, a, b, c, ab, ac, bc;\n\n\t\tif( isMorph ) positions = this.getMorph();\n\t\tif( isSkin ) positions = this.getSkinned( positions );\n\t\tif( isSkin || isMorph ) this.resetEdge( edges );\n\t\t\n\t\tj = this.indexLength;\n\n\t\twhile( j-- )\n\t\t{\n\t\t    a = indices[i];\n\t\t    b = indices[i+1];\n\t\t    c = indices[i+2];\n\t\t    vA.fromArray( positions, a * 3 );\n\t\t    vB.fromArray( positions, b * 3 );\n\t\t    vC.fromArray( positions, c * 3 );\n\n\t\t    ab = vA.distanceTo(vB);\n\t\t    ac = vA.distanceTo(vC);\n\t\t    bc = vB.distanceTo(vC);\n\t    \n\t\t    \n\t\t    edges[a] += (ab + ac)*0.5;\n\t\t\tedges[b] += (ab + bc)*0.5;\n\t\t\tedges[c] += (ac + bc)*0.5;\n\t\t\t\n\t\t\t/*\n\t\t\tedges[a] += (ab + ac);\n\t\t\tedges[b] += (ab + bc);\n\t\t\tedges[c] += (ac + bc);\n\n\t\t\tnum[a] += 2;\n\t\t\tnum[b] += 2;\n\t\t\tnum[c] += 2;\n\t\t\t*/\n\n\t\t\ti+=3;\n\t\t}\n\n\t\t//j = this.length;\n\t\t//while( j-- ){ edges[j] /= num[j]; }\n\t}\n\n\tisZero(v){\n\n\t\tif(v.x===0 && v.y===0 && v.z ===0 ) return true\n\t\treturn false\n\n\t}\n\n\tgetMorph()\n\t{\n\t\tconst morphInfluences = this.target.morphTargetInfluences;\n\t\tconst morphRef = this.geometry.morphAttributes.position;\n\t\tconst morphsMax = morphInfluences.length;\n\t\tconst position = this.geometry.attributes.position.array;\n\t\tlet lng = this.geometry.attributes.position.count, id, i, j;\n\t\tlet vertex = this.M[0];\n\t\tlet base = this.M[1];\n\t\tlet temp = this.M[2];\n\t\tlet relative = this.geometry.morphTargetsRelative;\n\t\tlet data;\n\n\t\t // the following code section is normally implemented in the vertex shader\n\n\t\ti = lng;\n\t    while(i--)\n\t    {\n\t\t\tid = i*3;\n\t\t\tbase.fromArray( position, id );\n\t\t\tvertex.set( 0,0,0 );\n\t\t\tj = morphsMax;\n\t\t\twhile(j--){\n\n\t\t\t\tif ( morphInfluences[ j ] != 0.0 ){\n\t\t\t\t\tdata =  morphRef[j].data ? morphRef[j].data.array : morphRef[j].array;\n\t\t\t\t\tif( relative ) vertex.addScaledVector( temp.fromArray( data, id ), morphInfluences[ j ] );\n\t\t\t\t\telse vertex.addScaledVector( temp.fromArray( data, id ).sub(base), morphInfluences[ j ] );\n\t\t\t\t}\n\n\t\t\t}\n\t\t\tbase.add( vertex );\n\t\t\tbase.toArray( this.back, id );\n\t\t}\n\t\treturn this.back\n\n\t}\n\n\tgetSkinned( position )\n\t{\n\n\t\tconst skeleton = this.target.skeleton;\n\t    skeleton.boneMatrices;\n\t    const geometry = this.geometry;\n\t    //const position = geometry.attributes.position.array;\n\t    const skinIndex = geometry.attributes.skinIndex.array;\n\t    const skinWeigth = geometry.attributes.skinWeight.array;\n\n\t    const bindMatrix = this.target.bindMatrix;\n\t    const bindMatrixInverse = this.target.bindMatrixInverse;\n\n\t    let vertex = this.V[0];\n\t    let skin = this.V[1];\n\t    let temp = this.V[2];\n\t    let skinIndices = this.X[0];\n\t    let skinWeights = this.X[1];\n\t    let boneMatrix = this.X[2];\n\n\t    let lng = geometry.attributes.position.count;\n\t    let i, j, boneIndex, weight, id;\n\n\t    // the following code section is normally implemented in the vertex shader\n\t    i = lng;\n\t    while(i--)\n\t    {\n\t\t\tid = i*3;\n            skinIndices.fromArray( skinIndex, i*4 );\n            skinWeights.fromArray( skinWeigth, i*4 );\n            vertex.fromArray( position, id ).applyMatrix4( bindMatrix ); // transform to bind space\n            skin.set( 0, 0, 0 );\n            j = 4;\n            while(j--)\n            {\n                weight = skinWeights.getComponent( j );\n                if ( weight > 0 ) {\n                \tboneIndex = skinIndices.getComponent( j );\n\t                boneMatrix.multiplyMatrices( skeleton.bones[ boneIndex ].matrixWorld, skeleton.boneInverses[ boneIndex ] );\n\t                // weighted vertex transformation\n\t                skin.addScaledVector( temp.copy( vertex ).applyMatrix4( boneMatrix ), weight );\n\t            }\n\n            }\n\n            skin.applyMatrix4( bindMatrixInverse ); // back to local space\n            skin.toArray( this.back, id );\n        }\n        return this.back\n\t}\n\n\tupdate() \n\t{\n\n\t\tif(!this.ready) return\n\n\t\tthis.getEdge( this.geometry, this.targetEdges, this.isSkin, this.isMorph );\n\t\tconst color = this.geometry.attributes.color.array;\n\t\tlet o, delta, n, i = this.length;\n\n\t\twhile( i-- )\n\t\t{\n\t\t\to = this.originEdges[i];\n\t\t\tdelta = ( ( o - this.targetEdges[i] ) / o ) + 0.5;\n\t\t\tn = i*3;\n\t\t\tcolor[n] = delta > 0.5 ? (delta-0.5)*2 : 0;\n\t\t\tcolor[n+1] = 0;\n\t\t\tcolor[n+2] = delta < 0.5 ? (1-(delta*2)) : 0;\n\t\t}\n\t\tthis.geometry.attributes.color.needsUpdate = true;\n\t}\n\n}\n\nclass ExoSkeleton extends Object3D {\n\n    constructor( object, skeleton ) {\n\n        super();\n\n        this.isReady = false;\n\n        this.skeleton = skeleton;\n\n        this.bones = this.skeleton.bones;//getBoneList( object );\n        this.root = object;\n\n        this.box = new BoxGeometry();\n\n        //console.log(this.bones)\n\n        //this.avatar = avatar;\n        //this.nodes = [];\n        this.mtxr = new Matrix4();\n        this.mtx0 = new Matrix4();\n        this.mtx1 = new Matrix4();\n\n        this.mtx = new Matrix4();\n        this.mtx2 = new Matrix4();\n\n        this.p = new Vector3();\n        this.s = new Vector3();\n        this.q = new Quaternion();\n        this.e = new Euler();\n\n        this.mat = new MeshBasicMaterial({ color:0xCCCC80, wireframe:true, toneMapped:false });//root.mat.skinCollider;\n\n        this.init();\n\n        this.matrix = object.matrixWorld;\n        this.matrixAutoUpdate = false;\n\n    }\n\n    updateMatrixWorld ( force ) {\n\n        if( !this.isReady ) return;\n\n        //THREE.Object3D.prototype.updateMatrixWorld.call( this, force );\n\n        let nodes = this.children;\n        let i = nodes.length, node, bone;\n\n        this.mtxr.copy( this.root.matrixWorld ).invert();\n\n        //console.log('up', i)\n\n        while( i-- ){\n\n            node = nodes[i];\n            bone = node.userData.bone;\n\n            //this.mtx1.fromArray( this.skeleton.boneMatrices, bone.idx )\n\n            this.mtx0.multiplyMatrices(this.mtxr, bone.matrixWorld );\n            //this.mtx0.scale( bone.scalling );\n\n            this.mtx.multiplyMatrices( this.mtx0, node.userData.decal );\n            //this.mtx.multiplyMatrices( this.mtx1, this.mtx );\n\n\n            this.mtx.decompose( this.p, this.q, this.s );\n\n\n            node.position.copy( this.p );\n            node.quaternion.copy( this.q );\n\n            node.updateMatrix();\n\n        }\n\n        super.updateMatrixWorld( force );\n\n    }\n\n    init () {\n\n        this.mtxr.copy( this.root.matrixWorld ).invert();\n\n        // get character bones\n        const bones = this.bones; //object.skeleton.bones;\n        //let nodes = [];\n\n        let p1 = new Vector3();\n        let p2 = new Vector3();\n\n        let i, lng = bones.length, name, n, bone, parent;\n        let size, dist, type, translate, rot, fx;\n\n        for( i = 0; i < lng; i++ ){\n\n            type = null;\n            bone = bones[i];\n            name = bone.name;\n            parent = bone.parent;\n\n            //bone.updateMatrix()\n\n\n            if( parent ) {\n\n                //parent.updateMatrix()\n\n                n = parent.name;\n\n                p1.setFromMatrixPosition( parent.matrixWorld );\n                p2.setFromMatrixPosition( bone.matrixWorld );\n\n                //p1.setFromMatrixPosition( this.mtx.multiplyMatrices(this.mtxr, parent.matrixWorld ) ) //parent.matrixWorld );\n                //p2.setFromMatrixPosition( this.mtx.multiplyMatrices(this.mtxr, bone.matrixWorld ) ) //bone.matrixWorld );\n                dist = p1.distanceTo( p2 );\n\n                //console.log(n, dist)\n\n                translate = [ 0, 0, dist * 0.5 ];\n                size = [ dist, 1, 1 ];\n                rot = [0,0,0];\n\n                fx = '_C';\n\n                if( n==='head' && name === 'End_head' ){ type = 'box'; size = [ 0.16, 0.2, dist ]; translate = [ 0, 0.025, -dist * 0.5 ]; }\n                if( n==='chest' && name==='neck' ){ type = 'box'; size = [  0.30, 0.28, dist ]; translate = [ 0, 0, -dist * 0.5 ]; }\n                if( n==='abdomen' ){ type = 'box'; size = [ 0.28, 0.24,  dist+0.14 ]; rot[2] = 0; translate = [ 0, 0, -dist * 0.5 ];translate[2] += 0.07;}\n\n                 // legs\n                if( n==='rThigh' ){ type = 'box'; size = [  0.15, 0.15, dist ];  }\n                if( n==='lThigh' ){ type = 'box'; size = [  0.15, 0.15 , dist];  }\n                if( n==='rShin' ){ type = 'box'; size = [  0.12, 0.12, dist+ 0.1, ]; translate[2] += 0.05; }\n                if( n==='lShin' ){ type = 'box'; size = [  0.12, 0.12, dist+ 0.1, ]; translate[2] += 0.05; }\n\n                // arm\n                if( n==='rShldr'  ){ type = 'box'; size = [   dist+ 0.06, 0.12, 0.12  ]; translate[0] = -translate[2]+0.03; translate[2]=0; }\n                if( n==='lShldr'  ){ type = 'box'; size = [  dist+ 0.06,0.12,   0.12, ];  translate[0] = translate[2]-0.03; translate[2]=0; }\n                if( n==='rForeArm' ){ type = 'box'; size = [  dist + 0.1,0.1,  0.1 ];  translate[0] = -translate[2]-0.05; translate[2]=0; }\n                if( n==='lForeArm' ){ type = 'box'; size = [  dist + 0.1,0.1,  0.1]; translate[0] = translate[2]+0.05; translate[2]=0; }\n\n                if( type !== null ) this.addMesh( parent, type, size, translate, rot, fx );\n\n            }\n        }\n\n        this.isReady = true;\n\n    }\n\n    addMesh ( parent, type, size, translate, rot, fx ) {\n\n        // translation\n        //this.mtx.makeTranslation( translate[0], translate[1], translate[2] );\n        this.mtx.makeTranslation( translate[0], translate[1], translate[2] );\n        // rotation\n        //this.mtx2.makeRotationFromEuler( this.e.set( rot[0]*math.torad, rot[1]*math.torad, rot[2]*math.torad ) );\n        //this.mtx.multiply( this.mtx2 );\n\n       //let box = new BoxGeometry( size[0], size[1], size[2])\n\n\n        var mesh = new Mesh( this.box, this.mat );\n        mesh.scale.fromArray(size);\n\n        //mesh.name = fx;\n        mesh.userData.decal = this.mtx.clone();\n        mesh.userData.bone = parent;\n        mesh.userData.size = size;\n\n\n        this.add( mesh );\n\n        //mesh.userData.avatar = this.avatar;\n\n    }\n\n    dispose () {\n        this.children = [];\n        this.box.dispose();\n        this.mat.dispose();\n        this.isReady = false;\n    }\n\n}\n\n/*\nfunction getBoneList( object ) {\n\n    const boneList = [];\n\n    if ( object.isBone === true ) {\n\n        boneList.push( object );\n\n    }\n\n    for ( let i = 0; i < object.children.length; i ++ ) {\n\n        boneList.push.apply( boneList, getBoneList( object.children[ i ] ) );\n\n    }\n\n    return boneList;\n\n}*/\n\nconst setting$3 = {\n\n    mixRatio:0.0,\n    threshold:0.1,\n    normal:0.25,\n    hair:0x752002,//0xa43412,\n    bow:0x100402,\n    sheen:1,//2.25,\n    sheenRoughness:1.0,//1.0,\n    metalness:0.6,\n    roughness:0.4,\n    \n    vertexColors:false,\n    alphaTest:0.1,//0.3,\n    h_metal:0.0,//0.4,\n    h_rough:0.5,//0.6,\n    clearcoat:1.0,\n\n    wireframe:false,\n    transparent:false,\n    opacity:1.0,\n    \n};\n\nconst Human = {\n\n    refSize:1.81,\n\n\tisBreath:false,\n\tisEyeMove:false,\n\t\n    haveHair:true,\n    haveBlink:true,\n\n    haveMorph:true,\n    morphNormal:false,\n    morphRelative:false,\n\n    haveLOD:true,\n\n    levelHigh:['body', 'Head', 'crane', 'eyelash', 'eyebrow', 'tear', 'eye_l', 'eye_r', 'eye_l_s', 'eye_r_s'],\n    levelHair:['hair', 'hair_man'],\n    levelLow:['body_low'],\n\n    skeletonRef:'body',\n\tfullMorph: ['MUSCLE', 'LOW', 'BIG','MONSTER'],//, \n\n    textureQuality:1,\n\ttextureRef:'avatar_c',\n\ttexturePath: 'assets/textures/avatar_',\n\ttextures: [\n        'avatar_c.jpg', 'avatar_n.jpg', 'avatar_t.jpg',//'avatar_m.jpg', 'avatar_r.jpg', 'avatar_u.jpg',\n        'mouth_c.jpg', 'mouth_a.jpg', 'mouth_n.jpg', \n        'eye_c.jpg', 'eye_n.jpg', 'hair.jpg', 'hair_a.jpg',\n        'eyelash_c.jpg', 'eyelash_a.jpg', 'eyelash_n.jpg',\n        'hair_man.jpg', 'hair_man_a.jpg', 'avatar_ao.jpg',\n    ],\n\n    modelPath: 'assets/models/avatar/',\n    forceModel: null,\n\n    setting:setting$3,\n\n    materialRef:'skin',\n\n    materials:{\n        skin:{\n            type:'Sss',\n            map: 'avatar_c', \n            normalMap:'avatar_n',\n\n            //envMapIntensity:0.7,\n            //reflectivity:1.0,\n\n            roughness:0.54,\n            metalness:0.14,\n            \n            /*roughness:1,\n            metalness:1,\n            metalnessMap:'avatar_m',\n            roughnessMap:'avatar_r',*/\n\n            normalScale: new Vector2( setting$3.normal, -setting$3.normal ),\n            \n            /*sheen:setting.sheen,\n            sheenColor:0xFFFFFF,\n            sheenRoughness:setting.sheenRoughness,\n            sheenColorMap:'avatar_c',\n            /*sheenColor:0xff0000,\n            sheenColorMap:'avatar_u',\n            iridescence:0.1,*/\n            wireframe:setting$3.wireframe,\n\n            aoMap:'avatar_ao',\n            aoMapIntensity:1.0,\n\n            //ior:1.4,\n            vertexColors:false,\n\n            sssMap:'avatar_t',\n            sssColor:new Color( 0xee2323 ),\n            sssAmbient:0.5,\n            sssDistortion:0.6,\n            sssAttenuation:0.1,\n            sssScale:6.0\n            \n        },\n    \tmouth:{\n            type:'Standard',\n    \t\tmap:'mouth_c',\n            roughness:0.02,\n            metalness:0.0,\n            vertexColors:false,\n            //shadowSide: BackSide,\n            //roughness:0.6,\n            //metalness:0.6,\n            alphaMap:'mouth_a',\n            alphaTest:0.5,\n            normalMap:'mouth_n',\n            normalScale: new Vector2( 0.5, -0.5 ),\n    \t},\n    \tsub_eye:{\n            type:'Physical',\n            roughness:0,//0.568,\n            metalness:1,\n            ior:1.376,\n            opacity:0.1,\n           //blending:AdditiveBlending,\n            clearcoat:1,\n            transparent:true,\n            //envMapIntensity:0,\n            //wireframe:true\n        },\n        eye:{\n            type:'Physical',\n        \tmap:'eye_c',\n            roughness:0.7,\n            metalness:0.15,\n            normalMap:'eye_n',\n            normalScale:new Vector2( 2, -2),\n            clearcoat:0.25,\n            //clearcoatRoughness:0.5,\n        },\n        hair:{\n            type:'Standard',\n        \t//map:'hair',\n            color:setting$3.hair,\n            aoMap:'hair',\n            metalnessMap:'hair',\n            //bumpScale:-5,\n            roughness:0.6,//setting.h_rough,\n            metalness:1.0,//setting.h_metal,\n            alphaMap:'hair_a',\n            //alphaTest:setting.alphaTest,\n            side: DoubleSide,\n            emissive:setting$3.hair,\n            emissiveIntensity:0.5,\n            //opacity:1.0,\n            transparent:true,\n            blending:CustomBlending,\n            blendDst:ZeroFactor,\n            blendDstAlpha:SrcAlphaFactor,\n            //forceSinglePass:true,\n            //alphaHash:true,\n            //premultipliedAlpha:true,\n            alphaToCoverage:true,\n        },\n        hair_man:{\n            type:'Standard',\n            color:setting$3.hair,\n        \t//map:'hair_man',\n            aoMap:'hair_man',\n            metalnessMap:'hair_man',\n            roughness:0.6,\n            metalness:1.0,//setting.h_metal,\n            alphaMap:'hair_man_a',\n            side: DoubleSide,\n\n            //alphaTest:setting.alphaTest,\n            \n            //opacity:1.0,\n            //emissive:setting.hair,\n            //emissiveIntensity:0.5,\n            //sheen:1.0,\n            //sheenColor:setting.hair,\n            //sheenRoughness:1.0,\n            transparent:true,\n            blending:CustomBlending,\n            blendDst:ZeroFactor,\n            blendDstAlpha:SrcAlphaFactor,\n            forceSinglePass:true,\n            //alphaHash:true,\n            //premultipliedAlpha:true,\n            alphaToCoverage:true,\n        },\n        eyelash:{\n            type:'Standard',\n        \tcolor:setting$3.hair,\n            map:'eyelash_c',\n            //roughness:setting.h_rough,\n           // metalness:setting.h_metal,\n            alphaMap:'eyelash_a',\n            //alphaTest:setting.alphaTest,\n            transparent:true,\n            opacity:1,\n            side: DoubleSide,\n            alphaToCoverage:true,\n            polygonOffset: true,                \n            polygonOffsetFactor: -4,\n            //normalMap:'eyelash_n',\n            //normalScale:new Vector2( 1, -1)\n        },\n        tear:{\n            type:'Standard',\n        \tmap:'eyelash_c',\n            roughness:0.0,\n            metalness:1.0,\n            alphaMap:'eyelash_a',\n            transparent:true,\n            alphaToCoverage:true,\n            opacity:1,\n        },\n        low:{\n            type:'Basic',\n        \t//color:0x000000,\n            //wireframe: true,\n        }\n\n    },\n\n    changeMaterial:( sx = {}, def = false ) => {\n\n        if( !Pool.getMaterial( Human.materialRef ) ) return\n\n        const s = Human.setting;\n        const defMat = Human.materials;\n        \n        let change = false;\n\n        for(let v in sx){\n            if(s[v]!== undefined){ \n                if(s[v] !== sx[v]){ \n                    s[v] = sx[v];\n                    change = true;\n                }}\n        }\n\n        let m;\n\n        if(change){\n\n            for(let key in defMat){\n                m = Pool.getMaterial( key );\n                for(let v in sx){\n                    if( m[v] !== undefined ){ \n\n                        if( def && defMat[key][v] ) m[v] = defMat[key][v];\n                        else m[v] = sx[v];\n\n                    }\n                }\n            }\n\n        }\n\n\n    },\n\n    \n\n    applyMaterial:( root, model ) => {\n\n        // apply Material\n\n\n\n        const startHigh = true;//!Human.haveLOD;\n        //console.log(startHigh, Human.haveLOD)\n\n        const def = Pool.getMaterial( 'skin' );\n\n        root.traverse( ( node ) => {\n\n            if ( node.isMesh ){\n                switch( node.name ){\n                    case 'body':\n                    node.material = def;\n                    node.receiveShadow = true;\n                    node.castShadow = true;\n                    node.visible = startHigh;\n                    break;\n                    case 'body_low': \n                        node.material = def;\n                        node.receiveShadow = true;\n                        node.castShadow = true;\n                        node.visible = false;\n                    break;\n                    case 'Head': \n                    node.material = def;\n                    node.receiveShadow = true;\n                    node.castShadow = true;\n                    node.visible = startHigh;\n                    break;\n                    case 'crane': \n                    node.material = def;\n                    node.receiveShadow = true;\n                    node.castShadow = false;\n                    node.visible = !Human.haveHair;//startHigh\n                    break;\n                    case 'mouth':\n                    node.material = Pool.getMaterial( 'mouth' ) || def;\n                    node.receiveShadow = true;\n                    node.castShadow = false;\n                    node.visible = startHigh;\n                    // correct bad light\n                    node.geometry.computeVertexNormals();\n                    break;\n                    case 'eyelash':  case 'eyebrow':\n                    node.material = Pool.getMaterial( 'eyelash' ) || def;\n                    node.receiveShadow = false;\n                    node.castShadow = false;\n                    node.visible = startHigh;\n                    break;\n                    case 'tear': \n                    node.material = Pool.getMaterial( 'tear' ) || def;\n                    node.receiveShadow = false;\n                    node.castShadow = false;\n                    node.visible = startHigh;\n                    break;\n                    case 'eye_l':case 'eye_r':\n                    node.material = Pool.getMaterial( 'eye' ) || def;\n                    node.receiveShadow = false;\n                    node.castShadow = false;\n                    break;\n                    case 'eye_l_s':case 'eye_r_s':\n                    node.material = Pool.getMaterial( 'sub_eye' ) || def;\n                    node.receiveShadow = false;\n                    node.castShadow = false;\n                    node.visible = startHigh;\n                    break;\n                    case 'hair': \n                    node.material = Pool.getMaterial( 'hair' ) || def;\n                    node.receiveShadow = false;\n                    node.castShadow = false;//true;\n                    //node.matrixWorldAutoUpdate = false\n                    node.visible = Human.haveHair ? startHigh : false;\n                    break;\n                    case 'hair_man': \n                    node.material = Pool.getMaterial( 'hair_man' ) || def;\n                    node.receiveShadow = false;\n                    node.castShadow = false;//true;\n                    //node.matrixWorldAutoUpdate = false\n                    node.visible = Human.haveHair ? startHigh : false;\n                    break;\n                }\n            }\n\n        });\n\n    },\n\n    /*lowMode:( b ) => {\n\n        if(b){\n            setVisible()\n        }\n\n\n    },*/\n\n    adjustment:() => {\n\n        //return []\n\n        return [\n        //{name:'head', values:[-10,0,0]},\n        {name:'neck', values:[-5,0,0]},\n        {name:'chest', values:[5,0,0]},\n        \n        {name:'lCollar', values:[0,0,-10]},\n        {name:'rCollar', values:[0,0,10]},\n\n        {name:'lShldr', values:[-20,2,5]},\n        {name:'rShldr', values:[-20,-2,-5]},\n\n        //{name:'lShldr', values:[-5,2,0]},\n        //{name:'rShldr', values:[-5,-2,0]},\n\n        {name:'lForeArm', values:[0,0,10]},\n        {name:'rForeArm', values:[0,0,-10]},\n\n        {name:'lHand', values:[0,15,10]},\n        {name:'rHand', values:[0,-15,-10]},\n        //{name:'lThumb1', values:[0,-15,0]},\n        //{name:'rThumb1', values:[0,15,0]},\n        {name:'lThumb2', values:[0,25,10]},\n        {name:'rThumb2', values:[0,-25,-10]},\n        ]\n\n    }\n\n\n\n\n\n};\n\nconst setting$2 = {\n\n    wireframe:false,\n    normal:0.25,\n    hair:0x252011,\n    \n};\n\nconst Human_low = {\n\n\tisBreath:false,\n\tisEyeMove:false,\n\thaveMorph:true,\n    \n    skeletonRef:'body_low',\n\tfullMorph: ['MUSCLE', 'LOW', 'BIG', 'MONSTER'],\n\n\t//haveQuality: true,\n    //textureQuality:0,\n    textureRef:'avatar_c_0k',\n    texturePath: 'assets/textures/avatar/',\n    textures: ['avatar_c_0k.jpg', 'avatar_n_0k.jpg', 'avatar_ao_0k.jpg', 'hair_man_a_0k.jpg', 'Hair_01_c.png', 'Hair_01_n.png'],\n\n    modelPath: 'assets/models/avatar/',\n    forceModel: null,\n\n    setting:setting$2,\n\n    materialRef:'skin_low',\n    materials:{\n        skin_low:{\n            //color:0xE24C00,\n            type:'Standard',//Physical',\n            map: 'avatar_c_0k',\n            aoMap:'avatar_ao_0k',\n            normalMap: 'avatar_n_0k',\n\n            normalScale: new Vector2( setting$2.normal, -setting$2.normal),\n            //normalMapType: ObjectSpaceNormalMap,\n            //normalMapType:TangentSpaceNormalMap,\n            envMapIntensity:0.3,\n            roughness:0.22,\n            metalness:0.0,\n            //reflectivity:0.05,\n            vertexColors:false,\n            /*sheen:1.0,\n            sheenColor:0x692000,\n            sheenRoughness:0.5,**/\n            //side:DoubleSide,\n            \n            \n        },\n        hair_low:{\n            //color:0xE24C00,\n            type:'Standard',\n            color:setting$2.hair,\n            alphaMap: 'hair_man_a_0k',\n            transparent:true,\n            //blending:CustomBlending,\n            //blendDst:ZeroFactor,\n            //blendDstAlpha:SrcAlphaFactor,\n            //alphaToCoverage:true,\n        },\n\n        hair_low_2:{\n            //color:0xE24C00,\n            type:'Standard',\n            color:setting$2.hair,\n            map:'Hair_01_c',\n            normalMap: 'Hair_01_n'\n        },\n\n    },\n\n    changeMaterial:( sx = {}, def = false ) => {\n\n        if( !Pool.getMaterial( Human_low.materialRef ) ) return\n\n            const defMat = Lee.materials;\n        let m;\n\n        for(let key in defMat){\n            m = Pool.getMaterial( key );\n            for(let v in sx){\n                if( m[v] !== undefined ){ \n                    if( def && defMat[key][v] ) m[v] = defMat[key][v];\n                    else m[v] = sx[v];\n                }\n            }\n            //m.needsUpdate = true\n        }\n\n    },\n\n    \n    applyMaterial:( root, model ) => {\n\n        // apply Material\n\n        const def = Pool.getMaterial( Human_low.materialRef );\n\n        root.traverse( ( node ) => {\n\n            if ( node.isMesh ){\n                switch( node.name ){\n                    case 'body_low':\n                    //Pool.symetric( node );\n                    //node.geometry.deleteAttribute( 'normal' );\n                    \n                    //node.geometry.deleteAttribute( 'tangent' );\n                    //node.geometry.computeVertexNormals()\n                    node.material = def;\n                    //node.material.normalMapType = ObjectSpaceNormalMap;\n\n                    //node.material.needsUpdate = true\n\n                    //Pool.objectSpaceNormal( node );\n                    node.receiveShadow = true;\n                    node.castShadow = true;\n                    break;\n                    case 'hair_low':\n                    node.material = Pool.getMaterial( 'hair_low' ) || def;\n                    node.receiveShadow = false;\n                    node.castShadow = false;\n                    break;\n                    case 'hair_low_2':\n                    node.material = Pool.getMaterial( 'hair_low_2' ) || def;\n                    node.receiveShadow = false;\n                    node.castShadow = false;\n                    break;\n                    \n                }\n            }\n\n        });\n\n    },\n\n    adjustment:() => {\n\n        return [\n        {name:'neck', values:[-5,0,0]},\n        {name:'chest', values:[5,0,0]},\n        {name:'lCollar', values:[0,0,-10]},\n        {name:'rCollar', values:[0,0,10]},\n        {name:'lShldr', values:[-20,2,0]},\n        {name:'rShldr', values:[-20,-2,0]},\n        \n        ]\n\n    }\n\n\n\n\n\n};\n\nconst setting$1 = {\n\n    metalness:0.33,\n    roughness:0.11,\n    clearcoat:0.0,\n    wireframe:false,\n    \n};\n\nconst Eva = {\n\n    decalY:0.02,\n\n\tisBreath:false,\n\tisEyeMove:false,\n\thaveMorph:false,\n\n\tskeletonRef:'eva_SKIN',\n\n\tfullMorph: [],\n\n\thaveQuality: false,\n\tskinRef:'eva_00',\n\ttexturePath: 'assets/textures/eva/',\n\ttextures: ['eva00_c.jpg', 'eva01_c.jpg', 'eva02_c.jpg', 'eva_l.jpg', 'eva_ao.jpg'],\n\n    modelPath: 'assets/models/',\n    forceModel:'eva',\n\n    setting:setting$1,\n\n    materialRef:'eva00',\n    materials:{\n        eva00:{\n            type:'Physical',\n            map: 'eva00_c', \n            emissiveMap:'eva_l',\n            emissive:0xffffff,\n            roughness:setting$1.roughness,\n            metalness:setting$1.metalness,\n            wireframe:setting$1.wireframe,\n            clearcoat:setting$1.clearcoat,\n            //iridescence:0.5,\n            aoMap:'eva_ao',\n        },\n        eva01:{\n            type:'Physical',\n            map: 'eva01_c',\n            emissiveMap:'eva_l',\n            emissive:0xffffff,\n            roughness:setting$1.roughness,\n            metalness:setting$1.metalness,\n            wireframe:setting$1.wireframe,\n            clearcoat:setting$1.clearcoat,\n            //iridescence:0.5,\n            aoMap:'eva_ao',\n        },\n        eva02:{\n            type:'Physical',\n            map: 'eva02_c', \n            emissiveMap:'eva_l',\n            emissive:0xffffff,\n            roughness:setting$1.roughness,\n            metalness:setting$1.metalness,\n            wireframe:setting$1.wireframe,\n            clearcoat:setting$1.clearcoat,\n            //iridescence:0.5,\n            aoMap:'eva_ao',\n        }\n    },\n\n    changeMaterial:( sx, def = false ) => {\n\n        if( !Pool.getMaterial( Eva.materialRef ) ) return\n\n        //const s = Eva.setting;\n        const defMat = Eva.materials;\n        \n        /*let change = false;\n\n        for(let v in sx){\n            if(s[v]!== undefined){ \n                if(s[v] !== sx[v]){ \n                    s[v] = sx[v]\n                    change = true;\n                }}\n        }*/\n\n        let m;\n\n        //if(change){\n\n            for(let key in defMat){\n                m = Pool.getMaterial( key );\n                for(let v in sx){\n                    if( m[v] !== undefined ){ \n                        if( def && defMat[key][v] ) m[v] = defMat[key][v];\n                        else m[v] = sx[v];\n                    }\n                }\n                m.needsUpdate = true;\n            }\n\n        //}\n\n        /*\n\n        const s = Eva.setting;\n\n        if(Setting){\n            for(let o in Setting){\n                if( s[o] !== undefined) s[o] = Setting[o]\n            }\n        }\n        \n        let m = Pool.getMaterial( 'eva00' );\n        m.roughness = s.roughness;\n        m.metalness = s.metalness;\n        m.wireframe = s.wireframe;\n        m.clearcoat = s.clearcoat;\n        m = Pool.getMaterial( 'eva01' );\n        m.roughness = s.roughness;\n        m.metalness = s.metalness;\n        m.wireframe = s.wireframe;\n        m.clearcoat = s.clearcoat;\n        m = Pool.getMaterial( 'eva02' );\n        m.roughness = s.roughness;\n        m.metalness = s.metalness;\n        m.wireframe = s.wireframe;\n        m.clearcoat = s.clearcoat;*/\n\n    },\n\n    applyMaterial:( root, model ) => {\n\n    \tconst def = Pool.getMaterial( model );\n\n        root.traverse( ( node ) => {\n\n            if ( node.isMesh ){\n            \t\n            \tnode.material = def;\n                node.receiveShadow = true;\n                node.castShadow = true;\n                //node.matrixWorldAutoUpdate = false\n\n                switch( node.name ){\n\n                    case 'eva_2_head': case 'eva_2_mach': \n                    node.visible = model === 'eva02' ? true : false;\n                    break;\n\n                    case 'eva_L_COLLAR': case 'eva_R_COLLAR': \n                    node.visible = model === 'eva00' ? false : true;\n                    break;\n\n                    case 'eva_HEAD': case 'eva_MACHOIR': \n                    node.visible = model === 'eva01' ? true : false;\n                    break;\n\n                    case 'eva_0_R_COLLAR':case 'eva_0_L_COLLAR':case 'eva_0_head': case 'eva_0_head2':\n                    node.visible = model === 'eva00' ? true : false;\n                    break;\n\n                    case 'eva_0_CHEST2':\n                    node.visible = model === 'eva01' ? false : true;\n                    break;\n                }\n            }\n\n        });\n\n    }\n\n\n\n\n};\n\nconst setting = {\n\n    metalness:0.2,\n    roughness:0.8,\n    wireframe:false,\n    \n};\n\nconst Lee$1 = {\n\n    decalY:-0.06,\n\n\tisBreath:false,\n\tisEyeMove:false,\n\thaveMorph:false,\n\n\tskeletonRef:'leeSkin',\n\n\tfullMorph: [],\n\n\thaveQuality: false,\n\t//skinRef:'leeSkin',\n\ttexturePath: 'assets/textures/',\n\ttextures: ['lee_c.jpg', 'lee_ao.jpg'],\n\n    modelPath: 'assets/models/',\n    forceModel:'lee',\n\n    setting:setting,\n\n    materialRef:'lee_material',\n    materials:{\n        lee_material:{\n            type:'Physical',\n            map: 'lee_c', \n\n            roughness:0.3,\n            metalness:0.08,\n            //aoMap: 'lee_ao',\n            wireframe:setting.wireframe,\n            sheen:2.2,\n            //emissive:0xFFFFFF,\n            //emissiveMap:'lee_c',\n            sheenColorMap:'lee_c',\n            sheenColor:0xFFFFFF,\n            sheenRoughness:0.4,\n            envMapIntensity:1,\n            //aoMapIntensity:0.5,\n            //emissiveIntensity:0.25,\n\n        },\n    },\n\n    /*changeMaterial:( Setting ) => {\n\n        const s = Lee.setting;\n\n        if(Setting){\n            for(let o in Setting){\n                if( s[o] !== undefined) s[o] = Setting[o]\n            }\n        }\n        \n        let m = Pool.getMaterial( 'lee_material' );\n        m.roughness = s.roughness;\n        m.metalness = s.metalness;\n        m.wireframe = s.wireframe;\n\n    },*/\n\n    changeMaterial:( sx, def = false ) => {\n\n        if( !Pool.getMaterial( Lee$1.materialRef ) ) return\n\n        const defMat = Lee$1.materials;\n        let m;\n\n        for(let key in defMat){\n            m = Pool.getMaterial( key );\n            for(let v in sx){\n                if( m[v] !== undefined ){ \n                    if( def && defMat[key][v] ) m[v] = defMat[key][v];\n                    else m[v] = sx[v];\n                }\n            }\n            //m.needsUpdate = true\n        }\n\n    },\n\n    applyMaterial:( root, model ) => {\n\n    \tconst def = Pool.getMaterial( 'lee_material' );\n\n        root.traverse( ( node ) => {\n\n            if ( node.isMesh ){\n            \t\n            \tnode.material = def;\n                node.receiveShadow = true;\n                node.castShadow = true;\n\n            }\n\n        });\n\n    },\n\n    adjustment:() => {\n\n        return [\n            //{name:'lShldr', values:[0,-70,0]},\n            {name:'lHand', values:[-60,0,0]},\n            //{name:'rShldr', values:[0,70,0]},\n            {name:'rHand', values:[-60,0,0]}\n        ]\n\n    }\n\n\n\n\n};\n\n/** __\n*    _)_|_|_\n*   __) |_| | 2023\n*  @author lo.th / https://github.com/lo-th\n* \n*  AVATAR\n*/\n\nconst FrameTime = 30;\nconst TimeFrame = 1/30;\nconst torad$2 = Math.PI / 180;\nconst todeg = 180 / Math.PI;\nconst V = new Vector3();\n\n\nconst preloadAvatar = {\n\n    tmp:[],\n    model:[],\n    avatar:null,\n    callback:() => {},\n\n    add:( names, callback ) => {\n\n        preloadAvatar.tmp = [...names];\n        preloadAvatar.callback = callback;\n\n        if(preloadAvatar.tmp.length){\n            preloadAvatar.loadOne();\n        }\n\n    },\n\n    loadOne:() => {\n\n        let name = preloadAvatar.tmp[0];\n        preloadAvatar.avatar = new Avatar({ type:name, callback:preloadAvatar.next, morph:true, isPreload:true });\n\n    },\n\n    next:( name ) => {\n        \n        preloadAvatar.avatar.dispose();\n\n        preloadAvatar.tmp.shift();\n        if( preloadAvatar.tmp.length === 0 ){\n            preloadAvatar.callback();\n        }else {\n            preloadAvatar.loadOne();\n        }\n    }\n\n};\n\nclass Avatar extends Group {\n\n\tconstructor( o = {} ) {\n\n        super();\n\n        this.isPreload = o.isPreload || false;\n\n        this.fixWeight = o.fixWeight !== undefined ? o.fixWeight : true;\n\n        this.rootPath = o.path || './';\n        this.lzmaPath = this.rootPath + 'src/libs/lzma_worker.js';\n        Pool.dracoPath =  this.rootPath + 'src/libs/draco/';\n\n        this.callback = o.callback || function (){};\n\n        this.matrixAutoUpdate = false;\n        this.isPause = true;\n\n        //this.textureQuality = o.quality || 1;\n\n        this.randomMorph = o.randomMorph || false;\n        this.randomSize = o.randomSize || false;\n\n        this.actionPose = null;\n\n        this.model = o.type || 'man';\n        this.startAnimation = o.anim || 'idle';\n\n        this.bodyMorph = [0,0];\n        this.faceMorph = [0,0];\n\n        this.ref = null;\n\n        switch( this.model ){\n            case 'lee': this.ref = Lee$1; break;\n            case 'man': case 'woman': this.ref = Human; break;\n            case 'man_low': case 'woman_low': this.ref = Human_low; break;\n            case 'eva00': case 'eva01': case 'eva02': this.ref = Eva; break;\n        }\n\n\n        this.compact = o.compact !== undefined ? o.compact : true;\n        this.haveMorph = o.morph !== undefined ? o.morph : false;\n        this.fullMaterial = o.material !== undefined ? o.material : true;\n\n\n\n        this.size = o.size || 1;\n        this.realSize = 0;\n        this.baseSize = 0;\n\n\n        this.fullMorph = this.ref.fullMorph || [];\n        if(this.randomMorph && this.fullMorph.length ) this.haveMorph = true;\n\n        this.textureQuality = this.ref.textureQuality || 0;\n\n\n        this.skeleton = null;\n        //this.root = null;\n        this.mixer = null;\n        this.mesh = {};\n        this.bones = {};\n        this.done = false;\n        this.isClone = false;\n        \n        this.isBreath = this.ref.isBreath || false;\n        this.isEyeMove = this.ref.isEyeMove || false;\n        this.haveBlink = this.ref.haveBlink || false;\n\n        this.haveLOD = this.ref.haveLOD || false;\n        if( o.noLOD ){\n            this.ref.haveLOD = false; \n            this.haveLOD = false;\n        }\n        this.lod = -1;\n\n        this.decalY = this.ref.decalY || 0;\n\n        this.tensionTest = false;\n        this.tensionActive = false;\n\n        this.fixToe = false;\n        this.clipsToesFix = [];\n\n        this.n = Math.round(Math.random()*1000);\n\n        this.actions = new Map();\n        this.current = null;\n        this.old = null;\n\n        this.breath = 0;\n        this.breathSide = -1;\n\n        this.q = new Quaternion().setFromAxisAngle( {x:0, y:1, z:0}, Math.PI*0.5 );\n        this.headBoneLook = new Vector3();\n        this.eyeTarget = new Group();//new AxesHelper(0.01)//\n        this.eyeTarget.position.set(0, 1, 0);\n\n        this.tmpMtx = new Matrix4();\n        this.tmpQ = new Quaternion();\n\n        this.setting = {};\n\n        //this.initMaterial();\n\n        this.root = Pool.get( this.ref.forceModel ? this.ref.forceModel : this.model, 'O' );\n\n        if( this.root ){\n            this.isClone = true;\n            this.tensionTest = false;\n            this.root = clone( this.root );\n            this.init();\n\n        } else {\n            if( this.fullMaterial ) this.load();\n            else this.loadModels();\n        }\n\n    }\n\n    rand( low = 0, high = 1 ){ \n        return low + Math.random() * ( high - low ) \n    }\n\n    load(){\n\n        if( !this.ref.textures || !this.ref.textures.length ){ \n            this.loadModels();\n            return\n        }\n\n        this.skin = Pool.getTexture( this.ref.textureRef, { quality:this.textureQuality } );\n\n        if( !this.skin ){\n\n            const path = this.rootPath + this.ref.texturePath + ( this.textureQuality ? this.textureQuality + 'k/' : '' );\n            //console.log(path)\n            Pool.load( this.ref.textures, this.loadModels.bind(this), path, 'loading images...', this.textureQuality );\n\n        } else {\n\n            this.loadModels();\n\n        }\n\n    }\n\n    loadModels(){\n\n        const model = this.ref.forceModel ? this.ref.forceModel : this.model;\n        const asset = [model+'.glb'];\n        const path = this.rootPath + this.ref.modelPath;\n        if( this.ref.haveMorph && this.haveMorph ) asset.push( model+'_morph.glb' );\n        Pool.load( asset, this.init.bind(this), path, 'loading models...' );\n\n    }\n\n    update( delta ){\n\n        if( !this.done ) return;\n        if ( this.mixer ){\n\n            this.mixer.update( delta );\n\n            // blink\n            if( this.haveBlink ) this.eyeBlink();\n            \n\n            if( !this.isClone ){\n                this.look( delta*10 );\n                this.breathing();\n                this.autoToes();\n            }\n\n            if( this.tensionActive ){ \n                this.tension1.update();\n                this.tension2.update();\n            }\n\n            if(this.actionPose){ \n                //console.log(this.getAction( 'idle' )._effectiveWeight)\n                this.actionPose.setEffectiveWeight( this.getAction( 'idle' )._effectiveWeight );\n            }\n\n            /*if( this.ref.adjustment && !this.isClone ) {\n                let dt = this.ref.adjustment()\n                let m = dt.length, l\n                while(m--){\n                    l = dt[m]\n                    this.setRot2( l.name, l.x, l.y, l.z )\n                }\n            }*/\n\n            if( window.gui && window.gui.updateTimeBarre && this.current ){ \n                window.gui.updateTimeBarre( Math.round( this.current.time * FrameTime ), this.current.frameMax );\n            }\n        }\n\n    }\n\n    eyeBlink(){\n\n        const n = this.n++; \n        let v = 0;\n        let t = 10;\n        let s = 1/t;\n\n        if( n<=t) v = n*s;\n        if( n>t && n<=t*2 ) v = 1-((n-t)*s);\n\n        \n        if( this.n>500 ){ this.n = 0;}\n\n        this.setMorph( 'EyeBlink', v );\n    \n    }\n\n    look( delta ){\n\n        if(!this.isEyeMove) return;\n        if(this.isPause) return;\n\n        const v = window.mouse || {x:0, y:0};\n\n        if(delta>1) delta = 1;\n\n        this.headBoneLook.lerp({ x:-(v.y*20)*torad$2, y:0, z:-(v.x*20)*torad$2 }, delta );\n        this.eyeTarget.position.lerp({ x:v.x*0.5, y:1, z:-v.y*0.25 }, delta );\n\n        let e = this.headBoneLook;\n        this.tmpQ.setFromEuler( { _x:e.x, _y:e.y, _z:e.z, _order:'XYZ' }, false );\n        this.bones.head.quaternion.multiply(this.tmpQ);\n\n        let ER = this.bones.ER;\n        let EL = this.bones.EL;\n        let up = {x:0, y:0, z:1};\n\n        this.tmpMtx.lookAt( EL.position, this.eyeTarget.position.clone().add({x:0.03, y:0, z:-0.074}), up );\n        EL.quaternion.setFromRotationMatrix( this.tmpMtx ).multiply(this.q);\n\n        this.tmpMtx.lookAt( ER.position, this.eyeTarget.position.clone().add({x:-0.03, y:0, z:-0.074}), up );\n        ER.quaternion.setFromRotationMatrix( this.tmpMtx ).multiply(this.q);\n\n    }\n\n    breathing(){\n\n        if( !this.bones ) return;\n        if( !this.isBreath ) return;\n        if( !this.skeleton.setScalling ) return;\n\n        let a = this.breath * 0.01;\n\n        if(this.breathSide > 0){\n            this.skeleton.setScalling( this.bones.chest, this.lerp (1,1.02, a), this.lerp (1,1.04, a), 1 );\n            this.skeleton.setScalling( this.bones.abdomen, 1, this.lerp (1,0.92, a), 1 );\n        }else {\n            this.skeleton.setScalling( this.bones.chest, this.lerp (1.02,1, a), this.lerp (1.04,1, a), 1 );\n            this.skeleton.setScalling( this.bones.abdomen, 1, this.lerp (0.92,1, a), 1 );\n        }\n\n\n        // !! just for testing \n        //this.skeleton.setScalling( this.bones.lShldr, 1.3, 2, 2 )\n        //this.skeleton.setScalling( this.bones.lForeArm, 1.3, 2, 2 )\n\n        this.breath ++;\n        if( this.breath === 100 ){ this.breath = 0; this.breathSide = this.breathSide > 0 ? -1:1; }\n\n    }\n\n    setPosition( x, y, z ){\n\n        this.position.set( x, y, z );\n        this.updateMatrix();\n\n    }\n\n    setRotation( x, y, z, a ){\n\n        let r  = this.lerp( this.rotation.y, y, a);\n        this.rotation.set( x, r, z );\n        this.updateMatrix();\n\n    }\n\n    lerp( x, y, t ) { return ( 1 - t ) * x + t * y }\n\n    onReady(){}\n\n    initMaterial(){\n\n        if( Pool.getMaterial( this.ref.materialRef ) ) return\n\n        if( !this.fullMaterial ){\n            Pool.set( this.ref.materialRef, new MeshStandardMaterial() );\n            return\n        }\n\n        let m, type, data;\n\n        for( const name in this.ref.materials ){\n\n            data = {...this.ref.materials[name]};\n            type = data.type;\n            delete data.type;\n            for( const t in data ){\n                if(t!=='envMapIntensity' && t!=='normalMapType' && t!=='aoMapIntensity' && t!=='aoMapIntensity'){\n                    if(t==='map' || t.search('Map')!==-1 ) data[t] = Pool.getTexture( data[t], {quality:this.textureQuality } );\n                }\n            }\n\n\n            if(type==='Basic') m = new MeshBasicMaterial( data );\n            else if(type==='Standard') m = new MeshStandardMaterial( data );\n            else if(type==='Physical') m = new MeshPhysicalMaterial( data );\n            else if(type==='Sss') m = new MeshSssMaterial(data);\n            m.name = name;\n\n            Pool.set( name, m );\n\n        }\n\n        this.setting = this.ref.setting;\n\n    }\n\n\n    setMaterial(s, b){\n        let m = Pool.getMaterial( this.ref.materialRef );\n        if(!m) return;\n        for(let p in s){\n            if(m[p]!==undefined) m[p] = s[p];\n        }\n\n    }\n\n    setMaterialNormal( v ){\n\n        let m = Pool.getMaterial( 'skin' );\n        if(!m) return\n        if( v<0 ) v = 0;\n        m.normalScale.set(v,-v);\n\n    }\n\n    getMaterial( name ){\n\n        return Pool.getMaterial( name )\n        \n    }\n\n    init(){\n\n        this.initMaterial();\n\n        if( !this.isClone ) {\n            this.root = Pool.get( this.ref.forceModel ? this.ref.forceModel : this.model, 'O' ); \n            this.ref.applyMaterial( this.root, this.model );\n        }\n\n        if( this.ref.forceModel && this.isClone ) this.ref.applyMaterial( this.root, this.model );\n\n        this.realSize = 0;\n\n        // get data\n        this.root.traverse( function ( node ) {\n            \n            node.raycast = function(){ return };\n\n            if ( node.isMesh ){\n\n                if( node.name === this.ref.skeletonRef ){\n                    node.matrixAutoUpdate = false;\n\n                    this.skeleton = node.skeleton;\n                    if( this.skeleton.resetScalling ) this.skeleton.resetScalling();\n\n                    this.realSize = node.geometry.boundingBox.max.y;\n\n\n\n                    //console.log( node.geometry.boundingSphere, node.geometry.boundingBox, node.frustumCulled )\n                    //node.geometry.boundingSphere.radius = 0.1;\n                }\n                if( node.name === 'Head' ) this.realSize = node.geometry.boundingBox.max.y;\n                \n                this.mesh[node.name] = node;\n            }\n            if ( node.isBone ){\n                this.bones[node.name] = node;\n                //if(node.name==='rShldr' ) node.rotation.x = 80 * torad\n               // console.log(node.name, node.rotation.x*todeg, node.rotation.y*todeg, node.rotation.z*todeg)\n            }\n        }.bind(this));\n\n        this.realSizeRatio = 1 / this.realSize;\n        this.baseSize = this.realSize;\n\n        if( this.ref.isEyeMove ){\n            this.bones.neck.add( this.eyeTarget );\n        }\n    \n        //if( !this.isClone ){\n        // for extra skin\n        for( let m in this.mesh ){\n            if( this.mesh[m].isSkinnedMesh && m !== this.ref.skeletonRef ){\n                //this.mesh[m].skeleton.dispose();\n                this.mesh[m].skeleton = this.skeleton;\n            }\n        }\n\n        if( !this.isClone ){\n            // add morph \n            if( this.haveMorph ) Pool.applyMorph( this.model+'_morph', this.mesh, this.ref.morphNormal, this.ref.morphRelative );\n            Pool.set( this.model, this.root, 'O' );\n            \n        }\n\n        if( this.size !== 1 ) this.root.scale.set(1,1,1).multiplyScalar(this.size);\n\n        //if( this.tensionTest ) this.addTensionMap()\n\n\n\n        // animation\n        this.mixer = new AnimationMixer( this );\n\n        \n\n        if( Pool.clip.length === 0 ){ \n            // load animation include in json or the compacted version\n            if( this.compact ) this.loadCompactAnimation(this.rootPath +'assets/animation/animations.bin');\n            else this.loadAnimationJson(this.rootPath +'assets/animation/animations.json', this.start.bind(this) );\n\n        } else {\n            let i = Pool.clip.length;\n            while(i--) this.addAction( Pool.clip[i] );\n            this.start();\n        }\n\n        \n             \n    }\n\n    setRealSize( s ){\n\n        this.realSize = s;\n        let r = 0.5 + ((this.baseSize / this.realSize)*0.5);\n        this.setSize( this.realSize * this.realSizeRatio );\n        this.setHeadSize( r );\n\n    }\n\n    setSize( s ){\n        this.size = s;\n        this.root.scale.set(1,1,1).multiplyScalar(this.size);\n        //this.bones.head.scale.set(1,1,1).multiplyScalar(2);\n    }\n\n    setHeadSize( s ){\n        this.bones.head.scale.set(1,1,1).multiplyScalar(s);\n    }\n\n    addTensionMap(){\n\n        this.tension1 = new Tension( this.mesh.body );\n        this.tension2 = new Tension( this.mesh.Head );\n    }\n\n    setBounding( r ){\n\n        for( let m in this.mesh ){\n            if(this.mesh[m].isMesh ){\n                this.mesh[m].geometry.boundingSphere.radius = r;\n            }\n        }\n\n    }\n\n    /*setBoneScale( v ){\n\n        const ingnor = [ 'head', 'lToes', 'rToes', 'rCollar', 'lCollar', 'rBreast', 'lBreast', 'neck'];\n        const center = ['hip', 'abdomen', 'chest'];\n        const legs = ['lThigh', 'rThigh', 'lShin', 'rShin'];\n        const b = this.bones\n\n        for( let n in b ){\n            if(ingnor.indexOf(n) === -1) {\n                if(center.indexOf(n) !== -1) b[n].scalling.z = v\n                else if(legs.indexOf(n) !== -1) b[n].scalling.z = v\n                else if( n === 'root' ) b[n].scalling.y = v\n                else if( n === 'rFoot' || n === 'lFoot') b[n].scalling.y = v\n                else b[n].scalling.x = v\n            } \n        }\n\n        this.setBounding(v)\n    }*/\n\n    setLevel( n ){\n\n        if( !this.haveLOD ) return\n        if( this.lod === n ) return\n\n        this.lod = n;\n\n        this.hideAll();\n\n        if( this.lod === 0 ) this.setVisible( this.ref.levelLow, true );\n        else { \n            this.setVisible( this.ref.levelHigh, true );\n            if( this.ref.haveHair ){ \n                //this.mesh.body.visible = false;\n                this.setVisible( this.ref.levelHair, true );\n            }\n        }\n    \n    }\n\n    hideAll(){\n\n        for( let m in this.mesh ) this.mesh[m].visible = false;\n    \n    }\n \n    setVisible( names, v ){\n\n        if( typeof names === 'string' ) names = [names];\n        let i = names.length, name;\n        while(i--){\n            name = names[i];\n            if( this.mesh[name] ) this.mesh[name].visible = v;\n        }\n    \n    }\n\n\n    /*eyeControl( v ){\n\n        this.setMorph('EyeBlink', v)\n    \n    }*/\n\n    setMorph( name, v ){\n\n        v = v < 0 ? 0 : v;\n        //v = v > 1 ? 1 : v;\n\n        if( !this.haveMorph ) return\n        this.morpher( 'eyelash', name, v);\n        this.morpher( 'eyebrow', name, v);\n        this.morpher( 'tear', name, v);\n        this.morpher( 'mouth', name, v);\n        this.morpher( 'body', name, v);\n        this.morpher( 'Head', name, v);\n        this.morpher( 'body_low', name, v);\n    }\n\n    morpher( obj, name, value ){\n\n        if(!this.mesh[obj]) return\n        if(!this.mesh[obj].morphTargetInfluences) return\n        if(this.mesh[obj].morphTargetDictionary[name] === undefined ) return\n        this.mesh[obj].morphTargetInfluences[ this.mesh[obj].morphTargetDictionary[name] ] = value;\n    }\n\n    lerp( x, y, t ) { return ( 1 - t ) * x + t * y; }\n\n    clone( o ){\n\n        return new this.constructor( {type:o.type}, this );\n    \n    }\n\n    dispose(){\n\n        if( this.exoskel ) this.addExo();\n        if( this.helper ) this.addHelper();\n\n        this.stop();\n        //if( this.skeleton.resetScalling ) this.skeleton.resetScalling()\n        this.mixer.uncacheRoot( this );\n\n        //if(this.skeleton.boneTexture)this.skeleton.boneTexture.dispose();\n        this.remove( this.root );\n\n        this.skeleton.dispose();\n        if( this.parent ) this.parent.remove(this);\n        \n\n        //console.log('hero remove')\n        if(!this.isClone);\n    }\n\n    start(){\n\n        if( this.isPreload ) { this.callback(); return; }\n        if( this.done ) return;\n\n        //this.updateMatrix()\n\n        this.done = true;\n \n        \n\n        this.onReady();\n        //this.playAll();\n        \n        this.play( this.startAnimation );\n\n        if( this.ref.adjustment ){\n            this.makePoseTrack('adjustment', this.ref.adjustment(), true );\n        }\n\n        // Random Human\n        if( this.randomMorph ) this.setBodyMorph([this.rand(-1,1), this.rand(-1,1)]);\n        if( this.randomSize ) this.setRealSize(this.rand(1,2));\n\n\n        //this.add( this.root );\n\n\n        //setTimeout( this.callback, 100 );\n        setTimeout( function(){ \n            this.add( this.root );\n            this.callback();\n        }.bind(this), 100 );\n        //this.callback()\n\n    }\n\n    setBodyMorph( v ){\n\n        if(!this.haveMorph) return;\n\n        if(v) this.bodyMorph = v;\n\n        let vx = Number(this.bodyMorph[0]);\n        let vy = Number(this.bodyMorph[1]);\n\n        this.setMorph( 'MUSCLE', vy<0?-vy:0 );\n        this.setMorph( 'LOW', vy>=0?vy:0 );\n\n        this.setMorph( 'BIG', vx<0?-vx:0 );\n        this.setMorph( 'MONSTER', vx>=0?vx:0 );\n\n        let cx = ((vx+1)*0.5);\n        let cy = (1-((vy+1)*0.5));\n\n        this.setMaterialNormal( (cy+cx)*0.5 );\n\n    }\n\n    setFaceMorph( v ){\n\n        if(!this.haveMorph) return;\n        if(v) this.faceMorph = v;\n\n        let vx = Number(this.faceMorph[0]);\n        let vy = Number(this.faceMorph[1]);\n\n        this.setMorph( 'Shock', vy<0?-vy:0 );\n        this.setMorph( 'Frown', vy>=0?vy:0 );\n\n        this.setMorph( 'SmileOpen', vx<0?-vx:0 );\n        this.setMorph( 'Angry', vx>=0?vx:0 );\n\n    }\n\n    addHelper(){\n\n        if( this.helper ){\n            this.helper.dispose();\n            this.remove( this.helper );\n            this.helper = null;\n        } else {\n            this.helper = new SkeletonHelper( this.root );\n            this.helper.raycast = function (){ return };\n            this.helper.matrix = this.root.matrix;\n            this.add( this.helper );\n        }\n    }\n\n    addExo() {\n\n        if( this.exoskel ){\n            this.exoskel.dispose();\n            this.remove( this.exoskel );\n            this.exoskel = null;\n        } else {\n            this.exoskel = new ExoSkeleton( this.root, this.skeleton );\n            this.exoskel.matrix = this.root.matrix;\n            this.add( this.exoskel );\n\n        }\n        return this.exoskel;\n    }\n\n    attachToBone( m, b ){\n\n        m.matrix = b.matrixWorld;\n        m.matrixAutoUpdate = false;\n\n    }\n\n    loadAnimationJson( url, callback ){\n\n        const request = new XMLHttpRequest();\n        request.open('GET', url, true);\n        request.onreadystatechange = function() {\n            if ( request.readyState === 4 ) {\n                if ( request.status === 200 || request.status === 0 ) {\n                    let data = JSON.parse( request.responseText );\n                    this.urls = [];\n                    for( let g in data ){\n                        if( g === 'main' ) this.urls.push( ...data[g] );\n                        else this.urls.push( ...data[g].map( x => g+'/'+x ) );\n                    }\n                    this.endCallback = callback || function(){}; \n                    this.loadOne();\n                }\n            }\n        }.bind(this);\n        request.send();\n\n    }\n\n    loadOne(){\n\n        let name = this.urls[0];\n        this.loadAnimationFbx( this.rootPath + 'assets/animation/fbx/'+name+'.fbx', this.next.bind(this) );\n\n    }\n\n    next(){\n\n        this.urls.shift();\n        if( this.urls.length === 0 ) this.endCallback();\n        else this.loadOne();\n\n    }\n\n    loadCompactAnimation( url = './assets/models/animations.bin' ){\n\n        var request = new XMLHttpRequest();\n        request.open('GET', url, true);\n        request.responseType = 'arraybuffer';\n\n        const glb = { animations : [] };\n        const self = this;\n\n        request.onload = function() {\n            LZMA.decompress( request.response, (result) => {\n                const data = JSON.parse(result);\n                \n                for(let c in data) glb.animations.push( AnimationClip.parse( data[c] ) ); \n                //console.log( glb )\n                self.applydAnimation( glb );\n                self.start();\n            });\n        };\n        request.send();\n\n    }\n\n    loadAnimationGlb( url, callback ){\n\n        let name = url.substring( url.lastIndexOf('/')+1, url.lastIndexOf('.') );\n        Pool.loaderGLTF().load( url, function ( glb ) {\n            this.applydAnimation( glb, name );\n            if( callback ) callback();\n        }.bind(this), null, callback );\n    }\n\n    directGlb( data, name ){\n\n        Pool.loaderGLTF().parse( data, '', function ( glb ) {\n            this.stop();\n            this.applydAnimation( glb, name );\n        }.bind(this));\n    }\n\n    loadAnimationFbx( url, callback ){\n\n        //if( !this.loaderFbx ) this.loaderFbx = new FBXLoader();\n        let name = url.substring( url.lastIndexOf('/')+1, url.lastIndexOf('.') );\n        Pool.loaderFBX().load( url, function ( node ) {\n            this.convertFbx( name, node.animations[ 0 ] );\n            if( callback ) callback();\n        }.bind(this), null, callback );\n    }\n\n    directFbx( data, name ){\n\n        //if( !this.loaderFbx ) this.loaderFbx = new FBXLoader();\n        try {\n            let node = Pool.loaderFBX().parse( data, '' );\n            this.convertFbx( name, node.animations[ 0 ], true );\n        } catch ( e ) {\n            console.error( 'bug', e );\n        }\n    }\n\n    applydAnimation( glb, name ){\n\n        let i = glb.animations.length, autoplay = false;\n        if( i === 1 ){\n            if( name ) glb.animations[0].name = name;\n            autoplay = true;\n        } \n        while(i--){ \n            this.addClip( glb.animations[i] );\n            this.addAction( glb.animations[i], autoplay );\n        }\n\n    }\n\n    addClip( clip, additive = false ){\n\n        // Make the clip additive and remove the reference frame\n        if( additive ){ \n            AnimationUtils.makeClipAdditive( clip );\n            //clip = AnimationUtils.subclip( clip, clip.name, 2, 3, 30 );\n        }\n\n        ///console.log(clip)\n\n        let i = Pool.clip.length, removeId = -1;\n        while(i--){ if( Pool.clip[i].name === clip.name ) removeId = i; }\n        if( removeId !== -1 ) Pool.clip.slice( removeId, 1 );\n\n\n        //clip.optimize();\n        Pool.clip.push( clip );\n    }\n\n    addAction( clip, play ){\n\n        const action = this.mixer.clipAction( clip );\n        action.frameMax = Math.round( clip.duration * FrameTime );\n        action.play();\n        action.enabled = true;//false;\n        if(clip.name.search('idle')!==-1) action.enabled = true;\n        //action.setEffectiveWeight( 0 );\n        if( clip.name === 'Jumping Up' ) action.loop = LoopPingPong;\n        \n        //action.play()\n        this.actions.set( clip.name, action );\n\n\n\n        /*\n        if(clip.name.search('walk')!==-1) this.clipsToesFix.push(clip.name);\n        if(clip.name.search('run')!==-1) this.clipsToesFix.push(clip.name);\n        if(clip.name.search('strafe')!==-1) this.clipsToesFix.push(clip.name);\n        if(clip.name.search('jog')!==-1) this.clipsToesFix.push(clip.name);\n        if(clip.name.search('RUN')!==-1) this.clipsToesFix.push(clip.name);\n        */\n\n        //console.log(clip.name, action.frameMax)\n\n        if( window.gui && window.gui.getAnimation ) window.gui.getAnimation();\n\n       // if( play ) this.play( clip.name )\n\n             \n    }\n\n\n    /// EXPORT\n\n    getAnimation( toJson = false, fromPool = false ){\n\n        let anim = [], n = 0;\n        if(fromPool){\n            let i = Pool.clip.length;\n            while(i--){\n\n                if( toJson ) anim[n] = Pool.clip[n].toJSON();\n                else anim[n] = Pool.clip[n];\n                // delete animations[n].uuid\n                n++;\n            }\n        } else {\n            this.actions.forEach( function ( action, key ) {\n                if( toJson ) anim[n] = action._clip.toJSON();\n                else anim[n] = action._clip;\n                //delete data[n].uuid\n                n++;\n            });\n        }\n\n        return anim;\n\n    }\n\n    exportAnimationLzma( callback ){\n\n        if(!this.lzma) this.lzma = new LZMA(this.lzmaPath);\n\n        const data = this.getAnimation( true );\n\n        this.lzma.compress( JSON.stringify(data), 2, function(result) {\n\n            if( callback ) callback( {name:'animations', data:new Uint8Array(result), type:'bin'}  );\n            else {\n                let link = document.createElement(\"a\");\n                link.style.display = \"none\";\n                document.body.appendChild(link);\n                link.href = URL.createObjectURL( new Blob( [new Uint8Array(result)], {type: \"application/octet-stream\"} ) );\n                link.download = 'animations.bin';\n                link.click();\n            }\n        });\n    }\n\n    exportGLB( callback ){\n\n        if( !this.exporter ) this.exporter = new GLTFExporter();\n        \n        const animations = this.getAnimation();\n\n        this.exporter.parse( this.root, function( gltf ){\n\n            if( callback ) callback( {name:'model', data:gltf, type:'glb'}  );\n            else {\n                let link = document.createElement(\"a\");\n                link.style.display = \"none\";\n                document.body.appendChild(link);\n                link.href = URL.createObjectURL( new Blob([gltf], { type: \"application/octet-stream\" }) );\n                link.download = 'model.glb';\n                link.click();\n            }\n\n            //self.loader.parse( JSON.stringify(glb, null, 2), '', function (r){ console.log(r) } )\n\n        }, null, { animations:animations, binary: true, onlyVisible: true } );\n\n    }\n\n    armAngle(){\n\n    }\n\n    autoToes(){\n\n        if(!this.fixToe) return;\n        let r = this.getRot('rFoot');\n        let l = this.getRot('lFoot');\n        let v = this.getWorldPos('hip');\n        let v0 = this.getWorldPos('rToes');\n        let v1 = this.getWorldPos('lToes');\n        if(r[0]>0 && (v0.z-v.z)<0) this.setRot('rToes', -r[0]*1.5, 0,0 );\n        else if( r[0] !== 0 ) this.setRot('rToes', 0,0,0 );\n        if(l[0]>0 && (v1.z-v.z)<0) this.setRot('lToes', -l[0]*1.5, 0,0 );\n        else if( l[0] !== 0 ) this.setRot('lToes', 0,0,0 );\n    }\n\n    resetToes(){\n\n        if(!this.fixToe) return;\n        this.fixToe = false;\n        this.setRot('rToes', 0,0,0 );\n        this.setRot('lToes', 0,0,0 );\n\n    }\n\n    convertFbx( name, anim, autoplay ) {\n\n        const torad = Math.PI / 180;\n        let p = new Vector3();\n        let q = new Quaternion();\n        let RX = new Quaternion().setFromAxisAngle({x:1, y:0, z:0}, 90 * torad );\n\n        const baseTracks = anim.tracks;\n        const tracks = [];\n\n        let i = baseTracks.length, j, n, t, b, k = 0;\n\n        while(i--){\n            t = baseTracks[k];\n            b = t.name.substring(0, t.name.lastIndexOf('.') );\n\n            if( t.name === 'hip.position' ){\n                let rp = [];\n                j = t.values.length / 3;\n                while(j--){\n                    n = j * 3;\n                    p.set( t.values[n], t.values[n+1], 0).multiplyScalar(0.01);\n                    p.toArray( rp, n );\n                }\n                tracks.push( new VectorKeyframeTrack( t.name, t.times, rp ) );\n\n            } else {\n                let rq = [];\n                j = t.values.length / 4; \n                while(j--){\n                    n = j * 4;\n                    if( b==='hip') q.set(t.values[n], t.values[n+1], t.values[n+2], t.values[n+3]).multiply( RX );\n                    else q.set(t.values[n], t.values[n+2], -t.values[n+1], t.values[n+3]);\n                    q.toArray( rq, n );\n                }\n                tracks.push( new QuaternionKeyframeTrack( t.name, t.times, rq ) );\n            }\n            k++;\n        }\n\n        let clip = new AnimationClip( name, -1, tracks );\n        clip.duration = anim.duration;\n\n        //console.log( name, anim.duration )\n\n\n\n        this.stop();\n        this.addClip( clip );\n        this.addAction( clip, autoplay );\n\n    }\n\n    makePoseTrack( name, data, isAdd = false ){\n\n        const torad = Math.PI / 180;\n        //let lockPosition = true;\n        //let p = new Vector3();\n        let q = new Quaternion();\n        //let RX = new Quaternion().setFromAxisAngle({x:1, y:0, z:0}, 90 * torad );\n\n        const baseTracks = data;// anim.tracks;\n        const tracks = [];\n\n        let i = baseTracks.length, j, n, n2, t, k = 0;\n\n        let numFrame = 3;//3\n\n   \n\n        while(i--){\n            t = baseTracks[i];\n            t.name;//.substring(0, t.name.lastIndexOf('.') )\n\n            /*if( t.name === 'hip.position' ){\n                let rp = []\n                j = t.values.length / 3;\n                while(j--){\n                    n = j * 3;\n                    if( lockPosition ) p.set( t.values[n], t.values[n+1], 0).multiplyScalar(0.01);\n                    else p.set( t.values[n], t.values[n+1], t.values[n+2]).multiplyScalar(0.01);\n                    p.toArray( rp, n );\n                }\n                tracks.push( new VectorKeyframeTrack( t.name, t.times, rp ) );\n\n            } else {*/\n                let rq = [];\n                let tt = [];\n                k = 0;\n                j = numFrame;//t.values.length / 3 \n                while(j--){\n                    n = 0;//j * 3\n                    n2 = k * 4;\n\n                    tt.push( k * 0.03333333507180214 );\n                    //if( b==='hip') q.set(t.values[n], t.values[n+1], t.values[n+2], t.values[n+3]).multiply( RX );\n                    //else q.set(t.values[n], t.values[n+2], -t.values[n+1], t.values[n+3]);\n                    q.setFromEuler( {_x:t.values[n]*torad, _y:t.values[n+1]*torad, _z:t.values[n+2]*torad, _order:'XYZ'});\n                    q.toArray( rq, n2 );\n                    k++;\n                }\n                tracks.push( new QuaternionKeyframeTrack( t.name+'.quaternion', tt, rq ) );\n            //}\n            \n        }\n\n\n        // additive not work\n        let blendMode = isAdd ? AdditiveAnimationBlendMode : NormalAnimationBlendMode;\n        let clip = new AnimationClip( name, -1, tracks, blendMode );\n        clip.duration = numFrame * 0.03333333507180214;//anim.duration;\n\n        //console.log(clip)\n\n        const action = this.mixer.clipAction( clip );\n        //action.frameMax = numFrame;\n        action.enabled = true;\n        //action.time = 0;\n        action.setEffectiveTimeScale( 1 );\n        action.setEffectiveWeight( 1 );\n        action.play();\n\n        \n        //action.paused = true;\n        //this.actions.set( clip.name, action );\n\n        //this.stop();\n        //this.addClip( clip, true );\n        //this.addAction( clip, autoplay );\n        this.actionPose = action;\n\n\n\n    }\n\n\n    //---------------------\n    //\n    //  ANIMATION CONTROL\n    //\n    //---------------------\n\n    prepareCrossFade( startAction, endAction, duration )  {\n        //singleStepMode = false;\n\n        this.isPause = false;\n        this.unPause();\n        // If the current action is 'idle' (duration 4 sec), execute the crossfade immediately;\n        // else wait until the current action has finished its current loop\n        if ( endAction._clip.name !== 'idle' ) {\n            this.executeCrossFade( startAction, endAction, duration );\n        } else {\n            this.synchronizeCrossFade( startAction, endAction, duration );\n        }\n\n    }\n\n    synchronizeCrossFade( startAction, endAction, duration ) {\n\n        this.mixer.addEventListener( 'loop', onLoopFinished );\n        const self = this;\n        function onLoopFinished( event ) {\n            if ( event.action === startAction ) {\n                self.mixer.removeEventListener( 'loop', onLoopFinished );\n                self.executeCrossFade( startAction, endAction, duration );\n            }\n        }\n\n    }\n\n    executeCrossFade( startAction, endAction, duration, warping = true ) {\n        // Not only the start action, but also the end action must get a weight of 1 before fading\n        // (concerning the start action this is already guaranteed in this place)\n        this.setWeight( endAction, 1 );\n        endAction.time = 0;\n        // Crossfade with warping - you can also try without warping by setting the third parameter to false\n        startAction.crossFadeTo( endAction, duration, true );\n    }\n\n    pause(){\n        this.actions.forEach( function ( action ) { action.paused = true; });\n        this.isPause = true;\n    }\n\n    unPause(){\n        this.actions.forEach( function ( action ) { action.paused = false; });\n        this.isPause = false;\n    }\n\n    playAll(){\n        this.actions.forEach( function ( action ) { action.play(); });\n    }\n\n    setTimescale( timescale ) {\n\n        this.actions.forEach( function ( action ) { action.setEffectiveTimeScale( timescale ); });\n\n    }\n\n    syncro( name ) {\n\n        let action = this.getAction( name );\n        if ( !action ) return;\n        let time = action.time;\n        this.actions.forEach( function ( action ) { action.time = time; });\n\n    }\n\n    /*setTimescale( action, timescale ) {\n\n        action.enabled = true;\n        action.setEffectiveTimeScale( timescale );\n\n    }*/\n\n    setWeight( action, weight ) {\n\n        //if( typeof action === 'string' ) action = this.getAction( action );\n        //if ( !action ) return;\n\n        action.enabled = true;\n        if(weight<0) weight = 0;\n        if(weight>1) weight = 1;\n        //let old = action.getEffectiveWeight()\n        //if(old===0 && weight!== 0) action.time = 0;\n        //action.setEffectiveTimeScale( weight );\n        action.setEffectiveWeight( weight );\n\n    }\n\n\n    getAnimInfo( name ){\n\n        let action = this.getAction( name );\n        if ( !action ) return;\n        return {\n            name: name,\n            time: action.time,\n            frame: Math.round( action.time * FrameTime ),\n            frameMax: action.frameMax,\n            timeScale: action.timeScale,\n        }\n\n        //if( ui ) ui.updateTimeBarre( anim.frame, anim.frameTime, anim.frameMax );\n\n    }\n\n    getAction( name ) {\n        //if ( !this.actions.has( name ) ) return;\n        return this.actions.get( name );\n    }\n\n    play( name, fade = 0.5 ) {\n\n        let action = this.getAction( name );\n        if ( !action ) return false;\n\n        if( !this.current ){\n            this.stop();\n            this.current = action;\n            //action.play();\n            action.setEffectiveWeight( 1 );\n        } else {\n\n            if( this.current !== action ){\n\n                this.old = this.current;\n                this.current = action;\n\n                let isIdle = this.current.getClip().name === 'idle';\n                isIdle = this.old.getClip().name === 'idle';\n\n                if( this.clipsToesFix.indexOf(name) !== -1 ) this.fixToe = true;\n                else this.resetToes();\n\n                let oldEff = this.old.getEffectiveWeight();\n                let currentEff = this.current.getEffectiveWeight();\n                \n                // keep current time to avoid reloop\n                let time = this.current.time;\n                // sycro if not idle on walk run leg position\n                if( !isIdle ){ \n                    let ratio = this.current.getClip().duration / this.old.getClip().duration;\n                    time = this.old.time * ratio;\n                }\n\n                // reset current\n                this.current.reset();\n                //currentEff = 0\n\n                this.current.time = time;\n\n\n                if( this.fixWeight ){\n\n                    this.current.weight = 1.0;\n                    this.current.stopFading();\n                    this.old.stopFading();//.stopWarping();\n                    this.old._scheduleFading( fade, oldEff, 0 );\n                    this.current._scheduleFading( fade, currentEff, 1 );\n\n                } else {\n\n                    this.executeCrossFade( this.old, this.current, fade );\n\n                    //this.current.crossFadeFrom( this.old, fade, true );\n\n                }\n\n            }\n        } \n\n        this.isPause = false;\n\n        return true;\n    }\n\n    playFrame ( name, frame, weight = 1 ) {\n\n\n\n        let action = this.getAction( name );\n        if ( !action ) return;\n\n        action.time = frame * TimeFrame;\n        action.setEffectiveWeight( weight );\n        action.play();\n        action.paused = true;\n        this.isPause = true;\n\n    }\n\n    playOne ( frame, weight = 1 ) {\n\n        if ( !this.current ) return;\n\n        this.current.time = frame * TimeFrame;\n        this.current.setEffectiveWeight( weight );\n        this.current.play();\n        this.current.paused = true;\n        this.isPause = true;\n\n    }\n\n    stop(){\n\n        this.actions.forEach( function ( action ) { action.setEffectiveWeight( 0 ); });\n        //this.mixer.stopAllAction()\n    }\n\n\n\n    // bone control\n\n    setRot( name, x, y, z ){\n\n        let n = this.bones[name];\n        if(!n) return\n        n.rotation.set( x*torad$2, y*torad$2, z*torad$2, 'XYZ' );\n        n.updateMatrix();\n    }\n\n    setRot2( name, x, y, z ){\n\n        let n = this.bones[name];\n        if(!n) return\n        //let q1 = n.quaternion\n        let q2 = new Quaternion().setFromEuler( {_x:x*todeg, _y:y*todeg, _z:z*todeg, _order:'XYZ'}).invert();\n     \n        n.quaternion.premultiply(q2);\n       // n.rotation.set( x*torad, y*torad, z*torad, 'XYZ' );\n        n.updateMatrix();\n    }\n\n    getRot( name ){\n\n        let n = this.bones[name];\n        if(!n) return\n        let r = n.rotation.toArray();\n        return [ Math.round(r[0]*todeg), Math.round(r[1]*todeg), Math.round(r[2]*todeg) ];\n    }\n\n    getWorldPos( name ){\n\n        let n = this.bones[name];\n        if(!n) return\n        V.set(0,0,0);\n        n.localToWorld(V);\n        return { x:V.x, y:V.y, z:V.z };\n\n    }\n\n\n    //---------------------\n    //  HIDE PART OF BODY\n    //---------------------\n\n    bodyMask( o = {arm:true, leg:true, foot:true, chest:true } ){\n\n        let s = 0.25;\n        if(!this.canvas) {\n            this.canvas = document.createElement( 'canvas' );\n            this.canvas.width = this.canvas.height = 1024*s;\n        }\n\n        const ctx = this.canvas.getContext( '2d' ); \n        ctx.fillStyle = '#FFFFFF';\n        ctx.fillRect(0, 0, 1024*s, 1024*s);\n        ctx.fillStyle = 'black';\n        if(o.arm) ctx.fillRect( 784*s, 448*s, 236*s, 186*s );\n        if(o.leg) ctx.fillRect( 512*s, 734*s, 287*s, 290*s );\n        if(o.foot) ctx.fillRect( 817*s, 822*s, 206*s, 200*s );\n        if(o.chest){ \n            ctx.fillRect( 480*s, 576*s, 300*s, 160*s );\n            ctx.fillRect( 553*s, 466*s, 228*s, 110*s );\n            ctx.fillRect( 533*s, 531*s, 20*s, 45*s );\n        }\n\n        let img = new Image();\n        img.src = this.canvas.toDataURL();\n\n        if(this.mask) this.mask.dispose();\n        //this.mask = new CanvasTexture( this.canvas );\n\n        this.mask = new Texture( img );\n        this.mask.flipY = false;\n        this.mask.needsUpdate = true;\n        const m = Pool.getMaterial( 'skin' );\n        m.alphaTest = 0.9;\n        m.alphaMap = this.mask;\n        //m.needsUpdate = true;\n    }\n\n\n    //---------------------\n    //   TOOLS\n    //---------------------\n\n    zeroColor(g){\n\n        if( g.isMesh ) g = g.geometry;\n        let lng = g.attributes.position.array.length;\n        g.setAttribute( 'color', new Float32BufferAttribute( new Array(lng).fill(0), 3 ) );\n\n    }\n\n    /*uv2( g, uv2 = true, tangent = true ) {\n\n        if( g.isMesh ) g = g.geometry;\n        g.setAttribute( 'uv2', g.attributes.uv );\n\n    }*/\n\n}\n\n//\n// not use native character function of physics engine \n// use some code from https://github.com/ErdongChen-Andrew/CharacterControl\n// \n\nclass Hero extends Basic3D {\n\n\tconstructor( o = {} ) {\n\n\t\tsuper();\n\n\t\tthis.isCharacter = true;\n\t\tthis.isPlayer = false;\n\t\tthis.enable = false;\n\n\t\tthis.useImpulse = o.useImpulse || false;\n\t\tthis.useFloating = o.floating || false;\n\n\t\tthis.waitRotation = false;\n\n\t\tlet floatHeight = 0.3;\n\t\tlet radius = o.radius || 0.3;\n\t\tlet height = o.height || 1.8;//0.7\n\n\t\tthis.realHeight = height;\n\n\t\tif(this.useFloating){\n\t\t\theight -= floatHeight;\n\t\t}\n\n\t\tthis.option = {\n\n\t\t\tdebug: false,\n\t\t\tcapsuleHalfHeight: height*0.5,\n\t\t\tcapsuleRadius: radius,\n\t\t\tfloatHeight: floatHeight,\n\t\t\tcharacterInitDir: 0, // in rad\n\t\t\t//followLight: false,\n\t\t\t// Follow camera setups\n\t\t\tcamInitDis: -5,\n\t\t\tcamMaxDis: -7,\n\t\t\tcamMinDis: -0.7,\n\t\t\t// Base control setups\n\t\t\tmaxVelLimit: 5,//2.5,\n\t\t\tturnVelMultiplier: 0.2,\n\t\t\tturnSpeed: 15,\n\t\t\tsprintMult: 2,\n\t\t\tjumpVel: 4,\n\t\t\tjumpForceToGroundMult: 5,\n\t\t\tslopJumpMult: 0.25,\n\t\t\tsprintJumpMult: 1.2,\n\t\t\tairDragMultiplier: 0.2,\n\t\t\tdragDampingC: 0.15,\n\t\t\taccDeltaTime: 8,\n\t\t\trejectVelMult: 4,\n\t\t\tmoveImpulsePointY: 0.5,\n\t\t\tcamFollowMult: 11,\n\t\t\tfallingGravityScale: 2.5,\n\t\t\tfallingMaxVel: -20,\n\t\t\twakeUpDelay: 200,\n\t\t\t// Floating Ray setups\n\t\t\trayOriginOffest: { x: 0, y: -height*0.5, z: 0 },\n\t\t\trayHitForgiveness: 0.1,\n\t\t\trayLength: radius + 2,\n\t\t\trayDir: { x: 0, y: -1, z: 0 },\n\n\t\t\tfloatingDis: radius + floatHeight + 0.08,\n\t\t\tspringK: 2, //1.2,\n\t\t\tdampingC: 0.2,//0.08,\n\t\t\t// Slope Ray setups\n\t\t\tshowSlopeRayOrigin: false,\n\t\t\tslopeMaxAngle: 1, // in rad\n\t\t\tslopeRayOriginOffest: radius - 0.03,\n\t\t\tslopeRayLength: radius + 3,\n\t\t\tslopeRayDir: { x: 0, y: -1, z: 0 },\n\t\t\tslopeUpExtraForce: 0.1,\n\t\t\tslopeDownExtraForce: 0.2,\n\t\t\t// AutoBalance Force setups\n\t\t\tautoBalance: true,\n\t\t\tautoBalanceSpringK: 1.2,//0.3,\n\t\t\tautoBalanceDampingC: 0.04,\n\t\t\tautoBalanceSpringOnY: 0.7,\n\t\t\tautoBalanceDampingOnY: 0.05,\n\t\t\t// Animation temporary setups\n\t\t\tanimated: false,\n\t\t\tmode:null,\n\n\t\t\t//...o\n\n\t\t};\n\n\t\tthis.v = {\n\n\t\t\tmovingObjectVelocityInCharacterDir: new Vector3(),\n\t\t\tmovingObjectVelocity: new Vector3(),\n\t\t\tstandingForcePoint: new Vector3(),\n\n\t\t\tpivotPosition: new Vector3(),\n\t\t\t//modelEuler: new Euler(),\n\t\t\tmodelQuat: new Quaternion(),\n\t\t\tmoveImpulse: new Vector3(),\n\t\t\timpulseCenter: new Vector3(),\n\t\t\tmovingDirection: new Vector3(),\n\t\t\tmoveAccNeeded: new Vector3(),\n\t\t\tjumpVelocityVec: new Vector3(),\n\t\t\tjumpDirection: new Vector3(),\n\t\t\tcurrentVel: new Vector3(),\n\t\t\tcurrentPos: new Vector3(),\n\t\t\tdragForce: new Vector3(),\n\t\t\tdragAngForce: new Vector3(),\n\t\t\twantToMoveVel: new Vector3(),\n\t\t\trejectVel: new Vector3(),\n\n\t\t\t// Floating Ray setup\n\t\t\tfloatingForce:null,\n\t\t\tspringDirVec: new Vector3(),\n\t\t\trayOrigin: new Vector3(),\n\t\t\tcharacterMassForce: new Vector3(),\n\n\t\t\t// slope\n\t\t\tslopeAngle:null,\n\t\t\tactualSlopeNormal: new Vector3(),\n\t\t\tactualSlopeAngle:null,\n\t\t\tactualSlopeNormalVec: new Vector3(),\n\t\t\tfloorNormal: new Vector3(0, 1, 0),\n\t\t\tslopeRayOriginRef: new Vector3(),\n\t\t\tslopeRayorigin: new Vector3(),\n\n\t\t\tcanJump:false,\n\t\t\tisFalling:false,\n\t\t\t//run:false,\n\t\t\tisOnMovingObject:false,\n\n\t\t};\n\n\t\t//this.angvel = new Vector3();\n\n\t\tthis.fixWeight = o.fixWeight !== undefined ? o.fixWeight : true;\n\n\t\tthis.type = 'character';\n\t\tthis.name = o.name || 'hero';\n\t\to.name = this.name;\n\n\t\tthis.isRay = false;\n\n\t\tthis.ray = null;\n\t\tthis.model = null;\n\t\tthis.static = false;\n\t\tthis.moving = false;\n\t\tthis.running = false;\n\t\tthis.wantJump = false;\n\n\t\t//this.lod = -1;\n\n\t\tthis.radius = radius;\n\t\tthis.height = height;\n\t\tthis.mass = o.mass || 0.84;\n\t\t\n\t\tdelete o.radius;\n\n\t\tthis.fall = false;\n\t\tthis.floor = true;\n\n\t\tthis.distance = 0;\n\t\tthis.rayAngle = 0;\n\t\tthis.rayStart = -(this.height*0.5)+this.radius;\n\t\t//this.rayEnd = this.rayStart - (radius + 2);//this.height;\n\t\tthis.rayEnd = this.rayStart - (4*floatHeight);//this.height;\n\t\tthis.maxRayDistance = this.height;\n\n\t\tthis.contact = false;\n\n\t\tthis.tmpV1 = new Vector3();\n\t\tthis.tmpV2 = new Vector3();\n\t\tthis.ease = new Vector3();\n\t\tthis.tmpAcc = 0;\n\t\tthis.rs = 0;\n\t\tthis.ts = 0;\n\t\tthis.diagonal = 1/Math.sqrt(2);\n\n\t\tthis.jump = false;\n\t\tthis.crouch = false;\n\t\tthis.toggle = true;\n\t\tthis.oy = 0;\n\t\tthis.vy = 0;\n\n\t\tthis.timeScale = 1.25;\n\n\t\tthis.angle = ( o.angle || 0 ) * torad$3;\n\n\t\tthis.speed = {\n\t\t    idle:1,\n\t\t    fight:1,\n\t\t    walk:7.8,\n\t\t    crouch:7,\n\t\t    run:12,\n\t\t};\n\n\t\tthis.valheimStyle = true;\n\t\tthis.globalRay = o.ray || false;\n\n\t\tthis.callback = o.callback || function (){};\n\n\t\tif( o.callback ) delete o.callback;\n\n\t\tthis.initPhysic( o );\n\n\t}\n\n\tsetHeight( H ) {\n\n\t\tif( this.model ) this.model.setRealSize( H );\n\n\t}\n\n\treSizePhysics( h ) {\n\t\t\n\t\tif( h === this.realHeight ) return;\n\n\t\tthis.realHeight = h;\n\t\tthis.height = this.realHeight - (this.useFloating ? this.option.floatHeight : 0);\n\t\tlet pos = this.position.toArray();\n\t\tpos[1] += (this.height*0.5) + (this.useFloating ? this.option.floatHeight : 0);\n\t\tlet size = [ this.radius, this.height-(2*this.radius) ];\n\n\t\tthis.phyData.pos = pos;\n\t\tthis.phyData.size = size;\n\n\t\troot.post({ m:'add', o:this.phyData });\n\n\t}\n\n\tinitPhysic( o ){\n\n\t    if(!o.size) o.size = [ this.radius, this.height-(2*this.radius) ];\n\t\tif(!o.pos) o.pos = [0,0,0];\n\n\t\to.pos[1] += this.height*0.5;\n\t\tif( this.useFloating ) o.pos[1] += this.option.floatHeight;\n\n\t\tif( this.globalRay ) root.items.body.geometry( { ...o, type:'capsule', ray:true }, this, Mat.get('hide') );\n\n\t\tthis.phyData = {\n\t\t\tname: this.name,\n\t\t\tsize: o.size,\n\t\t\tpos: o.pos,\n\t\t\ttype: 'character',\n\t\t\tshapeType: o.shapeType || 'capsule',\n\t\t\tdensity: 1,//o.density || 1,\n\t\t\tmass: this.mass, \n\t\t\tfriction: o.friction !== undefined ? o.friction : 0.5,\n\t\t\tangularFactor:[0,0,0],\n\t\t\tgroup: 16,\n\t\t\tregular:true,\n\n\t\t\tmassInfo: o.massInfo,\n\t\t};\n\n\t\tif( o.mask ) this.phyData['mask'] = o.mask;\n\n\t\t//o.volume = MathTool.getVolume( 'capsule', o.size );\n\t\n\n\t\t// add to world\n\t\troot.items.character.addToWorld( this, o.id );\n\n        // add capsule to physics\n        //root.post({ m:'add', o:o });\n        root.post({ m:'add', o:this.phyData });\n\n        // add bottom RAY\n        if( this.useFloating ) this.ray = root.motor.add({ type:'ray', name:this.name + '_ray', begin:[0,this.rayStart,0], end:[0,this.rayEnd, 0], callback:this.selfRay.bind(this), visible:false, parent:this.name });\n\n\n        // add skinning character model\n        if( o.gender ) this.addModel( o );\n        else this.showHelper( true );\n\n        this.enable = true;\n\t\t\n\t}\n\n\textraRemove(){\n\t\t// TODO bug with delete ray ?!\n\t\tif( this.ray ) root.motor.remove( this.name + '_ray' );\n\t}\n\n\t/*clear(){\n\t\troot.motor.remove([this.name, this.name + '_ray']);\n\t}*/\n\n    selfRay( r ){\n\n    \tif( r.hit ){ \n    \t\tthis.distance = r.distance; //MathTool.toFixed(r.distance-this.radius)\n    \t\tthis.rayAngle = r.angle;\n    \t\t//this.v.canJump = true;\n    \t\t//console.log('true')\n    \t} else { \n\t        this.distance =this.option.rayLength;//maxRayDistance;\n\t        this.rayAngle = 0;\n\t        //console.log('false')\n\t        //this.v.canJump = false;\t    \n\t    }\n\n    }\n\n    hit( d ){\n\n    \tthis.contact = d;\n\n    }\n\n    showHelper( b ){\n\n    \tif(b){\n    \t\tif(!this.helper){\n    \t\t\tthis.helper = new CapsuleHelper(this.radius, this.height, true, Mat.get('line'), [1,0.6,0], [0.6,0.2,0] );\n    \t\t\tthis.helper.setDirection( this.angle ); \n\t\t        this.add( this.helper );\n    \t\t}\n    \t} else {\n    \t\tif(this.helper){\n    \t\t\tthis.remove(this.helper);\n    \t\t\tthis.helper.dispose();\n    \t\t\tthis.helper = null;\n    \t\t}\n    \t}\n\n    \tif( this.ray ) this.ray.visible = b;\n\n    }\n\n    addSkeleton(){\n\n    \tif( this.skeletonBody ) return\n    \tif( !this.model ) return\n    \t//this.skeletonBody = new SkeletonBody( this )\n        this.skeletonBody = new SkeletonBody( this.name, this.model.root, this.model.skeleton.bones );\n    \troot.scene.add( this.skeletonBody );\n    \tthis.skeletonBody.isVisible( false );\n\n    }\n\n    debugMode( v = false ){\n\n    \tif( this.skeletonBody ) this.skeletonBody.isVisible(v);\n    \t//if( this.model ) this.model.setMaterial( { wireframe: v, visible:!v })\n    \tif( this.model && this.skeletonBody ) this.model.setMaterial( { transparent:v, opacity:v?0.8:1.0 }, !v );\n    \t\n    \tthis.showHelper( v );\n        \n\n    }\n\n    setMode( name ){\n\n    \tif( this.skeletonBody ) this.skeletonBody.setMode( name );\n\n    \t//this.skeletonBody = new SkeletonBody( this )\n    \t//this.model.add( this.skeletonBody )\n\n    }\n\n\taddModel( o ){\n\n\t\tthis.model = new Avatar({ \n\t\t\ttype:o.gender, \n\t\t\tanim: o.anim !== undefined ? o.anim : 'idle', \n\t\t\tcompact:true, \n\t\t\tmaterial:!o.noMat, \n\t\t\tmorph:o.morph || false, \n\t\t\trandomMorph:o.randomMorph || false,\n\t\t\trandomSize:o.randomSize || false,\n\t\t\tcallback:this.callback,\n\t\t\tfixWeight: this.fixWeight,\n\t\t\tnoLOD : o.noLOD || false,\n\t\t});\n\n\t\tthis.add( this.model );\n\t\t///this.model.rotation.order = 'YXZ'\n\t\tlet ypos = -(this.height*0.5);\n\t\tif( this.useFloating ) ypos -= this.option.floatHeight;\n\t\tthis.model.setPosition(0, this.model.decalY + ypos, 0);\n\t\tthis.model.rotation.y = this.angle;\n\t\tthis.model.updateMatrix();\n\n\t}\n\n\traycast(){\n\t\treturn;// false;\n\t}\n\n\t/*preStep(){\n\t\tif(this.skeletonBody) this.skeletonBody.update()\n\t}*/\n\n\tstep ( AR, n ) {\n\t\t\n\t\tthis.position.fromArray( AR, n + 1 );\n\t\tthis.quaternion.fromArray( AR, n + 4 );\n\t\tthis.velocity.fromArray( AR, n + 8 );\n\t\tthis.angular.fromArray( AR, n + 11 );\n\n\t\tthis.fall = this.position.y < this.oy;\n\t\tthis.floor = MathTool.nearEquals(this.position.y, this.oy, 0.1);\n\t\tthis.oy = this.position.y;\n\t\t\n\n\t\tif( this.model ) {\n\t\t\tthis.model.update( root.delta );\n\t\t\tthis.getDistanceToCamera();\n\t\t}\n\n\n\t\tif( this.useFloating && !this.isPlayer ){ \n\n\t\t\tthis.stopMoving();\n\n\t\t\tthis.getFloating();\n\n\t    \troot.motor.change({\n\n\t\t\t    name:this.name,\n\t\t\t    impulse: this.v.moveImpulse.toArray(), \n\t\t\t    impulseCenter: this.v.impulseCenter.toArray(),\n\n\t\t\t});\n\n\t\t\t\n\n\n\t    }\n\n\t\t//if(this.skeletonBody) this.skeletonBody.update()\n\t\tthis.updateMatrix();\n\t\t\n\n\t}\n\n\tgetDistanceToCamera () {\n\n\t\tif( !this.model ) return\n\t\tif( !this.model.haveLOD ) return\n\n\t\tconst camera = root.motor.getCamera();\n\t\t//this.tmpV1.setFromMatrixPosition( camera.matrixWorld );\n\t\tthis.tmpV1.copy( root.motor.getCurrentCharacterPosition() );\n\t\tthis.tmpV2.copy( this.position );//setFromMatrixPosition( this.matrixWorld );\n\t\tconst distance = this.tmpV1.distanceTo( this.tmpV2 ) / camera.zoom;\n\n\t\t//console.log(distance)\n\n\t\tlet level = distance > 3 ? 0 : 1;\n\t\t//if( level !== this.lod ){\n\t\t//\tthis.lod = level;\n\t\t\tthis.model.setLevel( level );\n\t\t\n\t}\n\n\tset ( o ) {\n\n\t\t//console.log('set', o)\n\t\tif(o.morph){\n\t\t\tif(this.model) this.model.setMorph( o.morph, o.value );\n\t\t}\n\n\t}\n\n\tdispose () {\n\n\t\t//console.log('dispose')\n\n\t\tthis.callback = null;\n\t\tif( this.skeletonBody ) this.skeletonBody.dispose();\n\t\tif( this.model ) this.model.dispose();\n\t\tif( this.helper ) this.showHelper();\n\n\t\t//if( this.ray ) root.motor.remove( this.name + '_ray' );\n\t    //this.ray = null;\n\n\t\t//this.ray.dispose()\n\n\t\t//console.log('model remove')\n\n\t\tsuper.dispose();\n\t}\n\n\tonFrame ( state, delta ){\n\n\t\tthis.v;\n\t\tthis.option;\n\n\t}\n\n\tautoBalance (){\n\n\t\tconst v = this.v;\n\t\tconst o = this.option;\n\t\tconst r = this.rotation;\n\n\t\tv.dragAngForce.set(\n\t\t    -o.autoBalanceSpringK * r.x - this.angular.x * o.autoBalanceDampingC,\n\t\t    -o.autoBalanceSpringK * r.y - this.angular.y * o.autoBalanceDampingOnY,\n\t\t    -o.autoBalanceSpringK * r.z - this.angular.z * o.autoBalanceDampingC\n\t\t);\n\n\t}\n\n\tmoveCharacter ( delta, angle = 0 ){\n\n\t\tconst v = this.v;\n\t\tconst o = this.option;\n\t\tconst key = root.motor.getKey();\n\t\troot.motor.getAzimut();\n\n\t\t\n\t\t\n\n\t\tv.currentPos.copy(this.position);\n\n\t\t\n\n\t\t//v.movingObjectVelocity = \n\t\tv.slopeAngle = 0;//azimut;\n\n\n\n\t    // Setup moving direction\n\n\t    // Only apply slope extra force when slope angle is between 0.2-slopeMaxAngle, actualSlopeAngle < slopeMaxAngle\n\t    if ( v.actualSlopeAngle < o.slopeMaxAngle &&  Math.abs(v.slopeAngle) > 0.2 && Math.abs(v.slopeAngle) < o.slopeMaxAngle ) {\n\t    \tv.movingDirection.set(0, Math.sin(v.slopeAngle), Math.cos(v.slopeAngle));\n\t    } else if ( v.actualSlopeAngle >= o.slopeMaxAngle ) {\n\t    \tv.movingDirection.set( 0, Math.sin(v.slopeAngle) > 0 ? 0 : Math.sin(v.slopeAngle), Math.sin(v.slopeAngle) > 0 ? 0.1 : 1 );\n\t    } else {\n\t    \tv.movingDirection.set(0, 0, 1);\n\t    }\n\n\n\n\t    // Apply character quaternion to moving direction\n\t    //if( this.model ) v.movingDirection.applyQuaternion( this.model.quaternion );\n\t    v.movingDirection.applyAxisAngle( {x:0, y:1, z:0}, angle );\n\n\t    \n\n\t    // Calculate moving object velocity direction according to character moving direction\n\t    v.movingObjectVelocityInCharacterDir.copy(v.movingObjectVelocity).projectOnVector(v.movingDirection).multiply(v.movingDirection);\n\t    // Calculate angle between moving object velocity direction and character moving direction\n\t    const angleBetweenCharacterDirAndObjectDir = v.movingObjectVelocity.angleTo(v.movingDirection);\n\n\t    //Setup rejection velocity, (currently only work on ground)\n\t    const wantToMoveMeg = v.currentVel.dot(v.movingDirection);\n\t    v.wantToMoveVel.set( v.movingDirection.x * wantToMoveMeg, 0, v.movingDirection.z * wantToMoveMeg );\n\t    v.rejectVel.copy(v.currentVel).sub(v.wantToMoveVel);\n\n\n\t    // Calculate required accelaration and force: a = Δv/Δt\n\t    // If it's on a moving/rotating platform, apply platform velocity to Δv accordingly\n\t    // Also, apply reject velocity when character is moving opposite of it's moving direction\n\t    \n\t    v.moveAccNeeded.set(\n\t        (v.movingDirection.x * (o.maxVelLimit * (this.running ? o.sprintMult : 1) + v.movingObjectVelocityInCharacterDir.x) - (v.currentVel.x - v.movingObjectVelocity.x * Math.sin(angleBetweenCharacterDirAndObjectDir) + v.rejectVel.x * (v.isOnMovingObject ? 0 : o.rejectVelMult))) / o.accDeltaTime,\n\t        0,\n\t        (v.movingDirection.z * (o.maxVelLimit * (this.running ? o.sprintMult : 1) + v.movingObjectVelocityInCharacterDir.z) - (v.currentVel.z - v.movingObjectVelocity.z * Math.sin(angleBetweenCharacterDirAndObjectDir) + v.rejectVel.z * (v.isOnMovingObject ? 0 : o.rejectVelMult))) / o.accDeltaTime\n\t    );\n\n\t    // Wanted to move force function: F = ma\n\t    const moveForceNeeded = v.moveAccNeeded.multiplyScalar( this.mass );\n\n\t    //console.log(this.mass)\n\n  \n\t    // Check if character complete turned to the wanted direction\n\t    //let characterRotated = Math.sin(this.rotation.y).toFixed(3) == Math.sin(v.modelEuler.y).toFixed(3);\n\t    let characterRotated = true;\n\t    if( this.waitRotation ) characterRotated = Math.sin( angle ).toFixed(3) == Math.sin(this.rotation.y).toFixed(3);\n\n\t    // If character hasn't complete turning, change the impulse quaternion follow characterModelRef quaternion\n\t    if ( !characterRotated ) {\n\t    \tv.moveImpulse.set(\n\t    \t\tmoveForceNeeded.x * o.turnVelMultiplier * (v.canJump ? 1 : o.airDragMultiplier), // if it's in the air, give it less control\n\t    \t\tv.slopeAngle === null || v.slopeAngle == 0 // if it's on a slope, apply extra up/down force to the body\n\t            ? 0 : v.movingDirection.y * o.turnVelMultiplier *\n\t            (v.movingDirection.y > 0 // check it is on slope up or slope down\n\t            ? o.slopeUpExtraForce : o.slopeDownExtraForce) * (this.running ? o.sprintMult : 1),\n\t            moveForceNeeded.z * o.turnVelMultiplier * (v.canJump ? 1 : o.airDragMultiplier) // if it's in the air, give it less control\n\t        );\n\t    }\n\t    // If character complete turning, change the impulse quaternion default\n\t    else {\n\t        v.moveImpulse.set(\n\t        \tmoveForceNeeded.x * (v.canJump ? 1 : o.airDragMultiplier),\n\t        \tv.slopeAngle === null || v.slopeAngle == 0 // if it's on a slope, apply extra up/down force to the body\n\t        \t? 0 : v.movingDirection.y * (v.movingDirection.y > 0 // check it is on slope up or slope down\n\t            ? o.slopeUpExtraForce : o.slopeDownExtraForce) * (this.running ? o.sprintMult : 1),\n\t            moveForceNeeded.z * (v.canJump ? 1 : o.airDragMultiplier)\n\t        );\n\t    }\n\n\n\t    v.impulseCenter.set( v.currentPos.x, v.currentPos.y + o.moveImpulsePointY, v.currentPos.z );\n\n\t    // Character current velocity\n\t    v.currentVel.copy(this.velocity);\n\n\t    // Jump impulse\n\n\t    if ( key[4] && v.canJump ) {\n\t    \tv.jumpVelocityVec.set( v.currentVel.x, this.running ? o.sprintJumpMult * o.jumpVel : o.jumpVel, v.currentVel.z );\n\t    \tv.moveImpulse.y = v.jumpVelocityVec.y;\n\t    }\n\n\t   //v.jumpDirection.set(0, ( this.running ? o.sprintJumpMult * o.jumpVel : o.jumpVel ) * o.slopJumpMult, 0).projectOnVector(v.actualSlopeNormalVec).add(v.jumpVelocityVec)\n\t    //root.motor.change({ name:this.name, linearVelocity:v.jumpDirection.toArray() });\n\n\t}\n\n\tgetFloating (){\n\t\t\n\t\tconst v = this.v;\n\t\tconst o = this.option;\n\n\t\tconst floatingForce = o.springK * (o.floatingDis - this.distance) - this.velocity.y * o.dampingC;\n\t\tv.moveImpulse.y = floatingForce * (this.mass);\n\n\t}\n\n\tstopMoving (){\n\t\t\n\t\tthis.v;\n\t\tthis.option;\n\n\t\tthis.v.moveImpulse.set(0,0,0);\n\n\t\t// slowdown\n\n\t\tthis.tmpV1.copy(this.velocity);//.multiplyScalar( 0.9 )\n\t\tthis.tmpV1.x *= 0.9;\n\t\tthis.tmpV1.z *= 0.9;\n\n\t\tif(this.tmpV1.x + this.tmpV1.z === 0 ) return;\n\n\t\troot.motor.change({\n\n\t\t    name:this.name,\n\t\t    //force: this.tmpV1.toArray(), forceMode:'velocity', \n\t\t    linearVelocity: this.tmpV1.toArray(),\n\t\t    //angularVelocity: this.tmpV2.toArray(),\n\t\t    wake:false,\n\t\t    //noGravity:true \n\t\t});\n\n\t}\n\n\t\n\n\tmove () {\n\n\t\tthis.v;\n\n\t\tconst key = root.motor.getKey();\n\t\tconst azimut = root.motor.getAzimut();\n\t\tconst delta = root.delta;\n\t\t\n\t\t// 1°/ find the good animation\n\n\t\tlet anim = key[7] !== 0 ? 'run' : 'walk';\n\t    if( key[0] === 0 && key[1] === 0 ) anim = 'idle';//*= 0.9\n\t    let m = key[0] !== 0 && key[1] !== 0 ? this.diagonal : 1;\n\n\t    if( key[5] && this.toggle ){ \n\t    \tthis.crouch = !this.crouch;\n\t    \tthis.toggle = false;\n\t    }\n\t    if( key[5] === 0 ) this.toggle = true;\n\t    if( ( anim==='walk' || anim==='run') && this.crouch ) anim = 'crouch';\n\t    if( key[6] === 1 ) anim = 'fight';\n\n\t    if( !this.jump && key[4] ){ this.vy = 22; this.jump = true; } // SPACE KEY\n\n\t    if( this.jump ){\n\t        this.vy-=1;\n\t        if(this.vy <= 0 ){ \n\t            this.vy = 0; \n\t            if( this.floor ) this.jump = false;\n\n\t            //if( MathTool.nearEquals(this.position.y, this.oy, 0.1)) this.jump = false;\n\t            //this.position.y === this.oy \n\t        }\n\t    }\n\n\t    let mAnim = 'idle';\n\t    switch( anim ){\n\t    \tcase 'idle': mAnim = this.crouch ? 'Crouch Idle' : 'idle'; break;\n\t    \tcase 'walk': mAnim = 'Jog Forward'; break;\n\t    \tcase 'run': mAnim = 'Standard Run'; break;\n\t    \tcase 'crouch': mAnim = 'Crouch Walk'; break;\n\t    \tcase 'fight': mAnim = 'Attack'; break;\n\t    }\n\n\n\t    this.moving = key[0] !== 0 || key[1] !== 0;\n\t    this.running = key[7] !== 0;\n\t    this.wantJump = key[4] !== 0;\n\n\t    let angle = MathTool.unwrapRad( ( Math.atan2(key[0], key[1])) + azimut );\n\n\n\t    // 2°/ physic control\n\n\t    if( this.useImpulse ) {\n\n\t    \tif( this.moving ) this.moveCharacter( delta, angle );\n\t    \telse this.stopMoving();\n\n\t        if( this.useFloating ) this.getFloating();\n\n\t    \troot.motor.change({\n\n\t\t\t    name:this.name,\n\t\t\t    impulse: this.v.moveImpulse.toArray(), \n\t\t\t    impulseCenter: this.v.impulseCenter.toArray(),\n\n\t\t\t});\n\n\t    } else { // old method\n\n\t    \tthis.tmpAcc += delta*4;//MathTool.lerp( tmpAcc, 1, delta/10 )\n\t        //this.tmpAcc += MathTool.lerp( this.tmpAcc, 1, delta/10 )\n\t        //this.tmpAcc = MathTool.clamp( this.tmpAcc, 1, speed )\n\n\t        const genSpeed = 1.0;\n\n\t   \t\tlet speed = this.speed[anim] * genSpeed;\n\n\t        //this.rs += key[0] //* this.tmpAcc \n\t        //this.ts += key[1] //* this.tmpAcc\n\t\t\tif( this.moving ){\n\t\t        this.rs = key[0] * speed; \n\t\t        this.ts = key[1] * speed;\n\t\t    }\n\n\t\t    if( key[0] === 0 && key[1] === 0 ) this.tmpAcc = 0;//*= 0.9\n\t\t    if( this.tmpAcc>1 ) this.tmpAcc = 1;\n\n\t\t    this.ease.set( this.rs, 0, this.ts ).multiplyScalar( this.tmpAcc * m );\n\n\t\t    //let angle = math.unwrapRad( (Math.atan2(this.ease.z, this.ease.x)) + azimut );\n\t\t    //let angle = MathTool.unwrapRad( ( Math.atan2(key[0], key[1])) + azimut );\n\t    \n\n\t\t    this.ease.length(); //((Math.abs(this.ease.x) + Math.abs(this.ease.z)))\n\n\t        if( this.static ) this.ease.x = this.ease.z = 0;\n\n\t\t    let g = this.vy - 9.81;\n\t\t    this.ease.y = g;\n\t\t    this.tmpV1.copy( this.ease ).applyAxisAngle( { x:0, y:1, z:0 }, azimut );\n\t\t    //math.tmpV2.set( 0, rs, 0 );\n\t\t    this.tmpV2.set( 0, 0, 0 );\n\n\t    \troot.motor.change({\n\n\t\t\t    name:this.name,\n\t\t\t    //force: this.tmpV1.toArray(), forceMode:'velocity', \n\t\t\t    linearVelocity: this.tmpV1.toArray(), \n\t\t\t    //angularVelocity: this.tmpV2.toArray(),\n\t\t\t    //wake:true, \n\t\t\t    //noGravity:true \n\t\t\t});\n\t    }\n\n\n\n\t\tif( this.helper ){ \n\n\t\t\tthis.helper.updateMatrix();\n\t\t\tthis.helper.cone.rotation.y = azimut;//angle\n\t\t\tif( anim !== 'idle' ) this.helper.setDirection( angle ); \n\n\t\t}\n\n\n\t   // if(anim!=='idle') this.model.setRotation( 0, azimut + Math.PI, 0, 0.25 )\n        \n        if( !this.model ) return\n\n\n        //const distanceToCamera = this.getDistanceToCamera();\n\n        //if()\n\n        //this.model.setTimescale(this.tmpAcc)\n\n        //this.model.setWeight( 'idle', 1-jj )\n\t    /*this.model.setWeight( 'Jog Forward', -this.ease.x )\n\t    this.model.setWeight( 'Jog Backward', this.ease.x )\n\t    this.model.setWeight( 'Jog Strafe Left',-this.ease.z )\n\t    this.model.setWeight( 'Jog Strafe Right', this.ease.z )*/\n\t    \n\t   \n\n\t    //if(anim!=='idle') this.model.syncro('Jog Forward')\n\n\t    //console.log(tmpAcc)\n\n        \n\t    if( this.jump ){\n\t    \tthis.model.play( 'Jump', 0.5 );\n\t    \t//this.model.setTimescale( 1 )\n\t    }else {\n\n\t    \tthis.model.play( mAnim, 0.75 );\n\t    \t//this.model.setTimescale( this.timeScale )\n\t    \t//this.model.setTimescale( 1 )\n\t    }\n\n\t    if( anim !== 'idle' ){\n\n\t    \t//this.model.setTimescale( 2.0 )\n\n\t    \tlet pp = MathTool.unwrapRad( this.model.rotation.y );\n\t    \t//if( anim === 'fight' ) pp = math.unwrapRad( azimut + Math.PI )\n\t    \tlet aa = MathTool.nearAngle( angle, pp );\n\t    \tlet diff = Math.abs(Math.floor((pp - aa)*math.todeg)/180);\n\t    \t//console.log(diff)\n\t    \t//this.model.rotation.y = anim === 'fight' ? (azimut + Math.PI) : math.lerp( pp, aa, 0.25 )\n\t    \tthis.model.rotation.y = anim === 'fight' ? (azimut + Math.PI) : MathTool.lerp( pp, aa, 0.2 - (diff*0.1) );\n\t    \tthis.model.updateMatrix();\n\t    \t//this.model.setTimescale( this.tmpAcc * (1*genSpeed) )\n\n\t    \t//let m = this.model.getAction( anim )\n\t    \t//if( m ) m.setEffectiveTimeScale( this.tmpAcc * (1*genSpeed) );\n\t    \t//if( m ) m.setEffectiveTimeScale( 0 );\n\t    }\n\n\t    //if( this.helper ) this.helper.setDirection( this.model.rotation.y )\n\n\t}\n\n\n}\n\n// THREE CHARACTER\n\nclass Character extends Item {\n\n\tconstructor() {\n\n\t\tsuper();\n\n\t\tthis.Utils = Utils;\n\t\tthis.type = 'character';\n\t\tthis.num = Num[this.type];\n\n\t}\n\n\t/*prestep () {\n\n\t\tlet i = this.list.length;\n\t\twhile( i-- ) this.list[i].preStep( );\n\n\t}*/\n\n\tstep () {\n\n\t\tconst AR = root.Ar;\n\t\tconst N = root.ArPos[this.type];\n\t\tlet i = this.list.length, n, s;\n\n\t\twhile( i-- ){\n\n\t\t\ts = this.list[i];\n\t\t\tn = N + ( i * this.num );\n\n\t\t\tif(s) s.step( AR, n );\n\n\t\t}\n\n\t}\n\n\tadd ( o = {} ) {\n\n\t\tthis.setName( o );\n\t\tconst hero = new Hero( o );\n\t\treturn hero;\n\n\t}\n\n\tset ( o = {}, b = null ) {\n\n\t\tif( b === null ) b = this.byName( o.name );\n\t\tif( b === null ) return;\n\t\tb.set(o);\n\n\t}\n\t\n}\n\nconst math$2 = {\n\n\ttorad: Math.PI / 180,\n\ttodeg: 180 / Math.PI,\n\tPi: Math.PI,\n\tTwoPI: Math.PI*2,\n\tPI90: Math.PI*0.5,\n\tPI45: Math.PI*0.25,\n\tPI270: (Math.PI*0.5)*3,\n\tinv255: 0.003921569,\n\tgolden: 1.618033,\n\tepsilon: Math.pow( 2, -52 ),\n\n\trandomSign: () => ( Math.random() < 0.5 ? -1 : 1 ),\n\trandSpread: ( range ) => ( range * ( 0.5 - Math.random() ) ),\n\trand: ( low = 0, high = 1 ) => ( low + Math.random() * ( high - low ) ),\n\trandInt: ( low, high ) => ( low + Math.floor( Math.random() * ( high - low + 1 ) ) ),\n\ttoFixed: ( x, n = 3 ) => ( x.toFixed(n) * 1 ),\n\tint: ( x ) => ( Math.floor(x) ),\n\tlerp: ( x, y, t ) => ( ( 1 - t ) * x + t * y ),\n\tclamp: ( v, min, max ) => ( Math.max( min, Math.min( max, v )) ),\n\tnearEquals: ( a, b, t ) => ( Math.abs(a - b) <= t ? true : false ),\n\tlerpAr: ( ar, arx, ary, t ) => {\n\t\tlet i = ar.length;\n\t\twhile( i-- ) ar[i] = math$2.lerp( arx[i], ary[i], t );\n\t},\n\n    unwrapDeg: ( r ) => (r - (Math.floor((r + 180)/360))*360), \n\t//unwrapRad: ( r ) => (r - (Math.floor((r + Math.PI)/(2*Math.PI)))*2*Math.PI),\n\tunwrapRad: ( r ) => ( Math.atan2(Math.sin(r), Math.cos(r)) ),\n\n\n\tscaleArray: ( ar, scale ) => {\n\n\t\tvar i = ar.length;\n\t\twhile( i-- ){ ar[i] *= scale; }\t\treturn ar;\n\n\t},\n\n\taddArray: ( ar, ar2 ) => {\n\n\t\tvar r = [];\n\t\tvar i = ar.length;\n\t\twhile( i-- ){ r[i] = ar[i] + ar2[i]; }\t\treturn r;\n\n\t},\n\n\tangleDistance:(cur, prv)=> {\n\t\tvar diff = (cur - prv + 180) % 360 - 180;\n\t\treturn diff < -180 ? diff + 360 : diff;\n\t},\n\n\n\n\n\t/*map: ( value, in_min, in_max, out_min, out_max ) => ( (value - in_min) * (out_max - out_min) / (in_max - in_min) + out_min ),\n\t\n\tsmoothLerp: ( a, b, c, t, k ) => {\n\n        var f = a - b + (c - b) / (k * t);\n        return c - (c - b) / ( k * t ) + f * Math.exp(-k*t);\n\n    },\n\n    smoothLerpV: ( a, b, c, t, k ) => {\n\n    \tlet x = math.smoothLerp( a.x, b.x, c.x, t, k );\n    \tlet y = math.smoothLerp( a.y, b.y, c.y, t, k );\n    \tlet z = math.smoothLerp( a.z, b.z, c.z, t, k );\n\n    \treturn { x:x, y:y, z:z }\n\n    },\n\n\tminValue: ( ar ) => {\n\n\t\tlet v = ar[0];\n\t\tfor (let i = 1, l=ar.length; i<l; i++){ if( ar[i] < v ) v = ar[i]; }\n\t\treturn v;\n\n\t},\n\n\tclamp: function (v, min, max) {\n\n\t\t//return Math.max( min, Math.min( max, value ) );\n\t    v = v < min ? min : v;\n\t    v = v > max ? max : v;\n\t    return v;\n\t},\n\n\tautoSize: ( o ) => {\n\n\t\tlet s = o.size === undefined ? [ 1, 1, 1 ] : o.size;\n\t\tif ( s.length === 1 ) s[ 1 ] = s[ 0 ];\n\n\t\tlet type = o.type === undefined ? 'box' : o.type;\n\t\tlet radius = o.radius === undefined ? s[0] : o.radius;\n\t\tlet height = o.height === undefined ? s[1] : o.height;\n\n\t\tif( type === 'sphere' ) s = [ radius, radius, radius ];\n\t\tif( type === 'cylinder' || type === 'wheel' || type === 'capsule' ) s = [ radius, height, radius ];\n\t\tif( type === 'cone' || type === 'pyramid' ) s = [ radius, height, 0 ];\n\n\t    if ( s.length === 2 ) s[ 2 ] = s[ 0 ];\n\t    return s;\n\n\t},\n\n\tcorrectSize: ( s ) => {\n\n\t\tif ( s.length === 1 ) s[ 1 ] = s[ 0 ];\n\t    if ( s.length === 2 ) s[ 2 ] = s[ 0 ];\n\t    return s;\n\n\t},*/\n\n\ttmpE: new Euler(),\n\ttmpM: new Matrix4(),\n\ttmpM2: new Matrix4(),\n\ttmpV: new Vector3(),\n\ttmpQ: new Quaternion(),\n\n\tfromTransformToQ: ( p, q, inv ) => {\n\n\t\tinv = inv || false;\n\n\t\tmath$2.tmpM.compose( math$2.tmpV.fromArray( p ), math$2.tmpQ.fromArray( q ), { x:1, y:1, z:1 } );\n\t\tmath$2.tmpM.decompose( math$2.tmpV, math$2.tmpQ, { x:1, y:1, z:1 } );\n\n\t\t//math.tmpQ.fromArray( q )\n\n\t\tif(inv) math$2.tmpQ.invert();\n\n\t\treturn math$2.tmpQ.toArray();\n\n\t},\n\n\tfromTransform: ( p, q, p2, q2, inv ) => {\n\n\t\tinv = inv || false;\n\t\tq2 = q2 || [0,0,0,1];\n\n\t\tmath$2.tmpM.compose( math$2.tmpV.fromArray( p ), math$2.tmpQ.fromArray( q ), { x:1, y:1, z:1 } );\n\t\tmath$2.tmpM2.compose( math$2.tmpV.fromArray( p2 ), math$2.tmpQ.fromArray( q2 ), { x:1, y:1, z:1 } );\n\t\tif( inv ){\n\t\t\t//math.tmpM.getInverse( math.tmpM );\n\t\t\tmath$2.tmpM.invert();\n\t\t\tmath$2.tmpM.multiply( math$2.tmpM2 );\n\t\t} else {\n\t\t\tmath$2.tmpM.multiply( math$2.tmpM2 );\n\t\t}\n\n\t\tmath$2.tmpM.decompose( math$2.tmpV, math$2.tmpQ, { x:1, y:1, z:1 } );\n\n\t\treturn math$2.tmpV.toArray();\n\n\t},\n\n\tarCopy: ( a, b ) => {\n\n\t\t[...b];\n\n\t\t//for( var i = 0; i< b.length; i++ ) a[i] = b[i];\n\n\t},\n\n\taxisToQuatArray: ( r, isdeg ) => { // r[0] array in degree\n\n\t\tisdeg = isdeg || false;\n\t\treturn math$2.tmpQ.setFromAxisAngle( math$2.tmpV.fromArray( r, 1 ), isdeg ? r[0]*math$2.torad : r[0]).normalize().toArray();\n\n\t},\n\n\ttoQuatArray: ( rotation ) => { // rotation array in degree\n\n\t\treturn math$2.tmpQ.setFromEuler( math$2.tmpE.fromArray( math$2.vectorad( rotation ) ) ).toArray();\n\n\t},\n\n\tvectorad: ( r ) => {\n\n\t\tlet i = 3, nr = [];\n\t    while ( i -- ) nr[ i ] = r[ i ] * math$2.torad;\n\t    nr[3] = r[3];\n\t    return nr;\n\n\t},\n/*\n\tdirectionVector: ( a, b ) => {\n\n\t    var x = b.x-a.x;\n\t    var y = b.y-a.y;\n\t    var z = b.z-a.z;\n\t    var d = math.tmpV.set( x, 0, z ).normalize().toArray();\n\t    return d;\n\n\t},\n\n\tdistanceVector: ( a, b ) => {\n\n\t    var x = b.x-a.x;\n\t    var y = b.y-a.y;\n\t    var z = b.z-a.z;\n\t    var d = Math.sqrt( x*x + y*y + z*z );\n\t    return d;\n\n\t},*/\n\n\n\t//--------------------\n\t//   COLORS\n\t//--------------------\n\n\trgbToHex: ( rgb ) => {\n\n\t    return '0x' + ( '000000' + ( ( rgb[0] * 255 ) << 16 ^ ( rgb[1] * 255 ) << 8 ^ ( rgb[2] * 255 ) << 0 ).toString( 16 ) ).slice( -6 );\n\n\t},\n\n\thexToRgb: ( hex ) => {\n\n\t    hex = Math.floor( hex );\n\t    var r = ( hex >> 16 & 255 ) / 255;\n\t    var g = ( hex >> 8 & 255 ) / 255;\n\t    var b = ( hex & 255 ) / 255;\n\t    return [ r, g, b ];\n\n\t},\n\n\thtmlToHex: ( v ) => {\n\n\t    return v.toUpperCase().replace(\"#\", \"0x\");\n\n\t},\n\n\thexToHtml: ( v ) => {\n\n\t    v = v === undefined ? 0x000000 : v;\n\t    return \"#\" + (\"000000\" + v.toString(16)).substr(-6);\n\n\t},\n\n\trgbToHtml: ( rgb ) => {\n\n\t    return '#' + ( '000000' + ( ( rgb[0] * 255 ) << 16 ^ ( rgb[1] * 255 ) << 8 ^ ( rgb[2] * 255 ) << 0 ).toString( 16 ) ).slice( -6 );\n\n\t},\n\n\n\t//--------------------\n\t//   NOISE\n\t//--------------------\n\n\tperlin: null,\n\n\tresetPerlin:()=>{\n\t\tif( math$2.perlin !== null ) math$2.perlin = null;\n\t},\n\n\tnoise: ( v, o ) => {\n\n\t    if( math$2.perlin === null ) math$2.perlin = new SimplexNoise();\n\n\t    o = o || {};\n\n\t    let level = o.level || [1,0.2,0.05];\n\t    let frequency  = o.frequency  || [0.016,0.05,0.2];\n\n\t    let i, f, c=0, d=0;\n\n\t    for(i=0; i<level.length; i++){\n\n\t        f = frequency [i];\n\t        c += level[i] * ( 0.5 + math$2.perlin.noise3d( v.x*f, v.y*f, v.z*f ) * 0.5 );\n\t        d += level[i];\n\n\t    }\n\n\t    c/=d;\n\n\t    return c;\n\n\t},\n\n\t/*radArray: (arr) => {\n\t\tvar ret = [];\n\t\tfor(var i = 0; i < 3; i++)\n\t\t\tret[i] = arr[i] * math.torad;\n\n\t\treturn ret;\n\t},\n\n\tdegArray: (arr) => {\n\t\tvar ret = [];\n\t\tfor(var i = 0; i < 3; i++)\n\t\t\tret[i] = arr[i] * math.todeg;\n\n\t\treturn ret;\n\t},\n\n\tangleDistance: (cur, prv) =>{\n\t\tvar diff = (cur - prv + 180) % 360 - 180;\n\t\treturn diff < -180 ? diff + 360 : diff;\n\t}*/\n\n};\n\nclass SimplexNoise {\n\n\tconstructor ( r ) {\n\n\t\tif (r == undefined) r = Math;\n\t\tthis.grad3 = [[ 1,1,0 ],[ -1,1,0 ],[ 1,-1,0 ],[ -1,-1,0 ],\n\t        [ 1,0,1 ],[ -1,0,1 ],[ 1,0,-1 ],[ -1,0,-1 ],\n\t        [ 0,1,1 ],[ 0,-1,1 ],[ 0,1,-1 ],[ 0,-1,-1 ]];\n\n\t\tthis.grad4 = [[ 0,1,1,1 ], [ 0,1,1,-1 ], [ 0,1,-1,1 ], [ 0,1,-1,-1 ],\n\t\t     [ 0,-1,1,1 ], [ 0,-1,1,-1 ], [ 0,-1,-1,1 ], [ 0,-1,-1,-1 ],\n\t\t     [ 1,0,1,1 ], [ 1,0,1,-1 ], [ 1,0,-1,1 ], [ 1,0,-1,-1 ],\n\t\t     [ -1,0,1,1 ], [ -1,0,1,-1 ], [ -1,0,-1,1 ], [ -1,0,-1,-1 ],\n\t\t     [ 1,1,0,1 ], [ 1,1,0,-1 ], [ 1,-1,0,1 ], [ 1,-1,0,-1 ],\n\t\t     [ -1,1,0,1 ], [ -1,1,0,-1 ], [ -1,-1,0,1 ], [ -1,-1,0,-1 ],\n\t\t     [ 1,1,1,0 ], [ 1,1,-1,0 ], [ 1,-1,1,0 ], [ 1,-1,-1,0 ],\n\t\t     [ -1,1,1,0 ], [ -1,1,-1,0 ], [ -1,-1,1,0 ], [ -1,-1,-1,0 ]];\n\n\t\tthis.p = [];\n\t\tfor (var i = 0; i < 256; i ++) {\n\t\t\tthis.p[i] = Math.floor(r.random() * 256);\n\t\t}\n\t  // To remove the need for index wrapping, double the permutation table length\n\t\tthis.perm = [];\n\t\tfor (var i = 0; i < 512; i ++) {\n\t\t\tthis.perm[i] = this.p[i & 255];\n\t\t}\n\n\t  // A lookup table to traverse the simplex around a given point in 4D.\n\t  // Details can be found where this table is used, in the 4D noise method.\n\t\tthis.simplex = [\n\t    [ 0,1,2,3 ],[ 0,1,3,2 ],[ 0,0,0,0 ],[ 0,2,3,1 ],[ 0,0,0,0 ],[ 0,0,0,0 ],[ 0,0,0,0 ],[ 1,2,3,0 ],\n\t    [ 0,2,1,3 ],[ 0,0,0,0 ],[ 0,3,1,2 ],[ 0,3,2,1 ],[ 0,0,0,0 ],[ 0,0,0,0 ],[ 0,0,0,0 ],[ 1,3,2,0 ],\n\t    [ 0,0,0,0 ],[ 0,0,0,0 ],[ 0,0,0,0 ],[ 0,0,0,0 ],[ 0,0,0,0 ],[ 0,0,0,0 ],[ 0,0,0,0 ],[ 0,0,0,0 ],\n\t    [ 1,2,0,3 ],[ 0,0,0,0 ],[ 1,3,0,2 ],[ 0,0,0,0 ],[ 0,0,0,0 ],[ 0,0,0,0 ],[ 2,3,0,1 ],[ 2,3,1,0 ],\n\t    [ 1,0,2,3 ],[ 1,0,3,2 ],[ 0,0,0,0 ],[ 0,0,0,0 ],[ 0,0,0,0 ],[ 2,0,3,1 ],[ 0,0,0,0 ],[ 2,1,3,0 ],\n\t    [ 0,0,0,0 ],[ 0,0,0,0 ],[ 0,0,0,0 ],[ 0,0,0,0 ],[ 0,0,0,0 ],[ 0,0,0,0 ],[ 0,0,0,0 ],[ 0,0,0,0 ],\n\t    [ 2,0,1,3 ],[ 0,0,0,0 ],[ 0,0,0,0 ],[ 0,0,0,0 ],[ 3,0,1,2 ],[ 3,0,2,1 ],[ 0,0,0,0 ],[ 3,1,2,0 ],\n\t    [ 2,1,0,3 ],[ 0,0,0,0 ],[ 0,0,0,0 ],[ 0,0,0,0 ],[ 3,1,0,2 ],[ 0,0,0,0 ],[ 3,2,0,1 ],[ 3,2,1,0 ]];\n\t}\n\n\tdot (g, x, y) {\n\t\treturn g[0] * x + g[1] * y;\n\t}\n\n\tdot3 (g, x, y, z) {\n\t\treturn g[0] * x + g[1] * y + g[2] * z;\n\t}\n\n\tdot4 (g, x, y, z, w) {\n\t\treturn g[0] * x + g[1] * y + g[2] * z + g[3] * w;\n\t}\n\n\tnoise (xin, yin) {\n\t\tvar n0, n1, n2; // Noise contributions from the three corners\n\t  // Skew the input space to determine which simplex cell we're in\n\t\tvar F2 = 0.5 * (Math.sqrt(3.0) - 1.0);\n\t\tvar s = (xin + yin) * F2; // Hairy factor for 2D\n\t\tvar i = Math.floor(xin + s);\n\t\tvar j = Math.floor(yin + s);\n\t\tvar G2 = (3.0 - Math.sqrt(3.0)) / 6.0;\n\t\tvar t = (i + j) * G2;\n\t\tvar X0 = i - t; // Unskew the cell origin back to (x,y) space\n\t\tvar Y0 = j - t;\n\t\tvar x0 = xin - X0; // The x,y distances from the cell origin\n\t\tvar y0 = yin - Y0;\n\t  // For the 2D case, the simplex shape is an equilateral triangle.\n\t  // Determine which simplex we are in.\n\t\tvar i1, j1; // Offsets for second (middle) corner of simplex in (i,j) coords\n\t\tif (x0 > y0) {i1 = 1; j1 = 0;} // lower triangle, XY order: (0,0)->(1,0)->(1,1)\n\t\telse {i1 = 0; j1 = 1;}      // upper triangle, YX order: (0,0)->(0,1)->(1,1)\n\t  // A step of (1,0) in (i,j) means a step of (1-c,-c) in (x,y), and\n\t  // a step of (0,1) in (i,j) means a step of (-c,1-c) in (x,y), where\n\t  // c = (3-sqrt(3))/6\n\t\tvar x1 = x0 - i1 + G2; // Offsets for middle corner in (x,y) unskewed coords\n\t\tvar y1 = y0 - j1 + G2;\n\t\tvar x2 = x0 - 1.0 + 2.0 * G2; // Offsets for last corner in (x,y) unskewed coords\n\t\tvar y2 = y0 - 1.0 + 2.0 * G2;\n\t  // Work out the hashed gradient indices of the three simplex corners\n\t\tvar ii = i & 255;\n\t\tvar jj = j & 255;\n\t\tvar gi0 = this.perm[ii + this.perm[jj]] % 12;\n\t\tvar gi1 = this.perm[ii + i1 + this.perm[jj + j1]] % 12;\n\t\tvar gi2 = this.perm[ii + 1 + this.perm[jj + 1]] % 12;\n\t  // Calculate the contribution from the three corners\n\t\tvar t0 = 0.5 - x0 * x0 - y0 * y0;\n\t\tif (t0 < 0) n0 = 0.0;\n\t\telse {\n\t\t\tt0 *= t0;\n\t\t\tn0 = t0 * t0 * this.dot(this.grad3[gi0], x0, y0);  // (x,y) of grad3 used for 2D gradient\n\t\t}\n\t\tvar t1 = 0.5 - x1 * x1 - y1 * y1;\n\t\tif (t1 < 0) n1 = 0.0;\n\t\telse {\n\t\t\tt1 *= t1;\n\t\t\tn1 = t1 * t1 * this.dot(this.grad3[gi1], x1, y1);\n\t\t}\n\t\tvar t2 = 0.5 - x2 * x2 - y2 * y2;\n\t\tif (t2 < 0) n2 = 0.0;\n\t\telse {\n\t\t\tt2 *= t2;\n\t\t\tn2 = t2 * t2 * this.dot(this.grad3[gi2], x2, y2);\n\t\t}\n\t  // Add contributions from each corner to get the final noise value.\n\t  // The result is scaled to return values in the interval [-1,1].\n\t\treturn 70.0 * (n0 + n1 + n2);\n\t}\n\n\t// 3D simplex noise\n\tnoise3d (xin, yin, zin) {\n\t\tvar n0, n1, n2, n3; // Noise contributions from the four corners\n\t  // Skew the input space to determine which simplex cell we're in\n\t\tvar F3 = 1.0 / 3.0;\n\t\tvar s = (xin + yin + zin) * F3; // Very nice and simple skew factor for 3D\n\t\tvar i = Math.floor(xin + s);\n\t\tvar j = Math.floor(yin + s);\n\t\tvar k = Math.floor(zin + s);\n\t\tvar G3 = 1.0 / 6.0; // Very nice and simple unskew factor, too\n\t\tvar t = (i + j + k) * G3;\n\t\tvar X0 = i - t; // Unskew the cell origin back to (x,y,z) space\n\t\tvar Y0 = j - t;\n\t\tvar Z0 = k - t;\n\t\tvar x0 = xin - X0; // The x,y,z distances from the cell origin\n\t\tvar y0 = yin - Y0;\n\t\tvar z0 = zin - Z0;\n\t  // For the 3D case, the simplex shape is a slightly irregular tetrahedron.\n\t  // Determine which simplex we are in.\n\t\tvar i1, j1, k1; // Offsets for second corner of simplex in (i,j,k) coords\n\t\tvar i2, j2, k2; // Offsets for third corner of simplex in (i,j,k) coords\n\t\tif (x0 >= y0) {\n\t\t\tif (y0 >= z0)\n\t      { i1 = 1; j1 = 0; k1 = 0; i2 = 1; j2 = 1; k2 = 0; } // X Y Z order\n\t      else if (x0 >= z0) { i1 = 1; j1 = 0; k1 = 0; i2 = 1; j2 = 0; k2 = 1; } // X Z Y order\n\t\t\telse { i1 = 0; j1 = 0; k1 = 1; i2 = 1; j2 = 0; k2 = 1; } // Z X Y order\n\t\t}\n\t\telse { // x0<y0\n\t\t\tif (y0 < z0) { i1 = 0; j1 = 0; k1 = 1; i2 = 0; j2 = 1; k2 = 1; } // Z Y X order\n\t    else if (x0 < z0) { i1 = 0; j1 = 1; k1 = 0; i2 = 0; j2 = 1; k2 = 1; } // Y Z X order\n\t\t\telse { i1 = 0; j1 = 1; k1 = 0; i2 = 1; j2 = 1; k2 = 0; } // Y X Z order\n\t\t}\n\t  // A step of (1,0,0) in (i,j,k) means a step of (1-c,-c,-c) in (x,y,z),\n\t  // a step of (0,1,0) in (i,j,k) means a step of (-c,1-c,-c) in (x,y,z), and\n\t  // a step of (0,0,1) in (i,j,k) means a step of (-c,-c,1-c) in (x,y,z), where\n\t  // c = 1/6.\n\t\tvar x1 = x0 - i1 + G3; // Offsets for second corner in (x,y,z) coords\n\t\tvar y1 = y0 - j1 + G3;\n\t\tvar z1 = z0 - k1 + G3;\n\t\tvar x2 = x0 - i2 + 2.0 * G3; // Offsets for third corner in (x,y,z) coords\n\t\tvar y2 = y0 - j2 + 2.0 * G3;\n\t\tvar z2 = z0 - k2 + 2.0 * G3;\n\t\tvar x3 = x0 - 1.0 + 3.0 * G3; // Offsets for last corner in (x,y,z) coords\n\t\tvar y3 = y0 - 1.0 + 3.0 * G3;\n\t\tvar z3 = z0 - 1.0 + 3.0 * G3;\n\t  // Work out the hashed gradient indices of the four simplex corners\n\t\tvar ii = i & 255;\n\t\tvar jj = j & 255;\n\t\tvar kk = k & 255;\n\t\tvar gi0 = this.perm[ii + this.perm[jj + this.perm[kk]]] % 12;\n\t\tvar gi1 = this.perm[ii + i1 + this.perm[jj + j1 + this.perm[kk + k1]]] % 12;\n\t\tvar gi2 = this.perm[ii + i2 + this.perm[jj + j2 + this.perm[kk + k2]]] % 12;\n\t\tvar gi3 = this.perm[ii + 1 + this.perm[jj + 1 + this.perm[kk + 1]]] % 12;\n\t  // Calculate the contribution from the four corners\n\t\tvar t0 = 0.6 - x0 * x0 - y0 * y0 - z0 * z0;\n\t\tif (t0 < 0) n0 = 0.0;\n\t\telse {\n\t\t\tt0 *= t0;\n\t\t\tn0 = t0 * t0 * this.dot3(this.grad3[gi0], x0, y0, z0);\n\t\t}\n\t\tvar t1 = 0.6 - x1 * x1 - y1 * y1 - z1 * z1;\n\t\tif (t1 < 0) n1 = 0.0;\n\t\telse {\n\t\t\tt1 *= t1;\n\t\t\tn1 = t1 * t1 * this.dot3(this.grad3[gi1], x1, y1, z1);\n\t\t}\n\t\tvar t2 = 0.6 - x2 * x2 - y2 * y2 - z2 * z2;\n\t\tif (t2 < 0) n2 = 0.0;\n\t\telse {\n\t\t\tt2 *= t2;\n\t\t\tn2 = t2 * t2 * this.dot3(this.grad3[gi2], x2, y2, z2);\n\t\t}\n\t\tvar t3 = 0.6 - x3 * x3 - y3 * y3 - z3 * z3;\n\t\tif (t3 < 0) n3 = 0.0;\n\t\telse {\n\t\t\tt3 *= t3;\n\t\t\tn3 = t3 * t3 * this.dot3(this.grad3[gi3], x3, y3, z3);\n\t\t}\n\t  // Add contributions from each corner to get the final noise value.\n\t  // The result is scaled to stay just inside [-1,1]\n\t\treturn 32.0 * (n0 + n1 + n2 + n3);\n\t}\n\n\t// 4D simplex noise\n\tnoise4d ( x, y, z, w ) {\n\t\t// For faster and easier lookups\n\t\tvar grad4 = this.grad4;\n\t\tvar simplex = this.simplex;\n\t\tvar perm = this.perm;\n\n\t   // The skewing and unskewing factors are hairy again for the 4D case\n\t\tvar F4 = (Math.sqrt(5.0) - 1.0) / 4.0;\n\t\tvar G4 = (5.0 - Math.sqrt(5.0)) / 20.0;\n\t\tvar n0, n1, n2, n3, n4; // Noise contributions from the five corners\n\t   // Skew the (x,y,z,w) space to determine which cell of 24 simplices we're in\n\t\tvar s = (x + y + z + w) * F4; // Factor for 4D skewing\n\t\tvar i = Math.floor(x + s);\n\t\tvar j = Math.floor(y + s);\n\t\tvar k = Math.floor(z + s);\n\t\tvar l = Math.floor(w + s);\n\t\tvar t = (i + j + k + l) * G4; // Factor for 4D unskewing\n\t\tvar X0 = i - t; // Unskew the cell origin back to (x,y,z,w) space\n\t\tvar Y0 = j - t;\n\t\tvar Z0 = k - t;\n\t\tvar W0 = l - t;\n\t\tvar x0 = x - X0;  // The x,y,z,w distances from the cell origin\n\t\tvar y0 = y - Y0;\n\t\tvar z0 = z - Z0;\n\t\tvar w0 = w - W0;\n\n\t   // For the 4D case, the simplex is a 4D shape I won't even try to describe.\n\t   // To find out which of the 24 possible simplices we're in, we need to\n\t   // determine the magnitude ordering of x0, y0, z0 and w0.\n\t   // The method below is a good way of finding the ordering of x,y,z,w and\n\t   // then find the correct traversal order for the simplex we’re in.\n\t   // First, six pair-wise comparisons are performed between each possible pair\n\t   // of the four coordinates, and the results are used to add up binary bits\n\t   // for an integer index.\n\t\tvar c1 = (x0 > y0) ? 32 : 0;\n\t\tvar c2 = (x0 > z0) ? 16 : 0;\n\t\tvar c3 = (y0 > z0) ? 8 : 0;\n\t\tvar c4 = (x0 > w0) ? 4 : 0;\n\t\tvar c5 = (y0 > w0) ? 2 : 0;\n\t\tvar c6 = (z0 > w0) ? 1 : 0;\n\t\tvar c = c1 + c2 + c3 + c4 + c5 + c6;\n\t\tvar i1, j1, k1, l1; // The integer offsets for the second simplex corner\n\t\tvar i2, j2, k2, l2; // The integer offsets for the third simplex corner\n\t\tvar i3, j3, k3, l3; // The integer offsets for the fourth simplex corner\n\t   // simplex[c] is a 4-vector with the numbers 0, 1, 2 and 3 in some order.\n\t   // Many values of c will never occur, since e.g. x>y>z>w makes x<z, y<w and x<w\n\t   // impossible. Only the 24 indices which have non-zero entries make any sense.\n\t   // We use a thresholding to set the coordinates in turn from the largest magnitude.\n\t   // The number 3 in the \"simplex\" array is at the position of the largest coordinate.\n\t\ti1 = simplex[c][0] >= 3 ? 1 : 0;\n\t\tj1 = simplex[c][1] >= 3 ? 1 : 0;\n\t\tk1 = simplex[c][2] >= 3 ? 1 : 0;\n\t\tl1 = simplex[c][3] >= 3 ? 1 : 0;\n\t   // The number 2 in the \"simplex\" array is at the second largest coordinate.\n\t\ti2 = simplex[c][0] >= 2 ? 1 : 0;\n\t\tj2 = simplex[c][1] >= 2 ? 1 : 0;    k2 = simplex[c][2] >= 2 ? 1 : 0;\n\t\tl2 = simplex[c][3] >= 2 ? 1 : 0;\n\t   // The number 1 in the \"simplex\" array is at the second smallest coordinate.\n\t\ti3 = simplex[c][0] >= 1 ? 1 : 0;\n\t\tj3 = simplex[c][1] >= 1 ? 1 : 0;\n\t\tk3 = simplex[c][2] >= 1 ? 1 : 0;\n\t\tl3 = simplex[c][3] >= 1 ? 1 : 0;\n\t   // The fifth corner has all coordinate offsets = 1, so no need to look that up.\n\t\tvar x1 = x0 - i1 + G4; // Offsets for second corner in (x,y,z,w) coords\n\t\tvar y1 = y0 - j1 + G4;\n\t\tvar z1 = z0 - k1 + G4;\n\t\tvar w1 = w0 - l1 + G4;\n\t\tvar x2 = x0 - i2 + 2.0 * G4; // Offsets for third corner in (x,y,z,w) coords\n\t\tvar y2 = y0 - j2 + 2.0 * G4;\n\t\tvar z2 = z0 - k2 + 2.0 * G4;\n\t\tvar w2 = w0 - l2 + 2.0 * G4;\n\t\tvar x3 = x0 - i3 + 3.0 * G4; // Offsets for fourth corner in (x,y,z,w) coords\n\t\tvar y3 = y0 - j3 + 3.0 * G4;\n\t\tvar z3 = z0 - k3 + 3.0 * G4;\n\t\tvar w3 = w0 - l3 + 3.0 * G4;\n\t\tvar x4 = x0 - 1.0 + 4.0 * G4; // Offsets for last corner in (x,y,z,w) coords\n\t\tvar y4 = y0 - 1.0 + 4.0 * G4;\n\t\tvar z4 = z0 - 1.0 + 4.0 * G4;\n\t\tvar w4 = w0 - 1.0 + 4.0 * G4;\n\t   // Work out the hashed gradient indices of the five simplex corners\n\t\tvar ii = i & 255;\n\t\tvar jj = j & 255;\n\t\tvar kk = k & 255;\n\t\tvar ll = l & 255;\n\t\tvar gi0 = perm[ii + perm[jj + perm[kk + perm[ll]]]] % 32;\n\t\tvar gi1 = perm[ii + i1 + perm[jj + j1 + perm[kk + k1 + perm[ll + l1]]]] % 32;\n\t\tvar gi2 = perm[ii + i2 + perm[jj + j2 + perm[kk + k2 + perm[ll + l2]]]] % 32;\n\t\tvar gi3 = perm[ii + i3 + perm[jj + j3 + perm[kk + k3 + perm[ll + l3]]]] % 32;\n\t\tvar gi4 = perm[ii + 1 + perm[jj + 1 + perm[kk + 1 + perm[ll + 1]]]] % 32;\n\t   // Calculate the contribution from the five corners\n\t\tvar t0 = 0.6 - x0 * x0 - y0 * y0 - z0 * z0 - w0 * w0;\n\t\tif (t0 < 0) n0 = 0.0;\n\t\telse {\n\t\t\tt0 *= t0;\n\t\t\tn0 = t0 * t0 * this.dot4(grad4[gi0], x0, y0, z0, w0);\n\t\t}\n\t\tvar t1 = 0.6 - x1 * x1 - y1 * y1 - z1 * z1 - w1 * w1;\n\t\tif (t1 < 0) n1 = 0.0;\n\t\telse {\n\t\t\tt1 *= t1;\n\t\t\tn1 = t1 * t1 * this.dot4(grad4[gi1], x1, y1, z1, w1);\n\t\t}\n\t\tvar t2 = 0.6 - x2 * x2 - y2 * y2 - z2 * z2 - w2 * w2;\n\t\tif (t2 < 0) n2 = 0.0;\n\t\telse {\n\t\t\tt2 *= t2;\n\t\t\tn2 = t2 * t2 * this.dot4(grad4[gi2], x2, y2, z2, w2);\n\t\t}   var t3 = 0.6 - x3 * x3 - y3 * y3 - z3 * z3 - w3 * w3;\n\t\tif (t3 < 0) n3 = 0.0;\n\t\telse {\n\t\t\tt3 *= t3;\n\t\t\tn3 = t3 * t3 * this.dot4(grad4[gi3], x3, y3, z3, w3);\n\t\t}\n\t\tvar t4 = 0.6 - x4 * x4 - y4 * y4 - z4 * z4 - w4 * w4;\n\t\tif (t4 < 0) n4 = 0.0;\n\t\telse {\n\t\t\tt4 *= t4;\n\t\t\tn4 = t4 * t4 * this.dot4(grad4[gi4], x4, y4, z4, w4);\n\t\t}\n\t   // Sum up and scale the result to cover the range [-1,1]\n\t\treturn 27.0 * (n0 + n1 + n2 + n3 + n4);\n\t}\n\n}\n\nclass Landscape extends Mesh {\n\n    constructor( o = {} ) {\n\n        super();\n\n        this.ready = false;\n        this.needUpdate = false;\n\n        this.type = 'terrain';\n        this.name = o.name;\n\n        this.folder = o.folder || './assets/textures/terrain/';\n\n        this.mapN = 0;\n        this.mapMax = 7;//7\n\n        // terrain, water, road\n        this.ttype = o.terrainType || 'terrain';\n\n        this.callback = o.callback || function(){};\n        \n        this.physicsUpdate = () => {};\n\n        this.uvx = [ o.uv || 18, o.uv || 18 ];\n\n        this.sample = o.sample == undefined ? [128,128] : o.sample;\n        this.size = o.size === undefined ? [100,30,100] : o.size;\n\n        let sx = this.sample[0] - 1;\n        let sz = this.sample[1] - 1;\n\n        this.rx = sx / this.size[0];\n        this.rz = sz / this.size[2];\n\n        this.zone = o.zone || 1;\n\n        // why ??\n        /*let pp = 0\n        if( this.zone === 0.5 ) pp=2\n        if( this.zone === 0.25 ) pp=3\n        if( this.zone === 0.125 ) pp=7*/\n        let square = [this.size[0]/sx, this.size[2]/sz];\n        //let dx = (this.size[0]/sx)//*pp\n        //let dz = (this.size[2]/sz)//**pp\n\n\n        this.sampleZ = [o.sample[0] * this.zone, o.sample[1] * this.zone];\n        //this.sizeZ = [(o.size[0]-dx) * this.zone, o.size[1], (o.size[2]-dz) * this.zone];\n\n        this.sizeZ = [(this.sampleZ[0]-1) * square[0], o.size[1], ((this.sampleZ[1]-1)) * square[1]];\n\n        this.lng = this.sample[0] * this.sample[1];\n        this.lngZ = this.sampleZ[0] * this.sampleZ[1];\n\n        //console.log(  this.sample, this.sampleZ)\n\n        this.getZid();\n\n\n        this.data = {\n            level: o.level || [1,0.2,0.05],\n            frequency: o.frequency || [0.016,0.05,0.2],\n            expo: o.expo || 1,\n        };\n\n        this.isWater = o.water || false;\n        this.isIsland = o.island || false;\n        this.isBorder = false;\n        this.wantBorder = o.border || false;\n\n        this.isBottom = false;\n        this.wantBottom = o.bottom || false;\n        this.wantBorder = o.border || false;\n\n        this.colorBase = this.isWater ? { r:0, g:0.7, b:1 } : { r:0.25, g:0.25, b:0.25 };\n\n        this.maxspeed = o.maxSpeed || 0.1;\n        this.acc = o.acc == undefined ? 0.01 : o.acc;\n        this.dec = o.dec == undefined ? 0.01 : o.dec;\n\n        this.deep = o.deep == undefined ? 0 : o.deep;\n\n        this.ease = new Vector2();\n\n        // for perlin\n        this.complexity = o.complexity == undefined ? 30 : o.complexity;\n        this.complexity2 = o.complexity2 == undefined ? null : o.complexity2;\n\n        this.local = new Vector3();\n        if( o.local ) this.local.fromArray( o.local );\n\n        this.pp = new Vector3();\n\n        this.ratioZ = 1 / this.sampleZ[0];\n        this.ratio = 1 / this.sample[0];\n        this.ruvx =  1.0 / ( this.size[0] / this.uvx[0] );\n        this.ruvy = - ( 1.0 / ( this.size[2] / this.uvx[1] ) );\n\n        this.is64 = o.is64 || false;\n        this.isTurn = o.turn || false;\n\n        this.heightData = new Float32Array( this.lngZ );\n        this.height = [];\n\n        // for physx \n        this.isAbsolute = o.isAbsolute || false;\n        this.isTurned = o.isTurned || false;\n        this.isReverse = o.isReverse || false;\n\n        this.changeId = this.isReverse || this.isTurned;\n\n        if( this.changeId ) this.getReverseID();\n\n        this.colors = new Float32Array( this.lng * 3 );\n        this.geometry = new PlaneGeometry( this.size[0], this.size[2], this.sample[0] - 1, this.sample[1] - 1 );\n        this.geometry.rotateX( -math$2.PI90 );\n        //if( this.isTurn ) \n        //this.geometry.rotateY( -math.PI90 );\n        //if( this.isTurned ) this.geometry.rotateY( math.PI90 );\n\n\n       // this.geometry.computeBoundingSphere();\n\n        this.geometry.setAttribute( 'color', new BufferAttribute( this.colors, 3 ) );\n        //this.geometry.setAttribute( 'uv2', this.geometry.attributes.uv );\n        this.vertices = this.geometry.attributes.position.array;\n        var clevels = new Quaternion( 0.5, 0.5, 0.1, 0.2 );//0.95, 0.8, 0.1, 0.05 ); \n        if( o.maplevels ) clevels.fromArray( o.maplevels );\n        var T = TerrainShader;\n        var maps = o.maps || [ 'sand', 'grass3', 'rock' ], txt = {};\n        var name;\n\n        if(this.isWater) maps = ['water'];\n\n        for( let i in maps ){\n\n            name = maps[i];\n\n            txt[name+'_c'] = Pool.texture({ url:this.folder + name +'_c.jpg', flip:false, repeat:this.uvx, encoding:o.encoding || true , callback: this.mapcallback.bind(this)  });\n            txt[name+'_n'] = Pool.texture({ url:this.folder + name +'_n.jpg', flip:false, repeat:this.uvx, callback: this.mapcallback.bind(this) });\n\n            //txt[name+'_c'] = Pool.directTexture(this.folder + name +'_c.jpg', { flip:false, repeat:this.uvx, encoding:o.encoding || true , callback: this.mapcallback.bind(this)  });\n            //txt[name+'_n'] = Pool.directTexture(this.folder + name +'_n.jpg', { flip:false, repeat:this.uvx, callback: this.mapcallback.bind(this) });\n           // if( isORM )txt[name+'_n'] = Pool.directTexture('./assets/textures/terrain/'+name+'_n.jpg', { flip:false, repeat:this.uvx, callback: this.mapcallback.bind(this) });\n\n        }\n\n        //txt['noise'] = Pool.directTexture(this.folder + 'noise.png', { flip:false, repeat:[1,1], encoding:false , callback: this.mapcallback.bind(this)  });\n        txt['noise'] = Pool.texture({ url:this.folder + 'noise.png', flip:false, repeat:[1,1], encoding:false , callback: this.mapcallback.bind(this)  });\n\n        this.txt = txt;\n\n        this.material = new MeshPhysicalMaterial({ name:'terrain', vertexColors:true, color:0xFFFFFF, map:txt[maps[0]+'_c'], normalMap:txt[maps[0]+'_n'] });\n\n        if( o.envmap !== undefined ) this.material.envMap = o.envmap;\n\n        if( this.isWater ){\n            this.material.transparent = true;\n            this.material.opacity = o.opacity || 0.4;\n            this.material.side = DoubleSide;\n            this.material.alphaMap = txt[maps[0]+'_c'];\n            this.material.map = null;\n            this.material.metalness  = 0.9;\n            this.material.roughness = 0.1;\n        } else {\n            this.material.reflectivity = 0.0;\n            this.material.metalness = o.metalness || 0.0;\n            this.material.roughness = o.roughness || 0.3;//0.7; \n        }\n\n        var ns = o.nScale || 0.5;\n        this.material.normalScale.set(ns,-ns);\n\n        if( !this.isWater ){\n\n            let self = this;\n\n            this.material.onBeforeCompile = function ( shader ) {\n\n                let uniforms = shader.uniforms;\n\n                //uniforms['fogTime'] = { value: 0 };\n\n                uniforms['clevels'] = { value: clevels };\n\n                uniforms['map1'] = { value: txt[maps[1]+'_c'] };\n                uniforms['map2'] = { value: txt[maps[2]+'_c'] };\n\n                uniforms['randomUv'] = { value: 1 };\n\n                uniforms['normalMap1'] = { value: txt[maps[1]+'_n'] };\n                uniforms['normalMap2'] = { value: txt[maps[2]+'_n'] };\n\n                //uniforms['noise'] = { value: txt['noise'] };\n                uniforms['noiseMap'] = { value: txt['noise'] };\n                uniforms['useNoiseMap'] = { value: 1 };\n\n                shader.uniforms = uniforms;\n\n                Shader.addParsFragment( shader, Shader.getRandomUv() + T.fragmentAdd );\n\n                let fragment = shader.fragmentShader;\n\n                fragment = fragment.replace( '#include <map_fragment>', T.map );\n                fragment = fragment.replace( '#include <normal_fragment_maps>', T.normal );\n                fragment = fragment.replace( '#include <color_fragment>', '' );\n                \n                shader.fragmentShader = fragment;\n\n                self.material.userData.shader = shader;\n\n                //if( o.shader ) o.shader.modify( shader );\n\n                Shader.modify( shader );\n\n            };\n\n\n            Object.defineProperty( this.material, 'randomUv', {\n                  get() { return this.userData.shader.uniforms.randomUv.value ? true : false; },\n                  set( value ) { this.userData.shader.uniforms.randomUv.value = value ? 1 : 0; }\n            });\n\n            Object.defineProperty( this.material, 'map1', {\n                  get() { return this.userData.shader.uniforms.map1.value; },\n                  set( value ) { this.userData.shader.uniforms.map1.value = value; }\n            });\n\n            Object.defineProperty( this.material, 'map2', {\n                  get() { return this.userData.shader.uniforms.map2.value; },\n                  set( value ) { this.userData.shader.uniforms.map2.value = value; }\n            });\n\n            Object.defineProperty( this.material, 'normalMap1', {\n                  get() { return this.userData.shader.uniforms.normalMap1.value; },\n                  set( value ) { this.userData.shader.uniforms.normalMap1.value = value; }\n            });\n\n            Object.defineProperty( this.material, 'normalMap2', {\n                  get() { return this.userData.shader.uniforms.normalMap2.value; },\n                  set( value ) { this.userData.shader.uniforms.normalMap2.value = value; }\n            });\n\n        } else {\n\n            this.material.onBeforeCompile = function ( shader ) {\n\n                var fragment = shader.fragmentShader;\n\n                fragment = fragment.replace( '#include <alphamap_fragment>', T.alphamap );\n           \n                shader.fragmentShader = fragment;\n\n            };\n\n        }\n\n\n        //THREE.Mesh.call( this, this.geometry, this.material );\n\n       // super( this.geometry, this.material );\n\n        if(o.debug){\n            this.debugZone(o);\n        }\n\n        //root.garbage.push( this.geometry );\n        \n\n        if( this.wantBorder ) this.addBorder( o );\n        if( this.wantBottom ) this.addBottom( o );\n\n        if( o.pos ) this.position.fromArray( o.pos );\n\n\n        // rotation is in degree or Quaternion\n        o.quat = o.quat === undefined ? [ 0, 0, 0, 1 ] : o.quat;\n        if( o.rot !== undefined ){ o.quat = math$2.toQuatArray( o.rot ); delete o.rot; }\n        //console.log(o.quat)\n        this.quaternion.fromArray( o.quat );\n\n        if( o.decal ) this.position.y += o.decal;\n\n        this.castShadow = true;\n        this.receiveShadow = true;\n\n        Pool.set( 'terrain' + this.name, this.material, 'material', true );\n\n        this.update();\n\n    }\n\n    getZid(){ // zone id\n\n        this.zid = {};\n\n        let lx = (this.sample[0] - this.sampleZ[0])*0.5;\n        let lz = (this.sample[1] - this.sampleZ[1])*0.5;\n        let first = (this.sample[0] * lz) + lx;\n        let line = 0;\n        for (let j = 0; j<this.lngZ; j++ ){\n            //line = j % this.sampleZ[0];\n            line = Math.floor(j / this.sampleZ[0]);\n            this.zid[ first + j + (line*((lx*2))) ] = j;\n        }\n    }\n\n    debugZone(o) {\n\n        this.geometryZ = new PlaneGeometry( this.sizeZ[0], this.sizeZ[2], this.sampleZ[0] - 1, this.sampleZ[1] - 1 );\n        this.geometryZ.rotateX( -math$2.PI90 );\n        this.verticesZ = this.geometryZ.attributes.position.array;\n        \n        const debuger = new Mesh( this.geometryZ, new MeshBasicMaterial({ color:0x000000, wireframe:true, transparent:true, opacity:0.1 } ));\n        //if( o.pos ) debuger.position.fromArray( o.pos );\n        this.add( debuger );\n\n    }\n\n    mapcallback (){\n\n        this.mapN++;\n        if( this.mapN == this.mapMax ){ \n           // this.material.needsUpdate = true;\n            this.callback();\n        }\n\n    }\n\n    addBottom ( o ){\n\n    \tvar geometry = new PlaneGeometry( this.size[0], this.size[2], 1, 1 );\n        geometry.rotateX( math$2.PI90 );\n        \n\n        this.bottomMesh = new Mesh( geometry, this.borderMaterial );\n\n        this.add( this.bottomMesh );\n\n        this.isBottom = true;\n    }\n\n    addBorder ( o ){\n\n    \tthis.borderMaterial = new MeshStandardMaterial({ \n\n    \t\tvertexColors: true, \n    \t\tmetalness: this.isWater ? 0.8 : 0.4, \n       \t\troughness: this.isWater ? 0.2 : 0.6, \n       \n            //envMap: view.getEnvMap(),\n            //normalMap:this.wn,\n            normalScale:this.isWater ?  [0.25,0.25]:[2,2],\n            transparent:this.isWater ? true : false,\n            opacity: this.isWater ? (o.opacity || 0.8) : 1,\n            envMap: o.envmap || null, \n\n    \t\t//shadowSide : false\n\n    \t});\n\n    \t//view.getMat()[this.name+'border'] = this.borderMaterial;\n\n        var front = new PlaneGeometry( this.size[0], 2, this.sample[0] - 1, 1 );\n        var back = new PlaneGeometry( this.size[0], 2, this.sample[0] - 1, 1 );\n        var left = new PlaneGeometry( this.size[2], 2, this.sample[1] - 1, 1 );\n        var right = new PlaneGeometry( this.size[2], 2, this.sample[1] - 1, 1 );\n\n        front.translate( 0,1, this.size[2]*0.5);\n        back.rotateY( -math$2.Pi );\n        back.translate( 0,1, -this.size[2]*0.5);\n        left.rotateY( -math$2.PI90 );\n        left.translate( -this.size[0]*0.5,1, 0);\n        right.rotateY( math$2.PI90 );\n        right.translate( this.size[0]*0.5,1, 0);\n\n        this.borderGeometry = mergeVertices( mergeGeometries( [ front, back, left, right ] ) );\n        this.borderVertices = this.borderGeometry.attributes.position.array;\n        this.lng2 = this.borderVertices.length / 3;\n        this.list = new Array( this.lng2 );\n        this.borderColors = new Float32Array( this.lng * 3 );\n        this.borderGeometry.setAttribute( 'color', new BufferAttribute( this.borderColors, 3 ) );\n        this.borderMesh = new Mesh( this.borderGeometry, this.borderMaterial );\n\n        var j = this.lng2, n, i;\n        while(j--){\n            n = j*3;\n            i = this.borderVertices[n+1] > 0 ? this.findPoint( this.borderVertices[n], this.borderVertices[n+2] ) : -1;\n            this.list[j] = i;\n\n        }\n\n        this.add( this.borderMesh );\n\n        this.borderMesh.castShadow = true;\n        this.borderMesh.receiveShadow = true;\n\n        this.isBorder = true;\n\n    }\n\n    dispose () {\n\n        if(this.isBottom){\n            this.remove( this.bottomMesh );\n            this.bottomMesh.geometry.dispose();\n        }\n\n        if(this.isBorder){\n            this.remove( this.borderMesh );\n            this.borderMesh.geometry.dispose();\n            this.borderMesh.material.dispose();\n        }\n\n        this.geometry.dispose();\n        this.material.dispose();\n        for(let t in this.txt) this.txt[t].dispose();\n        \n    }\n\n    easing ( key, azimuthal, wait ) {\n\n        //var key = user.key;\n        if( key[0]===0 && key[1]===0 ) return;\n\n        //if( !key[0] || !key[1] ) return;\n\n        var r = azimuthal || 0;//view.getAzimuthal();\n\n        if( key[7] ) this.maxspeed = 1.5;\n        else this.maxspeed = 0.25;\n\n        //acceleration\n        this.ease.y += key[1] * this.acc; // up down\n        this.ease.x += key[0] * this.acc; // left right\n        //speed limite\n        this.ease.x = this.ease.x > this.maxspeed ? this.maxspeed : this.ease.x;\n        this.ease.x = this.ease.x < -this.maxspeed ? -this.maxspeed : this.ease.x;\n        this.ease.y = this.ease.y > this.maxspeed ? this.maxspeed : this.ease.y;\n        this.ease.y = this.ease.y < -this.maxspeed ? -this.maxspeed : this.ease.y;\n\n        //break\n        if (!key[1]) {\n            if (this.ease.y > this.dec) this.ease.y -= this.dec;\n            else if (this.ease.y < -this.dec) this.ease.y += this.dec;\n            else this.ease.y = 0;\n        }\n        if (!key[0]) {\n            if (this.ease.x > this.dec) this.ease.x -= this.dec;\n            else if (this.ease.x < -this.dec) this.ease.x += this.dec;\n            else this.ease.x = 0;\n        }\n\n        if ( !this.ease.x && !this.ease.y ) return;\n\n        this.local.z += Math.sin(r) * this.ease.x + Math.cos(r) * this.ease.y;\n        this.local.x += Math.cos(r) * this.ease.x - Math.sin(r) * this.ease.y;\n\n        this.update( wait );\n\n    }\n\n    \n\n    getTri (){\n\n        return this.geometry\n\n\n    }\n\n    getHeight ( x, z ) {\n\n\n\n        x *= this.rx;\n        z *= this.rz; \n        x += this.sample[0]*0.5;\n        z += this.sample[1]*0.5;\n\n        //this.pv.set( x, 0, z ).applyAxisAngle( {x:0, y:1, z:0}, -math.PI90 )\n\n        /*if( this.isTurn ){\n            x = Math.floor(-z);\n            z = Math.floor(x);\n        }else {*/\n            x = Math.floor(x);\n            z = Math.floor(z);\n        //}\n\n        \n        \n        var h = this.isTurn ? this.height[ this.findId2( x, z ) ] : this.height[ this.findId( x, z ) ];\n        return ( h * this.size[ 1 ] ) + this.position.y;\n\n    }\n\n    findIdZ( x, z ){\n\n        return x+(z*this.sampleZ[1]) //|| 1;\n\n    }\n\n    findId( x, z ){\n\n        return x+(z*this.sample[1]) //|| 1;\n\n    }\n\n    findId2( x, z ){\n\n        return z+(-x*this.sample[0]) || 1;\n\n    }\n\n    /*findId3( x, z ){\n\n        return z+(x*this.sample[0]) //|| 1;\n\n    }*/\n\n    findPoint( x, z ){\n\n        var i = this.lng, n;\n        while( i-- ){\n            n = i * 3;\n            if( this.vertices[ n ] === x && this.vertices[ n + 2 ] === z ) return i;\n        }\n\n        return -1;\n\n    }\n\n    getReverseID () {\n\n        this.invId = [];\n\n        let i = this.lngZ, x, z;\n        const sz = this.sampleZ[1] - 1;\n        this.sampleZ[0] - 1;\n\n        while(i--){\n\n            x = i % this.sampleZ[0];\n            z = Math.floor( i * this.ratioZ );\n            if( this.isReverse ) z = sz - z;\n            //xr = sx - x;\n            //this.invId[i] = this.findId( x, sz - z )//\n            this.invId[i] = this.isTurned ?  (this.lngZ-1)-this.findIdZ( z, x ) : this.findIdZ( x, z );\n\n            //console.log(i, this.findId( x, sz - z ), (this.lng-1)-this.findId( z, x ))\n        }\n\n    }\n\n    set( o ) {\n\n        if( o.ease ) this.easing( o.key, o.azimut );\n        if( o.decal ) this.decal( o.decal, true );\n\n    }\n\n    decal( v, wait ){\n\n        this.local.x += v[0];\n        this.local.y += v[1];\n        this.local.z += v[2];\n        this.update( wait );\n\n    }\n\n    updateUv () {\n\n        if( this.isWater ){ \n            this.material.normalMap.offset.x+=0.002;\n            this.material.normalMap.offset.y+=0.001;\n        } else {\n            let v = { x: this.local.x * this.ruvx, y: this.local.z * this.ruvy };\n            if(this.material.map) this.material.map.offset.copy(v);\n            if(this.material.normalMap) this.material.normalMap.offset.copy(v);\n            \n        }\n\n    }\n\n    distance ( a, b ) {\n\n        const dx = a.x - b.x;\n        const dy = a.y - b.y;\n        return Math.sqrt( dx * dx + dy * dy );\n\n    }\n\n    clamp ( v, min = 0, max = 1 ) {\n        v = v < min ? min : v;\n        v = v > max ? max : v;\n        return v;\n    }\n\n    update ( wait ) {\n\n        let v = this.pp;\n        let cc = [1,1,1];\n        let i = this.lng, n, x, z,  c, id, result, idz;\n        let oldz, oldh, ccY, ccc;\n\n        while( i-- ){\n\n\n            n = i * 3;\n            x = i % this.sample[0];\n            z = Math.floor( i * this.ratio );\n\n            v.set( x + ( this.local.x*this.rx ), this.local.y, z + ( this.local.z*this.rz ) );\n\n            c = math$2.noise( v, this.data );\n\n            if( this.isIsland ){\n\n                let d = 1-(this.distance({x:x, y:z},{x:(this.sample[0]-1)*0.5, y:(this.sample[1]-1)*0.5} )/((this.sample[0]-1)*0.5) );\n                d *= 4;\n                d = this.clamp(d);\n                //console.log(d)\n                c *= d;\n\n            }\n\n\n\n            //c = Math.quinticSCurve(c);\n            //c = Math.cubicSCurve(c)\n            //c = Math.linear(c,0.2, 1);\n            //c = Math.clamp(c,0.2,1)\n\n            c = Math.pow( c, this.data.expo );\n            c = this.clamp(c);\n\n            \n            \n            \n            if( this.ttype === 'road' ) {\n\n                if(oldz === z){\n                    if(x===1 || x===2 || x===29 || x===30) c = oldh + 0.1;\n                    else c = oldh;\n                } else { \n                    oldz = z;\n                    oldh = c;\n                }\n\n                //console.log(x)\n            }\n\n            this.height[ i ] = c;\n\n            ccY = (c * this.size[ 1 ]) + this.deep;\n            this.vertices[ n + 1 ] = ccY;\n\n            //id = this.changeId ? this.invId[i] : i;\n            result = this.isAbsolute ? c : c * this.size[1];\n\n            if( this.zid[ i ] !== undefined ){\n                idz = this.zid[ i ];\n                id = this.changeId ? this.invId[idz] : idz;\n\n                 // for physics\n                this.heightData[ id ] = result;\n\n                // for debug\n                if(this.verticesZ) this.verticesZ[ ( idz * 3 ) + 1 ] = ccY;\n\n            }\n\n            // for physics\n            //this.heightData[ id ] = result;\n\n            \n\n            \n\n            if( this.isWater ){\n\n                cc = [ c * this.colorBase.r, c * this.colorBase.g, c * this.colorBase.b ];\n\n            } else {\n\n                cc = [ c, 0, 0];\n\n            }\n\n            //ccc = math.clamp(cc[0]+0.25, 0.25, 1)\n            ccc = cc[0];\n\n            //if(ccc>mm) mm = ccc\n            //if(ccc<mi) mi = ccc\n\n            \n\n            this.colors[ n ] = ccc;\n            this.colors[ n + 1 ] = ccc;\n            this.colors[ n + 2 ] = ccc;\n            //oldx = x;\n            \n\n        }\n\n        //console.log(mm, mi)\n\n\n        if( this.isBorder ){\n\n            let j = this.lng2, h;\n            while(j--){\n                n = j*3;\n                if(this.list[j]!==-1){\n                    h = this.height[ this.list[j] ];\n                    this.borderVertices[n+1] = (h * this.size[1]) + this.deep;\n                    ccc = math$2.clamp(h+0.25, 0.25, 1);\n                    this.borderColors[n] = ccc; //* this.colorBase.r;//h * this.colorBase.r//ee;\n                    this.borderColors[n+1] = ccc; //* this.colorBase.g;// h * this.colorBase.g//ee*0.5;\n                    this.borderColors[n+2] = ccc; //* this.colorBase.b;// h * this.colorBase.b//ee*0.3;\n\n                } else {\n                    this.borderColors[n] = this.colorBase.r;//0.5;\n                    this.borderColors[n+1] = this.colorBase.g;//0.25;\n                    this.borderColors[n+2] = this.colorBase.b;//0.15;\n                }\n            }\n\n        }\n\n        if( wait ) this.needUpdate = true;\n        else this.updateGeometry();\n\n        \n\n        if( this.ready ) this.physicsUpdate( this.name, this.heightData );\n\n        this.ready = true;\n\n        //if( phy ) root.view.update( { name:'terra', heightData:this.heightData, sample:this.sample } );\n\n    }\n\n    step (n) {\n\n        if( !this.needUpdate ) return\n        this.updateGeometry();\n        this.needUpdate = false;\n        \n    }\n\n    updateGeometry () {\n\n        this.geometry.attributes.position.needsUpdate = true;\n        this.geometry.attributes.color.needsUpdate = true;\n        this.geometry.computeVertexNormals();\n\n        this.updateUv();\n\n        if(this.geometryZ) this.geometryZ.attributes.position.needsUpdate = true;\n\n        if( this.isBorder ){\n        \tthis.borderGeometry.attributes.position.needsUpdate = true;\n            this.borderGeometry.attributes.color.needsUpdate = true;\n        }\n\n    }\n\n}\n\n// SHADERS\n\n// about no tiles\n// https://iquilezles.org/articles/texturerepetition/\n\nconst TerrainShader = {\n\n    fragmentAdd : /* glsl */`\n        uniform vec4 clevels;\n        uniform float randomUv;\n\n        uniform sampler2D noise;\n\n        uniform sampler2D normalMap1;\n        uniform sampler2D normalMap2;\n\n        uniform sampler2D roughnessMap1;\n        uniform sampler2D roughnessMap2;\n\n        uniform float aoMapIntensity;\n        uniform sampler2D map1;\n        uniform sampler2D map2;\n\n        vec4 textureMAP( sampler2D mapper, in vec2 uv ){\n            if( randomUv == 1.0 ) return textureNoTile( mapper, uv );\n            else return texture2D( mapper, uv );\n        }\n\n        vec4 MappingMix( float slope, vec4 level, vec4 rocks, vec4 grasss, vec4 sands ){\n            vec4 cc = rocks;\n            if (slope < level.x) cc = grasss;\n            if (slope < level.z) cc = sands;\n            if (slope == 0.0 ) cc = sands;\n            //if (( slope < level.x ) && (slope >= level.y)) cc = mix( grasss , rocks, (slope - level.y) * (1. / (level.x - level.y)));\n            //if (( slope < level.y ) && (slope >= level.z)) cc = mix( sands , grasss, (slope - level.z) * (1. / (level.y - level.z)));\n\n            float d = level.y;\n            float rx = 1.0/level.y;\n\n            if (( slope < level.x + d ) && (slope > level.x)) cc = mix( grasss , rocks, ( slope - (level.x) ) * rx );\n\n            d = level.w;\n            rx = 1.0/level.w;\n            if (( slope < level.z + d ) && (slope > level.z )) cc = mix( sands , grasss, ( slope - (level.z) ) * rx );\n\n            //cc = mix( grasss, cc, smoothstep(0.0,1.0, slope)*20.0 );\n            return cc;\n        }\n    `,\n\n    // map_fragment.glsl\n\n    map : /* glsl */`\n        #ifdef USE_MAP\n\n            vec4 sand = textureMAP( map, vMapUv );\n            vec4 grass = textureMAP( map1, vMapUv );\n            vec4 rock = textureMAP( map2, vMapUv ); \n\n            vec4 sampledDiffuseColor = MappingMix(vColor.r, clevels, rock, grass, sand);\n\n            diffuseColor *= sampledDiffuseColor;\n\n        #endif\n    `,\n\n    // normal_fragment_maps\n\n    normal : /* glsl */`\n\n        #ifdef USE_NORMALMAP_OBJECTSPACE\n\n            normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0; // overrides both flatShading and attribute normals\n\n            #ifdef FLIP_SIDED\n\n                normal = - normal;\n\n            #endif\n\n            #ifdef DOUBLE_SIDED\n\n                normal = normal * faceDirection;\n\n            #endif\n\n            normal = normalize( normalMatrix * normal );\n\n        #elif defined( USE_NORMALMAP_TANGENTSPACE )\n\n            vec4 sandN = textureMAP( normalMap, vNormalMapUv );\n            vec4 grassN = textureMAP( normalMap1, vNormalMapUv );\n            vec4 rockN = textureMAP( normalMap2, vNormalMapUv );\n            vec3 mapN = MappingMix(vColor.r, clevels, rockN, grassN, sandN).xyz * 2.0 - 1.0;\n\n            ///vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\n            mapN.xy *= normalScale;\n            normal = normalize( tbn * mapN );\n\n        #elif defined( USE_BUMPMAP )\n\n            normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n\n        #endif\n    `,\n\n    alphamap : /* glsl */`\n        #ifdef USE_ALPHAMAP\n            diffuseColor.a = opacity +( texture2D( alphaMap, vAlphaMapUv ).g * opacity) * (1.0-opacity);\n        #endif\n    `,\n    \n};\n\n// THREE TERRAIN\n\nclass Terrain extends Item {\n\n\tconstructor() {\n\n\t\tsuper();\n\n\t\tthis.Utils = Utils;\n\t\tthis.type = 'terrain';\n\t\tthis.num = Num[this.type];\n\n\t}\n\n\tstep () {\n\n\t\troot.Ar;\n\t\troot.ArPos[this.type];\n\n\t\tlet i = this.list.length, s;\n\n\t\twhile( i-- ){\n\n\t\t\ts = this.list[i];\n\t\t\t//n = N + ( i * this.num );\n\t\t\ts.step();// AR[n] );\n\n\t\t}\n\n\t}\n\n\tadd ( o = {} ) {\n\n\t\tthis.setName( o );\n\n\t\tif( root.engine === 'JOLT' ){\n\t\t\to.isAbsolute = true;\n\t\t\to.isTurned = false;\n\t\t}\n\n\t\tif( root.engine === 'PHYSX' ){\n\t\t\to.isAbsolute = true;\n\t\t\to.isTurned = true;\n\t\t}\n\n\t\tif( root.engine === 'HAVOK'){\n\t\t\to.isAbsolute = true;\n\t\t\to.isTurned = true;\n\t\t\to.isReverse = false;\n\t\t}\n\n\t\tif( root.engine !== 'OIMO'){\n\t\t\to.zone = o.zone || 0.25;\n\t\t\t//o.debuger = true\n\t\t}\n\n\t\tconst t = new Landscape( o );\n\n\t\tMat.extendShader( t.material, t.material.onBeforeCompile );\n\n\t\tt.physicsUpdate = ( name, h ) =>{\n\n\t\t\troot.flow.tmp.push( { name:name, heightData:h } );\n\t\t\t//root.post({m:'change', o:{ name:'terra', heightData:h }})\n\t\t};\n\n\t\t// add to world\n\t\tthis.addToWorld( t, o.id );\n\n        // add to physics\n        root.post({ m:'add', o:toPhysics(t) });\n\n\t\treturn t\n\n\t}\n\n\tset ( o = {}, b = null ) {\n\n\t\tif( b === null ) b = this.byName( o.name );\n\t\tif( b === null ) return\n\n\t\tb.set(o);\n\n\t}\n\t\n}\n\nconst toPhysics = function( t ) {\n\n\tconst o = {\n\t\tname:t.name,\n\t\ttype:t.type,\n\t\tpos:t.position.toArray(),\n\t\tquat:root.engine === 'PHYSX' ? [0,0,0,1]:t.quaternion.toArray(), // physx terrain can't turn !!\n\t};\n\n\tif( root.engine === 'PHYSX' || root.engine === 'AMMO' || root.engine === 'HAVOK' || root.engine === 'JOLT'){\n\t\to.type = 'terrain';\n\t\to.size = t.sizeZ;\n\t\to.sample = t.sampleZ;\n\t\to.zone = t.zone;\n\t\to.heightData = t.heightData;\n\t} else {\n\t\to.type = 'mesh';\n\t\to.v = MathTool.getVertex( t.geometry, root.engine === 'OIMO' );\n\t\to.index = root.engine === 'OIMO' ? null : MathTool.getIndex( t.geometry );\n\t}\n\n\treturn o\n\n};\n\nclass Solver extends Item {\n\n\tconstructor () {\n\n\t\tsuper();\n\n\t\tthis.Utils = Utils;\n\t\tthis.type = 'solver';\n\n\t}\n\n\tstep () {\n\n\t\tconst AR = root.Ar;\n\t\tconst N = root.ArPos[this.type];\n\n\t\tlet i = this.list.length, n;\n\n\t\twhile( i-- ){\n\n\t\t\tn = N + ( i * Num[this.type] );\n\t\t\tthis.list[i].update( AR, n );\n\n\t\t}\n\n\t}\n\n\t///\n\n\tadd ( o = {} ) {\n\n\t\tthis.setName( o );\n\n        let solver = new Articulation( o );\n\n        // add to world\n\t\tthis.addToWorld( solver, o.id );\n\n        // add to worker\n        root.post({ m:'add', o:o });\n\n        return solver;\n\n\n\t}\n\n\tset ( o = {} ) {\n\n\t}\n\n}\n\n// ARTICULATION SOLVER\n\nclass Articulation {//extends Basic3D \n\n\tconstructor( o ) {\n\n\t\t//super();\n\n\t\tthis.name = o.name;\n\t\tthis.type = 'solver';\n\t\tthis.needData = o.needData || false;\n\t\tthis.bones = [];\n\t\tthis.joints = [];\n\t\tthis.jid = 0;\n\t\tthis.speed = 1;\n\n\t}\n\n\taddBone( name ){\n\n\t\tthis.bones.push( name );\n\n\t}\n\n\tdispose(){\n\n\t\troot.motor.remove( this.bones, true );\n\t\t\n\t}\n\n\tupdate ( AR, n ){\n\n\t\tif( !this.needData ) return\n\n\t\tlet k = this.joints.length, j, m;\n\n\t\twhile(k--){\n\n\t\t\tm = n + (k*7);\n\n\t\t\tj = this.joints[k];\n\n\t\t\tj.data.target.x = AR[ m + 0];\n\t\t\tj.data.target.y = AR[ m + 1];\n\t\t\tj.data.target.z = AR[ m + 2];\n\n\t\t\tj.data.target.rx = AR[ m + 3];//Math.round( AR[ m + 3] )\n\t\t\tj.data.target.ry = AR[ m + 4];//Math.round(  )\n\t\t\tj.data.target.rz = AR[ m + 5];//Math.round( AR[ m + 5] )\n\n\t\t\t/*j.data.target.twiwt = Math.round( AR[ m + 3] )\n\t\t\tj.data.target.swing1 = Math.round( AR[ m + 4] )\n\t\t\tj.data.target.swing2 = Math.round( AR[ m + 5] )*/\n\n\t\t\tj.data.target.count = AR[ m + 6 ];\n\n\t\t}\n\n\t}\n\n\tstart (){\n\n\t\troot.post({ m:'startArticulation', o:{ name:this.name } });\n\n\t}\n\n\tstop (){\n\n\t\troot.post({ m:'stopArticulation', o:{ name:this.name } });\n\n\t}\n\n\tcommonInit (){\n\n\t\troot.post({ m:'commonInitArticulation', o:{ name:this.name } });\n\n\t}\n\n\taddJoint ( o ) {\n\n\t\tthis.jid = this.joints.length;\n\n\t\to.name = o.name || ( this.name + '_Joint_' + this.jid );\n\t\to.solver = this.name;\n\n\t\tif( o.rot1 !== undefined ){ o.quat1 = MathTool.quatFromEuler( o.rot1 ); delete ( o.rot1 ); }\n\t\tif( o.rot2 !== undefined ){ o.quat2 = MathTool.quatFromEuler( o.rot2 ); delete ( o.rot2 ); }\n\t\t\n\t\tif(o.type !== 'fixe') {\n\t\t\tthis.joints.push( new SolverJoint( o, this ) );\n\t\t}\n\n\t\troot.post({ m:'addSolverJoint', o:o });\n\n\t}\n\n\t/*addBone ( mesh ) {\n\n\t\tconsole.log('bone is add')\n\n\t\tthis.add( mesh );\n\n\t}*/\n\n\tdriveJoints ( dt ) {\n\n\t\tlet isInDrive = false;\n\n\t\tlet k = this.joints.length, j, d, nup = [];\n\n\t\twhile(k--){ \n\n\t\t\tj = this.joints[k];\n\t\t\tj.update( dt );\n\t\t\td = j.isDrive;\n\t\t\tif( j.nup ) nup.push( j.nup );\n\t\t\tisInDrive = d ? true : isInDrive;\n\n\t\t}\n\n\t\t// update or die\n\t\tif( isInDrive ) root.motor.change( nup );\n\t\telse {\n\t\t\tif(this.resolve){\n\t\t\t\tthis.resolve();\n\t\t\t\tdelete this.resolve;\n\t\t\t}\n\t\t}\n\n\t}\n\n    setAngles ( angles, time ){\n\n    \tif(!angles) return\n\n    \tlet j = this.joints.length;\n\n    \twhile(j--){ \n    \t\tthis.joints[j].pose( angles[j] !== undefined ?  angles[j] : 0, time !== undefined ? time : this.speed );\n    \t}\n\n    \treturn new Promise((resolve) => this.resolve = resolve );\n\n    }\n\n\n}\n\n// ARTICULATION JOINT\n\nclass SolverJoint {\n\n\tconstructor( o, solver ) {\n\n\t\tthis.name = o.name;\n\t\tthis.solver = solver;\n\t\tthis.type = 'solverJoint';\n\t\tthis.isDrive = false;\n\t\t//this.inverse = o.inverse || false\n\n\t\tthis.current = 0;\n\t\tthis.tmp = 0;\n\t\tthis.target = 0;\n\t\tthis.start = 0;\n\t\tthis.time = 0;\n\t\tthis.nup = null;\n\n\t\tthis.data = {\n\n\t\t\ttarget:{ x:0, y:0, z:0, rx:0, ry:0, rz:0, count:0 },\n\n\t\t\t//target:{ x:0, y:0, z:0, twist:0, swing1:0, swing2:0, count:0 },\n\n\t\t};\n\n\t\tif( o.limits ){\n\t\t\tthis.driveType = o.limits[0][0];\n\t\t\tthis.min = o.limits[0][1];\n\t\t\tthis.max = o.limits[0][2];\n\t\t}\n\n\t\tif( o.position ) o.target = o.position;\n\n\t\tif( o.target ){\n\t\t\tlet i = o.target.length, t;\n\n\t\t\twhile(i--){\n\t\t\t\tt = o.target[i];\n\t\t\t\tthis.data.target[ t[0] ] = t[1];\n\t\t\t\t//if(t[0]===this.driveType)  this.current = t[1]\n\n\t\t\t}\n\t\t}\n\n\t\t//stiffness, damping, forceLimit, acceleration drive flag\n\t\t//o.drives = [[this.driveType, 100000, 0, Infinity, true ]];\n\t\t//solver.addJoint(o);\n\t\t\n\t}\n\n\tstart (){\n\n\t}\n\n\tpose( target, time ){\n\n\n\n\t\t// linear target need to be clamp ?!\n\t\tthis.target = MathTool.clamp( target, this.min, this.max );\n\t\t//this.current = this.data.target[ this.driveType ];\n\t\tthis.current = MathTool.clamp( this.data.target[ this.driveType ], this.min, this.max );\n\n\t\t//console.log( this.target, this.current )\n\n\t\tif( this.target === this.current ) return;\n\n\n\t\tthis.start = this.current;\n\t\tthis.tmp = 0;\n\t\tthis.time = time;\n\n\t\tthis.isDrive = true;\n\n\t\t/*if( this.driveType !== 'z' ) this.isDrive = true;\n\t\telse{ \n\t\t\t/*if(target===0.3 || target===-0.3) this.start = 0;\n\t\t\telse{\n\n\t\t\t\tif(this.name = 'A7') this.start = -0.3;\n\t\t\t\telse this.start = 0.3;\n\t\t\t}*/\n\t\t//\tconsole.log( this.driveType, this.current )\n\t\t//}\n\t\t\n\t\t//return new Promise((resolve) => this.resolve = resolve);\n\n\t}\n\t\n\tupdate( dt ){\n\n\t\tif( this.isDrive ){\n\n\t\t    this.tmp += dt*this.time;\n\t\t\tlet t = this.tmp;\n\t\t\tt = (t > 1) ? 1 : t;\n\n\t\t\t//this.tmp = 1;//dt;\n\t\t\t//let t = this.tmp // this.time;\n\t\t\t//t = (t > 1) ? 1 : t;\n\n\t\t\tlet move = MathTool.lerp( this.start, this.target, t );//this.current + (this.target - this.current) * t;\n\n\t\t\tthis.nup = { name:this.name, drivesTarget: [[ this.driveType, move ]] };\n\n\t\t    if( t === 1 ) this.isDrive = false;\n\n\t\t} else {\n\t\t\tthis.nup = null;\n\t\t}\n\n\t}\n\n}\n\nclass Textfield extends Mesh {\n\n\tconstructor( o={} ) {\n\n\t\tsuper( new PlaneGeometry(), new MeshBasicMaterial({polygonOffset: true, polygonOffsetFactor: -4}));\n\n\t\tthis.name = o.nam || 'text';\n\t\tthis.canvas = null;\n\n\t\tthis.w = o.w || 0;\n\t\tthis.h = o.h || 0;\n\n\t\tthis.weight = o.weight ?? 700;\n\n\t\tthis.font = o.font ?? \"'Mulish', sans-serif\";\n\t\tthis.fontSize = o.fontSize ?? 32;\n\t\tthis.backgroundColor = o.backgroundColor ?? \"#00000000\";\n\t\tthis.fontColor = o.fontColor ?? \"#FFFFFF\";\n\t\tthis.material.alphaTest = 0.5;\n\t\tthis.set( o.text );\n\t\t\n\t\tif( o.pos ) this.position.fromArray(o.pos);\n\t\tif( o.rot ) this.quaternion.fromArray( MathTool.quatFromEuler( o.rot ) );\n\t\t\n\t}\n\n\tset( str ){\n\n\t\tif(!this.canvas) this.canvas = document.createElement(\"canvas\");\n\t\tlet ctx = this.canvas.getContext(\"2d\"), w, h, r;\n\t\t\n\t\tctx.font = this.weight + \" \" + this.fontSize + \"px \" + this.font;\n\t\t\n\n\t\tlet metrics = ctx.measureText( str );\n\n\t\t//resize to nearest power of 2\n\t\tw = 2 ** Math.ceil(Math.log2(metrics.width));\n\t\th = 2 ** Math.ceil(Math.log2(ctx.measureText('M').width));\n\n\n\n\t\t\n\t\tthis.canvas.width = w;\n\t\tthis.canvas.height = h;\n\n\t\tctx.fillStyle = this.backgroundColor;\n\t\tctx.fillRect(0, 0, w, h);\n\t\t//var backgroundAlpha = ctx.getImageData(0, 0, 1, 1).data[3];\n\n        ctx.fillStyle = this.fontColor;\n\t\t//ctx.font = this.fontSize + \"px \" + this.font;\n\t\tctx.font = this.weight + \" \" + this.fontSize + \"px \" + this.font;\n\t\tctx.textAlign = \"center\";\n\t\tctx.textBaseline = 'middle';\n\t\t\n\t\tctx.fillText( str, w*0.5, h*0.5 );\n\n\t\tthis.material.map = new CanvasTexture(this.canvas);\n\n\t\t//if(this.w===0) this.w = w*0.02\n\n\t\tif( this.h !== 0 ){\n\t\t\tr = this.h / h;\n\t\t\tthis.scale.set(w*r,this.h,0);\n\t\t}\n\n\t\telse if( this.w !== 0 ){\n\t\t\tr = this.w / h;\n\t\t\tthis.scale.set(this.w,h*r,0);\n\t\t}\n\n\t\telse {\n\t\t\tthis.scale.set(w*0.025,h*0.025,0);\n\t\t}\n\n\n\t\t//this.scale.set(this.w,h*r,0)\n\n\t\t/*let img = new Image(w, h);\n        img.src = canvas.toDataURL( 'image/png' );\n\n        let self = this\n\n        img.onload = ()=>{\n\n\t\t\t//\n\t\t\tself.material.map = new Texture(img);\n\t\t\tself.material.map.needsUpdate = true\n\t\t\t//self.material.needsUpdate = true\n\n\t\t\tself.scale.set(w*0.05,h*0.05,0)\n\t\t}*/\n\n\t}\n\n\tdispose(){\n\n\t\tthis.parent.remove(this);\n\t\tthis.material.map.dispose();\n\t\tthis.material.dispose();\n\t\tthis.geometry.dispose();\n\n\t}\n\n}\n\nlet Nb = 0;\n\nclass Button {\n\n\tconstructor ( o={} ) {\n\n\t\tthis.down = false;\n\n\n\t\tthis.time = o.time || 250;\n\n\t\tthis.p = o.pos || [0,0,0];\n\n\t\tthis.type = o.type || 'box';\n\t\tthis.name = o.name || 'button' + Nb++;\n\t\tthis.pos = o.pos || [0,0,0];\n\t\tthis.size = o.size || [1,1,1];\n\t\tthis.radius = o.radius || 0;\n\t\tthis.axe = o.axe !== undefined ? o.axe : 1;\n\n\t\tthis.fontSize = o.fontSize || 0.8; \n\t\tthis.fontScale = o.fontScale || 1.0;\n\n\t\tthis.extraForce = true; \n\n\n\t\tthis.decal = this.type === 'sphere'? this.size[1]*0.5 : (this.size[1]*0.5) - this.radius;\n\n\t\tif( this.type !== 'sphere' ) this.pos[ this.axe ] += this.decal;\n\n\n\t\tthis.origin = this.pos[this.axe];\n\t    let height = this.size[this.axe]-(this.radius*2);\n\n\t\t//this.range = [ this.origin - this.decal - (this.radius*2), this.origin ]\n\t\tthis.range = [ this.origin - height, this.origin ];\n\n\t\tthis.value = this.origin;\n\t\tthis.target = this.origin;\n\n\t\tthis.speed = (this.size[this.axe]/3) / (this.size[this.axe]);\n\n\t\n\n\t\tthis.callback = function(){ \n\t\t\tconsole.log(\"action down\"); \n\t\t};\n\n\t\tif( o.callback ){ \n\t\t\tthis.callback = o.callback; \n\t\t\tdelete o.callback;\n\t\t}\n\n\t\to.button = true;\n\t\to.pos = this.pos; \n\t\tif(!o.material) o.material = 'button';\n\t\to.kinematic = true;\n\t\to.mask = 1;\n\n\t\t\n\n\t\tthis.timeout = null;\n\n\t\t// add model & physics\n\t\tthis.b = root.motor.add( o );\n\n\t\tthis.b.userData['action'] = this.action.bind(this);\n\t\tthis.b.userData['out'] = this.out.bind(this);\n\n\t\t// is bad ?\n\t\tthis.b.userData['direct'] = this.callback.bind(this);\n\n\t\t// extra text on top \n\t\tif( o.text ) this.addText( o.text );\n\n\t}\n\n\taddText( txt, size ){\n\n\t\tthis.fontSize = this.type==='box' ? this.size[this.axe] * 0.8 : this.size[0] * 0.8;\n\t\tthis.fontSize *= this.fontScale;\n\t\tlet dt = { text:txt, pos:[ 0,this.size[1]*0.5,0 ], rot:[-90,0,0], h:this.fontSize };\n\t\tif( this.axe === 2 ) dt = { text:txt, pos:[ 0,0, this.size[2]*0.5 ], rot:[0,0,0], h:this.fontSize };\n\t\tthis.txt = new Textfield( dt );\n\t\tthis.b.add( this.txt );\n\n\t}\n\n\taction( p ){\n\n\t\tif( this.down ) return\n\n\t\tthis.down = true;\n\t    this.target = this.range[0];\n\t    if(this.extraForce) root.motor.explosion( p || this.p, this.size[0]*2, 0.01 );\n\t\tthis.callback();\n\n\t}\n\n\tout(){\n\n\t\tif(!this.down) return\n\n\t\tthis.down = false;\n\t    this.target = this.range[1];\n\t    if(this.extraForce) root.motor.explosion( this.p, this.size[0]*2, 0.01 );\n\n\t}\n\n\tupdate(){\n\n\t\tif( this.value !== this.target ){\n\n\t\t\t//let side = this.target > this.value ? 1 : -1\n\n\t\t\tthis.value = MathTool.lerp( this.value, this.target, this.speed );\n\n\t\t\t//this.value += 0.1 * side\n\n\t\t\tlet t = MathTool.nearEquals( this.value, this.target, 0.0001);\n\n\t\t\tif(!t){\n\t\t\t    this.pos[this.axe] = this.value;\n\t\t\t    root.motor.change( {name:this.b.name, pos:this.pos} );\n\t\t\t} else {\n\t\t\t\tthis.value = this.target;\n\t\t\t}\n\n\n\t\t}\n\n\t}\n\n\tdispose(){\n\n\t\tif(this.txt) this.txt.dispose();\n\t}\n\n}\n\nconst _box = /*@__PURE__*/ new Box3();\n\nclass BoxHelper extends LineSegments {\n\n\tconstructor( object, color = 0xffff00 ) {\n\n\t\tconst indices = new Uint16Array( [ 0, 1, 1, 2, 2, 3, 3, 0, 4, 5, 5, 6, 6, 7, 7, 4, 0, 4, 1, 5, 2, 6, 3, 7 ] );\n\t\tconst positions = new Float32Array( 8 * 3 );\n\t\t\n\n\t\tlet c = new Color( color );\n\t\tlet ar = [];\n\t\tlet i = 8;\n\t\twhile(i--) ar.push(c.r,c.g,c.b);\n\t\tconst colors = new Float32Array( ar );\n\n\t\tconst geometry = new BufferGeometry();\n\t\tgeometry.setIndex( new BufferAttribute( indices, 1 ) );\n\t\tgeometry.setAttribute( 'position', new BufferAttribute( positions, 3 ) );\n\t\tgeometry.setAttribute( 'color', new BufferAttribute( colors, 3 ) );\n\n\t\tsuper( geometry, new LineBasicMaterial( { vertexColors: true, toneMapped: false } ) );\n\n\t\tthis.object = object;\n\t\tthis.type = 'BoxHelper';\n\n\t\tthis.matrixAutoUpdate = false;\n\n\t\tthis.update();\n\n\t}\n\n\tupdate( object ) {\n\n\t\tif ( object !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.BoxHelper: .update() has no longer arguments.' );\n\n\t\t}\n\n\t\tif ( this.object !== undefined ) {\n\t\t\t_box.setFromObject( this.object );\n\t\t}\n\n\t\tif ( _box.isEmpty() ) return;\n\n\t\tconst min = _box.min;\n\t\tconst max = _box.max;\n\n\t\t/*\n\t\t\t5____4\n\t\t1/___0/|\n\t\t| 6__|_7\n\t\t2/___3/\n\n\t\t0: max.x, max.y, max.z\n\t\t1: min.x, max.y, max.z\n\t\t2: min.x, min.y, max.z\n\t\t3: max.x, min.y, max.z\n\t\t4: max.x, max.y, min.z\n\t\t5: min.x, max.y, min.z\n\t\t6: min.x, min.y, min.z\n\t\t7: max.x, min.y, min.z\n\t\t*/\n\n\t\tconst position = this.geometry.attributes.position;\n\t\tconst array = position.array;\n\n\t\tarray[ 0 ] = max.x; array[ 1 ] = max.y; array[ 2 ] = max.z;\n\t\tarray[ 3 ] = min.x; array[ 4 ] = max.y; array[ 5 ] = max.z;\n\t\tarray[ 6 ] = min.x; array[ 7 ] = min.y; array[ 8 ] = max.z;\n\t\tarray[ 9 ] = max.x; array[ 10 ] = min.y; array[ 11 ] = max.z;\n\t\tarray[ 12 ] = max.x; array[ 13 ] = max.y; array[ 14 ] = min.z;\n\t\tarray[ 15 ] = min.x; array[ 16 ] = max.y; array[ 17 ] = min.z;\n\t\tarray[ 18 ] = min.x; array[ 19 ] = min.y; array[ 20 ] = min.z;\n\t\tarray[ 21 ] = max.x; array[ 22 ] = min.y; array[ 23 ] = min.z;\n\n\t\tposition.needsUpdate = true;\n\n\t\tthis.geometry.computeBoundingSphere();\n\n\t}\n\n\tsetFromObject( object ) {\n\n\t\tthis.object = object;\n\t\tthis.update();\n\n\t\treturn this;\n\n\t}\n\n\tcopy( source, recursive ) {\n\n\t\tsuper.copy( source, recursive );\n\n\t\tthis.object = source.object;\n\n\t\treturn this;\n\n\t}\n\n\tdispose() {\n\n\t\tthis.geometry.dispose();\n\t\tthis.material.dispose();\n\n\t}\n\n}\n\nclass Container {\n\n\tconstructor ( o = {} ) {\n\n\t\tthis.isCompound = true;\n\t\tthis.remplace = o.remplace || false;\n\t\tthis.init(o);\n\n\t}\n\n\tinit ( o = {} ) {\n\n\t\tconst intern = o.intern || false;\n\n\n\t\tlet s = o.size || [5,3,8];\n\t\tlet p = o.pos || [0,2,0];\n\t\tlet w = o.wall || 0.1;\n\n\t\tif( o.size[3] !== undefined )  w = o.size[3];\n\t\tif(w<=0) w = 0.01;\n\t\tlet mw = w * 0.5;\n\t\tlet xw = w * 2;\n\n\t\tif(!o.face) o.face = {};\n\t\tlet f = { up:1, down:1, left:1, right:1, front:1, back:1, ...o.face };\n\t\tdelete o.face;\n\n\t\t//let geometry = new ChamferBox( s[ 0 ], s[ 1 ], s[ 2 ], o.radius || mw );\n\t\t//let mesh = new Mesh( geometry );\n\n\t\tconst data = [];\n\n\t\tif(intern){\n\n\t\t\tif(f.up===1) data.push({ pos:[0, s[1]*0.5+mw, 0], size:[s[0]+xw, w, s[2]+xw] });\n\t\t\tif(f.down===1) data.push({ pos:[0, -mw-s[1]*0.5, 0], size:[s[0]+xw, w, s[2]+xw] });\n\n\t\t\tif(f.left===1) data.push({ pos:[-mw-s[0]*0.5, 0, 0 ], size:[w, s[1], s[2]] });\n\t\t\tif(f.right===1) data.push({ pos:[s[0]*0.5+mw, 0, 0 ], size:[w, s[1], s[2]] });\n\n\t\t\tif(f.back===1) data.push({ pos:[0, 0, -mw-s[2]*0.5], size:[s[0]+xw, s[1], w] });\n\t\t\tif(f.front===1) data.push({ pos:[0, 0, s[2]*0.5+mw], size:[s[0]+xw, s[1], w] });\n\n\t\t}else {\n\n\t\t\tif(f.up===1) data.push({ pos:[0, s[1]*0.5-mw, 0], size:[s[0], w, s[2]] });\n\t\t\tif(f.down===1) data.push({ pos:[0, mw-s[1]*0.5, 0], size:[s[0], w, s[2]] });\n\n\t\t\tif(f.left===1) data.push({ pos:[mw-s[0]*0.5, 0, 0 ], size:[w, s[1]-xw, s[2]] });\n\t\t\tif(f.right===1) data.push({ pos:[s[0]*0.5-mw, 0, 0 ], size:[w, s[1]-xw, s[2]] });\n\n\t\t\tif(f.back===1) data.push({ pos:[0, 0, mw-s[2]*0.5], size:[s[0]-xw, s[1]-xw, w] });\n\t\t\tif(f.front===1) data.push({ pos:[0, 0, s[2]*0.5-mw], size:[s[0]-xw, s[1]-xw, w] });\n\n\t\t}\n\n\t\t\n\n\t\tconst faces = [];\n\t\tlet i = data.length, n=0, pp, d;\n\n\t\twhile( i-- ){\n\n\t\t\td = data[n];\n\t\t\tpp = this.isCompound ? d.pos : MathTool.addArray(p, d.pos);\n\t\t\tfaces.push( { type:'box', size:d.size, pos:pp, material:o.material } );\n\t\t\tn++;\n\n\t\t}\n\n\t\t\n\n\t\tif( this.isCompound ){\n\t\t\tlet mesh = null;\n\t\t\tif( this.remplace ){\n\t\t\t\tif(o.radius===0) mesh = new Mesh( new BoxGeometry( s[ 0 ], s[ 1 ], s[ 2 ] ) );\n\t\t\t\telse mesh = new Mesh( new ChamferBox( s[ 0 ], s[ 1 ], s[ 2 ], o.radius || mw ) );\n\n\t\t\t\tif(o.material){\n\t\t\t\t\tif(o.material === 'debug'){ \n\t\t\t\t\t\tmesh = new BoxHelper( mesh, o.color );\n\t\t\t\t\t\to.material = 'line';\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\troot.motor.add({\n\t\t\t\t...o,\n\t\t\t\tmesh:mesh,\n\t\t\t\tshapes:faces,\n\t\t        type:'compound',\n\t\t    });\n\t\t} else {\n\t\t\troot.motor.add( faces );\n\t\t}\n\t\t\n\t}\n\n}\n\n//----------------\n//  MOUSE TOOL \n//----------------\n\nclass MouseTool {\n\n\tconstructor ( controler, mode = 'drag' ) {\n\n\t\tthis.needRay = false;\n\n\t\t//this.tmpSelected = null\n\n\t\t//root.viewSize = { w:window.innerWidth, h:window.innerHeight, r:0}\n\t\t//root.viewSize.r = root.viewSize.w/root.viewSize.h\n\n\t\tthis.moveDirect = false;\n\t\tthis.moveDeep = false;\n\n\t\tthis.mode = mode;\n\t\tthis.option = {};\n\n\t\tthis.overObj = null;\n\n\t\tthis.controler = controler;\n\t\tthis.dom = this.controler.domElement;\n\n\t\t//this.dom.style.cursor =  \"url('./assets/icons/logo.png'), move\";\n\n\t\tthis.selected = null;\n\t\tthis.buttonRef = null;\n\t\tthis.release = false;\n\n\t\tthis.numBullet = 0;\n\t\tthis.maxBullet = 10;\n\n\t\tthis.sticky = false;\n\n\t\tthis.pz = 0;\n\n\t\tthis.isActive = false;\n\t\tthis.raycastTest = false;\n\t\tthis.firstSelect = false;\n\t\tthis.mouseDown = false;\n\t\tthis.mouseDown2 = false;\n\t\tthis.mouseMove = false;\n\t\t//this.controlFirst = true;\n\n\t\tthis.decal = new Vector3();\n\t\tthis.tmpPos = new Vector3();\n\t\tthis.tmpD = new Vector3();\n\n\t\tthis.mouse = new Vector2();\n\t\tthis.oldMouse = new Vector2();\n\t\tthis.raycast = new Raycaster();\n\t\tthis.raycast.far = 1000;\n\n\t\tthis.button = 0;\n\n\t\tthis.pos = new Vector3();\n\t\tthis.velocity = new Vector3();\n\t\tthis.angle = 0;\n\n\t\tthis.helper = null;\n\t\tthis.dragPlane = null;\n\t\tthis.overLock = false;\n\n\t    //if( this.mode === 'drag' ) \n\t    this.activeDragMouse( true );\n\n\t}\n\n\taddDrag(){\n\n\t\tif( this.dragPlane ) return\n\n\t\t//this.overLock = true;\n\n\t\tthis.helper = new MoveHelper();\n\t\tthis.dragPlane = new Mesh( new PlaneGeometry( 1, 1 ), Mat.get('hide') );\n\t    this.dragPlane.castShadow = false;\n\t    this.dragPlane.receiveShadow = false;\n\t    this.dragPlane.scale.set( 1, 1, 1 ).multiplyScalar( 200 );\n\n\t    root.scenePlus.add( this.helper );\n\t    root.scenePlus.add( this.dragPlane );\n\n\t}\n\n\tclearDrag(){\n\n\t\tif( !this.dragPlane ) return\n\n\t\t//this.overLock = false;\n\n\t\troot.scenePlus.remove( this.dragPlane );\n\t\troot.scenePlus.remove( this.helper );\n\n\t\tthis.dragPlane.geometry.dispose();\n\t\tthis.helper.geometry.dispose();\n\n\t\tthis.dragPlane = null;\n\t\tthis.helper = null;\n\n\t}\n\n    setMode ( mode, o = {} ) {\n\n    \tif( mode === this.mode ) return\n    \tthis.mode = mode;\n        this.option = o;\n\n        if( this.mode === 'blast' && this.option.visible ) root.motor.initParticle();\n\n    }\n\n\tactiveDragMouse ( b ) {\n\n\t\tif( b ){\n\t\t\tif( !this.isActive ){\n\t\t\t\tthis.dom.addEventListener( 'pointermove', this.mousemove.bind(this), false );\n\t\t        this.dom.addEventListener( 'pointerdown', this.mousedown.bind(this), false );\n\t\t        document.addEventListener( 'pointerup', this.mouseup.bind(this), false );\n\t\t        //document.addEventListener( 'contextmenu', this.contextmenu.bind(this), false )\n\n\t\t        this.controler.addEventListener( 'end', this.controleEnd.bind(this), false );\n\t\t        this.controler.addEventListener( 'start', this.controleStart.bind(this), false );\n\t\t        //this.controler.addEventListener( 'change', this.controleChange.bind(this), false )\n\n\t\t        this.isActive = true;\n\t\t        this.raycastTest = true;\n\t\t    }\n\n\t\t} else {\n\t\t\tif( this.isActive ){\n\t\t\t\tthis.dom.removeEventListener( 'pointermove', this.mousemove.bind(this) );\n\t\t\t    this.dom.removeEventListener( 'pointerdown', this.mousedown.bind(this) );\n\t\t\t    document.removeEventListener( 'pointerup', this.mouseup.bind(this) );\n\n\t\t\t    this.controler.removeEventListener( 'end', this.controleEnd.bind(this) );\n\t\t\t    this.controler.removeEventListener( 'start', this.controleStart.bind(this), false );\n\t\t        //this.controler.removeEventListener( 'change', this.controleChange.bind(this) )\n\n\t\t\t    this.isActive = false;\n\t\t\t}\n\t\t}\n\t}\n\n\tcontroleEnd ( e ) {\n\t\t//this.controlFirst = true\n\t\tthis.raycastTest = true;\n\t\tif( this.controler.getInfo ) this.controler.getInfo();\n\t}\n\n\tcontroleStart ( e ) {\n\t\tthis.raycastTest = false;\n\t}\n\n\tcontroleChange ( e ) {\n\n\t\t\n\n\t\t\n\n\t\t//let state = this.controler.getState();\n\n\t\t//if( state !== -1 ) this.raycastTest = false;\n\n\t\t/*let state = this.controler.getState();\n\t\tconsole.log(state)\n\t\tif( state !== -1 ){\n\t\t\tif( this.controlFirst ) this.controlFirst = false;\n\t\t\telse this.raycastTest = false;\n\t\t}*/\n\n\t\t//this.controler.getInfo();\n\t}\n\n\tgetMouse ( e ) {\n\n\t\tif(root.viewSize){\n\t\t\tthis.mouse.x =   ( e.offsetX / root.viewSize.w ) * 2 - 1;\n\t\t    this.mouse.y = - ( e.offsetY / root.viewSize.h ) * 2 + 1;\n\t\t} else {\n\t\t\tthis.mouse.x =   ( e.offsetX / this.dom.clientWidth ) * 2 - 1;\n\t\t\tthis.mouse.y = - ( e.offsetY / this.dom.clientHeight ) * 2 + 1;\n\t\t}\n\n\t\t//console.log(e.button)\n\t\t\n\t\tthis.button = e.pointerType !== 'touch' ? e.button : 0;\n\t\t//if(this.button===2)this.moveDeep = !this.moveDeep\n\n\t}\n\n\tcontextmenu ( e ) {\n\t\t//e.preventDefault();\n\t\t//this.mouseDown2 = true\n\t\t//this.controler.enabled = false;\n\t\t/*if( this.mouseDown ){\n\n\t\t\t//this.moveDeep = true\n\t\t\tconsole.log('yo ')\n\t\t}*/\n\t}\n\n\tmousedown ( e ) {\n\n\t\tif( this.sticky ){ \n\t\t\tthis.unSelect();\n\t\t\tconsole.log('unstick');\n\t\t}\n\n\t\tthis.getMouse( e );\n\t\t//this.overLock = true;\n\n\t\tswitch( this.mode ){\n\n\t\t\tcase 'drag': this.drag(); break;\n\t\t\tcase 'shoot': this.shoot(); break;\n\t\t\tcase 'blast': this.blast(); break;\n\t\t\tcase 'build': this.build(); break;\n\n\t\t}\n\n\t}\n\n\tmouseup ( e ) {\n\n\t\t//console.log('up')\n\n\t\tthis.release = true;\n\t\t//this.overLock = false;\n\n\t\tdocument.body.style.cursor = 'auto';\n\n\t\tthis.mouseMove = this.oldMouse.distanceTo( this.mouse ) < 0.01 ? false : true;\n\t\tthis.mouseDown = false;\n\t\tthis.mouseDown2 = false;\n\t\troot.mouseDown = false;\n\n\n\n\t\tif( this.sticky ) { this.controler.enabled = true; return; }\n\n\t\tthis.unSelect();\n\t\tthis.resetButton();\n\n\t}\n\n\tmousemove ( e ) {\n\n\t\t//if( this.release ) this.release = false;\n\n\t\tswitch( this.mode ){\n\n\t\t\tcase 'drag':\n\t\t\tthis.getMouse( e );\n\t\t\tthis.needRay = true;\n\t\t    //this.castray()\n\t\t\tbreak\n\n\t\t}\n\n\t}\n\n\tcastray () {\n\n\t\tlet inters, m, g, h, id, cursor = 'auto';\n\n\t\tif( this.selected !== null ){\n\n\t\t\tthis.raycast.setFromCamera( this.mouse, this.controler.object );\n\t\t\tinters = this.raycast.intersectObject( this.dragPlane );\n\t\t\tif ( inters.length && this.mouseDown ){ \n\t\t\t\tthis.moveSelect( inters[0].point );\n\t\t\t\t//if( this.moveDirect ) root.motor.change({ name:this.selected.name, pos:inters[0].point.toArray() }, true )\n\t\t\t\t//else root.motor.change({ name:'mouse', pos:inters[0].point.toArray() }, true )\n\t\t\t}\n\t\t\t//return\n\t\t} else {\n\n\t\t\tif( !this.raycastTest ) return;\n\n\t\t\t//this.controler.enabled = false\n\n\t\t\tthis.controler.enableRotate = false;\n\t\t\tthis.controler.enablePan = false;\n\n\t\t\tthis.raycast.setFromCamera( this.mouse, this.controler.object );\n\n\t\t\tinters = this.raycast.intersectObjects( root.scene.children, true );\n\n\t\t\tthis.tmpSelected = null;\n\n\t\t\tif ( inters.length > 0 ) {\n\n\t\t\t\tg = inters[ 0 ].object;\n\t\t\t\tid = inters[ 0 ].instanceId;\n\n\t\t\t\t//console.log(inters[ 0 ])\n\n\t\t\t\tif( id !== undefined ){\n\t\t\t\t\t// is instance mesh\n\t\t\t\t\tm = root.motor.byName( g.getByName( id ) );\n\t\t\t\t\t//m = root.motor.byName( g.name+id );\n\t\t\t\t} else {\n\t\t\t\t\tif( g.parent !== root.scene ){\n\t\t\t\t\t\th = g.parent;\n\t\t\t\t\t\tif( h.parent !== root.scene ) m = h.parent;\n\t\t\t\t\t\telse m = h;\n\t\t\t\t\t} else m = g;\n\t\t\t\t}\n\n\t\t\t\tif( this.mouseDown2 ){\n\t\t\t\t\tif( m.extra ) m.extra( m.name );\n\t\t\t\t\t//console.log(m)\n\t\t\t\t}\n\n\t\t\t\tif( m && !m.isButton ){\n\t\t\t\t\tcursor = this.select( m, inters[ 0 ].point );\n\t\t\t\t\t//this.tmpSelected = m\n\t\t\t\t\t//this.tmpPoint = inters[ 0 ].point\n\t\t\t\t}\n\t\t\t\telse cursor = this.actionButton( m, inters[ 0 ] );\n\t\t\t\t//document.body.style.cursor = cursor\n\n\t\t\t} else {\n\n\t\t\t\tthis.resetOver();\n\t\t\t\tthis.controler.enableRotate = true;\n\t\t\t\tthis.controler.enablePan = true;\n\t\t\t\t\n\t\t\t\t//this.controler.enabled = true\n\t\t\t}\n\n\t\t\t//console.log(this.release, cursor)\n\t\t\tif( this.release ){\n\t\t\t\tthis.release = false;\n\t\t\t\tthis.controler.enableRotate = true;\n\t\t\t\tthis.controler.enablePan = true;\n\t\t\t\tcursor = 'auto';\n\t\t\t\tthis.resetOver();\n\t\t\t\t\n\t\t\t}\n\n\t\t\tdocument.body.style.cursor = cursor;\n\t\t}\n\n\t}\n\n\tdrag () {\n\n\t\tif( !this.mouseDown ){\n\t\t\tif( this.firstSelect ) this.firstSelect = false;\n\t\t\tthis.oldMouse.copy( this.mouse );\n\t\t}\n\n\t\tif( this.button === 2 ){\n\t\t    this.mouseDown2 = true;\n\t\t    //this.castray()\n\t\t}\n\n\t    //if( this.button === 0 ){\n\t\t    this.mouseDown = true;\n\t\t    root.mouseDown = true;\n\t\t    this.needRay = true;\n\n\t\t    //if(this.tmpSelected!== null) this.select(this.tmpSelected, this.tmpPoint )\n\t\t    //this.castray()\n\t\t//}\n\n\t\t\n\n\t}\n\n\tblast () {\n\n\t\tlet hit = null;\n\t\tthis.raycast.setFromCamera( this.mouse, this.controler.object );\n\t\tlet inters = this.raycast.intersectObjects( root.scene.children, true );\n\n\t\tif ( inters.length > 0 ) {\n\n\t\t\tif( !inters[ 0 ].object.isButton ) hit = inters[ 0 ];\n\t\t\telse inters[ 0 ].object.parent.userData.direct();\n\t\t\t\t\n\t\t} else {\n\t\t\tinters = this.raycast.intersectObjects( root.scenePlus.children, true );\n\t\t\tif ( inters.length > 0 ) hit = inters[ 0 ];\n\t\t}\n\n\t    const o = this.option;\n\n\t\tif(hit){ \n\n\t\t\troot.motor.explosion( hit.point, o.radius || 3, o.power || 0.1 );\n\n\t\t\tif( o.visible ) root.motor.addParticle({\n\t\t\t\tname:'blast',\n\t\t\t\ttype:\"cube\",\n\t\t\t\tposition:hit.point.toArray(),\n\t\t\t\tnumParticles: 60,\n\t\t\t\tradius:0.2,\n\t\t\t\tradiusRange:0.1,\n\t\t\t\t//accelerationRange:[0.3,0.3,0.3],\n\t\t\t\tacceleration:[5*10,5,5*10],\n\t\t\t\tlifeTime: 0.5,\n\t\t        endTime: 0.5,\n\t\t        startTime: 0,\n\t\t        gravity:[0,0.2,0],\n\t\t        startSize: 0.5,\n\t\t        endSize: 0.1,\n\t\t        //spinSpeedRange:2,\n\t\t        tween:\"outQuad\",\n\t\t        //velocityRange: [ 0.6, 0.6, 0.6 ]\n\t\t        //lifeTimeRange:1,\n\t\t        //startTime: 0,\n\t\t        //startSize: 0.1,\n\n\t\t\t});\n\t\t}\n\t\t\n\n\t}\n\n\tshoot () {\n\n\t\tthis.raycast.setFromCamera( this.mouse, this.controler.object );\n\t\tthis.pos.copy( this.raycast.ray.direction ).add(  this.raycast.ray.origin );\n\t\tthis.velocity.copy( this.raycast.ray.direction ).multiplyScalar( 60 );\n\n\t\troot.motor.add({\n\t\t\tname: 'bullet_' + this.numBullet,\n\t\t\ttype:'sphere',\n\t\t\tdensity:20,\n\t\t\tsize:[0.2], \n\t\t\tmaterial:'chrome',\n\t\t\tpos:this.pos.toArray(),\n\t\t\tlinearVelocity:this.velocity.toArray(),\n\t\t\tbullet:true,\n\t\t\t/*ccdThreshold:0.0000001,\n            ccdRadius:0.1,*/\n\t\t});\n\n\t\tthis.numBullet++;\n\t\tif(this.numBullet > this.maxBullet) this.numBullet = 0;\n\n\t}\n\n    resetButton () {\n\n\t\tif( this.buttonRef ){\n\t\t\tif( this.buttonRef.userData.out ) this.buttonRef.userData.out();\n\t\t\tthis.buttonRef = null;\n\t\t}\n\n\t\tthis.raycastTest = true;\n\t\tthis.selected = null;\n\t\tthis.firstSelect = true;\n\t\t//this.controler.enabled = true\n\t\tthis.controler.enableRotate = true;\n\t\tthis.controler.enablePan = true;\n\n\t}\n\n\tactionButton ( obj, inters ) {\n\n\t\tif( this.buttonRef ){\n\t\t\tif( this.buttonRef.name !== obj.name ){ \n\t\t\t\tif( this.buttonRef.userData.out ) this.buttonRef.userData.out();\n\t\t\t\tthis.buttonRef = obj;\n\t\t\t}\n\t\t} else {\n\t\t\tif( this.mouseDown ) this.buttonRef = obj;\n\t\t}\n\t\tif( this.mouseDown && this.buttonRef.userData.action ){ \n\t\t\tlet pos = inters.point;\n\t\t\tthis.buttonRef.userData.action( pos );\n\t\t}\n\n\t\t//if( this.mouseDown ) this.controler.enabled = false\n\t\t   \n\t\t//return 'grab'\n\t    return 'pointer'\n\n\t}\n\n\tsetOver( obj ){\n\n\t\t//if( this.overLock ) return;\n\t\tif( !obj ) return;\n\n\t\tif( this.overObj ){\n\t\t\tif( obj.name !== this.overObj.name ) this.resetOver();\n\t\t}\n\n\t\tthis.overObj = obj;\n\t\tif( this.overObj.over ) this.overObj.over(true);\n\n\t}\n\n\tresetOver(){\n\n\t\t//if( this.overLock ) return;\n\t\tif( !this.overObj ) return;\n\t\tif( this.overObj.over ) this.overObj.over( false );\n\t\tthis.overObj = null;\n\n\t}\n\n\tselect ( obj, point ) {\n\n\t\t//this.controler.enabled = false\n\n\t\t//if( this.selected !== null ) return 'pointer'\n\t\t//if( !this.mouseDown ) return 'auto'\n\t\t//if( this.selected === obj ) return 'grab'//'pointer'\n\n\t\tif( !this.mouseDown ) this.setOver( obj );\n\n\t\t\n\n\t\tif( !this.mouseDown || this.selected === obj ){\n\t\t\treturn 'grab'\n\t\t}\n\n\t\t//this.overLock = true;\n\n\n\t\tthis.pz = 0;\n\n\t\tlet pos = point;\n\t    let quat = [0,0,0,1];\n\n\t\tthis.selected = obj;\n\t\t//this.setOver( obj );\n\t\t/*if( this.selected.isInstance ) quat = this.selected.instance.getInfo( this.selected.id ).quat;\n\t\telse if( this.selected.isObject3D ){\n\t\t\tthis.selected.updateMatrix()\n\t\t\tquat = this.selected.quaternion.toArray()\n\t\t}*/\n\n\t\tthis.decal.copy( pos ).sub( this.selected.position );\n\t\tthis.tmpPos.copy( pos ).sub( this.decal );\n\t\tthis.angle = this.controler.getAzimuthalAngle();\n\n\n\t\t\n\n\t\tlet q = this.selected.quaternion;\n\t\tquat = [ q._x, q._y, q._z, q._w ];\n\n\n\t\t/*if( this.selected.isInstance ){\n\t\t\tconsole.log(this.selected)\n\t\t\treturn\n\t\t}*/\n\n\t\t/*if( this.selected.isButton ){\n\t\t\tif( this.buttonRef ){\n\t\t\t\tif(this.buttonRef.name !== this.selected.name ) this.buttonRef = obj\n\t\t\t} else {\n\t\t\t\tthis.buttonRef = obj\n\t\t\t}\n\t\t\tif( this.buttonRef.userData.action ) this.buttonRef.userData.action()\n\t\t\t    this.unSelect ()\n\t\t\treturn 'grab'\n\t\t}*/\n\n\t\tthis.addDrag();\n\n\t\t//8root.scenePlus.add( this.helper )\n\t    //root.scenePlus.add( this.dragPlane )\n\n\t    this.dragPlane.rotation.set( 0, this.angle, 0 );\n\t    this.dragPlane.position.copy( pos );\n\t    this.dragPlane.position.y = 0;\n\n\t    this.helper.position.copy( pos );\n\n\n\t    let p = pos.toArray();\n\n\t    let revert = false;\n\n\t    root.motor.change({ name: this.selected.name, neverSleep:true, wake:true });\n\t\t//Motor.add({ name:'mouse', type:'sphere', size:[0.01], pos:p, quat:quat, mask:0, density:0, noGravity:true, kinematic:true, flags:'noCollision' })\n\t\t//root.motor.add({ name:'mouse', type:'null', pos:p, quat:quat })\n\n\t\t//let def = [-0.03, 0.03, 60, 5]\n\t\t//let defr = [-3, 3, 60, 5]\n\n\t\t//let def = [-0.03, 0.03, 60, 2]\n\t\t//let defr = [-3, 3, 60, 2]\n\n\t\tif( this.moveDirect ){\n\t\t\troot.motor.change({ name:this.selected.name, kinematic:false, gravity:false, damping:[0.9,0.9]  });\n\t\t} else {\n\t\t\tlet def = [-0.1, 0.1, 600, 1];\n\t\t\tlet defr = [-0.1, 0.1, 600, 1];\n\t\t\t//let defr = [0, 0]\n\t\t\tlet notUseKinematic = root.engine === 'OIMO' || root.engine ==='RAPIER' || root.engine ==='JOLT';//|| root.engine ==='HAVOK'\n\t\t\tlet jtype = this.selected.link === 0 ? 'fixe' : 'd6';//root.engine === 'HAVOK' ? 'fixe' : 'd6';\n\n\t\t\tif( root.engine === 'JOLT' ) jtype = 'fixe';\n\n\t\t\tlet limite = [['x',...def], ['y',...def], ['z',...def], ['rx',...defr], ['ry',...defr], ['rz',...defr]];\n\n\t\t\tif( root.engine === 'HAVOK' ) limite = [ ['x',...def], ['y',...def], ['z',...def] ];\n\n\t\t\tif( root.engine === 'OIMO' ){\n\t\t\t\trevert = true;\n\t\t\t\tjtype = this.selected.link === 0 ? 'fixe' : 'spherical';\n\t\t\t\tlimite = [ ['x',...def], ['y',...def], ['z',...def] ];\n\t\t\t\t//if(this.selected.link !== 0)\n\t\t\t\t//limite = [ 4.0, 1.0 ]\n\t\t\t}\n\n\t\t\tif( root.engine === 'HAVOK' ){\n\t\t\t\trevert = true;\n\t\t\t\tjtype = this.selected.link === 0 ? 'fixe' : 'spherical';\n\t\t\t\tlimite = [ -180, 180, 0.1, 0.1 ];\n\t\t\t}\n\n\t\t\t//console.log(jtype)\n\n\t\t\troot.motor.add([\n\t\t\t\t{ \n\t\t\t\t\tname:'mouse', \n\t\t\t\t\ttype:'null', \n\t\t\t\t\tpos:p, \n\t\t\t\t\tquat:quat, \n\t\t\t\t\tkinematic:notUseKinematic ? false : true,\n\t\t\t\t\t//mass:10,///10000000,\n\t\t\t\t\t//gravityFactor:0, \n\t\t\t\t},\n\t\t\t\t{ \n\t\t\t\t\tname:'mouseJoint', type:'joint',\n\t\t\t\t\tmode:jtype,\n\t\t\t\t\tlm:limite,\n\t\t\t\t\tsd:[4.0, 1.0],\n\t\t\t\t\tautoDrive: true,\n\t\t\t\t\tb1:revert ? this.selected.name : 'mouse',\n\t\t\t\t\tb2:revert ? 'mouse' : this.selected.name,  \n\t\t\t\t\tworldAnchor: p, \n\t\t\t\t\t//worldQuat: quat,\n\n\t\t\t\t\t/*pos1: p, \n\t\t\t\t\tquat1: quat,\n\t\t\t\t\tpos2: [0,0,0], \n\t\t\t\t\tquat2: [0,0,0,1],*/\n\t\t\t\t\t//worldAxis:[1,0,0],\n\t\t\t\t\tvisible:false,\n\t\t\t\t}\n\t\t\t]);\n\n\t\t}\n\t\t\n\n\t\t//this.raycastTest = false\n\t\t//this.controler.enabled = false\n\n\t\t//document.body.style.cursor = 'move'\n\n\t\treturn \"grabbing\"//\"url('./assets/icons/point.png') 8 8, move\" //'move'\n\n\t}\n\n\tmoveSelect ( point ) {\n\n\t\tif( this.selected === null ) return\n\n\t\t//this.setTmpOver( this.selected )\n\n\t\tif( point ){ \n\t\t\tthis.tmpPos.copy( point ).sub( this.decal ); \n\t\t}\n\n\t\tif( this.moveDeep ){ // Z deep move\n\n\t\t\tlet y = this.selected.position.y;\n\t\t\tlet diff  = y-this.tmpPos.y;\n\t\t\tthis.tmpPos.y = y;\n\t\t\tthis.tmpD.set(0,0,diff).applyAxisAngle({x:0, y:1, z:0}, this.angle);\n\t\t\tthis.tmpPos.add( this.tmpD );\n\n\t\t}\n\n\t\tthis.helper.position.copy( this.tmpPos );\n\n\t\tlet pos = this.tmpPos.toArray();\n\n\t\tif( this.moveDirect ){ \n\t\t\troot.motor.change({ name:this.selected.name, pos:pos, reset:true });\n\t\t} else {\n\t\t\troot.motor.change({ name:'mouse', pos:point.toArray(), lockPos:true }, true );\n\t\t}\n\t}\n\n\tunSelect () {\n\n\t\tif( this.selected === null ) return\n\n\t\tthis.resetOver();\n\t\tthis.clearDrag();\n\n\t\tif( this.moveDirect ){\n\t\t\troot.motor.change({ name:this.selected.name, kinematic:false, wake:true, gravity:true, damping:[0,0.1] });\n\t\t} else {\n\t\t\troot.motor.remove(['mouseJoint','mouse']);\n\t\t\troot.motor.change({ name:this.selected.name, neverSleep:false, wake:true });\n\t\t}\n\t\t\n\t\tthis.raycastTest = true;\n\t\tthis.selected = null;\n\t\tthis.firstSelect = true;\n\t\t\n\t\t//this.controler.enabled = true\n\n\t}\n\n\tstep(){\n\n\t\tif( this.needRay ) this.castray();\n\t    this.needRay = false;\n\n\t\tif( this.selected === null ) return\n\n\t\tlet key = root.flow.key;\n\n\n\t\tif( key[1] !== 0 ){\n\t\t\tlet pz = key[1] * 0.1;\n\t\t\tthis.dragPlane.translateZ(pz);\n\t\t\tthis.needRay = true;\n\t\t}\n\n\n\n\t\t//this.castray()\n\t\tif( this.moveDirect ) this.moveSelect();\n\n\t\t\n\n\t}\n\n\n}\n\n\n\n\n\n\nclass MoveHelper extends Line {\n\n\tconstructor( o = {} ) {\n\n\t\tsuper( new BufferGeometry(), Mat.get('line') );\n\n\t\tlet c = 0.75;\n\n\t\tconst positions = [0,0,0, 0,-100,0];\n\t    const colors = [c,c,c, 0,0,0];\n\n\t    //this.geometry = new BufferGeometry();\n\t    this.geometry.setAttribute( 'position', new Float32BufferAttribute( positions, 3 ) );\n\t    this.geometry.setAttribute( 'color', new Float32BufferAttribute( colors, 3 ) );\n\t    //this.geometry.computeBoundingSphere();\n\n\t    this.vertices = this.geometry.attributes.position;\n\t    this.colors = this.geometry.attributes.color;\n\t    this.local = [ 0, 0, 0, 0, 0, 0, 0, 0, 0 ];\n\n\t    //this.matrixAutoUpdate = false;\n\t    this.frustumCulled = false;\n\n\t}\n}\n\n/**\n * @fileoverview This class can be used to subdivide a convex Geometry object into pieces.\n *\n * Usage:\n *\n * Use the function prepareBreakableObject to prepare a Mesh object to be broken.\n *\n * Then, call the various functions to subdivide the object (subdivideByImpact, cutByPlane)\n *\n * Sub-objects that are product of subdivision don't need prepareBreakableObject to be called on them.\n *\n * Requisites for the object:\n *\n *  - Mesh object must have a buffer geometry and a material\n *\n *  - Vertex normals must be planar (not smoothed)\n *\n *  - The geometry must be convex (this is not checked in the library). You can create convex\n *  geometries with ConvexGeometry. The BoxGeometry, SphereGeometry and other convex primitives\n *  can also be used.\n *\n * Note: This lib adds member variables to object's userData member (see prepareBreakableObject function)\n * Use with caution and read the code when using with other libs.\n *\n * @param {double} minSizeForBreak Min size a debris can have to break.\n * @param {double} smallDelta Max distance to consider that a point belongs to a plane.\n *\n*/\n\nconst _v1 = new Vector3();\n\nclass ConvexObjectBreaker {\n\n\tconstructor( minSizeForBreak = 1.4, smallDelta = 0.0001 ) {\n\n\t\tthis.minSizeForBreak = minSizeForBreak;\n\t\tthis.smallDelta = smallDelta;\n\n\t\tthis.tempLine1 = new Line3();\n\t\tthis.tempPlane1 = new Plane();\n\t\tthis.tempPlane2 = new Plane();\n\t\tthis.tempPlane_Cut = new Plane();\n\t\tthis.tempCM1 = new Vector3();\n\t\tthis.tempCM2 = new Vector3();\n\t\tthis.tempVector3 = new Vector3();\n\t\tthis.tempVector3_2 = new Vector3();\n\t\tthis.tempVector3_3 = new Vector3();\n\t\tthis.tempVector3_P0 = new Vector3();\n\t\tthis.tempVector3_P1 = new Vector3();\n\t\tthis.tempVector3_P2 = new Vector3();\n\t\tthis.tempVector3_N0 = new Vector3();\n\t\tthis.tempVector3_N1 = new Vector3();\n\t\tthis.tempVector3_AB = new Vector3();\n\t\tthis.tempVector3_CB = new Vector3();\n\t\tthis.tempResultObjects = { object1: null, object2: null };\n\n\t\tthis.box1 = new Box3();\n\t\tthis.box2 = new Box3();\n\n\t\tthis.sph1 = new Sphere();\n\t\tthis.sph2 = new Sphere();\n\n\t\tthis.tt = new Vector3();\n\t\tthis.s1 = new Vector3();\n\t\tthis.s2 = new Vector3();\n\n\n\t\tthis.segments = [];\n\t\tconst n = 30 * 30;\n\t\tfor ( let i = 0; i < n; i ++ ) this.segments[ i ] = false;\n\n\t}\n\n\tprepareBreakableObject( object, mass, velocity, angularVelocity, breakable ) {\n\n\t\t// object is a Object3d (normally a Mesh), must have a buffer geometry, and it must be convex.\n\t\t// Its material property is propagated to its children (sub-pieces)\n\t\t// mass must be > 0\n\n\t\tconst userData = object.userData;\n\t\tuserData.mass = mass;\n\t\tuserData.velocity = velocity.clone();\n\t\tuserData.angularVelocity = angularVelocity.clone();\n\t\tuserData.breakable = breakable;\n\n\t}\n\n\t/*\n\t * @param {int} maxRadialIterations Iterations for radial cuts.\n\t * @param {int} maxRandomIterations Max random iterations for not-radial cuts\n\t *\n\t * Returns the array of pieces\n\t */\n\tsubdivideByImpact( object, pointOfImpact, normal, maxRadialIterations, maxRandomIterations ) {\n\n\t\tconst debris = [];\n\n\t\tconst tempPlane1 = this.tempPlane1;\n\t\tconst tempPlane2 = this.tempPlane2;\n\n\t\tthis.tempVector3.addVectors( pointOfImpact, normal );\n\t\ttempPlane1.setFromCoplanarPoints( pointOfImpact, object.position, this.tempVector3 );\n\n\t\tconst maxTotalIterations = maxRandomIterations + maxRadialIterations;\n\n\t\tconst scope = this;\n\n\t\tfunction subdivideRadial( subObject, startAngle, endAngle, numIterations ) {\n\n\t\t\tif ( Math.random() < numIterations * 0.05 || numIterations > maxTotalIterations ) {\n\n\t\t\t\tdebris.push( subObject );\n\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t\tlet angle = Math.PI;\n\n\t\t\tif ( numIterations === 0 ) {\n\n\t\t\t\ttempPlane2.normal.copy( tempPlane1.normal );\n\t\t\t\ttempPlane2.constant = tempPlane1.constant;\n\n\t\t\t} else {\n\n\t\t\t\tif ( numIterations <= maxRadialIterations ) {\n\n\t\t\t\t\tangle = ( endAngle - startAngle ) * ( 0.2 + 0.6 * Math.random() ) + startAngle;\n\n\t\t\t\t\t// Rotate tempPlane2 at impact point around normal axis and the angle\n\t\t\t\t\tscope.tempVector3_2.copy( object.position ).sub( pointOfImpact ).applyAxisAngle( normal, angle ).add( pointOfImpact );\n\t\t\t\t\ttempPlane2.setFromCoplanarPoints( pointOfImpact, scope.tempVector3, scope.tempVector3_2 );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tangle = ( ( 0.5 * ( numIterations & 1 ) ) + 0.2 * ( 2 - Math.random() ) ) * Math.PI;\n\n\t\t\t\t\t// Rotate tempPlane2 at object position around normal axis and the angle\n\t\t\t\t\tscope.tempVector3_2.copy( pointOfImpact ).sub( subObject.position ).applyAxisAngle( normal, angle ).add( subObject.position );\n\t\t\t\t\tscope.tempVector3_3.copy( normal ).add( subObject.position );\n\t\t\t\t\ttempPlane2.setFromCoplanarPoints( subObject.position, scope.tempVector3_3, scope.tempVector3_2 );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// Perform the cut\n\t\t\tscope.cutByPlane( subObject, tempPlane2, scope.tempResultObjects );\n\n\t\t\tconst obj1 = scope.tempResultObjects.object1;\n\t\t\tconst obj2 = scope.tempResultObjects.object2;\n\n\t\t\tif ( obj1 ) {\n\n\t\t\t\tsubdivideRadial( obj1, startAngle, angle, numIterations + 1 );\n\n\t\t\t}\n\n\t\t\tif ( obj2 ) {\n\n\t\t\t\tsubdivideRadial( obj2, angle, endAngle, numIterations + 1 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tsubdivideRadial( object, 0, 2 * Math.PI, 0 );\n\n\t\treturn debris;\n\n\t}\n\n\tcutByPlane( object, plane, output ) {\n\n\t\tlet k;\n\n\t\t// Returns breakable objects in output.object1 and output.object2 members, the resulting 2 pieces of the cut.\n\t\t// object2 can be null if the plane doesn't cut the object.\n\t\t// object1 can be null only in case of internal error\n\t\t// Returned value is number of pieces, 0 for error.\n\n\t\tconst geometry = object.geometry;\n\t\tconst coords = geometry.attributes.position.array;\n\t\tconst normals = geometry.attributes.normal.array;\n\n\t\tconst numPoints = coords.length / 3;\n\t\tlet numFaces = numPoints / 3;\n\n\t\tlet indices = geometry.getIndex();\n\n\t\tif ( indices ) {\n\n\t\t\tindices = indices.array;\n\t\t\tnumFaces = indices.length / 3;\n\n\t\t}\n\n\t\tfunction getVertexIndex( faceIdx, vert ) {\n\n\t\t\t// vert = 0, 1 or 2.\n\n\t\t\tconst idx = faceIdx * 3 + vert;\n\n\t\t\treturn indices ? indices[ idx ] : idx;\n\n\t\t}\n\n\t\tconst points1 = [];\n\t\tconst points2 = [];\n\n\t\tconst delta = this.smallDelta;\n\n\t\t// Reset segments mark\n\t\tconst numPointPairs = numPoints * numPoints;\n\t\tfor ( let i = 0; i < numPointPairs; i ++ ) this.segments[ i ] = false;\n\n\t\tconst p0 = this.tempVector3_P0;\n\t\tconst p1 = this.tempVector3_P1;\n\t\tconst n0 = this.tempVector3_N0;\n\t\tconst n1 = this.tempVector3_N1;\n\n\t\t// Iterate through the faces to mark edges shared by coplanar faces\n\t\tfor ( let i = 0; i < numFaces - 1; i ++ ) {\n\n\t\t\tconst a1 = getVertexIndex( i, 0 );\n\t\t\tconst b1 = getVertexIndex( i, 1 );\n\t\t\tconst c1 = getVertexIndex( i, 2 );\n\n\t\t\t// Assuming all 3 vertices have the same normal\n\t\t\tn0.set( normals[ a1 ], normals[ a1 ] + 1, normals[ a1 ] + 2 );\n\n\t\t\tfor ( let j = i + 1; j < numFaces; j ++ ) {\n\n\t\t\t\tconst a2 = getVertexIndex( j, 0 );\n\t\t\t\tconst b2 = getVertexIndex( j, 1 );\n\t\t\t\tconst c2 = getVertexIndex( j, 2 );\n\n\t\t\t\t// Assuming all 3 vertices have the same normal\n\t\t\t\tn1.set( normals[ a2 ], normals[ a2 ] + 1, normals[ a2 ] + 2 );\n\n\t\t\t\tconst coplanar = 1 - n0.dot( n1 ) < delta;\n\n\t\t\t\tif ( coplanar ) {\n\n\t\t\t\t\tif ( a1 === a2 || a1 === b2 || a1 === c2 ) {\n\n\t\t\t\t\t\tif ( b1 === a2 || b1 === b2 || b1 === c2 ) {\n\n\t\t\t\t\t\t\tthis.segments[ a1 * numPoints + b1 ] = true;\n\t\t\t\t\t\t\tthis.segments[ b1 * numPoints + a1 ] = true;\n\n\t\t\t\t\t\t}\telse {\n\n\t\t\t\t\t\t\tthis.segments[ c1 * numPoints + a1 ] = true;\n\t\t\t\t\t\t\tthis.segments[ a1 * numPoints + c1 ] = true;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\telse if ( b1 === a2 || b1 === b2 || b1 === c2 ) {\n\n\t\t\t\t\t\tthis.segments[ c1 * numPoints + b1 ] = true;\n\t\t\t\t\t\tthis.segments[ b1 * numPoints + c1 ] = true;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\t// Transform the plane to object local space\n\t\tconst localPlane = this.tempPlane_Cut;\n\t\tobject.updateMatrix();\n\t\tConvexObjectBreaker.transformPlaneToLocalSpace( plane, object.matrix, localPlane );\n\n\t\t// Iterate through the faces adding points to both pieces\n\t\tfor ( let i = 0; i < numFaces; i ++ ) {\n\n\t\t\tconst va = getVertexIndex( i, 0 );\n\t\t\tconst vb = getVertexIndex( i, 1 );\n\t\t\tconst vc = getVertexIndex( i, 2 );\n\n\t\t\tfor ( let segment = 0; segment < 3; segment ++ ) {\n\n\t\t\t\tconst i0 = segment === 0 ? va : ( segment === 1 ? vb : vc );\n\t\t\t\tconst i1 = segment === 0 ? vb : ( segment === 1 ? vc : va );\n\n\t\t\t\tconst segmentState = this.segments[ i0 * numPoints + i1 ];\n\n\t\t\t\tif ( segmentState ) continue; // The segment already has been processed in another face\n\n\t\t\t\t// Mark segment as processed (also inverted segment)\n\t\t\t\tthis.segments[ i0 * numPoints + i1 ] = true;\n\t\t\t\tthis.segments[ i1 * numPoints + i0 ] = true;\n\n\t\t\t\tp0.set( coords[ 3 * i0 ], coords[ 3 * i0 + 1 ], coords[ 3 * i0 + 2 ] );\n\t\t\t\tp1.set( coords[ 3 * i1 ], coords[ 3 * i1 + 1 ], coords[ 3 * i1 + 2 ] );\n\n\t\t\t\t// mark: 1 for negative side, 2 for positive side, 3 for coplanar point\n\t\t\t\tlet mark0 = 0;\n\n\t\t\t\tlet d = localPlane.distanceToPoint( p0 );\n\n\t\t\t\tif ( d > delta ) {\n\n\t\t\t\t\tmark0 = 2;\n\t\t\t\t\tpoints2.push( p0.clone() );\n\n\t\t\t\t} else if ( d < - delta ) {\n\n\t\t\t\t\tmark0 = 1;\n\t\t\t\t\tpoints1.push( p0.clone() );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tmark0 = 3;\n\t\t\t\t\tpoints1.push( p0.clone() );\n\t\t\t\t\tpoints2.push( p0.clone() );\n\n\t\t\t\t}\n\n\t\t\t\t// mark: 1 for negative side, 2 for positive side, 3 for coplanar point\n\t\t\t\tlet mark1 = 0;\n\n\t\t\t\td = localPlane.distanceToPoint( p1 );\n\n\t\t\t\tif ( d > delta ) {\n\n\t\t\t\t\tmark1 = 2;\n\t\t\t\t\tpoints2.push( p1.clone() );\n\n\t\t\t\t} else if ( d < - delta ) {\n\n\t\t\t\t\tmark1 = 1;\n\t\t\t\t\tpoints1.push( p1.clone() );\n\n\t\t\t\t}\telse {\n\n\t\t\t\t\tmark1 = 3;\n\t\t\t\t\tpoints1.push( p1.clone() );\n\t\t\t\t\tpoints2.push( p1.clone() );\n\n\t\t\t\t}\n\n\t\t\t\tif ( ( mark0 === 1 && mark1 === 2 ) || ( mark0 === 2 && mark1 === 1 ) ) {\n\n\t\t\t\t\t// Intersection of segment with the plane\n\n\t\t\t\t\tthis.tempLine1.start.copy( p0 );\n\t\t\t\t\tthis.tempLine1.end.copy( p1 );\n\n\t\t\t\t\tlet intersection = new Vector3();\n\t\t\t\t\tintersection = localPlane.intersectLine( this.tempLine1, intersection );\n\n\t\t\t\t\tif ( intersection === null ) {\n\n\t\t\t\t\t\t// Shouldn't happen\n\t\t\t\t\t\tconsole.error( 'Internal error: segment does not intersect plane.' );\n\t\t\t\t\t\toutput.segmentedObject1 = null;\n\t\t\t\t\t\toutput.segmentedObject2 = null;\n\t\t\t\t\t\treturn 0;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tpoints1.push( intersection );\n\t\t\t\t\tpoints2.push( intersection.clone() );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\t// Calculate debris mass (very fast and imprecise):\n\t\tobject.userData.mass * 0.5;\n\n\t\tlet box1 = this.box1;\n\t\tlet box2 = this.box2;\n\t\tlet numPoints1 = points1.length;\n\t\tlet numPoints2 = points2.length;\n\n\t\t// reset box3\n\t\tbox1.makeEmpty();\n\t\tbox2.makeEmpty();\n\t\t\n\t\t// expand box3\n\t\tk = numPoints1;\n\t\twhile(k--) box1.expandByPoint(points1[ k ]);\n\n\t\tk = numPoints2;\n\t\twhile(k--) box2.expandByPoint(points2[ k ]);\n\t\n\t\tbox1.getBoundingSphere(this.sph1);\n\t\tbox2.getBoundingSphere(this.sph2);\n\n\t\t// Calculate debris Center of Mass Fastest\n\t\tthis.tempCM1.copy(this.sph1.center);\n\t\tthis.tempCM2.copy(this.sph2.center);\n\t\tk = numPoints1;\n\t\twhile ( k-- ) points1[ k ].sub( this.tempCM1 );\n\t\tk = numPoints2;\n\t\twhile ( k-- ) points2[ k ].sub( this.tempCM2 );\n\n\t\tthis.tempCM1.add(object.position);\n\t\tthis.tempCM2.add(object.position);\n\n\t\tbox1.getSize(this.s1);\n\t\tbox2.getSize(this.s2);\n\n\t\t// avoid too low radius\n\t\tif(2 * this.sph1.radius < this.minSizeForBreak) numPoints1 = 0;\n\t\tif(2 * this.sph2.radius < this.minSizeForBreak) numPoints2 = 0;\n\n\t\t// avoid too low size\n\t\tif(this.testSize(this.s1)) numPoints1 = 0;\n\t\tif(this.testSize(this.s2)) numPoints2 = 0;\n\n\t\t//this.tempCM1.add( object.position );\n\t\t//this.tempCM2.add( object.position )\n\n\t\t//let sizer1 = this.tt.copy(box1.max).add(box1.min).manhattanLength()\n\t\t//let sizer2 = this.tt.copy(box2.max).add(box2.min).manhattanLength()\n\n\t\t//if(sizer1<s) numPoints1 = 0\n\t\t//if(sizer2<s) numPoints2 = 0\n\t    //box1 = {x:Math.abs(box1.x), y:Math.abs(box1.y), z:Math.abs(box1.z)}\n\t    //box2 = {x:Math.abs(box2.x), y:Math.abs(box2.y), z:Math.abs(box2.z)}\n\n\t    //console.log(radius1, radius2)\n\t    //console.log(box1.manhattanLength(), box2.manhattanLength())\n\n\t    //console.log(box1, box2)\n\n\n\n\t    //console.log(sizer1, sizer2)\n\n\n\t\t//if( box1.x<s || box1.y<s || box1.z<s ) numPoints1 = 0\n\t\t//if( box2.x<s || box2.y<s || box2.z<s ) numPoints2 = 0\n\n\t\t\t//if( box1.x+box1.y+box1.z<s ) numPoints1 = 0\n\t\t\t//if( box2.x+box2.y+box2.z<s ) numPoints1 = 0\n\t\t//if( box1.manhattanLength()<s ) numPoints1 = 0\n\t\t//if( box2.manhattanLength()<s ) numPoints2 = 0\n\n\t\t//if( box1.length()<s ) numPoints1 = 0\n\t\t//if( box2.length()<s ) numPoints2 = 0\n\n\n\t\n\n\t\tlet object1 = null;\n\t\tlet object2 = null;\n\n\t\tlet numObjects = 0;\n\n\t\tif ( numPoints1 > 4 ) {\n\n\t\t\tobject1 = new Mesh( new ConvexGeometry( points1 ), object.material );\n\t\t\tobject1.position.copy( this.tempCM1 );\n\t\t\tobject1.quaternion.copy( object.quaternion );\n\n\t\t\t//this.prepareBreakableObject( object1, newMass, object.userData.velocity, object.userData.angularVelocity, 2 * radius1 > this.minSizeForBreak );\n\n\t\t\tnumObjects ++;\n\n\t\t}\n\n\t\tif ( numPoints2 > 4 ) {\n\n\n\t\t\tobject2 = new Mesh( new ConvexGeometry( points2 ), object.material );\n\t\t\tobject2.position.copy( this.tempCM2 );\n\t\t\tobject2.quaternion.copy( object.quaternion );\n\n\t\t\t//this.prepareBreakableObject( object2, newMass, object.userData.velocity, object.userData.angularVelocity, 2 * radius2 > this.minSizeForBreak );\n\n\t\t\tnumObjects ++;\n\n\t\t}\n\n\t\toutput.object1 = object1;\n\t\toutput.object2 = object2;\n\n\t\treturn numObjects;\n\n\t}\n\n\ttestSize( s ) {\n\t\tlet n = 0;\n\t\tif(s.x < 0.01 ) n++; \n\t\tif(s.y < 0.01 ) n++; \n\t\tif(s.z < 0.01 ) n++;\n\t\treturn n>1 \n\t}\n\n\tstatic transformFreeVector( v, m ) {\n\n\t\t// input:\n\t\t// vector interpreted as a free vector\n\t\t// THREE.Matrix4 orthogonal matrix (matrix without scale)\n\n\t\tconst x = v.x, y = v.y, z = v.z;\n\t\tconst e = m.elements;\n\n\t\tv.x = e[ 0 ] * x + e[ 4 ] * y + e[ 8 ] * z;\n\t\tv.y = e[ 1 ] * x + e[ 5 ] * y + e[ 9 ] * z;\n\t\tv.z = e[ 2 ] * x + e[ 6 ] * y + e[ 10 ] * z;\n\n\t\treturn v;\n\n\t}\n\n\tstatic transformFreeVectorInverse( v, m ) {\n\n\t\t// input:\n\t\t// vector interpreted as a free vector\n\t\t// THREE.Matrix4 orthogonal matrix (matrix without scale)\n\n\t\tconst x = v.x, y = v.y, z = v.z;\n\t\tconst e = m.elements;\n\n\t\tv.x = e[ 0 ] * x + e[ 1 ] * y + e[ 2 ] * z;\n\t\tv.y = e[ 4 ] * x + e[ 5 ] * y + e[ 6 ] * z;\n\t\tv.z = e[ 8 ] * x + e[ 9 ] * y + e[ 10 ] * z;\n\n\t\treturn v;\n\n\t}\n\n\tstatic transformTiedVectorInverse( v, m ) {\n\n\t\t// input:\n\t\t// vector interpreted as a tied (ordinary) vector\n\t\t// THREE.Matrix4 orthogonal matrix (matrix without scale)\n\n\t\tconst x = v.x, y = v.y, z = v.z;\n\t\tconst e = m.elements;\n\n\t\tv.x = e[ 0 ] * x + e[ 1 ] * y + e[ 2 ] * z - e[ 12 ];\n\t\tv.y = e[ 4 ] * x + e[ 5 ] * y + e[ 6 ] * z - e[ 13 ];\n\t\tv.z = e[ 8 ] * x + e[ 9 ] * y + e[ 10 ] * z - e[ 14 ];\n\n\t\treturn v;\n\n\t}\n\n\tstatic transformPlaneToLocalSpace( plane, m, resultPlane ) {\n\n\t\tresultPlane.normal.copy( plane.normal );\n\t\tresultPlane.constant = plane.constant;\n\n\t\tconst referencePoint = ConvexObjectBreaker.transformTiedVectorInverse( plane.coplanarPoint( _v1 ), m );\n\n\t\tConvexObjectBreaker.transformFreeVectorInverse( resultPlane.normal, m );\n\n\t\t// recalculate constant (like in setFromNormalAndCoplanarPoint)\n\t\tresultPlane.constant = - referencePoint.dot( resultPlane.normal );\n\n\t}\n\n}\n\nclass Breaker {\n\n\tconstructor () {\n\n\t\tthis.convexBreaker = new ConvexObjectBreaker();\n\t\tthis.tmpI = new THREE.Vector3();\n\n\t\tthis.tpos = new THREE.Vector3();\n\t\tthis.tnormal = new THREE.Vector3();\n\n\t\tthis.nDebris = 0;\n\t\tthis.maxDebris = 300;\n\n\t\tthis.tt = null;\n\n\t}\n\n\tstep () {\n\n\t\tlet p;\n\n\t\tfor( let n in root.reflow.point ){\n\n\t\t\tp = root.reflow.point[n];\n\n\t\t\t//if ( !b1.breakable && !b2.breakable ) continue;\n\n\t\t\t\n\n\t\t\tif ( p.distance !== 0 ) {\n\n\t\t\t\tthis.makeBreak( p.b1, p.pos, p.normal, p.impulse, p.v1 );\n\t\t\t\tthis.makeBreak( p.b2, p.pos, p.normal, p.impulse, p.v2 );\n\t\t\t\t\n\t\t\t} \n\t\t}\n\t}\n\n\tmakeBreak ( name, pos, normal, impulse, v ) {\n\n\t\tlet mesh = Utils.byName( name );\n\n\t\tif ( !mesh ) return;\n\t\tif ( !mesh.breakable ) return;\n\n\n\n\t\tlet breakOption = mesh.breakOption;\n\t\t//let imp = this.tmpI.fromArray( impulse ).length();\n\n\t\t//console.log( name, impulse )\n\n\t\t// not enoputh impulse to break\n\t\tif ( impulse < breakOption[ 0 ] ) return;\n\n\n\t\t//let parentMatrix = mesh.matrix.clone().invert()\n\n\t\tlet debris = this.convexBreaker.subdivideByImpact( mesh, this.tpos.fromArray(pos), this.tnormal.fromArray(normal), breakOption[ 1 ], breakOption[ 2 ] );\n\n\t\t//console.log( debris.length )\n\n\t\tif(debris.length<1) return\n\n\t\t// remove one level\n\t\tbreakOption[ 3 ] -= 1;\n\t\t\n\t\tconst eritage = {\n\t\t\tmaterial: mesh.material,\n\t\t\tlinearVelocity: [v[0], v[1], v[2]],\n\t\t\tangularVelocity: [v[3], v[4], v[5]],\n\t\t\tdensity: mesh.density,\n\t\t};\n\n\t\t// add debris\n\t\tlet list = [];\n\t\tlet i = debris.length, n = 0;\n\t\twhile ( i -- ){ \n\t\t\tlist.push( this.addDebris( debris[ n ], breakOption, eritage ) );\n\t\t\tn++;\n\t\t}\n\n        // remove original object and add debrit\n        //root.motor.remove( name, true )\n        this.tt = setTimeout( ()=>{\n        \troot.motor.remove( name );\n\t\t    root.motor.add( list );\n        }, 0 );\n\t\t\n\n\t}\n\n\taddDebris ( mesh, breakOption, eritage ) {\n\n\t\tlet breakable = breakOption[ 3 ] > 0 ? true : false;\n\n\t\tlet name = 'debris_' + (this.nDebris++);\n\n\t\tlet deb = {\n\n\t\t\t...eritage,\n\n\t\t\tname: name,\n\t\t\ttype: 'convex',\n\t\t\tshape: mesh.geometry,\n\t\t\t//size:[1,1,1],\n\t\t\tpos: mesh.position.toArray(),\n\t\t\tquat: mesh.quaternion.toArray(),\n\t\t\tbreakable: breakable,\n\t\t\tbreakOption:breakOption,\n\n\t\t};\n\n\t\t//this.nDebris++\n\t\tif( this.nDebris>this.maxDebris ) this.nDebris = 0;\n\n\n\t\treturn deb\n\n\t}\n\n}\n\n//const SPHSystem_getNeighbors_dist = new Vector3()\n\n// Temp vectors for calculation\nnew Vector3(); // Relative velocity\n\nconst SPHSystem_update_a_pressure = new Vector3();\nconst SPHSystem_update_a_visc = new Vector3();\nconst SPHSystem_update_gradW = new Vector3();\nconst SPHSystem_update_r_vec = new Vector3();\nconst SPHSystem_update_u = new Vector3();\n\n\nclass Particle {\n\n\tconstructor ( o = {} ) {\n\n\t\tthis.name = o.name  || 'ppp';\n\n\t\tthis.particles = [];\n\t    this.density = 0.01;\n\t    this.smoothingRadius = 0.2;\n\t    this.speedOfSound = 0.1;\n\t    this.viscosity = 0.03;\n\t    this.eps = 0.000001;\n\n\t    this.group = 1 << 8;\n\n\t    // Stuff Computed per particle\n\t    this.pressures = [];\n\t    this.densities = [];\n\t    this.neighbors = [];\n\n\t    this.tv = new Vector3();\n\t    this.tv2 = new Vector3();\n\n\t}\n\n\tadd( pos ){\n\n\t\tlet p = root.motor.add({ \n\n            instance:this.name,\n            type:'particle', \n            //type:'sphere',\n            flags:'noQuery',\n            size:[0.1],\n            pSize:0.03,\n            pos:pos, \n\n            inertia:[0,0,0], \n            //iterations:[10,1],\n            \n            mass:0.001, \n            //density:0.0001,\n            restitution:0.0, \n            friction:0.5, \n            //maxVelocity:[2,100],\n            damping:[0.1,0.1],\n\n            //group:this.group, \n            //mask:1|2,\n            material:'hide',\n\n        });\n\n        p.force = new Vector3();\n\n        this.particles.push( p );\n        if (this.neighbors.length < this.particles.length) {\n\t        this.neighbors.push([]);\n\t    }\n\n\t}\n\n\tconnect( link ){\n\n\t\tlet i = link.length;\n\t\tconsole.log(i);\n\t\tlet tmp = [], l, p1, p2, d = 0;\n\n\t\twhile(i--){\n\n\t\t\tl = link[i];\n\t\t\tthis.name+l[0];\n\t\t\tthis.name+l[1];\n\n\t\t\tp1 = this.particles[l[0]].position;\n\t\t\tp2 = this.particles[l[1]].position;\n\n\t\t\t//p1.y = 0\n\t\t\t//p2.y = 0\n\n\t\t\t//console.log(p1,p2)\n\n\t\t\td = this.tv.copy( p1 ).distanceTo(p2);\n\n\t\t\t\n\n\t\t\t//this.tv.copy( p2 ).sub( p1 ).multiplyScalar(0.5)\n\t\t\tthis.tv.copy( p2 ).sub( p1 );//.multiplyScalar(0.5)\n\n\t\t\t\n\n\t\t\ttmp.push({ \n\t\t\t\ttype:'distance', \n\t\t\t    helperSize:0.03, \n\t\t\t    b1:this.name+l[0], \n\t\t\t    b2:this.name+l[1], \n\t\t\t    //limit:[d - 0.01, d + 0.01], \n\t\t\t    limit:[d*0.5, d],\n\t\t\t    spring:[20, 1.0],\n\t\t\t    //spring:[0.0, 0.0],\n\t\t\t    friction:0,\n\t\t\t    /*visible:true, helperSize:0.02*/ \n\t\t    });\n\t\t    /*tmp.push({ \n\t\t    \thelperSize:0.01,\n\t\t\t    type:'spherical', \n\t\t\t    b1:b1, b2:b2, \n\t\t\t    worldAxis: n===0 ? [1,0,0] : [0,0,1],\n\t\t\t    //pos1: this.tv2.set(0,0,0).add(this.tv).toArray(),\n\t\t\t    pos2: this.tv2.set(0,0,0).sub(this.tv).toArray(),\n\t\t        limit:[-180, 180, 0.01, 10 ], //spring:[100, 0.01], \n\t\t    })\n\t\t    n++\n\t\t    if(n===2)n=0*/\n\t\t}\n\n\t\troot.motor.add(tmp);\n\n\t}\n\n\tgetPosition(){\n\n\t\tlet ar = [];\n\t\tlet i = this.particles.length, p, n;\n\t\twhile(i--){\n\n\t\t\tn = i*3;\n\t    \tp = this.particles[i];\n\t    \tar[n] = p.position.x;\n\t    \tar[n+1] = p.position.y;\n\t    \tar[n+2] = p.position.z;\n\t    }\n\n\t    return ar\n\n\t}\n\n\t\n    // Get neighbors within smoothing volume, save in the array neighbors\n    getNeighbors( particle, neighbors ) {\n\n\t    const N = this.particles.length;\n\t    const id = particle.id;\n\t    const R2 = this.smoothingRadius * this.smoothingRadius;\n\t    let distance = 0;//SPHSystem_getNeighbors_dist\n\t    for (let i = 0; i !== N; i++) {\n\t        const p = this.particles[i];\n\t        //const dx = p.position.x - particle.position.x, dy = p.position.y - particle.position.y, dz = p.position.z - particle.position.z;\n\t        distance = this.distance(p, particle );//dx * dx + dy * dy + dz * dz\n\t        if (id !== p.id && distance < R2) {\n\t            neighbors.push(p);\n\t        }\n\t    }\t\n    }\n\n    distance(p, v) {\n\t    const dx = p.position.x - v.position.x, dy = p.position.y - v.position.y, dz = p.position.z - v.position.z;\n\t    return dx * dx + dy * dy + dz * dz\n\t}\n\n    // Calculate the weight using the W(r) weightfunction\n\tw(r) {\n\t    // 315\n\t    const h = this.smoothingRadius;\n\t    return (315.0 / (64.0 * Math.PI * h ** 9)) * (h * h - r * r) ** 3\n\t}\n\n\t// calculate gradient of the weight function\n\tgradw(rVec, resultVec) {\n\n\t    const r = rVec.length();\n\t    const h = this.smoothingRadius;\n\t    resultVec.copy(rVec).multiplyScalar( (945.0 / (32.0 * Math.PI * h ** 9)) * (h * h - r * r) ** 2 );\n\t    //rVec.scale((945.0 / (32.0 * Math.PI * h ** 9)) * (h * h - r * r) ** 2, resultVec)\n\t}\n\n\t// Calculate nabla(W)\n\tnablaw(r) {\n\t    const h = this.smoothingRadius;\n\t    const nabla = (945.0 / (32.0 * Math.PI * h ** 9)) * (h * h - r * r) * (7 * r * r - 3 * h * h);\n\t    return nabla\n\t}\n\n\tupdate() {\n\n\t\tconst TMP = [];\n\n\t\tconst N = this.particles.length;\n\t    const cs = this.speedOfSound;\n\t    const eps = this.eps;\n\n\t    let i = N, j;\n\n\t   //for (let i = 0; i !== N; i++) {\n\t    while(i--){\n\n\t    \tconst p = this.particles[i]; // Current particle\n\t    \tp.force.set(0,0,0);\n            const neighbors = this.neighbors[i];\n\n            // Get neighbors\n\t\t    neighbors.length = 0;\n\t\t    this.getNeighbors(p, neighbors);\n\t\t    neighbors.push(this.particles[i]); // Add current too\n\t\t    const numNeighbors = neighbors.length;\n\n\t\t    // Accumulate density for the particle\n\t\t    let sum = 0.0;\n\t\t    j = numNeighbors;\n\t\t    while(j--){\n\t\t    //for (let j = 0; j !== numNeighbors; j++) {\n\t\t        //printf(\"Current particle has position %f %f %f\\n\",objects[id].pos.x(),objects[id].pos.y(),objects[id].pos.z());\n\t\t        const weight = this.w( this.distance( p, neighbors[j] ) );\n\t\t        sum += neighbors[j].mass * weight;\n\t\t    }\n\n\t\t    // Save\n\t\t    this.densities[i] = sum;\n\t\t    this.pressures[i] = cs * cs * (this.densities[i] - this.density);\n\n\t    }\n\n\t    // Add forces\n\n\t    // Sum to these accelerations\n\t    const a_pressure = SPHSystem_update_a_pressure;\n\t    const a_visc = SPHSystem_update_a_visc;\n\t    const gradW = SPHSystem_update_gradW;\n\t    const r_vec = SPHSystem_update_r_vec;\n\t    const u = SPHSystem_update_u;\n\n\t    i = N;\n\n\t   //for (let i = 0; i !== N; i++) {\n\t    while(i--){\n\n\t    \tconst particle = this.particles[i];\n\n\t\t    a_pressure.set(0, 0, 0);\n\t\t    a_visc.set(0, 0, 0);\n\n\t\t    // Init vars\n\t\t    let Pij;\n\t\t    let nabla;\n\n\t\t    // Sum up for all other neighbors\n\t\t    const neighbors = this.neighbors[i];\n\t\t    const numNeighbors = neighbors.length;\n\n\t\t    j = numNeighbors;\n\t\t    while(j--){\n\t\t    //for (let j = 0; j !== numNeighbors; j++) {\n\t\t    \tconst neighbor = neighbors[j];\n\n\t\t    \t// Get r once for all..\n\t\t    \tr_vec.copy(particle.position).sub(neighbor.position);\n\t\t        //particle.position.vsub(neighbor.position, r_vec)\n\t\t        const r = r_vec.length();\n\n\t\t        // Pressure contribution\n\t\t        Pij =\n\t\t          -neighbor.mass *\n\t\t          (this.pressures[i] / (this.densities[i] * this.densities[i] + eps) +\n\t\t            this.pressures[j] / (this.densities[j] * this.densities[j] + eps));\n\n\t\t        this.gradw(r_vec, gradW);\n\t\t        // Add to pressure acceleration\n\t\t        gradW.multiplyScalar(Pij); //scale(Pij, gradW)\n\t\t        a_pressure.add(gradW);//.vadd(gradW, a_pressure)\n\n\n\t\t        // Viscosity contribution\n\t\t        u.copy(neighbor.velocity).sub(particle.velocity);\n\n\t\t        /*TMP.push({\n\t\t\t    \tname:neighbor.name,\n\t\t\t    \tvelocity : u.toArray()\n\t\t\t    })*/\n\t\t        //neighbor.velocity.vsub(particle.velocity, u)\n\t\t        u.multiplyScalar((1.0 / (0.0001 + this.densities[i] * this.densities[j])) * this.viscosity * neighbor.mass);\n\t\t        nabla = this.nablaw(r);\n\t\t        u.multiplyScalar(nabla);\n\t\t        // Add to viscosity acceleration\n\t\t        a_visc.add(u);\n\n\n\t\t    }\n\n\t\t    // Calculate force\n\t\t    a_visc.multiplyScalar(particle.mass);\n\t\t    a_pressure.multiplyScalar(particle.mass);\n\n\t\t    // Add force to particles\n\n\t\t    particle.force.add(a_visc);\n            particle.force.add(a_pressure);\n\n\t\t    TMP.push({\n\t\t    \tname: particle.name,\n\t\t    \tforce: particle.force.toArray()\n\t\t    });\n            \n\t    }\n\n\t    root.motor.change(TMP);\n\n\n\n\t}\n\n}\n\n// Universal ray vehicule \n\n// ...ref\n//https://forum.babylonjs.com/t/havok-raycastvehicle/40314 \n//https://sketches.isaacmason.com/sketch/p2-es/marching-cubes-goo\n//https://github.com/isaac-mason/sketches/tree/main\n//https://playground.babylonjs.com/#8WQIA8\n//https://github.com/Jaagrav/raycast-vehicle-engine\n//https://asawicki.info/Mirror/Car%20Physics%20for%20Games/Car%20Physics%20for%20Games.html\n\nconst torad$1 = Math.PI / 180;\nconst directions = [\n    new Vector3(1, 0, 0),\n    new Vector3(0, 1, 0),\n    new Vector3(0, 0, 1)\n];\n\nconst calcRollingFriction_vel1 = new Vector3();\nconst calcRollingFriction_vel2 = new Vector3();\nconst calcRollingFriction_vel = new Vector3();\n\nconst updateFriction_surfNormalWS_scaled_proj = new Vector3();\n\nconst sideFrictionStiffness2 = 1;\nconst updateFriction_forwardWS = [];\nconst updateFriction_axle = [];\n\nconst tmpVec4 = new Vector3();\nconst tmpVec5 = new Vector3();\nconst tmpVec6 = new Vector3();\n\nnew Matrix4();\n\nclass RayCar {\n\t\n\tconstructor( o = {} ){\n\n        this.extra = {};\n\n\t\tthis.tmp = {\n\t\t\tforwardForce : 0,\n\t\t\tsteerValue : 0,\n\t\t\tsteerDirection : 0,\n\t\t\tbrakeForce : 0,\n\t\t};\n\n        this.localWheel = true;\n\n\t\tthis.maxSpeed = 70;\n\t\tthis.maxForce = 1500;\n\t\tthis.maxBrakeForce = 45;\n\t\tthis.maxSteer = 0.4;//0.6 \n\t\tthis.steeringIncrement = 0.15;\n\t\tthis.steerRecover = 0.15;\n\n\t\tthis.name = o.name || 'car';\n\t\tthis.mass = o.mass || 1000;//200;\n\t\tthis.size = o.size || [1.5, 0.7, 3.8];\n\t\tthis.pos = o.pos || [0,4,0];\n\t\tthis.rot = o.rot || [0,0,0];\n\t\tthis.friction = o.friction || 0.2;\n\t\tthis.restitution = o.restitution || 0.3;\n\t\tthis.massCenter = o.massCenter || [0,0,0];//[0,-0.2,0];\n\n        this.driveWheel = o.driveWheel || null;\n\n\n\t\t/*this.body = root.motor.add({ \n\n\t\t\ttype:'box',\n\t\t\tname:this.name,  \n\t        size:this.size, \n\t        pos:this.pos, \n\t        rot:this.rot,\n\t        friction:this.friction, \n\t        restitution:this.restitution,\n\t        neverSleep:true,\n\t        mass:this.mass,\n\t        massCenter:this.massCenter,\n\t        radius: 0.02,\n\n\t    });*/\n\n        let shape = [ { type:'box', pos:this.massCenter, size:this.size, radius: 0.02 } ];\n        if(o.shapeMesh){\n            shape = [ { type:'convex', shape:o.shapeMesh.geometry,  pos:o.shapePos || [0,0,0] } ];\n        }\n\n        this.body = root.motor.add({ \n\n            type:'compound',\n            shapes:shape,\n            name:this.name,\n            pos:this.pos,\n            rot:this.rot,\n            friction:this.friction,\n            restitution:this.restitution,\n            mass:this.mass,\n            //neverSleep:true,\n            //massInfo:true,\n\n            //shadow:false,\n\n            mesh:o.bodyMesh || null,\n            //noClone: true,\n            meshPos:o.meshPos || [0,-1.1,0],\n            material:o.material,\n            damping:[0.05,0.05],\n            debug:false,\n\n        });\n\n\t    //this.body.inertia.set( 1.416666865348816, 1.666666865348816, 0.416666716337204 );\n        this.body.inertia.set( 283.33331298828125, 333.33331298828125, 83.33332824707031 );\n\n\t    this.vehicle = new RaycastVehicle({\n\t        chassis: this.body,\n\t    });\n\n\t    /*const wheelPositions = [\n\t        new Vector3(-0.95,0,-1.8),\n\t        new Vector3(0.95,0,-1.8),\n\t        new Vector3(-0.95,0,1.8),\n\t        new Vector3(0.95,0,1.8)\n\t    ]*/\n\n        //let wy = 0\n\n        let wp = o.wheelPosition || [0.61, 0, 1.2];\n\n        const wheelPositions = [\n            new Vector3(-wp[0], wp[1], -wp[2]),\n            new Vector3(wp[0], wp[1], -wp[2]),\n            new Vector3(-wp[0], wp[1], wp[2]),\n            new Vector3(wp[0], wp[1], wp[2])\n        ];\n\n\t    const options = {\n\t        radius: o.wheelRadius || 0.31,//0.32,//0.5,\n\t        directionLocal: new Vector3(0, -1, 0),\n\t        suspensionStiffness: 100,//30\n\t        suspensionRestLength: 0.5,//0.8\n            suspensionMaxLength: 1,//2,//2\n            maxSuspensionTravel: 0.3,//0.8//0.3,\n\t        frictionSlip: 4,\n\t        dampingRelaxation: 2.3,\n\t        dampingCompression: 4.4,\n\t        maxSuspensionForce: 100000,\n\t        rollInfluence: 0.001,//0.001,\n\t        axleLocal: new Vector3(1, 0, 0),\n\t        chassisConnectionPointLocal: new Vector3(1, 1, 0),\n\t        \n\t    };\n\n        this.addParametre('frictionSlip', 4);\n        \n        this.addParametre('maxSuspensionTravel', 0.3);\n        this.addParametre('suspensionRestLength', 0.5);\n        this.addParametre('suspensionMaxLength', 1.0);\n\n        //this._frictionSlip = 4\n\n\t    wheelPositions.forEach( positionLocal => {\n\t        options.chassisConnectionPointLocal.copy( positionLocal );\n\t        this.vehicle.addWheel( options );\n\t    });\n\n        let wgeo;\n        let m1, m2;\n\n        let mat = root.motor.getMat('debug');\n\n        if( o.wheelMesh ){\n\n            /*wgeo = o.wheelMesh.geometry\n            if(o.wheelMesh2) wgeo2 = o.wheelMesh2.geometry\n            mat = o.material || mat;*/\n\n            m1 = o.wheelMesh;\n            m2 = o.wheelMesh2 ? o.wheelMesh2 : null;\n\n            if(o.material){\n                mat = o.material || mat;\n                m1.material = mat;\n                if(m2) m2.material = mat;\n            }\n\n        } else {\n\n            wgeo = new CylinderGeometry( options.radius, options.radius, o.wheelDepth || 0.2 );\n            wgeo.rotateZ( Math.PI * 0.5 );\n\n            m1 = new Mesh( wgeo, mat );\n            m2 = null;\n\n        }\n\n\t    \n\t    \n\n        this.vehicle.localWheel = this.localWheel;\n\n        if(this.localWheel){\n            this.vehicle.wheelMeshes = [ m2? m2 : m1.clone(), m1, m2? m2.clone() : m1.clone(), m1.clone() ];\n            let k = this.vehicle.wheelMeshes.length, n=0;\n            while(k--) this.body.add(this.vehicle.wheelMeshes[n++]);\n        }else {\n            m.matrixAutoUpdate = false;\n            if(m2) m2.matrixAutoUpdate = false;\n            this.vehicle.wheelMeshes = [\n                root.motor.add(m2? m2 : m.clone()),\n                root.motor.add(m),\n                root.motor.add(m2? m2.clone() : m.clone()),\n                root.motor.add(m.clone())\n            ];\n        }\n\n\t    \n\t\n\t}\n\n\tstep(){\n\n\t\tthis.tmp.forwardForce = 0;\n\t    this.tmp.brakeForce = 0;\n\t    this.tmp.steerDirection = 0;\n\n\t    let delta = root.motor.getDelta();\n\t    root.motor.getAzimut();\n\t    let key = root.motor.getKey();\n\n\t    this.tmp.forwardForce = key[1];\n\t    this.tmp.steerDirection = key[0]*-1;\n\t    this.tmp.brakeForce = key[4]===1 ? this.maxBrakeForce : 0;\n\n\t    this.tmp.steerValue += this.tmp.steerDirection * this.steeringIncrement;\n\t    this.tmp.steerValue = Math.min(Math.max(this.tmp.steerValue, -this.maxSteer), this.maxSteer);\n\t    this.tmp.steerValue *= 1-(1-Math.abs(this.tmp.steerDirection))*this.steerRecover;\n\n\t    let speed = Math.abs(this.vehicle.currentVehicleSpeedKmHour);\n\t    speed = Math.min(speed, this.maxSpeed);\n\t    (speed/this.maxSpeed)*100;\n\t    const acceleration = 1.0;//accelerationCurve.evaluate(prog)\n\t    const force = acceleration*this.tmp.forwardForce*this.maxForce;\n\t    const slipForce = 8;//-(slip*4)\n\n\t    /*this.vehicle.applyEngineForce(0, 0)\n\t    this.vehicle.applyEngineForce(0, 1)\n\t    this.vehicle.applyEngineForce(force, 2)\n\t    this.vehicle.applyEngineForce(force, 3)*/\n\n        this.vehicle.applyEngineForce(force, 0);\n        this.vehicle.applyEngineForce(force, 1);\n        this.vehicle.applyEngineForce(force, 2);\n        this.vehicle.applyEngineForce(force, 3);\n\n\t    this.vehicle.setSteeringValue(this.tmp.steerValue, 2);\n\t    this.vehicle.setSteeringValue(this.tmp.steerValue, 3);\n\n\t    this.vehicle.setBrake(this.tmp.brakeForce, 0);\n\t    this.vehicle.setBrake(this.tmp.brakeForce, 1);\n\t    this.vehicle.setBrake(0, 2);\n\t    this.vehicle.setBrake(0, 3);\n\n\t    this.vehicle.wheelInfos[0].frictionSlip = slipForce;\n\t    this.vehicle.wheelInfos[1].frictionSlip = slipForce;\n\t    this.vehicle.wheelInfos[2].frictionSlip = slipForce;\n\t    this.vehicle.wheelInfos[3].frictionSlip = slipForce;\n\n\t    this.vehicle.updateVehicle(delta);\n\n        if( this.driveWheel ){ \n            this.driveWheel.rotation.y = this.tmp.steerValue * 180 * torad$1;\n        }\n\n\t}\n\n    /*get frictionSlip (){\n        return this._frictionSlip\n    }\n\n    set frictionSlip (v){\n        this._frictionSlip = v\n        this.vehicle.setWheels({frictionSlip:this._frictionSlip})\n    }*/\n\n    addParametre( name, value ){\n\n        this.extra[ name ] = value;\n\n        Object.defineProperty( this, name, {\n            get: () => ( this.extra[ name ] ),\n            set: ( v ) => {\n                this.extra[ name ] = v;\n                if( this.vehicle ) this.vehicle.setWheels( name, this.extra[ name ] );\n            }\n        });\n    }\n\n}\n\n\n\n\n\nclass RaycastVehicle {\n\n    constructor( o ){\n\n        this.chassisBody = o.chassis;\n        this.wheelInfos = [];\n        this.sliding = false;\n        this.world = null;\n        this.indexRightAxis = typeof(o.indexRightAxis) !== 'undefined' ? o.indexRightAxis : 0;\n        this.indexForwardAxis = typeof(o.indexForwardAxis) !== 'undefined' ? o.indexForwardAxis : 2;\n        this.indexUpAxis = typeof(o.indexUpAxis) !== 'undefined' ? o.indexUpAxis : 1;\n        //this.rays = []\n        this.wheelMeshes = [];\n        this.brakeMeshs = null;\n        this.localWheel = false;\n        //this.wheelMatrix = [];\n    }\n\n    addWheel ( o = {} ){\n    \n        let info = new WheelInfo(o);\n        let index = this.wheelInfos.length-1;\n\n        info.chassisBody = this.chassisBody;\n\n        let raylen = info.suspensionRestLength + info.radius;\n        \n        info.ray = root.motor.add({\n            type:'ray', \n            name:this.chassisBody.name + '_wheel_' + index, \n            begin:info.chassisConnectionPointLocal.toArray(), \n            end:[info.chassisConnectionPointLocal.x,-raylen, info.chassisConnectionPointLocal.z], \n            callback:function(r){ info.castRay(r); }, \n            visible:false, \n            parent:this.chassisBody \n        });\n\n        this.wheelInfos.push(info);\n        //this.wheelMatrix.push( new Matrix4() );\n\n        return index;\n\n    }\n\n    setWheels (name, value) {\n\n        let i = this.wheelInfos.length, w;\n        while(i--){\n            w = this.wheelInfos[i];\n            if(w[name]) w[name] = value;\n        }\n\n    }\n\n    setSteeringValue( value, wheelIndex ){\n\n        let wheel = this.wheelInfos[wheelIndex];\n        wheel.steering = value;\n\n    }\n\n    applyEngineForce(value, wheelIndex){\n        this.wheelInfos[wheelIndex].engineForce = value;\n    }\n\n    setBrake(brake, wheelIndex){\n        this.wheelInfos[wheelIndex].brake = brake;\n    }\n\n    getVehicleAxisWorld(axisIndex, result){\n        result.set(\n            axisIndex === 0 ? 1 : 0,\n            axisIndex === 1 ? 1 : 0,\n            axisIndex === 2 ? 1 : 0\n        );\n        TransformCoordinatesToRef(result, bodyTransform(this.chassisBody, new Matrix4()), result);\n        return result;\n    }\n\n    updateVehicle( timeStep ) {\n\n        let wheelInfos = this.wheelInfos;\n        let numWheels = wheelInfos.length;\n        let chassisBody = this.chassisBody;\n\n        let i = numWheels; \n\n        while ( i-- ) {\n            this.updateWheelTransform(i);\n        }\n\n        \n\n        const cVel = bodyLinearVelocity(chassisBody, new Vector3());\n        const cVelLocal = TransformNormalToRef(cVel, bodyTransform(chassisBody, new Matrix4()).invert(),new Vector3());\n        this.currentVehicleSpeedKmHour = cVelLocal.z;\n\n        let forwardWorld = new Vector3();\n        this.getVehicleAxisWorld(this.indexForwardAxis, forwardWorld);\n\n        //if (Dot(forwardWorld,bodyLinearVelocity(chassisBody, new Vector3())) < 0){\n        if ( forwardWorld.dot( chassisBody.velocity ) < 0 ){\n            this.currentVehicleSpeedKmHour *= -1;\n        }\n\n        // simulate suspension\n        // auto on ray result\n        //for (var i = 0; i < numWheels; i++) {\n            //this.castRay(wheelInfos[i]);\n        //}\n\n        \n\n        this.updateSuspension(timeStep);\n\n\n        let impulse = new Vector3();\n        new Vector3();\n        for ( i = 0; i < numWheels; i++) {\n            //apply suspension force\n            let wheel = wheelInfos[i];\n            let suspensionForce = wheel.suspensionForce;\n            if (suspensionForce > wheel.maxSuspensionForce) {\n                suspensionForce = wheel.maxSuspensionForce;\n            }\n            //impulse.copyFrom(wheel.raycastResult.hitNormalWorld).scaleInPlace(suspensionForce * timeStep)\n            impulse.copy( wheel.raycastResult.hitNormalWorld ).multiplyScalar(suspensionForce * timeStep);\n            //console.log(suspensionForce * timeStep)\n            \n            addImpulseAt( chassisBody, impulse, wheel.raycastResult.hitPointWorld );\n            \n            //repos.copy( wheel.raycastResult.hitPointWorld ).sub( chassisBody.position );\n            //addImpulseAt( chassisBody, impulse, repos );\n        }\n\n        this.updateFriction(timeStep);\n        \n \n        let hitNormalWorldScaledWithProj = new Vector3();\n        let fwd  = new Vector3();\n        let vel = new Vector3();\n        for (i = 0; i < numWheels; i++) {\n            let wheel = wheelInfos[i];\n            velocityAt(chassisBody, wheel.chassisConnectionPointWorld, vel);\n            // Hack to get the rotation in the correct direction\n            let m = 1;\n            switch(this.indexUpAxis){\n            case 1:\n                m = -1;\n                break;\n            }\n\n            if (wheel.isInContact) {\n\n                this.getVehicleAxisWorld(this.indexForwardAxis, fwd);\n                let proj = Dot(fwd, wheel.raycastResult.hitNormalWorld);\n                //hitNormalWorldScaledWithProj.copyFrom(wheel.raycastResult.hitNormalWorld).scaleInPlace(proj)\n                hitNormalWorldScaledWithProj.copy(wheel.raycastResult.hitNormalWorld).multiplyScalar(proj);\n\n                //fwd.subtractToRef(hitNormalWorldScaledWithProj, fwd);\n                fwd.sub(hitNormalWorldScaledWithProj);\n\n                let proj2 = Dot(fwd, vel);\n                wheel.deltaRotation = m * proj2 * timeStep / wheel.radius;\n            }\n\n            if((wheel.sliding || !wheel.isInContact) && wheel.engineForce !== 0 && wheel.useCustomSlidingRotationalSpeed){\n                // Apply custom rotation when accelerating and sliding\n                wheel.deltaRotation = (wheel.engineForce > 0 ? 1 : -1) * wheel.customSlidingRotationalSpeed * timeStep;\n            }\n\n            // Lock wheels\n            if(Math.abs(wheel.brake) > Math.abs(wheel.engineForce)){\n                wheel.deltaRotation = 0;\n            }\n\n            //wheel.rotation += wheel.deltaRotation; // Use the old value\n            wheel.rotation -= wheel.deltaRotation; // Use the old value\n            wheel.deltaRotation *= 0.99; // damping of rotation when not in contact\n        }\n    }\n\n\n    updateSuspension( deltaTime ) {\n\n        let chassisBody = this.chassisBody;\n        let chassisMass = bodyMass(chassisBody);\n        let wheelInfos = this.wheelInfos;\n        let numWheels = wheelInfos.length;\n\n        for (let w_it = 0; w_it < numWheels; w_it++){\n            let wheel = wheelInfos[w_it];\n\n            if (wheel.isInContact){\n                let force;\n\n                // Spring\n                let susp_length = wheel.suspensionRestLength;\n                let current_length = wheel.suspensionLength;\n                let length_diff = (susp_length - current_length);\n\n                force = wheel.suspensionStiffness * length_diff * wheel.clippedInvContactDotSuspension;\n\n                // Damper\n                let projected_rel_vel = wheel.suspensionRelativeVelocity;\n                let susp_damping;\n                if (projected_rel_vel < 0) {\n                    susp_damping = wheel.dampingCompression;\n                } else {\n                    susp_damping = wheel.dampingRelaxation;\n                }\n                force -= susp_damping * projected_rel_vel;\n\n                wheel.suspensionForce = force * chassisMass;\n                if (wheel.suspensionForce < 0) {\n                    wheel.suspensionForce = 0;\n                }\n            } else {\n                wheel.suspensionForce = 0;\n            }\n        }\n\n    }\n\n    updateFriction( timeStep ){\n\n        let surfNormalWS_scaled_proj = updateFriction_surfNormalWS_scaled_proj;\n\n        //calculate the impulse, so that the wheels don't move sidewards\n        let wheelInfos = this.wheelInfos;\n        let numWheels = wheelInfos.length;\n        let chassisBody = this.chassisBody;\n        let forwardWS = updateFriction_forwardWS;\n        let axle = updateFriction_axle;\n        let i, wheel, groundObject;\n\n        for ( i = 0; i < numWheels; i++) {\n\n            wheel = wheelInfos[i];\n            groundObject = wheel.raycastResult.body;\n            \n            wheel.sideImpulse = 0;\n            wheel.forwardImpulse = 0;\n\n            if(!forwardWS[i]) forwardWS[i] = new Vector3();\n            if(!axle[i]) axle[i] = new Vector3();\n            \n        /*}\n        \n        for ( i = 0; i < numWheels; i++){\n\n            wheel = wheelInfos[i];\n    \n            groundObject = wheel.raycastResult.body;*/\n    \n            if (groundObject) {\n\n                let axlei = axle[i];\n                let wheelTrans = this.getWheelTransformWorld(i);\n    \n                // Get world axle\n                TransformNormalToRef( directions[this.indexRightAxis], wheelTrans, axlei );\n        \n                let surfNormalWS = wheel.raycastResult.hitNormalWorld;\n                //if(i=== 0)console.log(axlei)\n                let proj = Dot(axlei, surfNormalWS);\n                \n                //surfNormalWS.scaleToRef(proj, surfNormalWS_scaled_proj);\n                //axlei.subtractToRef(surfNormalWS_scaled_proj, axlei);\n\n                surfNormalWS_scaled_proj.copy(surfNormalWS).multiplyScalar(proj);\n                axlei.sub(surfNormalWS_scaled_proj).normalize();\n               \n                CrossToRef(surfNormalWS, axlei, forwardWS[i]);\n                forwardWS[i].normalize();\n                //if(i=== 0)console.log(forwardWS[i])\n\n                wheel.sideImpulse = resolveSingleBilateral(\n                    chassisBody,\n                    wheel.raycastResult.hitPointWorld,\n                    groundObject,\n                    wheel.raycastResult.hitPointWorld,\n                    axlei\n                );\n                //if(i == 0) console.log(wheel.sideImpulse)\n                wheel.sideImpulse *= sideFrictionStiffness2;\n            }\n        }\n\n\n\n        let sideFactor = 1;\n        let fwdFactor = 0.5;\n        this.sliding = false;\n\n        for ( i = 0; i < numWheels; i++) {\n\n            wheel = wheelInfos[i];\n            groundObject = wheel.raycastResult.body;\n\n            let rollingFriction = 0;\n\n            wheel.slipInfo = 1;\n            if ( groundObject ) {\n                let defaultRollingFrictionImpulse = 0;\n                let maxImpulse = wheel.brake ? wheel.brake : defaultRollingFrictionImpulse;\n\n                // btWheelContactPoint contactPt(chassisBody,groundObject,wheelInfraycastInfo.hitPointWorld,forwardWS[wheel],maxImpulse);\n                // rollingFriction = calcRollingFriction(contactPt);\n                rollingFriction = calcRollingFriction(chassisBody, groundObject, wheel.raycastResult.hitPointWorld, forwardWS[i], maxImpulse);\n\n                rollingFriction += wheel.engineForce * timeStep;\n                //rollingFriction *= 10\n\n                // rollingFriction = 0;\n                let factor = maxImpulse / rollingFriction;\n                wheel.slipInfo *= factor;\n\n                //console.log(rollingFriction)\n            }\n\n            //switch between active rolling (throttle), braking and non-active rolling friction (nthrottle/break)\n\n            wheel.forwardImpulse = 0;\n            wheel.skidInfo = 1;\n\n            if ( groundObject ) {\n                wheel.skidInfo = 1;\n\n                let maximp = wheel.suspensionForce * timeStep * wheel.frictionSlip;\n                let maximpSide = maximp;\n\n                let maximpSquared = maximp * maximpSide;\n\n                wheel.forwardImpulse = rollingFriction;//wheelInfo.engineForce* timeStep;\n\n                let x = (wheel.forwardImpulse * fwdFactor) / wheel.forwardAcceleration;\n                let y = (wheel.sideImpulse * sideFactor) / wheel.sideAcceleration;\n\n                let impulseSquared = x * x + y * y;\n\n                ///console.log(impulseSquared)\n\n                wheel.sliding = false;\n                if ( impulseSquared > maximpSquared ) {\n                    this.sliding = true;\n                    wheel.sliding = true;\n\n                    let factor = maximp / Math.sqrt( impulseSquared );\n\n                    wheel.skidInfo *= factor;\n                }\n            }\n        }\n\n        if (this.sliding) {\n            for (let i = 0; i < numWheels; i++) {\n                wheel = wheelInfos[i];\n                if (wheel.sideImpulse !== 0) {\n                    if (wheel.skidInfo < 1){\n                        wheel.forwardImpulse *= wheel.skidInfo;\n                        wheel.sideImpulse *= wheel.skidInfo;\n                    }\n                }\n            }\n        }\n\n        \n        // apply the impulses // TODO !!!\n        for ( i = 0; i < numWheels; i++) {\n\n            wheel = wheelInfos[i];\n    \n            let rel_pos = new Vector3();\n            rel_pos.copy( wheel.raycastResult.hitPointWorld ).sub( bodyPosition(chassisBody, new Vector3()) );\n            //wheel.raycastResult.hitPointWorld.subtractToRef(bodyPosition(chassisBody, new Vector3()), rel_pos);\n           \n            if (wheel.forwardImpulse !== 0) {\n                let impulse = new Vector3();\n                impulse.copy(forwardWS[i]).multiplyScalar(wheel.forwardImpulse);\n                //impulse.copyFrom(forwardWS[i]).scaleInPlace(wheel.forwardImpulse)\n                addImpulseAt(chassisBody, impulse, wheel.raycastResult.hitPointWorld);\n            \n            }\n    \n            if ( wheel.sideImpulse !== 0 ){\n\n                groundObject = wheel.raycastResult.body;\n    \n                let rel_pos2 = new Vector3();\n               \n                rel_pos2.copy(wheel.raycastResult.hitPointWorld).sub(bodyPosition(groundObject, new Vector3()));\n                //wheel.raycastResult.hitPointWorld.subtractToRef(bodyPosition(groundObject, new Vector3()), rel_pos2);\n                let sideImp = new Vector3();\n                sideImp.copy(axle[i]).multiplyScalar(wheel.sideImpulse);\n                //sideImp.copyFrom(axle[i]).scaleInPlace(wheel.sideImpulse)\n    \n                TransformNormalToRef(rel_pos, bodyTransform(chassisBody, new Matrix4()).invert(), rel_pos);\n                rel_pos['xyz'[this.indexUpAxis]] *= wheel.rollInfluence;\n                \n                TransformNormalToRef(rel_pos, bodyTransform(chassisBody, new Matrix4()), rel_pos);\n                addImpulseAt(chassisBody, sideImp, bodyPosition(chassisBody, new Vector3()).add(rel_pos));\n            \n                //sideImp.scaleToRef(-1, sideImp);\n                sideImp.multiplyScalar(-1);\n\n                // add impulse on staic object ???\n                addImpulseAt( groundObject, sideImp, wheel.raycastResult.hitPointWorld );\n                \n            }\n        }\n\n    }\n\n\n    updateWheelTransformWorld( wheel ){\n\n        //wheel.isInContact = false;\n        let chassisBody = this.chassisBody;\n        const transform = chassisBody.matrixWorld;//bodyTransform( chassisBody, new Matrix4() )\n      \n        TransformCoordinatesToRef( wheel.chassisConnectionPointLocal, transform, wheel.chassisConnectionPointWorld );\n        TransformNormalToRef( wheel.directionLocal, transform, wheel.directionWorld );\n        //TransformNormalToRef( wheel.axleLocal, transform, wheel.axleWorld )\n        \n    }\n\n    updateWheelTransform( wheelIndex ){\n\n        let up = tmpVec4;\n        let right = tmpVec5;\n        let fwd = tmpVec6;\n\n        let wheel = this.wheelInfos[wheelIndex];\n        this.updateWheelTransformWorld(wheel);\n\n        up.copy( wheel.directionLocal ).multiplyScalar(-1);\n        right.copy(wheel.axleLocal);\n        CrossToRef( up, right, fwd );\n        fwd.normalize();\n        right.normalize();\n\n        // Rotate around steering over the wheelAxle\n        let steering = wheel.steering;\n        let steeringOrn = new Quaternion();\n        RotationAxisToRef( up, steering, steeringOrn );\n\n        let rotatingOrn = new Quaternion();\n        RotationAxisToRef(right, wheel.rotation, rotatingOrn);\n\n        // World rotation of the wheel\n        let q = wheel.quaternion;\n        bodyOrientation( this.chassisBody, q );\n        q.multiply(steeringOrn).multiply(rotatingOrn).normalize();\n\n        // world position of the wheel\n        let p = wheel.position;\n        p.copy( wheel.directionWorld );\n        p.multiplyScalar( wheel.suspensionLength );\n        let locP = p.clone();\n        p.add( wheel.chassisConnectionPointWorld );\n\n        wheel.matrix.compose( wheel.position, wheel.quaternion, {x:1,y:1,z:1} );\n\n        if( this.localWheel ){\n            locP.add( wheel.chassisConnectionPointLocal );\n            this.wheelMeshes[wheelIndex].quaternion.copy(steeringOrn).multiply(rotatingOrn).normalize();\n            this.wheelMeshes[wheelIndex].position.copy(locP);\n            if(this.brakeMeshs){\n                if(wheelIndex === 2 || wheelIndex === 3 ) this.brakeMeshs[wheelIndex].quaternion.copy(steeringOrn).normalize();\n                this.brakeMeshs[wheelIndex].position.copy(locP);\n                this.brakeMeshs[wheelIndex].updateMatrix();\n            }\n        } else {\n            this.wheelMeshes[wheelIndex].position.copy(wheel.position);\n            this.wheelMeshes[wheelIndex].quaternion.copy(wheel.quaternion);\n            this.wheelMeshes[wheelIndex].updateMatrix();\n        }\n\n    }\n\n    getWheelTransformWorld(id) {\n        return this.wheelInfos[id].matrix;\n        //return this.wheelMeshes[id].matrixWorld ;\n    }\n\n\n\n}\n\n\n\n\nconst Utilsdefaults = (options, defaults) => {\n    options = options || {};\n\n    for(var key in defaults){\n        if(!(key in options)){\n            options[key] = defaults[key];\n        }\n    }\n\n    return options;\n};\n\n\nvar chassis_velocity_at_contactPoint = new Vector3();\nvar relpos = new Vector3();\n\nclass WheelInfo {\n    constructor( options ){\n\n        options = Utilsdefaults(options, {\n            chassisConnectionPointLocal: new Vector3(),\n            chassisConnectionPointWorld: new Vector3(),\n            directionLocal: new Vector3(),\n            directionWorld: new Vector3(),\n            axleLocal: new Vector3(),\n            //axleWorld: new Vector3(),\n            suspensionRestLength: 1,\n            suspensionMaxLength: 2,\n            radius: 1,\n            suspensionStiffness: 100,\n            dampingCompression: 10,\n            dampingRelaxation: 10,\n            frictionSlip: 10000,\n            forwardAcceleration: 1,\n            sideAcceleration: 1,\n            steering: 0,\n            rotation: 0,\n            deltaRotation: 0,\n            rollInfluence: 0.01,\n            maxSuspensionForce: Number.MAX_VALUE,\n            isFrontWheel: true,\n            clippedInvContactDotSuspension: 1,\n            suspensionRelativeVelocity: 0,\n            suspensionForce: 0,\n            skidInfo: 0,\n            suspensionLength: 0,\n            maxSuspensionTravel: 1,\n            useCustomSlidingRotationalSpeed: false,\n            customSlidingRotationalSpeed: -0.1\n        });\n\n        this.maxSuspensionTravel = options.maxSuspensionTravel;\n        this.customSlidingRotationalSpeed = options.customSlidingRotationalSpeed;\n        this.useCustomSlidingRotationalSpeed = options.useCustomSlidingRotationalSpeed;\n        this.sliding = false;\n        this.chassisConnectionPointLocal = options.chassisConnectionPointLocal.clone();\n        this.chassisConnectionPointWorld = options.chassisConnectionPointLocal.clone();\n        this.directionLocal = options.directionLocal.clone();\n        this.directionWorld = options.directionLocal.clone();\n        this.axleLocal = options.axleLocal.clone();\n        //this.axleWorld = options.axleLocal.clone();\n        this.suspensionRestLength = options.suspensionRestLength;\n        this.suspensionMaxLength = options.suspensionMaxLength;\n        this.radius = options.radius;\n        this.suspensionStiffness = options.suspensionStiffness;\n        this.dampingCompression = options.dampingCompression;\n        this.dampingRelaxation = options.dampingRelaxation;\n        this.frictionSlip = options.frictionSlip;\n        this.forwardAcceleration = options.forwardAcceleration;\n        this.sideAcceleration = options.sideAcceleration;\n        this.steering = 0;\n        this.rotation = 0;\n        this.deltaRotation = 0;\n        this.rollInfluence = options.rollInfluence;\n        this.maxSuspensionForce = options.maxSuspensionForce;\n        this.engineForce = 0;\n        this.brake = 0;\n        this.isFrontWheel = options.isFrontWheel;\n        this.clippedInvContactDotSuspension = 1;\n        this.suspensionRelativeVelocity = 0;\n        this.suspensionForce = 0;\n        this.skidInfo = 0;\n        this.suspensionLength = 0;\n        this.sideImpulse = 0;\n        this.forwardImpulse = 0;\n        this.raycastResult = new RaycastResult();\n        //this.raycastDirectionWorld = new Vector3()\n        //this.worldTransform = new TransformNode(\"\")\n        //this.worldTransform.rotationQuaternion = new THREE.Quaternion()\n\n        this.position = new Vector3().copy(this.chassisConnectionPointLocal);\n        this.quaternion = new Quaternion();\n\n        this.isInContact = false;\n        this.chassisBody = null;\n        this.ray = null;\n\n        this.matrix = new Matrix4();\n\n    }\n\n    castRay( r ){\n\n        if(r.hit){\n\n            this.isInContact = true;\n            //if( this.isInContact ){\n            let hitDistance = r.distance;\n            this.raycastResult.hitPointWorld.fromArray( r.point );\n            this.raycastResult.hitNormalWorld.fromArray( r.normal );\n            this.raycastResult.body = root.motor.byName( r.body );\n\n            this.suspensionLength = hitDistance - this.radius;\n            // clamp on max suspension travel\n            let minSuspensionLength = this.suspensionRestLength - this.maxSuspensionTravel;\n            let maxSuspensionLength = this.suspensionRestLength + this.maxSuspensionTravel;\n            if (this.suspensionLength < minSuspensionLength) {\n                this.suspensionLength = minSuspensionLength;\n            }\n            if (this.suspensionLength > maxSuspensionLength) {\n                this.suspensionLength = maxSuspensionLength;\n                this.raycastResult.reset();\n            }\n            let denominator = Dot(this.raycastResult.hitNormalWorld,this.directionWorld);\n\n            //var chassis_velocity_at_contactPoint = new Vector3();\n            velocityAt( this.chassisBody, this.raycastResult.hitPointWorld, chassis_velocity_at_contactPoint );\n            var projVel = Dot(this.raycastResult.hitNormalWorld, chassis_velocity_at_contactPoint );\n            //let projVel = this.raycastResult.hitNormalWorld.dot( chassis_velocity_at_contactPoint )\n\n            if (denominator >= -0.1) {\n                this.suspensionRelativeVelocity = 0;\n                this.clippedInvContactDotSuspension = 1 / 0.1;\n            } else {\n                let inv = -1 / denominator;\n                this.suspensionRelativeVelocity = projVel * inv;\n                this.clippedInvContactDotSuspension = inv;\n            }\n\n        } else {\n\n            this.isInContact = false;\n\n            //put wheel info as in rest position\n            this.suspensionLength = this.suspensionRestLength + 0 * this.maxSuspensionTravel;\n            this.suspensionRelativeVelocity = 0.0;\n            this.raycastResult.hitNormalWorld.copy( this.directionWorld ).multiplyScalar(-1);\n            this.clippedInvContactDotSuspension = 1.0;\n\n        }\n\n        // change ray lenght on next frame ?\n        /*let raylen = this.suspensionRestLength + this.radius;\n        this.ray.setRay({end:[  this.chassisConnectionPointLocal.x, -raylen, this.chassisConnectionPointLocal.z ]})\n        */\n\n    }\n\n    updateWheel( chassis ){\n\n        let raycastResult = this.raycastResult;\n    \n        if (this.isInContact){\n            let project = raycastResult.hitNormalWorld.dot(raycastResult.directionWorld);\n            //var project = Dot(raycastResult.hitNormalWorld, raycastResult.directionWorld);\n            relpos.copy( raycastResult.hitPointWorld ).sub( chassis.position );\n            //raycastResult.hitPointWorld.subtractToRef( bodyPosition(chassis, new Vector3()), relpos);\n            velocityAt( chassis, relpos, chassis_velocity_at_contactPoint );\n           // velocityAt(chassis, raycastResult.hitPointWorld, relpos);\n            //var projVel = Dot(raycastResult.hitNormalWorld, chassis_velocity_at_contactPoint );\n            let projVel = raycastResult.hitNormalWorld.dot( chassis_velocity_at_contactPoint );\n            if (project >= -0.1) {\n                this.suspensionRelativeVelocity = 0.0;\n                this.clippedInvContactDotSuspension = 1.0 / 0.1;\n            } else {\n                let inv = -1 / project;\n                this.suspensionRelativeVelocity = projVel * inv;\n                this.clippedInvContactDotSuspension = inv;\n            }\n    \n        } else {\n            // Not in contact : position wheel in a nice (rest length) position\n            raycastResult.suspensionLength = this.suspensionRestLength;\n            this.suspensionRelativeVelocity = 0.0;\n            raycastResult.hitNormalWorld.copy(raycastResult.directionWorld).scaleInPlace(-1);\n            this.clippedInvContactDotSuspension = 1.0;\n        }\n    }\n}\n\n\n\n\n\n\nclass RaycastResult {\n    constructor(){\n        this.body = null;\n        this.hitPointWorld = new Vector3();\n        this.hitNormalWorld = new Vector3();\n        this.directionWorld = new Vector3();\n    }\n    reset(){\n        this.body = null;\n        this.hitPointWorld = new Vector3();\n        this.hitNormalWorld = new Vector3();\n        this.directionWorld = new Vector3();\n    }\n}\n\n\nconst bodyMass = (body) => ( body.mass );\nconst bodyInvMass = (body) => ( body.mass > 0 ? 1.0 / body.mass : 0 );\n\nconst bodyPosition = (body, res) => ( res.copy( body.position ) );\nconst bodyLinearVelocity = (body, res) => ( res.copy( body.velocity ) );\nconst bodyTransform = (body, res) => ( res.copy( body.matrixWorld ) );\nconst bodyOrientation = (body, res) => ( res.copy( body.quaternion ) );\n\n\n\n// The force applies the given energy overtime, while the impulse applies the given energy immediately\n\n\nconst addImpulseAt = ( body, impulse, point ) => {\n\n    //impulse = body.worldToLocal( impulse )\n    //root.motor.change({ name:body.name, impulse:impulse.toArray() })\n    //point = body.worldToLocal( point )\n    //impulse = body.localToWorld( impulse )\n    //point = body.localToWorld( point )\n    //root.motor.change({ name:body.name, worldForce\n    //console.log({ name:body.name, impulse:impulse.toArray(), impulseCenter:point.toArray() })\n    root.motor.change({ name:body.name, impulse:impulse.toArray(), impulseCenter:point.toArray() });\n};\n\nconst velocityAt = (body, pos, res) => {\n    \n    res.copy( pos ).sub( body.position );\n    res.crossVectors( body.angular, res );\n    res.add( body.velocity );\n    return res;\n\n};\n\nconst bodyInertiaWorld = ( body, res ) => {\n\n    res.copy( body.inertia );//.applyNormalMatrix( body.matrixWorld );\n    //console.log(res)\n    TransformNormalToRef(res, body.matrixWorld, res);\n    res.x = res.x > 0 ? 1.0 / res.x : 0;\n    res.y = res.y > 0 ? 1.0 / res.y : 0;\n    res.z = res.z > 0 ? 1.0 / res.z : 0;\n    return res\n};\n\n\n// vector3 function \n\nconst Dot = ( v, w ) => ( v.x * w.x + v.y * w.y + v.z * w.z );\n\nconst CrossToRef = ( left, right, result ) => {\n    const x = left.y * right.z - left.z * right.y;\n    const y = left.z * right.x - left.x * right.z;\n    const z = left.x * right.y - left.y * right.x;\n    result.set( x, y, z );\n    return result\n};\n\nconst TransformCoordinatesToRef = ( v, t, result ) => {\n\n    //result.copy(v).applyMatrix4(t)\n\n    const x = v.x, y = v.y, z = v.z;\n    const m = t.elements;\n    const rx = x * m[0] + y * m[4] + z * m[8] + m[12];\n    const ry = x * m[1] + y * m[5] + z * m[9] + m[13];\n    const rz = x * m[2] + y * m[6] + z * m[10] + m[14];\n    const rw = 1 / (x * m[3] + y * m[7] + z * m[11] + m[15]);\n\n    result.x = rx * rw;\n    result.y = ry * rw;\n    result.z = rz * rw;\n    return result;\n\n};\n\nconst TransformNormalToRef = ( v, t, result ) => {\n\n    const x = v.x, y = v.y, z = v.z;\n    const m = t.elements;\n    result.x = x * m[0] + y * m[4] + z * m[8];\n    result.y = x * m[1] + y * m[5] + z * m[9];\n    result.z = x * m[2] + y * m[6] + z * m[10];\n    return result//.normalize();\n\n};\n\n// Quaternion function \n\nconst RotationAxisToRef = ( axis, angle, result ) => {\n\n    const sin = Math.sin(angle / 2);\n    axis.normalize();\n    result.w = Math.cos(angle / 2);\n    result.x = axis.x * sin;\n    result.y = axis.y * sin;\n    result.z = axis.z * sin;\n    return result;\n\n};\n\n\n\n\n\n\n\n\n\nfunction calcRollingFriction(body0, body1, frictionPosWorld, frictionDirectionWorld, maxImpulse) {\n    var j1 = 0;\n    var contactPosWorld = frictionPosWorld;\n\n    var vel1 = calcRollingFriction_vel1;\n    var vel2 = calcRollingFriction_vel2;\n    var vel = calcRollingFriction_vel;\n   \n    velocityAt(body0, contactPosWorld, vel1);\n    velocityAt(body1, contactPosWorld, vel2);\n    //vel1.subtractToRef(vel2, vel);\n    //vel1.sub(vel2)\n    vel.copy(vel1).sub(vel2);\n\n    var vrel = Dot(frictionDirectionWorld, vel);\n\n    var denom0 = computeImpulseDenominator(body0, frictionPosWorld, frictionDirectionWorld);\n    var denom1 = computeImpulseDenominator(body1, frictionPosWorld, frictionDirectionWorld);\n    var relaxation = 1;\n    var jacDiagABInv = relaxation / (denom0 + denom1);\n\n    // calculate j that moves us to zero relative velocity\n    j1 = -vrel * jacDiagABInv;\n\n    if (maxImpulse < j1) {\n        j1 = maxImpulse;\n    }\n    if (j1 < -maxImpulse) {\n        j1 = -maxImpulse;\n    }\n\n    return j1;\n}\n\n\n\nvar computeImpulseDenominator_r0 = new Vector3();\nvar computeImpulseDenominator_c0 = new Vector3();\nvar computeImpulseDenominator_vec = new Vector3();\nvar computeImpulseDenominator_m = new Vector3();\n\nfunction computeImpulseDenominator(body, pos, normal) {\n\n    var r0 = computeImpulseDenominator_r0;\n    var c0 = computeImpulseDenominator_c0;\n    var vec = computeImpulseDenominator_vec;\n    var m = computeImpulseDenominator_m;\n\n    //pos.subtractToRef(bodyPosition(body, new Vector3()), r0);\n    r0.copy(pos).sub(bodyPosition(body, new Vector3()));\n    CrossToRef(r0, normal, c0);\n    // ???\n    //bodyInertiaWorld(body, new Vector3()).multiplyToRef(c0, m)\n    //bodyInertiaWorld( body, m ).multiply(c0)\n    m.copy( bodyInertiaWorld(body, new Vector3()) ).multiply(c0);\n    \n\n    CrossToRef(m, r0, vec);\n\n    return bodyInvMass(body) + Dot(normal, vec);\n}\n\n\n\nvar resolveSingleBilateral_vel1 = new Vector3();\nvar resolveSingleBilateral_vel2 = new Vector3();\nvar resolveSingleBilateral_vel = new Vector3();\n\n\n\nfunction resolveSingleBilateral( body1, pos1, body2, pos2, normal ){\n\n    var normalLenSqr = normal.lengthSq();\n    if (normalLenSqr > 1.1){\n        return 0; // no impulse\n    }\n    let vel1 = resolveSingleBilateral_vel1;\n    let vel2 = resolveSingleBilateral_vel2;\n    let vel = resolveSingleBilateral_vel;\n   \n    velocityAt(body1, pos1, vel1);\n    velocityAt(body2, pos2, vel2);\n    \n    //vel1.sub(vel2);\n    vel.copy(vel1).sub(vel2);\n\n    let rel_vel = Dot(normal, vel);\n    let massTerm = 1 / (bodyInvMass(body1) + bodyInvMass(body2));\n    let impulse = -0.1 * rel_vel * massTerm;\n\n    //console.log(bodyInvMass(body1) )\n\n    return impulse;\n}\n\n/**\n * @monogrid/gainmap-js v2.0.7\n * With ❤️, by MONOGRID <hello@mono-grid.com>\n */\n\n\nconst vertexShader = /* glsl */ `\nvarying vec2 vUv;\n\nvoid main() {\n  vUv = uv;\n  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n}\n`;\nconst fragmentShader = /* glsl */ `\n// min half float value\n#define HALF_FLOAT_MIN vec3( -65504, -65504, -65504 )\n// max half float value\n#define HALF_FLOAT_MAX vec3( 65504, 65504, 65504 )\n\nuniform sampler2D sdr;\nuniform sampler2D gainMap;\nuniform vec3 gamma;\nuniform vec3 offsetHdr;\nuniform vec3 offsetSdr;\nuniform vec3 gainMapMin;\nuniform vec3 gainMapMax;\nuniform float weightFactor;\n\nvarying vec2 vUv;\n\nvoid main() {\n  vec3 rgb = texture2D( sdr, vUv ).rgb;\n  vec3 recovery = texture2D( gainMap, vUv ).rgb;\n  vec3 logRecovery = pow( recovery, gamma );\n  vec3 logBoost = gainMapMin * ( 1.0 - logRecovery ) + gainMapMax * logRecovery;\n  vec3 hdrColor = (rgb + offsetSdr) * exp2( logBoost * weightFactor ) - offsetHdr;\n  vec3 clampedHdrColor = max( HALF_FLOAT_MIN, min( HALF_FLOAT_MAX, hdrColor ));\n  gl_FragColor = vec4( clampedHdrColor , 1.0 );\n}\n`;\n/**\n * A Material which is able to decode the Gainmap into a full HDR Representation\n *\n * @category Materials\n * @group Materials\n */\nclass GainMapDecoderMaterial extends ShaderMaterial {\n    /**\n     *\n     * @param params\n     */\n    constructor({ gamma, offsetHdr, offsetSdr, gainMapMin, gainMapMax, maxDisplayBoost, hdrCapacityMin, hdrCapacityMax, sdr, gainMap }) {\n        super({\n            name: 'GainMapDecoderMaterial',\n            vertexShader,\n            fragmentShader,\n            uniforms: {\n                sdr: { value: sdr },\n                gainMap: { value: gainMap },\n                gamma: { value: new Vector3(1.0 / gamma[0], 1.0 / gamma[1], 1.0 / gamma[2]) },\n                offsetHdr: { value: new Vector3().fromArray(offsetHdr) },\n                offsetSdr: { value: new Vector3().fromArray(offsetSdr) },\n                gainMapMin: { value: new Vector3().fromArray(gainMapMin) },\n                gainMapMax: { value: new Vector3().fromArray(gainMapMax) },\n                weightFactor: {\n                    value: (Math.log2(maxDisplayBoost) - hdrCapacityMin) / (hdrCapacityMax - hdrCapacityMin)\n                }\n            },\n            blending: NoBlending,\n            depthTest: false,\n            depthWrite: false\n        });\n        this._maxDisplayBoost = maxDisplayBoost;\n        this._hdrCapacityMin = hdrCapacityMin;\n        this._hdrCapacityMax = hdrCapacityMax;\n        this.needsUpdate = true;\n        this.uniformsNeedUpdate = true;\n    }\n    get sdr() { return this.uniforms.sdr.value; }\n    set sdr(value) { this.uniforms.sdr.value = value; }\n    get gainMap() { return this.uniforms.gainMap.value; }\n    set gainMap(value) { this.uniforms.gainMap.value = value; }\n    /**\n     * @see {@link GainMapMetadata.offsetHdr}\n     */\n    get offsetHdr() { return this.uniforms.offsetHdr.value.toArray(); }\n    set offsetHdr(value) { this.uniforms.offsetHdr.value.fromArray(value); }\n    /**\n     * @see {@link GainMapMetadata.offsetSdr}\n     */\n    get offsetSdr() { return this.uniforms.offsetSdr.value.toArray(); }\n    set offsetSdr(value) { this.uniforms.offsetSdr.value.fromArray(value); }\n    /**\n     * @see {@link GainMapMetadata.gainMapMin}\n     */\n    get gainMapMin() { return this.uniforms.gainMapMin.value.toArray(); }\n    set gainMapMin(value) { this.uniforms.gainMapMin.value.fromArray(value); }\n    /**\n     * @see {@link GainMapMetadata.gainMapMax}\n     */\n    get gainMapMax() { return this.uniforms.gainMapMax.value.toArray(); }\n    set gainMapMax(value) { this.uniforms.gainMapMax.value.fromArray(value); }\n    /**\n     * @see {@link GainMapMetadata.gamma}\n     */\n    get gamma() {\n        const g = this.uniforms.gamma.value;\n        return [1 / g.x, 1 / g.y, 1 / g.z];\n    }\n    set gamma(value) {\n        const g = this.uniforms.gamma.value;\n        g.x = 1.0 / value[0];\n        g.y = 1.0 / value[1];\n        g.z = 1.0 / value[2];\n    }\n    /**\n     * @see {@link GainMapMetadata.hdrCapacityMin}\n     * @remarks Logarithmic space\n     */\n    get hdrCapacityMin() { return this._hdrCapacityMin; }\n    set hdrCapacityMin(value) {\n        this._hdrCapacityMin = value;\n        this.calculateWeight();\n    }\n    /**\n     * @see {@link GainMapMetadata.hdrCapacityMin}\n     * @remarks Logarithmic space\n     */\n    get hdrCapacityMax() { return this._hdrCapacityMax; }\n    set hdrCapacityMax(value) {\n        this._hdrCapacityMax = value;\n        this.calculateWeight();\n    }\n    /**\n     * @see {@link GainmapDecodingParameters.maxDisplayBoost}\n     * @remarks Non Logarithmic space\n     */\n    get maxDisplayBoost() { return this._maxDisplayBoost; }\n    set maxDisplayBoost(value) {\n        this._maxDisplayBoost = Math.max(1, Math.min(65504, value));\n        this.calculateWeight();\n    }\n    calculateWeight() {\n        const val = (Math.log2(this._maxDisplayBoost) - this._hdrCapacityMin) / (this._hdrCapacityMax - this._hdrCapacityMin);\n        this.uniforms.weightFactor.value = Math.max(0, Math.min(1, val));\n    }\n}\n\nclass GainMapNotFoundError extends Error {\n}\n\nclass XMPMetadataNotFoundError extends Error {\n}\n\nconst getAttribute = (description, name, defaultValue) => {\n    var _a;\n    let returnValue;\n    const parsedValue = (_a = description.attributes.getNamedItem(name)) === null || _a === void 0 ? void 0 : _a.nodeValue;\n    if (!parsedValue) {\n        const node = description.getElementsByTagName(name)[0];\n        if (node) {\n            const values = node.getElementsByTagName('rdf:li');\n            if (values.length === 3) {\n                returnValue = Array.from(values).map(v => v.innerHTML);\n            }\n            else {\n                throw new Error(`Gainmap metadata contains an array of items for ${name} but its length is not 3`);\n            }\n        }\n        else {\n            if (defaultValue)\n                return defaultValue;\n            else\n                throw new Error(`Can't find ${name} in gainmap metadata`);\n        }\n    }\n    else {\n        returnValue = parsedValue;\n    }\n    return returnValue;\n};\n/**\n *\n * @param input\n * @returns\n */\nconst extractXMP = (input) => {\n    var _a, _b;\n    let str;\n    // support node test environment\n    if (typeof TextDecoder !== 'undefined')\n        str = new TextDecoder().decode(input);\n    else\n        str = input.toString();\n    let start = str.indexOf('<x:xmpmeta');\n    const parser = new DOMParser();\n    while (start !== -1) {\n        const end = str.indexOf('x:xmpmeta>', start);\n        str.slice(start, end + 10);\n        const xmpBlock = str.slice(start, end + 10);\n        try {\n            const xmlDocument = parser.parseFromString(xmpBlock, 'text/xml');\n            const description = xmlDocument.getElementsByTagName('rdf:Description')[0];\n            const gainMapMin = getAttribute(description, 'hdrgm:GainMapMin', '0');\n            const gainMapMax = getAttribute(description, 'hdrgm:GainMapMax');\n            const gamma = getAttribute(description, 'hdrgm:Gamma', '1');\n            const offsetSDR = getAttribute(description, 'hdrgm:OffsetSDR', '0.015625');\n            const offsetHDR = getAttribute(description, 'hdrgm:OffsetHDR', '0.015625');\n            let hdrCapacityMin = (_a = description.attributes.getNamedItem('hdrgm:HDRCapacityMin')) === null || _a === void 0 ? void 0 : _a.nodeValue;\n            if (!hdrCapacityMin)\n                hdrCapacityMin = '0';\n            const hdrCapacityMax = (_b = description.attributes.getNamedItem('hdrgm:HDRCapacityMax')) === null || _b === void 0 ? void 0 : _b.nodeValue;\n            if (!hdrCapacityMax)\n                throw new Error('Incomplete gainmap metadata');\n            return {\n                gainMapMin: Array.isArray(gainMapMin) ? gainMapMin.map(v => parseFloat(v)) : [parseFloat(gainMapMin), parseFloat(gainMapMin), parseFloat(gainMapMin)],\n                gainMapMax: Array.isArray(gainMapMax) ? gainMapMax.map(v => parseFloat(v)) : [parseFloat(gainMapMax), parseFloat(gainMapMax), parseFloat(gainMapMax)],\n                gamma: Array.isArray(gamma) ? gamma.map(v => parseFloat(v)) : [parseFloat(gamma), parseFloat(gamma), parseFloat(gamma)],\n                offsetSdr: Array.isArray(offsetSDR) ? offsetSDR.map(v => parseFloat(v)) : [parseFloat(offsetSDR), parseFloat(offsetSDR), parseFloat(offsetSDR)],\n                offsetHdr: Array.isArray(offsetHDR) ? offsetHDR.map(v => parseFloat(v)) : [parseFloat(offsetHDR), parseFloat(offsetHDR), parseFloat(offsetHDR)],\n                hdrCapacityMin: parseFloat(hdrCapacityMin),\n                hdrCapacityMax: parseFloat(hdrCapacityMax)\n            };\n        }\n        catch (e) {\n        }\n        start = str.indexOf('<x:xmpmeta', end);\n    }\n};\n\n/**\n * MPF Extractor (Multi Picture Format Extractor)\n * By Henrik S Nilsson 2019\n *\n * Extracts images stored in images based on the MPF format (found here: https://www.cipa.jp/e/std/std-sec.html\n * under \"CIPA DC-007-Translation-2021 Multi-Picture Format\"\n *\n * Overly commented, and without intention of being complete or production ready.\n * Created to extract depth maps from iPhone images, and to learn about image metadata.\n * Kudos to: Phil Harvey (exiftool), Jaume Sanchez (android-lens-blur-depth-extractor)\n */\nclass MPFExtractor {\n    constructor(options) {\n        this.options = {\n            debug: options && options.debug !== undefined ? options.debug : false,\n            extractFII: options && options.extractFII !== undefined ? options.extractFII : true,\n            extractNonFII: options && options.extractNonFII !== undefined ? options.extractNonFII : true\n        };\n    }\n    extract(imageArrayBuffer) {\n        return new Promise((resolve, reject) => {\n            const debug = this.options.debug;\n            const dataView = new DataView(imageArrayBuffer.buffer);\n            // If you're executing this line on a big endian machine, it'll be reversed.\n            // bigEnd further down though, refers to the endianness of the image itself.\n            if (dataView.getUint16(0) !== 0xffd8) {\n                reject(new Error('Not a valid jpeg'));\n                return;\n            }\n            const length = dataView.byteLength;\n            let offset = 2;\n            let loops = 0;\n            let marker; // APP# marker\n            while (offset < length) {\n                if (++loops > 250) {\n                    reject(new Error(`Found no marker after ${loops} loops 😵`));\n                    return;\n                }\n                if (dataView.getUint8(offset) !== 0xff) {\n                    reject(new Error(`Not a valid marker at offset 0x${offset.toString(16)}, found: 0x${dataView.getUint8(offset).toString(16)}`));\n                    return;\n                }\n                marker = dataView.getUint8(offset + 1);\n                if (debug)\n                    console.log(`Marker: ${marker.toString(16)}`);\n                if (marker === 0xe2) {\n                    if (debug)\n                        console.log('Found APP2 marker (0xffe2)');\n                    // Works for iPhone 8 Plus, X, and XSMax. Or any photos of MPF format.\n                    // Great way to visualize image information in html is using Exiftool. E.g.:\n                    // ./exiftool.exe -htmldump -wantTrailer photo.jpg > photo.html\n                    const formatPt = offset + 4;\n                    /*\n                     *  Structure of the MP Format Identifier\n                     *\n                     *  Offset Addr.  | Code (Hex)  | Description\n                     *  +00             ff            Marker Prefix      <-- offset\n                     *  +01             e2            APP2\n                     *  +02             #n            APP2 Field Length\n                     *  +03             #n            APP2 Field Length\n                     *  +04             4d            'M'                <-- formatPt\n                     *  +05             50            'P'\n                     *  +06             46            'F'\n                     *  +07             00            NULL\n                     *                                                   <-- tiffOffset\n                     */\n                    if (dataView.getUint32(formatPt) === 0x4d504600) {\n                        // Found MPF tag, so we start dig out sub images\n                        const tiffOffset = formatPt + 4;\n                        let bigEnd; // Endianness from TIFF header\n                        // Test for TIFF validity and endianness\n                        // 0x4949 and 0x4D4D ('II' and 'MM') marks Little Endian and Big Endian\n                        if (dataView.getUint16(tiffOffset) === 0x4949) {\n                            bigEnd = false;\n                        }\n                        else if (dataView.getUint16(tiffOffset) === 0x4d4d) {\n                            bigEnd = true;\n                        }\n                        else {\n                            reject(new Error('No valid endianness marker found in TIFF header'));\n                            return;\n                        }\n                        if (dataView.getUint16(tiffOffset + 2, !bigEnd) !== 0x002a) {\n                            reject(new Error('Not valid TIFF data! (no 0x002A marker)'));\n                            return;\n                        }\n                        // 32 bit number stating the offset from the start of the 8 Byte MP Header\n                        // to MP Index IFD Least possible value is thus 8 (means 0 offset)\n                        const firstIFDOffset = dataView.getUint32(tiffOffset + 4, !bigEnd);\n                        if (firstIFDOffset < 0x00000008) {\n                            reject(new Error('Not valid TIFF data! (First offset less than 8)'));\n                            return;\n                        }\n                        // Move ahead to MP Index IFD\n                        // Assume we're at the first IFD, so firstIFDOffset points to\n                        // MP Index IFD and not MP Attributes IFD. (If we try extract from a sub image,\n                        // we fail silently here due to this assumption)\n                        // Count (2 Byte) | MP Index Fields a.k.a. MP Entries (count * 12 Byte) | Offset of Next IFD (4 Byte)\n                        const dirStart = tiffOffset + firstIFDOffset; // Start of IFD (Image File Directory)\n                        const count = dataView.getUint16(dirStart, !bigEnd); // Count of MPEntries (2 Byte)\n                        // Extract info from MPEntries (starting after Count)\n                        const entriesStart = dirStart + 2;\n                        let numberOfImages = 0;\n                        for (let i = entriesStart; i < entriesStart + 12 * count; i += 12) {\n                            // Each entry is 12 Bytes long\n                            // Check MP Index IFD tags, here we only take tag 0xb001 = Number of images\n                            if (dataView.getUint16(i, !bigEnd) === 0xb001) {\n                                // stored in Last 4 bytes of its 12 Byte entry.\n                                numberOfImages = dataView.getUint32(i + 8, !bigEnd);\n                            }\n                        }\n                        const nextIFDOffsetLen = 4; // 4 Byte offset field that appears after MP Index IFD tags\n                        const MPImageListValPt = dirStart + 2 + count * 12 + nextIFDOffsetLen;\n                        const images = [];\n                        for (let i = MPImageListValPt; i < MPImageListValPt + numberOfImages * 16; i += 16) {\n                            const image = {\n                                MPType: dataView.getUint32(i, !bigEnd),\n                                size: dataView.getUint32(i + 4, !bigEnd),\n                                // This offset is specified relative to the address of the MP Endian\n                                // field in the MP Header, unless the image is a First Individual Image,\n                                // in which case the value of the offset shall be NULL (0x00000000).\n                                dataOffset: dataView.getUint32(i + 8, !bigEnd),\n                                dependantImages: dataView.getUint32(i + 12, !bigEnd),\n                                start: -1,\n                                end: -1,\n                                isFII: false\n                            };\n                            if (!image.dataOffset) {\n                                // dataOffset is 0x00000000 for First Individual Image\n                                image.start = 0;\n                                image.isFII = true;\n                            }\n                            else {\n                                image.start = tiffOffset + image.dataOffset;\n                                image.isFII = false;\n                            }\n                            image.end = image.start + image.size;\n                            images.push(image);\n                        }\n                        if (this.options.extractNonFII && images.length) {\n                            const bufferBlob = new Blob([dataView]);\n                            const imgs = [];\n                            for (const image of images) {\n                                if (image.isFII && !this.options.extractFII) {\n                                    continue; // Skip FII\n                                }\n                                const imageBlob = bufferBlob.slice(image.start, image.end + 1, 'image/jpeg');\n                                // we don't need this\n                                // const imageUrl = URL.createObjectURL(imageBlob)\n                                // image.img = document.createElement('img')\n                                // image.img.src = imageUrl\n                                imgs.push(imageBlob);\n                            }\n                            resolve(imgs);\n                        }\n                    }\n                }\n                offset += 2 + dataView.getUint16(offset + 2);\n            }\n        });\n    }\n}\n\n/**\n * Extracts XMP Metadata and the gain map recovery image\n * from a single JPEG file.\n *\n * @category Decoding Functions\n * @group Decoding Functions\n * @param jpegFile an `Uint8Array` containing and encoded JPEG file\n * @returns an sdr `Uint8Array` compressed in JPEG, a gainMap `Uint8Array` compressed in JPEG and the XMP parsed XMP metadata\n * @throws Error if XMP Metadata is not found\n * @throws Error if Gain map image is not found\n * @example\n * import { FileLoader } from 'three'\n * import { extractGainmapFromJPEG } from '@monogrid/gainmap-js'\n *\n * const jpegFile = await new FileLoader()\n *  .setResponseType('arraybuffer')\n *  .loadAsync('image.jpg')\n *\n * const { sdr, gainMap, metadata } = extractGainmapFromJPEG(jpegFile)\n */\nconst extractGainmapFromJPEG = async (jpegFile) => {\n    const metadata = extractXMP(jpegFile);\n    if (!metadata)\n        throw new XMPMetadataNotFoundError('Gain map XMP metadata not found');\n    const mpfExtractor = new MPFExtractor({ extractFII: true, extractNonFII: true });\n    const images = await mpfExtractor.extract(jpegFile);\n    if (images.length !== 2)\n        throw new GainMapNotFoundError('Gain map recovery image not found');\n    return {\n        sdr: new Uint8Array(await images[0].arrayBuffer()),\n        gainMap: new Uint8Array(await images[1].arrayBuffer()),\n        metadata\n    };\n};\n\n/**\n * private function, async get image from blob\n *\n * @param blob\n * @returns\n */\nconst getHTMLImageFromBlob = (blob) => {\n    return new Promise((resolve, reject) => {\n        const img = document.createElement('img');\n        img.onload = () => { resolve(img); };\n        img.onerror = (e) => { reject(e); };\n        img.src = URL.createObjectURL(blob);\n    });\n};\n\nclass LoaderBase extends Loader {\n    /**\n     *\n     * @param renderer\n     * @param manager\n     */\n    constructor(renderer, manager) {\n        super(manager);\n        this._renderer = renderer;\n        this._internalLoadingManager = new LoadingManager();\n    }\n    /**\n     * Specify the renderTarget options to use when rendering the gain map\n     *\n     * @param options\n     * @returns\n     */\n    setRenderTargetOptions(options) {\n        this._renderTargetOptions = options;\n        return this;\n    }\n    /**\n     * @private\n     * @returns\n     */\n    prepareQuadRenderer() {\n        // temporary values\n        const material = new GainMapDecoderMaterial({\n            gainMapMax: [1, 1, 1],\n            gainMapMin: [0, 0, 0],\n            gamma: [1, 1, 1],\n            offsetHdr: [1, 1, 1],\n            offsetSdr: [1, 1, 1],\n            hdrCapacityMax: 1,\n            hdrCapacityMin: 0,\n            maxDisplayBoost: 1,\n            gainMap: new Texture(),\n            sdr: new Texture()\n        });\n        return new QuadRenderer({\n            width: 16,\n            height: 16,\n            type: HalfFloatType,\n            colorSpace: LinearSRGBColorSpace,\n            material,\n            renderer: this._renderer,\n            renderTargetOptions: this._renderTargetOptions\n        });\n    }\n    /**\n   * @private\n   * @param quadRenderer\n   * @param metadata\n   * @param sdrBuffer\n   * @param gainMapBuffer\n   */\n    async render(quadRenderer, metadata, sdrBuffer, gainMapBuffer) {\n        // this is optional, will render a black gain-map if not present\n        const gainMapBlob = gainMapBuffer ? new Blob([gainMapBuffer], { type: 'image/jpeg' }) : undefined;\n        const sdrBlob = new Blob([sdrBuffer], { type: 'image/jpeg' });\n        let sdrImage;\n        let gainMapImage;\n        let needsFlip = false;\n        if (typeof createImageBitmap === 'undefined') {\n            const res = await Promise.all([\n                gainMapBlob ? getHTMLImageFromBlob(gainMapBlob) : Promise.resolve(undefined),\n                getHTMLImageFromBlob(sdrBlob)\n            ]);\n            gainMapImage = res[0];\n            sdrImage = res[1];\n            needsFlip = true;\n        }\n        else {\n            const res = await Promise.all([\n                gainMapBlob ? createImageBitmap(gainMapBlob, { imageOrientation: 'flipY' }) : Promise.resolve(undefined),\n                createImageBitmap(sdrBlob, { imageOrientation: 'flipY' })\n            ]);\n            gainMapImage = res[0];\n            sdrImage = res[1];\n        }\n        const gainMap = new Texture(gainMapImage || new ImageData(2, 2), UVMapping, ClampToEdgeWrapping, ClampToEdgeWrapping, LinearFilter, LinearMipMapLinearFilter, RGBAFormat, UnsignedByteType, 1, LinearSRGBColorSpace);\n        gainMap.flipY = needsFlip;\n        gainMap.needsUpdate = true;\n        const sdr = new Texture(sdrImage, UVMapping, ClampToEdgeWrapping, ClampToEdgeWrapping, LinearFilter, LinearMipMapLinearFilter, RGBAFormat, UnsignedByteType, 1, SRGBColorSpace);\n        sdr.flipY = needsFlip;\n        sdr.needsUpdate = true;\n        quadRenderer.width = sdrImage.width;\n        quadRenderer.height = sdrImage.height;\n        quadRenderer.material.gainMap = gainMap;\n        quadRenderer.material.sdr = sdr;\n        quadRenderer.material.gainMapMin = metadata.gainMapMin;\n        quadRenderer.material.gainMapMax = metadata.gainMapMax;\n        quadRenderer.material.offsetHdr = metadata.offsetHdr;\n        quadRenderer.material.offsetSdr = metadata.offsetSdr;\n        quadRenderer.material.gamma = metadata.gamma;\n        quadRenderer.material.hdrCapacityMin = metadata.hdrCapacityMin;\n        quadRenderer.material.hdrCapacityMax = metadata.hdrCapacityMax;\n        quadRenderer.material.maxDisplayBoost = Math.pow(2, metadata.hdrCapacityMax);\n        quadRenderer.material.needsUpdate = true;\n        quadRenderer.render();\n    }\n}\n\n/**\n * A Three.js Loader for a JPEG with embedded gainmap metadata.\n *\n * @category Loaders\n * @group Loaders\n *\n * @example\n * import { HDRJPGLoader } from '@monogrid/gainmap-js'\n * import {\n *   EquirectangularReflectionMapping,\n *   LinearFilter,\n *   Mesh,\n *   MeshBasicMaterial,\n *   PerspectiveCamera,\n *   PlaneGeometry,\n *   Scene,\n *   WebGLRenderer\n * } from 'three'\n *\n * const renderer = new WebGLRenderer()\n *\n * const loader = new HDRJPGLoader(renderer)\n *\n * const result = await loader.loadAsync('gainmap.jpeg')\n * // `result` can be used to populate a Texture\n *\n * const scene = new Scene()\n * const mesh = new Mesh(\n *   new PlaneGeometry(),\n *   new MeshBasicMaterial({ map: result.renderTarget.texture })\n * )\n * scene.add(mesh)\n * renderer.render(scene, new PerspectiveCamera())\n *\n * // `result.renderTarget.texture` must be\n * // converted to `DataTexture` in order\n * // to use it as Equirectangular scene background\n * // if needed\n *\n * scene.background = result.toDataTexture()\n * scene.background.mapping = EquirectangularReflectionMapping\n * scene.background.minFilter = LinearFilter\n *\n * // result must be manually disposed\n * // when you are done using it\n * result.dispose()\n *\n */\nclass HDRJPGLoader extends LoaderBase {\n    /**\n     * Loads a JPEG containing gain map metadata\n     * Renders a normal SDR image if gainmap data is not found\n     *\n     * @param url An array in the form of [sdr.jpg, gainmap.jpg, metadata.json]\n     * @param onLoad Load complete callback, will receive the result\n     * @param onProgress Progress callback, will receive a {@link ProgressEvent}\n     * @param onError Error callback\n     * @returns\n     */\n    load(url, onLoad, onProgress, onError) {\n        const quadRenderer = this.prepareQuadRenderer();\n        const loader = new FileLoader(this._internalLoadingManager);\n        loader.setResponseType('arraybuffer');\n        loader.setRequestHeader(this.requestHeader);\n        loader.setPath(this.path);\n        loader.setWithCredentials(this.withCredentials);\n        this.manager.itemStart(url);\n        loader.load(url, async (jpeg) => {\n            if (typeof jpeg === 'string')\n                throw new Error('Invalid buffer, received [string], was expecting [ArrayBuffer]');\n            const jpegBuffer = new Uint8Array(jpeg);\n            let sdrJPEG;\n            let gainMapJPEG;\n            let metadata;\n            try {\n                const extractionResult = await extractGainmapFromJPEG(jpegBuffer);\n                // gain map is successfully reconstructed\n                sdrJPEG = extractionResult.sdr;\n                gainMapJPEG = extractionResult.gainMap;\n                metadata = extractionResult.metadata;\n            }\n            catch (e) {\n                // render the SDR version if this is not a gainmap\n                if (e instanceof XMPMetadataNotFoundError || e instanceof GainMapNotFoundError) {\n                    console.warn(`Failure to reconstruct an HDR image from ${url}: Gain map metadata not found in the file, HDRJPGLoader will render the SDR jpeg`);\n                    metadata = {\n                        gainMapMin: [0, 0, 0],\n                        gainMapMax: [1, 1, 1],\n                        gamma: [1, 1, 1],\n                        hdrCapacityMin: 0,\n                        hdrCapacityMax: 1,\n                        offsetHdr: [0, 0, 0],\n                        offsetSdr: [0, 0, 0]\n                    };\n                    sdrJPEG = jpegBuffer;\n                }\n                else {\n                    throw e;\n                }\n            }\n            // solves #16\n            try {\n                await this.render(quadRenderer, metadata, sdrJPEG, gainMapJPEG);\n            }\n            catch (error) {\n                this.manager.itemError(url);\n                if (typeof onError === 'function')\n                    onError(error);\n                quadRenderer.disposeOnDemandRenderer();\n                return;\n            }\n            if (typeof onLoad === 'function')\n                onLoad(quadRenderer);\n            this.manager.itemEnd(url);\n            quadRenderer.disposeOnDemandRenderer();\n        }, onProgress, (error) => {\n            this.manager.itemError(url);\n            if (typeof onError === 'function')\n                onError(error);\n        });\n        return quadRenderer;\n    }\n}\n\n\n\n\n\n\n\n\n\n\n/**\n * @monogrid/gainmap-js v2.0.7\n * With ❤️, by MONOGRID <hello@mono-grid.com>\n */\n\n\nconst getBufferForType = (type, width, height) => {\n    let out;\n    switch (type) {\n        case UnsignedByteType:\n            out = new Uint8ClampedArray(width * height * 4);\n            break;\n        case HalfFloatType:\n            out = new Uint16Array(width * height * 4);\n            break;\n        case UnsignedIntType:\n            out = new Uint32Array(width * height * 4);\n            break;\n        case ByteType:\n            out = new Int8Array(width * height * 4);\n            break;\n        case ShortType:\n            out = new Int16Array(width * height * 4);\n            break;\n        case IntType:\n            out = new Int32Array(width * height * 4);\n            break;\n        case FloatType:\n            out = new Float32Array(width * height * 4);\n            break;\n        default:\n            throw new Error('Unsupported data type');\n    }\n    return out;\n};\nlet _canReadPixelsResult;\n/**\n * Test if this browser implementation can correctly read pixels from the specified\n * Render target type.\n *\n * Runs only once\n *\n * @param type\n * @param renderer\n * @param camera\n * @param renderTargetOptions\n * @returns\n */\nconst canReadPixels = (type, renderer, camera, renderTargetOptions) => {\n    if (_canReadPixelsResult !== undefined)\n        return _canReadPixelsResult;\n    const testRT = new WebGLRenderTarget(1, 1, renderTargetOptions);\n    renderer.setRenderTarget(testRT);\n    const mesh = new Mesh(new PlaneGeometry(), new MeshBasicMaterial({ color: 0xffffff }));\n    renderer.render(mesh, camera);\n    renderer.setRenderTarget(null);\n    const out = getBufferForType(type, testRT.width, testRT.height);\n    renderer.readRenderTargetPixels(testRT, 0, 0, testRT.width, testRT.height, out);\n    testRT.dispose();\n    mesh.geometry.dispose();\n    mesh.material.dispose();\n    _canReadPixelsResult = out[0] !== 0;\n    return _canReadPixelsResult;\n};\n/**\n * Utility class used for rendering a texture with a material\n *\n * @category Core\n * @group Core\n */\nclass QuadRenderer {\n    /**\n     *\n     * @param sourceTexture\n     * @param renderer\n     */\n    constructor(options) {\n        var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m, _o, _p, _q, _r;\n        this._rendererIsDisposable = false;\n        this._supportsReadPixels = true;\n        /**\n         * Renders the input texture using the specified material\n         */\n        this.render = () => {\n            this._renderer.setRenderTarget(this._renderTarget);\n            try {\n                this._renderer.render(this._scene, this._camera);\n            }\n            catch (e) {\n                this._renderer.setRenderTarget(null);\n                throw e;\n            }\n            this._renderer.setRenderTarget(null);\n        };\n        this._width = options.width;\n        this._height = options.height;\n        this._type = options.type;\n        this._colorSpace = options.colorSpace;\n        const rtOptions = {\n            // fixed options\n            format: RGBAFormat,\n            depthBuffer: false,\n            stencilBuffer: false,\n            // user options\n            type: this._type,\n            colorSpace: this._colorSpace,\n            anisotropy: ((_a = options.renderTargetOptions) === null || _a === void 0 ? void 0 : _a.anisotropy) !== undefined ? (_b = options.renderTargetOptions) === null || _b === void 0 ? void 0 : _b.anisotropy : 1,\n            generateMipmaps: ((_c = options.renderTargetOptions) === null || _c === void 0 ? void 0 : _c.generateMipmaps) !== undefined ? (_d = options.renderTargetOptions) === null || _d === void 0 ? void 0 : _d.generateMipmaps : false,\n            magFilter: ((_e = options.renderTargetOptions) === null || _e === void 0 ? void 0 : _e.magFilter) !== undefined ? (_f = options.renderTargetOptions) === null || _f === void 0 ? void 0 : _f.magFilter : LinearFilter,\n            minFilter: ((_g = options.renderTargetOptions) === null || _g === void 0 ? void 0 : _g.minFilter) !== undefined ? (_h = options.renderTargetOptions) === null || _h === void 0 ? void 0 : _h.minFilter : LinearFilter,\n            samples: ((_j = options.renderTargetOptions) === null || _j === void 0 ? void 0 : _j.samples) !== undefined ? (_k = options.renderTargetOptions) === null || _k === void 0 ? void 0 : _k.samples : undefined,\n            wrapS: ((_l = options.renderTargetOptions) === null || _l === void 0 ? void 0 : _l.wrapS) !== undefined ? (_m = options.renderTargetOptions) === null || _m === void 0 ? void 0 : _m.wrapS : ClampToEdgeWrapping,\n            wrapT: ((_o = options.renderTargetOptions) === null || _o === void 0 ? void 0 : _o.wrapT) !== undefined ? (_p = options.renderTargetOptions) === null || _p === void 0 ? void 0 : _p.wrapT : ClampToEdgeWrapping\n        };\n        this._material = options.material;\n        if (options.renderer) {\n            this._renderer = options.renderer;\n        }\n        else {\n            this._renderer = QuadRenderer.instantiateRenderer();\n            this._rendererIsDisposable = true;\n        }\n        this._scene = new Scene();\n        this._camera = new OrthographicCamera();\n        this._camera.position.set(0, 0, 10);\n        this._camera.left = -0.5;\n        this._camera.right = 0.5;\n        this._camera.top = 0.5;\n        this._camera.bottom = -0.5;\n        this._camera.updateProjectionMatrix();\n        if (!canReadPixels(this._type, this._renderer, this._camera, rtOptions)) {\n            let alternativeType;\n            switch (this._type) {\n                case HalfFloatType:\n                    alternativeType = this._renderer.extensions.has('EXT_color_buffer_float') ? FloatType : undefined;\n                    break;\n            }\n            if (alternativeType !== undefined) {\n                console.warn(`This browser does not support reading pixels from ${this._type} RenderTargets, switching to ${FloatType}`);\n                this._type = alternativeType;\n            }\n            else {\n                this._supportsReadPixels = false;\n                console.warn('This browser dos not support toArray or toDataTexture, calls to those methods will result in an error thrown');\n            }\n        }\n        this._quad = new Mesh(new PlaneGeometry(), this._material);\n        this._quad.geometry.computeBoundingBox();\n        this._scene.add(this._quad);\n        this._renderTarget = new WebGLRenderTarget(this.width, this.height, rtOptions);\n        this._renderTarget.texture.mapping = ((_q = options.renderTargetOptions) === null || _q === void 0 ? void 0 : _q.mapping) !== undefined ? (_r = options.renderTargetOptions) === null || _r === void 0 ? void 0 : _r.mapping : UVMapping;\n    }\n    /**\n     * Instantiates a temporary renderer\n     *\n     * @returns\n     */\n    static instantiateRenderer() {\n        const renderer = new WebGLRenderer();\n        renderer.setSize(128, 128);\n        // renderer.outputColorSpace = SRGBColorSpace\n        // renderer.toneMapping = LinearToneMapping\n        // renderer.debug.checkShaderErrors = false\n        // this._rendererIsDisposable = true\n        return renderer;\n    }\n    /**\n     * Obtains a Buffer containing the rendered texture.\n     *\n     * @throws Error if the browser cannot read pixels from this RenderTarget type.\n     * @returns a TypedArray containing RGBA values from this renderer\n     */\n    toArray() {\n        if (!this._supportsReadPixels)\n            throw new Error('Can\\'t read pixels in this browser');\n        const out = getBufferForType(this._type, this._width, this._height);\n        this._renderer.readRenderTargetPixels(this._renderTarget, 0, 0, this._width, this._height, out);\n        return out;\n    }\n    /**\n     * Performs a readPixel operation in the renderTarget\n     * and returns a DataTexture containing the read data\n     *\n     * @params options\n     * @returns\n     */\n    toDataTexture(options) {\n        const returnValue = new DataTexture(\n        // fixed values\n        this.toArray(), this.width, this.height, RGBAFormat, this._type, \n        // user values\n        (options === null || options === void 0 ? void 0 : options.mapping) || UVMapping, (options === null || options === void 0 ? void 0 : options.wrapS) || ClampToEdgeWrapping, (options === null || options === void 0 ? void 0 : options.wrapT) || ClampToEdgeWrapping, (options === null || options === void 0 ? void 0 : options.magFilter) || LinearFilter, (options === null || options === void 0 ? void 0 : options.minFilter) || LinearFilter, (options === null || options === void 0 ? void 0 : options.anisotropy) || 1, \n        // fixed value\n        LinearSRGBColorSpace);\n        // set this afterwards, we can't set it in constructor\n        returnValue.generateMipmaps = (options === null || options === void 0 ? void 0 : options.generateMipmaps) !== undefined ? options === null || options === void 0 ? void 0 : options.generateMipmaps : false;\n        return returnValue;\n    }\n    /**\n     * If using a disposable renderer, it will dispose it.\n     */\n    disposeOnDemandRenderer() {\n        this._renderer.setRenderTarget(null);\n        if (this._rendererIsDisposable) {\n            this._renderer.dispose();\n            this._renderer.forceContextLoss();\n        }\n    }\n    /**\n     * Will dispose of **all** assets used by this renderer.\n     *\n     *\n     * @param disposeRenderTarget will dispose of the renderTarget which will not be usable later\n     * set this to true if you passed the `renderTarget.texture` to a `PMREMGenerator`\n     * or are otherwise done with it.\n     *\n     * @example\n     * ```js\n     * const loader = new HDRJPGLoader(renderer)\n     * const result = await loader.loadAsync('gainmap.jpeg')\n     * const mesh = new Mesh(geometry, new MeshBasicMaterial({ map: result.renderTarget.texture }) )\n     * // DO NOT dispose the renderTarget here,\n     * // it is used directly in the material\n     * result.dispose()\n     * ```\n     *\n     * @example\n     * ```js\n     * const loader = new HDRJPGLoader(renderer)\n     * const pmremGenerator = new PMREMGenerator( renderer );\n     * const result = await loader.loadAsync('gainmap.jpeg')\n     * const envMap = pmremGenerator.fromEquirectangular(result.renderTarget.texture)\n     * const mesh = new Mesh(geometry, new MeshStandardMaterial({ envMap }) )\n     * // renderTarget can be disposed here\n     * // because it was used to generate a PMREM texture\n     * result.dispose(true)\n     * ```\n     */\n    dispose(disposeRenderTarget) {\n        this.disposeOnDemandRenderer();\n        if (disposeRenderTarget) {\n            this.renderTarget.dispose();\n        }\n        // dispose shader material texture uniforms\n        if (this.material instanceof ShaderMaterial) {\n            Object.values(this.material.uniforms).forEach(v => {\n                if (v.value instanceof Texture)\n                    v.value.dispose();\n            });\n        }\n        // dispose other material properties\n        Object.values(this.material).forEach(value => {\n            if (value instanceof Texture)\n                value.dispose();\n        });\n        this.material.dispose();\n        this._quad.geometry.dispose();\n    }\n    /**\n     * Width of the texture\n     */\n    get width() { return this._width; }\n    set width(value) {\n        this._width = value;\n        this._renderTarget.setSize(this._width, this._height);\n    }\n    /**\n     * Height of the texture\n     */\n    get height() { return this._height; }\n    set height(value) {\n        this._height = value;\n        this._renderTarget.setSize(this._width, this._height);\n    }\n    /**\n     * The renderer used\n     */\n    get renderer() { return this._renderer; }\n    /**\n     * The `WebGLRenderTarget` used.\n     */\n    get renderTarget() { return this._renderTarget; }\n    set renderTarget(value) {\n        this._renderTarget = value;\n        this._width = value.width;\n        this._height = value.height;\n        // this._type = value.texture.type\n    }\n    /**\n     * The `Material` used.\n     */\n    get material() { return this._material; }\n    /**\n     *\n     */\n    get type() { return this._type; }\n    get colorSpace() { return this._colorSpace; }\n}\n\nconst skyOption = {\n\n    sunPosition: new Vector3(0.27, 1, 0.5),\n    sunTop: new Vector3(0, .99, 0),\n    saturation:1,\n    noiseMap:null,\n\n\t//shadow:1.0,\n\n\t//sunIntensity:100,//1.26,\n\t//hemiIntensity:1,//2,//2.79,\n\tnightLuminosity:0.03,\n\n\t//HOUR:12,\n\t//AZIMUTH:0,\n\n\tcloud_size:0.29,\n\tcloud_covr:0.1,//0.56,\n\tcloud_dens:0.4,\n\tcloud_dist:0.64,\n\n\thaze:0.1,\n\tmixRatio:0.76,\n\n\tSAMPLE:64,//128*0.5,\n\tSTEP:4,//16\n\n\tcloudColor: new Color(0xfffff9).multiplyScalar(1),\n\tskyColor: new Color(0x425876),\n\tfogColor: new Color(0xabb5c0),\n    groundColor: new Color(0x808080),\n    sunColor: new Color(0xffffff).multiplyScalar(3),\n\n};\n\nconst SkyShader = {\n\tdefines:{\n\t\t'USE_NOISE_MAP' : false,\n\t},\n\tuniforms: {\n\t\tlightdir: { value: skyOption.sunPosition },\n        sunTop: { value:skyOption.sunTop },\n        noiseMap: { value:skyOption.noiseMap },\n        \n        mixRatio: { value: skyOption.mixRatio },\n\n\t\tcloud_size: { value: skyOption.cloud_size },\n        cloud_covr: { value: skyOption.cloud_covr },\n        cloud_dens: { value: skyOption.cloud_dens },\n        cloud_dist: { value: skyOption.cloud_dist },\n        nightLuminosity: { value: skyOption.nightLuminosity },\n        haze: { value: skyOption.haze },\n        saturation:{ value: skyOption.saturation },\n        \n        SAMPLE:{ value: skyOption.SAMPLE },\n        STEP:{ value: skyOption.STEP },\n        fogy: { value: skyOption.fogy },\n        t: { value: 1.0 },\n        // extra color\n\n        fogColor: { value: skyOption.fogColor },\n        groundColor: { value: skyOption.groundColor },\n        cloudColor: { value: skyOption.cloudColor },\n        skyColor: { value: skyOption.skyColor },\n        sunColor: { value: skyOption.sunColor },\n\t},\n\tvertexShader: /* glsl */ `\nvarying vec3 worldPosition;\nvoid main()\t{\n\tworldPosition = ( modelMatrix * vec4( position, 1.0 )).xyz;\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n}\n`,\n\tfragmentShader: /* glsl */`\n//precision highp float;\nvarying vec3 worldPosition;\n\nuniform vec3 fogColor;\nuniform vec3 groundColor;\nuniform vec3 cloudColor;\nuniform vec3 skyColor;\nuniform vec3 sunColor;\n\nuniform float saturation;\n\nuniform float hue;\nuniform float mixRatio;\nuniform float fogy;\n\nuniform vec3 sunTop;\n\nuniform sampler2D noiseMap;\nuniform vec3 lightdir;\n\nuniform float cloud_size;\nuniform float cloud_covr;\nuniform float cloud_dens;\nuniform float cloud_dist;\n\nuniform float nightLuminosity;\nuniform float haze;\nuniform float t;\n\nuniform int SAMPLE;\nuniform int STEP;\n\n//const float c = 6.36e6;\n//const float d = 6.38e6;\nconst float c = 6.407e6;\nconst float d = 6.416e6;\n\n//const float g = 0.76; // mix ratio\n//const float h = g*g;\nconst float icc = 1.0/8e3;\nconst float jcc = 1.0/1200.0;\nconst float pi = 3.141592653589793;\n\nconst vec3 vm = vec3( 0,-c,0 );\n//const vec3 vn = vec3( 2.1e-5 );\n//const vec3 vo = vec3( 5.8e-6, 1.35e-5, 3.31e-5 );\n\n//const vec3 vn = vec3( 0.000021 );\n//const vec3 vo = vec3( 0.0000058, 0.0000135, 0.0000331 );// sky base color\n\n//const vec3 vo = vec3( 0.000021 );// sky base color\n\n\n#ifdef USE_NOISE_MAP\n\nfloat noise( in vec3 x ){\n    vec3 p = floor(x);\n    vec3 f = fract(x);\n    f = f*f*(3.0-2.0*f);\n    vec2 uv = (p.xy+vec2(37.0,17.0)*p.z) + f.xy;\n    vec2 rg = texture2D( noiseMap, (uv+0.5)/256.0, -16.0 ).yx;\n    return mix( rg.x, rg.y, f.z );\n}\n\n#else\n\nfloat hash( float n ) { return fract(sin(n)*753.5453123); }\nfloat noise( in vec3 x ){\n    vec3 p = floor(x);\n    vec3 f = fract(x);\n    f = f*f*(3.0-2.0*f);\n    float n = p.x + p.y*157.0 + 113.0*p.z;\n    return mix(mix(mix( hash(n+  0.0), hash(n+  1.0),f.x),\n                   mix( hash(n+157.0), hash(n+158.0),f.x),f.y),\n               mix(mix( hash(n+113.0), hash(n+114.0),f.x),\n                   mix( hash(n+270.0), hash(n+271.0),f.x),f.y),f.z);\n}\n\n#endif\n\nfloat NOISE( vec3 r )\n{\n\tr.xz += t;\n\tr *= 0.5;\n\tfloat s;\n\ts = 0.5 * noise(r);\n\tr = r * 2.52;\n\ts += 0.25 * noise(r);\n\tr = r * 2.53;\n\ts += 0.125 * noise(r);\n\tr = r * 2.51;\n\ts += 0.0625 * noise(r);\n\tr = r * 2.53;\n\ts += 0.03125 * noise(r);\n\tr = r * 2.52;\n\ts += 0.015625 * noise(r);\n\treturn s;\n}\n\nfloat MakeNoise( vec3 r )\n{\n\tfloat s,tt;\n\ts = NOISE( r * 2e-4 * ( 1.0 - cloud_size ) );\n\ttt = ( 1.0 - cloud_covr ) * 0.5 + 0.2;\n\ts = smoothstep( tt, tt+.2 , s );\n\ts *= 0.5*(cloud_dens*100.0);\n\treturn s;\n}\n\nvoid clouds( in vec3 r, out vec3 u )\n{\n\tfloat v,w;\n\tv = length( r-vm ) - c;\n\tw = 0.0;\n\tif( 5e3 < v && v < 1e4 ) w = MakeNoise( r ) * (sin( pi*(v-5e3)/5e3 ));\n\tu = vec3( exp(-v*icc), exp(-v*jcc), w );\n}\n\nfloat ca( in vec3 r, in vec3 s, in float t )\n{\n\tvec3 u = r - vm;\n\tfloat v,w,x,y,z,A;\n\tv = dot(u,s);\n\tw = dot(u,u)-t*t;\n\tx = v*v-w;\n\tif( x < 0.0 ) return -1.0;\n\ty = sqrt(x);\n\tz = -v-y;\n\tA = -v+y;\n\treturn z >= 0.0 ? z : A;\n}\n\nvec3 czm_saturation(vec3 rgb, float adjustment)\n{\n    vec3 W = vec3(0.2125, 0.7154, 0.0721);\n    vec3 intensity = vec3(dot(rgb, W));\n    return mix(intensity, rgb, adjustment);\n}\n\n\nvec3 makeSky( in vec3 lightpos, in vec3 r, in vec3 world, out float mask )\n{\n\n\tvec3 vn = vec3( 0.000021 );\n\tvec3 vo = skyColor;\n\tvo *= 0.00005;\n\n\tfloat u,v,w,x,y,z,m, M, N, S, H, F;\n\tvec3 p = lightpos;\n\tu = ca(r,world,d);\n\tv = dot(world,p);\n\tw = 1.0+v*v;\n\n\tfloat gg = mixRatio;\n\tfloat hh = gg*gg;\n\n\tx = 0.0596831*w;\n\ty = 0.0253662*(1.0-hh)*w/((2.0+hh)*pow(abs(1.0+hh-2.0*gg*v),1.5));\n\tz = 50.*pow(abs(1.+dot(world,-p)),2.0)*dot(vec3(0.,1.,0.),p)*(1.0-cloud_covr)*(1.0-min(fogy,1.0));\n\n\tm = 0.0;\n\tvec3 D,E, CB, CM, BB, BM, SX;\n\n\tF = u / float( SAMPLE );\n\n\tBB = vec3(0.0);\n\tBM = vec3(0.0);\n\n\tfloat count = 0.0;\n\n\tfor( int G=0; G<SAMPLE; ++G ){\n\n\t\tH = float(G)*F;\n\t\tvec3 I = r + world * H;\n\t\t//CB = vec3(1.0);\n\t\t//BB = vec3(0.0);\n\t\tclouds( I, CB );\n\t\tCB += fogy;// add fog\n\t\tCB.y += CB.z;// add clound\n\t\tCB.xy *= F;\n\t\tBB += CB;\n\n\t\tM = ca(I,p,d);\n\n\t\tif( M > 0.0 ){\n\n\t\t\tN = M/float(STEP);\n\t\t\tBM = vec3(0.0);\n\n\t\t\tfor( int R=0; R<STEP; ++R ){\n\n\t\t\t\tS = float(R)*N;\n\t\t\t\tvec3 T=I+p*S;\n\t\t\t\tclouds( T, CM );\n\t\t\t\tCM += fogy;// add fog\n\t\t\t\tCM.y += CM.z;// add clound\n\t\t\t\tBM += CM * N;\n\n\t\t\t}\n\n\t\t\tSX = exp(-(vo*(BM.x+BB.x)+vn*(BM.y+BB.y)* cloud_dist));\n\n\t\t\tm += CB.z;\n\t\t\tcount += 1.0;\n\t\t\tD += SX*CB.x;\n\t\t\tE += (SX*CB.y)+z*m;\n\t\t}\n\t\telse return vec3(0.0);\n\t}\n\t//mask = m * 0.0125;\n\t//mask = m / count;\n\tmask = m / float( SAMPLE );\n\n\treturn ((D * vo * x ) + (E * vn * y * sunColor)) * 15.0;\n}\n\n\nvoid main()\n{\n\tvec3 light = normalize( lightdir );\n\tvec3 world = normalize( worldPosition.xyz );\n\n\tfloat uvy = acos( world.y ) / pi;\n\n\t//float luma = smoothstep(0.0, 4.0,  1.0-(abs(world.y)/0.8) );\n    //float mid = smoothstep(0.0, 1.0,  abs(world.y) < haze ? 1.0-(abs(world.y)/(haze*1.0)) : 0.0 );\n    //mid *= nightLuminosity;//pow(  mid, 1.0 );\n\n    // ground reapeat sky\n\t//if( world.y < -0.15) world.y = -0.15+((-world.y-0.15)*0.1);\n\tif( world.y < 0.0) world.y = -world.y;\n\n\tfloat high = smoothstep(1.0, 0.0, (uvy)*10000.0);\n\tfloat top =  smoothstep(1.0, 0.0, (uvy-0.5)*50.0);\n\tfloat middle = uvy > 0.5 ? high : smoothstep(0.0, 1.0, (0.5-uvy)*((1.0-haze)*100.0));\n\n\tfloat middle2 = uvy > 0.5 ? smoothstep(0.0, 1.0, (0.5-uvy)*((1.0-haze)*100.0)) : smoothstep(0.0, 1.0, (0.5-uvy)*((1.0-haze)*100.0));\n\n\tvec3 s = sunTop;\n\tfloat lm = dot( s, light );\n\tfloat day = clamp((lm*4.0), 0.0, (1.0-nightLuminosity) )+nightLuminosity;\n\n\tif(lm <= 0.0) light *= -1.0;\n\tlight.y = abs(light.y);\n\n\t//if(light.y < 0.1) light.y = 0.1;\n\tlight.y = clamp(light.y, 0.1, 1.0 );\n\t//light.y += 0.5;\n\n\tfloat mask = 0.0;\n\n\tvec3 sky = makeSky( light, s, world, mask );\n\tmask = clamp(mask, 0.0, 1.0 );\n\tsky = mix( sky, cloudColor, mask ); //apply cloud color\n\t\n\n\t//sky = mix( sky, groundColor, 1.0-middle ); // apply ground color\n\tsky = mix( sky, fogColor, 1.0-middle2 ); // apply fog color\n\t\n    //float dd = clamp(day+(nightLuminosity*0.5), 0.0, 1.0);\n\t//luma *= 1.0-dd;\n\t//clear = mix( clear, clear+skyColor, luma ); // extra luminosity on night\n\n\tsky *= day;\n\t//sky = czm_saturation(sky, saturation);\n    //sky = clamp(sky, 0.0, 1.0 );\n\n\n \tgl_FragColor = vec4( sky, 1.0 );\n\n}\n`,\n\tdepthWrite: false,\n\tdepthTest: false,\n\tside:1,\n\ttoneMapped: false,\n\tfog:false,\n};\n\nconst torad = Math.PI / 180;\n\nclass Envmap {\n\n\tconstructor( o = {} ) {\n\n\t\tthis.mainScene = o.scene;\n\t\tthis.renderer = o.renderer;\n\n\t\tthis.usePrem = o.usePmrem !== undefined ? o.usePmrem : false;\n\t\tthis.useBackground = o.useBackground !== undefined ? o.useBackground : true;\n\t\tthis.envBlur = o.envBlur !== undefined ? o.envBlur : 0;\n\t\tthis.callback = o.callback || null;\n\t\tthis.isSky = false;\n\n\t\t if( this.usePrem ){\n\t        this.pmremGenerator = new PMREMGenerator( this.renderer );\n\t        this.pmremGenerator.compileEquirectangularShader();\n\t    }\n\n\t\tif(o.cube) this.initCubeEnv( o );\n\t\tif(o.url) this.load( o.url );\n    \n\t}\n\n\tinitCubeEnv( o = {} ) {\n\n\t\tthis.isCubeEnv = true;\n\t\tthis._quality = o.quality || 1;\n\n\t\tthis.scene = new Scene();\n\t\tif(o.color) this.scene.background = new Color(o.color); \n\t\tthis.target = new WebGLCubeRenderTarget( 256*this._quality, {\n\t\t\t//magFilter: LinearFilter,\n            minFilter: LinearFilter,\n            type: HalfFloatType,\n            //format: RGBAFormat,\n            //colorSpace: LinearSRGBColorSpace,\n            colorSpace: SRGBColorSpace, \n            //generateMipmaps: false,\n            //depthBuffer: false,\n            //generateMipmaps:true,\n            anisotropy:1,\n        });\n\n        this.camera = new CubeCamera( o.near || 0.1, o.far || 100, this.target );\n\t\tthis.mainScene.environment = this.target.texture;\n\t\tif( this.useBackground ) this.mainScene.background = this.target.texture;\n\n\t}\n\n\taddSky(){\n\n\t\tlet g = new IcosahedronGeometry( 20, 1 );\n\t\tconst mat = new ShaderMaterial( SkyShader );\n\t\tthis.sky = new Mesh( g, mat );\n\t\tthis.scene.add(this.sky);\n\t\tthis.render();\n\t\tthis.isSky = true;\n\t\t\n\t}\n\n\tgetSkyOtion(){\n\n\t\tif(!this.isSky) return;\n\t\treturn skyOption;\n\n\t}\n\n\tsetSkyOtion( o ){\n\n\t\tif(!this.isSky) return;\n\t\tlet u = this.sky.material.uniforms;\n\t\tfor(let k in o){\n\t\t\tif(u[k]) u[k].value = o[k];\n\t\t}\n\t\n\t    if(this.timeout) clearTimeout(this.timeout);\n\t    this.timeout = setTimeout( this.render.bind(this), 0 );\n\n\t}\n\n\trender() {\n\n\t\tif(!this.isCubeEnv) return\n\t\tconst renderer = this.renderer;\n        const lastToneMapping = renderer.toneMapping;\n        //const lastToneExposure = renderer.toneMappingExposure;\n        renderer.toneMapping = NoToneMapping;\n        //renderer.toneMappingExposure = 1.0;\n\n\t\tthis.camera.update( renderer, this.scene );\n        renderer.toneMapping = lastToneMapping;\n        //renderer.toneMappingExposure = lastToneExposure;\n\n\t}\n\n\tload ( url ) {\n\n\t\tthis.name = url.substring( url.lastIndexOf('/')+1, url.lastIndexOf('.') );\n\t    this.type = url.substring( url.lastIndexOf('.')+1 ).toLowerCase();\n\n\t\tthis.loader = null;\n\n\t\tswitch( this.type ){\n\t\t\tcase 'hdr': \n\t\t\t    this.loader = new RGBELoader().load( url, this.end.bind(this), null, this.bug.bind(this) );\n\t\t\tbreak;\n\t\t\tcase 'exr':\n\t\t\t    this.loader = new EXRLoader().load( url, this.end.bind(this), null, this.bug.bind(this) );\n\t\t\tbreak;\n\t\t\tcase 'jpg': \n\t\t\t    this.loader = new HDRJPGLoader( this.renderer ).load( url, this.end.bind(this), null, this.bug.bind(this) );\n\t\t\tbreak;\n\t\t}\n\n\t}\n\n\tbug () {\n\n\t\tconsole.log( 'Envmap is not find :', this.name );\n\t\tif( this.callback ) this.callback();\n\n\t}\n\n\tend () {\n\n\t\tlet env;\n\n\t\tswitch( this.type ){\n\t\t\tcase 'hdr': case 'exr':\n\t\t\t    env = this.loader;\n\t\t\t    env.mapping = EquirectangularReflectionMapping;\n\t\t\tbreak;\n\t\t\tcase 'jpg':\n\t\t\t    env = this.loader.renderTarget.texture;\n\t\t\t    env.mapping = EquirectangularReflectionMapping;\n\t\t\t    \n\t\t\tbreak;\n\t\t}\n\n\t\tif( this.usePrem ) {\n            \n            env = this.pmremGenerator.fromEquirectangular( env ).texture;\n            this.pmremGenerator.dispose();\n\n        }\n\n        env.needsUpdate = true;\n\n        const scene = this.isCubeEnv ? this.scene : this.mainScene;\n\n        \n\t\tif( this.isCubeEnv || this.useBackground ) scene.background = env;\n\t\tif( this.envBlur ) scene.backgroundBlurriness = this.envBlur;\n\t    scene.environment = env;\n\t    \n        this.loader.dispose();\n\n\t\tif( this.callback ) this.callback();\n\n\t}\n\n\n\tget intensity() {\n        return this.mainScene.environmentIntensity;\n    }\n    set intensity(value) {\n        this.mainScene.environmentIntensity = value;\n    }\n\n    get bgIntensity() {\n        return this.mainScene.backgroundIntensity;\n    }\n    set bgIntensity(value) {\n        this.mainScene.backgroundIntensity = value;\n    }\n\n    get blur() {\n        return this.mainScene.backgroundBlurriness;\n    }\n    set blur(value) {\n        this.mainScene.backgroundBlurriness = value;\n    }\n\n    rotate( x=0,y=0,z=0 ) {\n\n        if(x!==0) x *= torad;\n        if(y!==0) y *= torad;\n        if(z!==0) z *= torad;\n\n        this.mainScene.environmentRotation.set(x,y,z);\n        this.mainScene.backgroundRotation.set(x,y,z);\n\n    }\n\n}\n\nclass AutoRagdoll {\n\t\n\tconstructor( o = {} ){\n\n\t\tthis.id = 0;\n\t\tthis.type = 'autoRagdoll';\n\t\tthis.name = o.name || this.type+this.id++;\n\n\t\tlet b = Utils.byName( this.name );\n\t\tif( b ) Utils.remove( b );\n\n\t\t//this.isAutoRagdoll = true;\n\n\t\tthis._mode = o.mode || 'follow';\n\t\tthis._size = o.size || 1;\n\t\tthis._debug = o.debug || false;\n\n\t\tconst model = clone( o.model );\n\t\tmodel.scale.set(1,1,1).multiplyScalar( this._size );\n\t\tif(o.pos) model.position.fromArray(o.pos);\n\n\t\tmodel.raycast = function (){ return };\n\t\tmodel.name = this.name;\n\t\t//model.frustumCulled = false;\n\n\t\tlet bones;\n\n\t\tmodel.traverse( ( child ) => {\n\t\t\tif ( child.isMesh ){\n\t\t\t\tchild.frustumCulled = false;\n\t\t\t}\n\t\t\tif ( child.isSkinnedMesh ){\n\t\t\t\tchild.raycast = function (){ return };\n\t\t\t\tchild.frustumCulled = false;\n\t\t\t\tchild.matrixAutoUpdate = false;\n\t\t\t\tchild.receiveShadow = true;\n\t\t\t\tchild.castShadow = true;\n\t\t\t\tif( o.material ) child.material = o.material;\n\t\t\t\tchild.skeleton.resetScalling();\n\t\t\t\tbones = child.skeleton.bones;\n\t\t\t}\n\t\t});\n\n\t\tlet mass = o.mass || null;\n\t\t\n\t\tthis.skeletonBody = new SkeletonBody( model.name, model, bones, mass, o.option );\n\n\t\tthis.debug = this._debug;\n\t\tthis.mode = this._mode;\n\n\t\t/*this.skeletonBody.addEventListener ( 'start', function ( event ) {\n\t\t\tconsole.log( event.message );\n\t\t});*/\n\n\n\n\t\t/* \n\t\t// basic three helper\n\t\tlet helper = new SkeletonHelper( m );\n\t\thelper.raycast = function (){ return }\n        helper.matrix = m.matrix;\n        root.scene.add( helper );\n        */\n\n\t\tmodel.add( this.skeletonBody );\n\t\troot.scene.add( model );\n\n\t\tthis.model = model;\n\n\t\t//map.set( this.name, this );\n\t\tUtils.add( this );\n\n\t\treturn this;\n\n\t}\n\n\tgetRealPosition() {\n\t\tlet node = Utils.byName( this.skeletonBody.nodes[0].name );\n\t\treturn node.position;\n\t}\n\n\tdispose () {\n\n\t\tif( this.skeletonBody ) this.skeletonBody.dispose();\n\t\tif( this.model ) this.model.parent.remove( this.model );\n\n\t}\n\n\t//\n\n\tget position () { return model.position; }\n\n\tget size () { return this._size; }\n\tset size (value) {\n\t\tthis._size = value;\n\t\tthis.model.scale.set(1,1,1).multiplyScalar( this._size );\n\t}\n\n\t//\n\n\tget debug () { return this._debug; }\n\tset debug (value) {\n\t\tthis._debug = value;\n\t\tthis.skeletonBody.isVisible( this._debug );\n\t}\n\n\tget mode () { return this._mode; }\n\tset mode (value) {\n\t\tthis._mode = value;\n\t\tthis.skeletonBody.setMode( this._mode );\n\t}\n\n\n\n}\n\nconst _offsetMatrix = new Matrix4();\nconst _identityMatrix = new Matrix4();\nnew Vector3();\n\nlet K = Skeleton.prototype;\n\nK.byName = function ( name ) {\n\n    let i = this.bones.length;\n    while(i--) if( this.bones[i].name === name ) return this.bones[i]\n    return null\n\n};\n\nK.getId = function ( name ) {\n\n    let i = this.bones.length;\n    while(i--) if( this.bones[i].name === name ) return i\n    return null\n\n};\n\nK.setExtraRotation = function ( b, x, y, z ) {\n\n    //this.pose()\n\n    /*let name = b.isBone ? b.name : b\n    let degtorad = MathUtils.DEG2RAD\n\n    let bone = this.byName( name )\n    if( !bone ) return\n\n    let id = this.getId( name )\n    let tt = new Matrix4().makeRotationFromEuler( {x:x*degtorad, y:y*degtorad, z:z*degtorad, order:'XYZ'});\n\n    //bone.matrixWorld.multiply( tt );\n    bone.matrix.multiply( tt );\n    bone.matrixWorld.multiplyMatrices( bone.parent.matrixWorld, bone.matrix );\n    bone.matrix.decompose( bone.position, bone.quaternion, bone.scale );\n    //bone.updateMatrixWorld( true )\n\n    //bone.updateWorldMatrix( true, true )\n\n    let j = bone.children.length, child;\n    while(j--){\n        child = bone.children[ j ]\n        child.matrixWorld.multiplyMatrices( bone.matrixWorld, child.matrix )\n    }\n\n\n\n    this.calculateInverses()*/\n//this.pose()\n\n\n    let bone = b.isBone ? b : this.byName( b );\n    if( !bone ) return\n    MathUtils.DEG2RAD;\n    \n    //bone.extraRotation = new Matrix4().makeRotationFromEuler( {x:x*degtorad, y:y*degtorad, z:z*degtorad, order:'XYZ'});\n    //bone.extraRotation = new Quaternion().setFromEuler( {_x:x*degtorad, _y:y*degtorad, _z:z*degtorad, _order:'XYZ'}).invert();\n\n    //this.applyScalling()\n\n};\n\nK.setScalling = function ( b, x, y, z ) {\n\n    let bone = b.isBone ? b : this.byName( b );\n    if( !bone ) return\n    bone.scalling = new Vector3(x, y, z);\n\n};\n\nK.resetScalling = function (b) {\n\n    this.pose();\n\n    this.scalled = true;\n\n    for ( let i = 0, il = this.bones.length; i < il; i ++ ) {\n\n        //this.bones[i].scalling = new Vector3(1,1,1);\n        this.bones[i].isPhysics = false;\n        this.bones[i].phyMtx = new Matrix4();\n\n    }\n\n    if(!b) this.applyScalling();\n\n};\n\nK.childScale = function ( bone, matrix ) {\n\n    if( !this.scalled ) return\n\n    //\n\n    if( bone.scalling ) matrix.scale( bone.scalling );\n    //if( bone.extraRotation ) matrix.multiply( bone.extraRotation );\n    //if( !bone.isBone ) return\n\n    //if(bone.name === 'head') console.log(bone.children.length)\n\n\n    let j = bone.children.length, child, k=0;\n\n    while(j--){\n\n        child = bone.children[ k ];\n        k++;\n\n        if( child.isBone ) {\n            child.matrixWorld.multiplyMatrices( matrix, child.matrix );\n            \n        } else {\n\n            //child.matrixAutoUpdate = false;\n            //child.applyMatrix4(matrix)\n            //child.matrixWorldNeedsUpdate = false;\n            child.matrixWorld.multiplyMatrices( matrix, child.matrix );\n            //child.matrixWorldNeedsUpdate = true;\n\n            //child.updateWorldMatrix(false,true)\n            //child.updateWorldMatrix(true, true);\n            //child.updateMatrixWorld(true);\n            //child.updateMatrix()\n            //child.updateWorldMatrix( false, true );\n\n            // BUG WITH HAIR !!!\n         //   child.matrixWorld.multiplyMatrices( matrix, child.matrix )\n           // child.matrixWorld.multiplyMatrices( matrix, child.matrix )\n\n            //child.updateWorldMatrix(false, true)\n            //child.matrix = matrix.clone();\n            //child.matrixWorld.premultiply( matrix.clone() )\n           \n        }\n\n        \n        //child.matrixAutoUpdate = true\n        //if( child.matrixAutoUpdate ) child.matrixAutoUpdate = false\n        //if( child.matrixWorldAutoUpdate ) child.matrixWorldAutoUpdate = false\n        //child.matrixWorldNeedsUpdate = false;\n        //child.matrixWorld.copy( child.matrix ).premultiply( matrix )\n\n        //child.matrixWorld.copy( matrix ).multiply( child.matrix )\n        \n\n\n        //scaleMatrix = matrix.clone()\n        //scaleMatrix.multiply( child.matrix )\n        //child.matrixWorld.copy( scaleMatrix )\n\n       // if( child.isBone ) \n            //child.matrix.premultiply(matrix)\n            //child.matrixWorld.copy( child.matrix );\n            \n            ///child.matrixWorldNeedsUpdate = true;\n        //child.matrix.premultiply(matrix)\n        //child.matrixWorld.setPosition( _decal.setFromMatrixPosition( scaleMatrix ) );\n        //child.matrixWorld.setPosition( _decal.setFromMatrixPosition( scaleMatrix ) );\n        \n    }\n\n};\n\nK.applyScalling = function ( fingerPos ) {\n\n    let b, i, lng = this.bones.length;\n    let parent;\n\n    for ( i = 0; i < lng; i ++ ) {\n\n        b = this.bones[ i ];\n        parent = b.parent || null;\n\n        if( parent !== null && parent.scalling && b.name!=='root' ){//\n\n          //  if( parent.scalling ) \n            b.position.multiply( parent.scalling );\n            //if(parent.extraRotation) b.quaternion.premultiply( parent.extraRotation );\n            //b.updateWorldMatrix( false, true )\n            b.updateMatrixWorld( true );\n\n        }\n\n    }\n\n    this.calculateInverses();\n\n};\n\n\nK.update = function () {\n\n    const bones = this.bones;\n    const boneInverses = this.boneInverses;\n    const boneMatrices = this.boneMatrices;\n    const boneTexture = this.boneTexture;\n\n    // flatten bone matrices to array\n\n    let i = bones.length, bone, n=0;\n\n    while( i-- ){\n\n        bone = bones[ n ];\n\n        // compute the offset between the current and the original transform\n        //if(bone && bone.isPhysics) bone.matrixWorld.copy(bone.phyMtx)\n        //const matrix = bone ? bone.matrixWorld : _identityMatrix;\n\n        const matrix = bone ? ( bone.isPhysics ? bone.phyMtx : bone.matrixWorld ) : _identityMatrix;\n\n        // no need but break dragon demo ??\n        //if( bone.isPhysics ) this.scalled = true\n        \n        this.childScale( bone, matrix );\n\n        _offsetMatrix.multiplyMatrices( matrix, boneInverses[ n ] );\n        _offsetMatrix.toArray( boneMatrices, n * 16 );\n\n        n++;\n\n    }\n\n    if ( boneTexture !== null ) {\n\n        boneTexture.needsUpdate = true;\n\n    }\n\n};\n\n/** __\n*    _)_|_|_\n*   __) |_| | 2025\n* @author lo.th / https://github.com/lo-th\n*\n*    THREE.JS BRIDGE ENGINE\n*/\n\nconst Version = {\n\t\n\tPHY: '0.2.9',\n\n    PHYSX: '5.05.10',\n    HAVOK: '1.2.1',\n    JOLT: '0.32.0',\n\n    RAPIER: '0.14.0',\n    OIMO: '1.2.4',\n    AMMO: '3.2.6',\n\n};\n\nconst items = {};\n\nlet currentControle = null;\nlet callbackReady = null;\nlet worker = null;\nlet isWorker = false;\nlet isBuffer = false;\nlet isTimeout = false;\nlet outsideStep = true;\nlet engineReady = false;\nlet breaker = null;\n\nlet isAdd = false;\n\nlet timetest = { t1:0, t2:0, t3:0, t4:0 };\n\nlet mouseTool = null;\n\nlet directMessage = null;\nlet controls = null;\n\nlet isPause = false;\nlet first = true;\n\nlet timout = null;\nlet timoutFunction = null;\nlet timoutTime = 0;\nlet elapsedTime = 0;\n\nlet envmapUrl = '';\nlet _envmap = null;\n\nlet renderer = null;\nlet scene = null;\n\nconst user = new User();\nconst timer = new Timer(60);\nconst tt = { start:0, end:0, startTime:'' };\n\nlet azimut = ()=>(0);\nlet endReset = ()=>{};\nlet postUpdate = ()=>{};\nlet addControl = ()=>{};\n\nlet buttons = [];\nlet textfields = [];\nlet particles = [];\n\nconst settings = {\n\n\tfps: 60,\n\tfixe: true,\n\tfull: false,\n\tsubstep: 2,\n\tgravity: [0,-9.81,0],\n\t\n};\n\n\nclass Motor {\n\n\tstatic math = MathTool;\n\tstatic pool = Pool;\n\tstatic RayCar = RayCar;\n\t\n\tstatic version = Version.PHY;\n\tstatic Version = Version;\n\t/*get onFrame() {\n        return this._name;\n    }*/\n    //static version( f ) { return Version.PHY; }\n\n    static set onStep( f ) { postUpdate = f; }\n\n\tstatic debugMode ( b ) { Motor.setDebugMode(b); }\n\tstatic setDebugMode ( b ) { root.debug = b; }\n\n\tstatic useRealLight (o) { Mat.useRealLight(o); }\n\n\tstatic getSetting () { return settings; }\n\n\tstatic getRoot () { return root; }\n\n\tstatic setGravity ( v ) {\n\n\t\tif(v) settings.gravity = v;\n\t\troot.post({ m:'setGravity', o:{ gravity:settings.gravity } });\n\n\t}\n\n\tstatic set ( o = {} ){\n\n\t\tsettings.fixe = o.fixe !== undefined ? o.fixe : true;\n\t\tsettings.full = o.full !== undefined ? o.full : false;\n\t\tsettings.gravity = o.gravity ? o.gravity : [0,-9.81,0];\n\t    settings.substep = o.substep ? o.substep : 2;\n\t    settings.fps = o.fps ? o.fps : 60;\n\n\t\tif( o.key ) addControl();\n\n\t\titems.body.setFull( settings.full );\n\t\tMotor.initArray( settings.full );\n\n\t\telapsedTime = 0;\n\t\tisTimeout = isWorker;\n\t\toutsideStep = !isTimeout;\n\n\t\t//console.log( isTimeout, isWorker, outsideStep )\n\n\t    root.jointVisible = o.jointVisible || false;\n\n\t\tif( outsideStep ) timer.setFramerate( settings.fps );\n\n\t\tconst data = {\n\t\t\t...settings,\n\t\t\tArPos:root.ArPos,\n\t\t\tisTimeout:isTimeout,\n\t\t\toutsideStep:outsideStep,\n\t\t};\n\n\t\troot.post({ m:'set', o:data });\n\n\t}\n\n\tstatic activeMouse ( controler, mode ) { \n\t\tif( !mouseTool ) mouseTool = new MouseTool( controler, mode );\n\t}\n\n    static mouseMode ( mode, o ) { \n\t\tif( mouseTool ) mouseTool.setMode( mode, o );\n\t}\n\n    static getTime () { return Timer.now(); }\n    static readTime ( t ) { return Timer.format_time(t); }\n\n    static startTime () { return tt.startTime; }\n\n\tstatic getTimeTest () { return timetest; }\n\n\tstatic setMaxFps ( v ) { }\n\n\tstatic getMouse () { return mouseTool ? mouseTool.mouse : null; }\n\n\tstatic setMaxAnisotropy ( f ) { Pool.maxAnisotropy = f; }\n\n\tstatic setAddControl ( f ) { addControl = f; }\n\n\tstatic setPrevUpdate ( f ) { }\n\tstatic setPostUpdate ( f ) { postUpdate = f !== null ? f : ()=>{}; }\n\n\tstatic setAzimut ( f ) { azimut = f; }\n\tstatic setRenderer ( f ) { \n\t\trenderer = f;\n\t\tPool.renderer = renderer;\n\t}\n\n\tstatic setKey (i, v) { return user.setKey(i,v) }\n\tstatic getKey () { return user.key }\n\tstatic getKey2 () { return user.key2 }\n\tstatic getAzimut () { return azimut() }\n\n\tstatic setContent ( Scene ) {\n\n\t\tif( isAdd ) return;\n\t\tscene = Scene;\n\t\tscene.add( root.scene );\n\t\tscene.add( root.scenePlus );\n\t\tisAdd = true;\n\n\t}\n\n\tstatic message = ( m ) => {\n\n\t\tlet e = m.data;\n\t\tif( e.Ar ) root.Ar = e.Ar;\n\t\tif( e.reflow ){\n\t\t\troot.reflow = e.reflow;\n\t\t\tif(root.reflow.stat.delta) elapsedTime += root.reflow.stat.delta;\n\t\t}\n\t\n\t\tMotor[ e.m ]( e.o );\n\n\t}\n\n\t// Typically, on a Flame, the transfer speed is 80 kB/ms for postMessage \n\t// This means that if you want your message to fit in a single frame, \n\t// you should keep it under 1,300 kB\n\n\tstatic post = ( e, buffer = null, direct = false ) => {\n\n\t\tif( !isWorker ){\n\t\t\tdirectMessage( { data : e } );\n\t\t\treturn;\n\t\t}\n\n\t\t{\n\t\t\tif( e.o ){\n\t\t    \tif( e.o.type === 'solver' ) direct = true;\n\t\t    \tif( e.o.solver !== undefined ) direct = true;\n\t\t    }\n\t\t    if( direct ){\n\t\t    \tworker.postMessage( e, buffer );\n\t\t    } else {\n\t\t    \tif( e.m === 'add' ) root.flow.add.push( e.o );\n\t\t    \telse if ( e.m === 'remove' ) root.flow.remove.push( e.o );\n\t\t    \telse worker.postMessage( e, buffer );\n\t\t    }\n\t\t}\n\n\t}\n\n\n\t// return\n\n\tstatic autoRagdoll = ( o ) => ( new AutoRagdoll( o ) );\n\tstatic byName = ( name ) => ( Utils.byName( name ) );\n\tstatic getScene = () => ( root.scene );\n\n\t//static autoRagdoll ( o ) { return new AutoRagdoll( o ); }\n\t//static getScene () { return root.scene; }\n\t//static byName ( name ){ return Utils.byName( name ); }\n\n\tstatic makeView () {}\n\n\tstatic resize ( size ) { root.viewSize = size; }\n\n\tstatic init ( o = {} ) {\n\n\t\ttypeof document !== 'undefined' && document.currentScript ? document.currentScript.src : undefined;\n\n\t\ttt.start = Timer.now();\n\n\t\tconst compact = o.compact || false;\n\n\t\t// TODO find better solution\n\t\tlet url = document.location.href.replace(/\\/[^/]*$/,\"/\");\n\t\tlet arr = url.split(\"/\");\n\t\turl = arr[0] + \"//\" + arr[2] + '/';\n\n\t\tif( url === 'https://lo-th.github.io/' ) url = 'https://lo-th.github.io/phy/';\n\n\t\tlet path = o.path || '';\n\t\tpath += compact ? 'compact/' : 'build/';\n\n\t\tlet type = o.type || 'PHYSX';\n\t\tlet name = type.toLowerCase();\n\t\tlet mini = name.charAt(0).toUpperCase() + name.slice(1);\n\n\t\t//let isFirefox = navigator.userAgent.toLowerCase().indexOf('firefox') > -1;\n\n\t\troot.engine = type;\n\n\t\tMotor.initItems();\n\n\t\t// garbage material\n\t\tPool.materialRoot = Mat.set;\n\n\t\t// extand shader\n\t\tMat.initExtandShader();\n\n\t\tif( o.callback ){ \n\t\t\tcallbackReady = o.callback;\n\t\t\tdelete o.callback;\n\t\t}\n\n\t\tisWorker = o.worker || false;\n\n\t\troot.scene = new Group();\n\t\troot.scene.name = 'phy_scene';\n\t\troot.scenePlus = new Group();\n\t\troot.scenePlus.name = 'phy_scenePlus';\n\n\t\tif( o.scene ){ \n\t\t\tMotor.setContent( o.scene );\n\t\t\tdelete ( o.scene );\n\t\t}\n\n\t\tif( o.renderer ){ // need for envmap and ktx2\n\t\t\tMotor.setRenderer( o.renderer );\n\t\t\tdelete ( o.renderer );\n\t\t}\n\n\t\tenvmapUrl = o.envmap || '';\n\n\t\troot.post = Motor.post;\n\t\troot.motor = Motor;\n\n\t\tif( compact ){\n\n\t\t\tPool.load( url + path + mini + '.hex', function(){ Motor.onCompactDone(o);} );\n\n\t\t} else {\n\n\t\t\tif( isWorker ){ // is worker version\n\n\t\t\t    // for wasm side\n\t\t\t    //if( wasmLink[mini] ) o.blob = url + wasmLink[mini];\n\n\t\t\t    worker = new Worker( url + path + mini + '.min.js' );\n\t\t\t    //else worker = new Worker( url + path + mini + '.module.js', {type:'module'});\n\n\t\t\t\tworker.postMessage = worker.webkitPostMessage || worker.postMessage;\n\t\t\t\tworker.onmessage = Motor.message;\n\n\t\t\t\tlet ab = new ArrayBuffer( 1 );\n\t\t\t\tworker.postMessage( { m: 'test', ab:ab }, [ ab ] );\n\t\t\t\tisBuffer = ab.byteLength ? false : true;\n\n\t\t\t\to.isBuffer = isBuffer;\n\t\t\t\t//console.log( st + ' Worker '+ type + (o.isBuffer ? ' with Shared Buffer' : '') );\n\n\t\t\t\tMotor.initPhysics( o );\n\n\n\t\t\t} else { // is direct version\n\n\t\t\t\t//if( wasmLink[mini] ) Motor.loadWasmDirect( wasmLink[mini], o, mini, url )\n\t\t\t\t//else \n\t\t\t\tif( o.devMode ) Motor.preLoad( mini, o, url );\n\t\t\t    else Motor.preLoadMin( mini, o, url );\n\n\t\t\t}\n\n\t\t}\n\n\t\t\n\n\t}\n\n\tstatic onCompactDone ( o ) {\n\n\t\tlet name = root.engine.toLowerCase();\n\t\tlet mini = name.charAt(0).toUpperCase() + name.slice(1);\n\t\tlet code = Pool.get( mini, 'H' );\n\n\t\tif( isWorker ){\n\n\t\t\tlet blob;\n\n\t\t\ttry {\n\t\t\t    blob = new Blob([code], {type: 'application/javascript'});\n\t\t\t} catch (e) { // Backwards-compatibility\n\t\t\t    window.BlobBuilder = window.BlobBuilder || window.WebKitBlobBuilder || window.MozBlobBuilder;\n\t\t\t    blob = new BlobBuilder();\n\t\t\t    blob.append(code);\n\t\t\t    blob = blob.getBlob();\n\t\t\t}\n\n\t\t\tworker = new Worker( URL.createObjectURL(blob) );\n\t\t    //else worker = new Worker( url + path + mini + '.module.js', {type:'module'});\n\n\t\t\tworker.postMessage = worker.webkitPostMessage || worker.postMessage;\n\t\t\tworker.onmessage = Motor.message;\n\n\t\t\tlet ab = new ArrayBuffer( 1 );\n\t\t\tworker.postMessage( { m: 'test', ab:ab }, [ ab ] );\n\t\t\tisBuffer = ab.byteLength ? false : true;\n\n\t\t\to.isBuffer = isBuffer;\n\t\t\t//console.log( st + ' Worker '+ type + (o.isBuffer ? ' with Shared Buffer' : '') );\n\n\t\t\tMotor.initPhysics( o );\n\n\t\t} else {\n\n\t\t\tlet type = name.toUpperCase();\n\t\t\tif(type==='RAPIER') type = 'RAPIER3D';\n\n\t\t\tlet n = document.createElement(\"script\");\n            n.language = \"javascript\";\n            n.type = \"text/javascript\";\n            n.charset = \"utf-8\";\n            n.async = true;\n            n.innerHTML = code;\n            document.getElementsByTagName('head')[0].appendChild(n);\n\n            directMessage = window[type].engine.message;\n\t\t\to.message = Motor.message;\n\t\t\tMotor.initPhysics( o );\n\n\t\t}\n\n\t\t//console.log( code, isWorker )\n\n\t}\n\n\tstatic loadWasmDirect ( link, o, name, url ) {\n\n\t    let s = document.createElement(\"script\");\n\t    s.src = url + link;\n\t    document.body.appendChild( s );\n\t    s.onload = () => { Motor.preLoad( name, o, url ); };\n\n\t}\n\n\tstatic preLoadMin ( name, o, url ) {\n\n\t\tlet link = url + 'build/'+name+'.min.js';\n\t\tlet type = name.toUpperCase();\n\t\tif(type==='RAPIER') type = 'RAPIER3D';\n\n\t\tvar xml = new XMLHttpRequest();\n        xml.open('GET', link );\n        xml.overrideMimeType( \"text/javascript\" );\n        xml.onreadystatechange = function() {\n            if ( xml.readyState === 4 ) {\n                if ( xml.status === 200 || xml.status === 0 ) {\n                    let n = document.createElement(\"script\");\n                    n.language = \"javascript\";\n                    n.type = \"text/javascript\";\n                    n.charset = \"utf-8\";\n                    n.async = true;\n                    n.innerHTML = xml.responseText;\n                    //this.extraCode.push(n)\n                    document.getElementsByTagName('head')[0].appendChild(n);\n\n\t\t\t\t    directMessage = window[type].engine.message;\n\t\t\t\t\to.message = Motor.message;\n\t\t\t\t\tMotor.initPhysics( o );\n                }\n                else console.error( \"Couldn't load [\"+ name + \"] [\" + xml.status + \"]\" );\n            }\n        }.bind(this);\n        xml.send(null);\n\n\t}\n\n\tstatic async preLoad ( name, o, url ) {\n\n\t\tlet link = url + 'build/'+name+'.module.js';\n\t\tif( o.devMode ) link = url + 'src/'+name+'.js';\n\t    let M = await import( link );\n\t    directMessage = M.engine.message;\n\t\to.message = Motor.message;\n\t\tMotor.initPhysics( o );\n\n\t}\n\n\t////\n\n\tstatic initPhysics ( o ) {\n\n\t\tif( envmapUrl !== '' ){\n\t\t\tMotor.preloadEnvmap( o );\n\t\t\treturn\n\t\t}\n\n\t\t//tt.start = Timer.now();\n\t\n\t    root.post({ m:'init', o:o });\n\t    engineReady = true;\n\n\t}\n\n\tstatic addEnvmap ( o ) {\n\t\tif(!_envmap) _envmap = new Envmap( { renderer:renderer, scene:scene, ...o } );\n\t\treturn _envmap;\n\t}\n\n\tstatic preloadEnvmap ( o ) {\n\n\t\t_envmap = new Envmap( {\n\t\t\turl:envmapUrl,\n\t\t\trenderer:renderer,\n\t\t\tscene:scene,\n\t\t\tusePmrem:o.usePmrem,\n\t\t\tuseBackground: o.useBackground !== undefined ? o.useBackground : true,\n\t\t\tenvBlur: o.envBlur !== undefined ? o.envBlur : 0,\n\t\t\tcallback:()=>{\n\t\t\t\tenvmapUrl = '';\n\t\t\t\tMotor.initPhysics(o);\n\t\t\t}\n\t\t});\n\n\t}\n\t\n\tstatic getPause () { return isPause; }\n\n\tstatic pause ( v ){\n\n\t\tif( v === isPause ) return\n\t\tisPause = v;\n\t\tif( isPause ) Motor.pausetimout();\n\t\telse Motor.playtimout();\n\t\troot.post({ m:'pause', o:{ value:isPause } });\n\n\t}\n\n\tstatic flowReset ( ) {\n\n\t\troot.flow = { \n\t\t\tstamp:0,\n\t\t\tcurrent:'',\n\t\t\tkey:[],\n\t\t\ttmp:[],\n\t\t\tadd:[],\n\t\t\tremove:[],\n\t\t\t//point:[]\n\t\t};\n\n\t}\n\n\tstatic reset ( callback ) {\n\n\t\tif( first ){\n\t\t\tfirst = false;\n\t\t\tcallback();\n\t\t\treturn;\n\t\t}\n\n\t\tbuttons = [];\n\n\t\tcurrentControle = null;\n\n\t\tif( controls ) controls.resetAll();\n\t\tif( mouseTool ) mouseTool.unSelect();\n\n\t\tendReset = callback;\n\n\t\tpostUpdate = function () {};\n\n\t\tMotor.clearText();\n\t\t//Motor.clearSkeleton()\n\t\tMotor.clearParticleSolver();\n\n\t\tMotor.cleartimout();\n\n\t\tMotor.flowReset();\n\n\t\t// clear instance\n\t    Motor.clearInstance();\n\n\t    // reset all items\n\t    Motor.resetItems();\n\n\t\t// clear temporary geometry\n\t\tGeo.dispose();\n\n\t    // clear temporary material\n\t    Mat.dispose();\n\n\t    // clear temporary mesh\n\t\troot.disposeTmp();\n\n\t\troot.garbage = [];\n\n\t\tif( breaker !== null ) breaker = null;\n\t\t\t\n\t\troot.tmpTex = [];\n\t    root.scenePlus.children = [];\n\t    root.scene.children = [];\n\n\t\troot.post({ m:'reset' });\n\n\t}\n\n\tstatic clearGarbage () {\n\n\t\tMotor.remove(root.garbage);\n\t\tMotor.clearInstance();\n\t\troot.garbage = [];\n\t\t\n\t}\n\n\tstatic clear ( callback ) {\n\n\t\tMotor.reset(callback);\n\t\t\n\t}\n\n\tstatic resetCallback () {\n\n\t\tendReset();\n\n\t}\n\n\tstatic dispose () {\n\n\t\tMotor.reset(()=>{\n\n\t\t\tif( worker ){ \n\t\t\t\tworker.terminate();\n\t\t\t\tworker = null;\n\t\t\t}\n\n\t\t\tif( isAdd ){\n\t\t\t\troot.scene.parent.remove( root.scene );\n\t\t\t\troot.scenePlus.parent.remove( root.scenePlus );\n\t\t\t\tisAdd = false;\n\t\t\t}\n\n\t\t});\n\n\t}\n\n\tstatic ready () {\n\n\t\ttt.end = Timer.now();\n\t\ttt.startTime = Timer.format_time( tt.end - tt.start );\n\n\t\tconsole.log( '%c'+root.engine + ' %c' + Version[root.engine] +'%c | '+ ( isWorker?'Worker': 'Direct') +' '+ tt.startTime, \n\t\t\t\"font-size:16px\", \n\t\t\t\"font-size:12px\", \n\t\t\t\"font-size:12px\" \n\t\t);\n\t\tif( callbackReady ) callbackReady();\n\n\t}\n\n\tstatic start ( o = {} ){ root.post({ m:'start', o:o }); }\n\n\tstatic morph ( obj, name, value ){ Utils.morph( obj, name, value ); }\n\n\tstatic getFps (){ return root.reflow.stat.fps }\n\t\n\tstatic getDelta2(){ return root.delta/*root.reflow.stat.delta*/ }\n\tstatic getElapsedTime2(){ return elapsedTime }\n\n\tstatic setDelta(v){ timer.delta = v; }\n\tstatic getDelta(){ return timer.delta }\n\tstatic getElapsedTime(){ return timer.elapsedTime }\n\n\tstatic doStep ( stamp ){\n\n\t\tif( !engineReady ) return;\n\t\tif( !outsideStep ) return;\n\t\tif( timer.up( stamp ) ) {\n\t\t\troot.post( { m:'step', o:stamp } );\n\t\t}\n\n\t}\n\n\tstatic step (){\n\n\t\t// time of physic engine step\n\t\troot.delta = root.reflow.stat.delta;\n        // user key interaction\n\t\troot.flow.key = user.update();\n\t\troot.flow.current = currentControle !== null ? currentControle.name : '';\n        //prevUpdate( timer.delta )\n\n\t\tMotor.stepItems();\n\n\t\t//root.flow.tmp = []\n\n\t\tif( breaker !== null ) breaker.step();\n\n\t\tif( currentControle !== null ) currentControle.move();\n\n\t\tif( mouseTool ) mouseTool.step();\n\n\t\t// TODO fix dt 0 when no doStep ??\n\n\t\t//postUpdate( root.reflow.stat.delta )\n\t\t//postUpdate( timer.delta );\n\t\t//postUpdate( root.delta )\n\t\tlet dd = outsideStep ? timer.delta : root.delta;\n\n\t\tpostUpdate( dd );\n\n\t\t//items.character.prestep()\n\n\t\t// update static object for this side !\n\t\tMotor.changes( root.flow.tmp );\n\n\t\t// finally post flow change to physx\n\t\tif( isBuffer ) root.post( { m:'poststep', flow:root.flow, Ar:root.Ar }, [ root.Ar.buffer ] );\n\t\telse root.post( { m:'poststep', flow:root.flow });\n\n\t\t//\tMotor.stepItems()\n\t\tMotor.flowReset();\n\n\t}\n\n    \n\n\tstatic initArray ( full = false ) {\n\n\t    // dynamics array\n\t\troot.ArPos = getArray( root.engine, full );\n\n\t}\n\n    static takeControl ( name = null ){\n    \tMotor.control( name );\n    }\n\n\tstatic control ( name = null ){ // for character and vehicle\n\n\t\tif( currentControle !== null ){\n\t\t\tif( name === null ) {\n\t\t\t\tif( currentControle.isPlayer ) currentControle.isPlayer = false;\n\t\t\t\tcurrentControle = null;\n\t\t\t} else  {\n\t\t\t\tif( name !== currentControle.name ) {\n\t\t\t\t\tcurrentControle = Motor.byName( name );\n\t\t\t\t\tif( currentControle ) currentControle.isPlayer = true;\n\t\t\t\t}\n\t\t\t}\n\t\t} else if( name !== null ){\n\t\t\tcurrentControle = Motor.byName( name );\n\t\t\tif( currentControle ) currentControle.isPlayer = true;\n\t\t}\n\n\t}\n\n\t\n\n\tstatic getAllBody ( name ){\n\n\t\treturn items.body.list;\n\n\t}\n\n\n\t//-----------------------\n\t//  ITEMS\n\t//-----------------------\n\n\tstatic initItems () {\n\n\t\titems['body'] = new Body();\n\t\titems['ray'] = new Ray();\n\t\titems['joint'] = new Joint();\n\t\titems['solid'] = new Solid();\n\t\titems['contact'] = new Contact();\n\t\titems['terrain'] = new Terrain();\n\t\titems['character'] = new Character();\n\n\t\t// vehicle only on physx and ammo\n\t\tif( root.engine === 'PHYSX' || root.engine === 'AMMO' ){ \n\t\t\titems['vehicle'] = new Vehicle();\n\t\t}\n\n\t\t// solver is only on physx\n\t\tif( root.engine === 'PHYSX' ) items['solver'] = new Solver();\n\t\t\n\t\troot.items = items;\n\n\t}\n\n\tstatic getBodyRef () { return items.body; }\n\n\tstatic clearBody() { items.body.reset(); }\n\n\tstatic resetItems() {\n\n\t\tObject.values(items).forEach( v => v.reset() );\n\n\t}\n\n\tstatic stepItems () {\n\n\t    Object.values( items ).forEach( v => v.step() );\n\t\tMotor.upInstance();\n\t\tMotor.upButton();\n\n\t}\n\n\n\t//-----------------------\n\t//  INSTANCE\n\t//-----------------------\n\n\tstatic upInstance() {\n\n    \tObject.values( root.instanceMesh ).forEach( value => value.update() );\n\n    }\n\n\tstatic clearInstance() {\n\n    \tObject.values( root.instanceMesh ).forEach( value => value.dispose() );\n    \troot.instanceMesh = {};\n\n\t}\n\n\n\t//-----------------------\n\t//  ADD\n\t//-----------------------\n\n\tstatic adds ( r = [], direct = false ){\n\n\t\tlet i = r.length, n = 0;\n\t\twhile(i--) Motor.add( r[n++], direct );\n\n\t}\n\n\tstatic add ( o = {}, direct = false ) {\n\n\t\tif( o.isObject3D ) return Motor.addDirect( o );\n\t\tif( o.constructor === Array ) return Motor.adds( o, direct );\n\t\tif( o.type === 'container' ) return new Container( o );\n\t\t\n\t\tif( o.bounce !== undefined ) o.restitution = o.bounce;\n\t\tif( o.type === undefined ) o.type = 'box';\n\t\tif( o.mode !== undefined ) o.type = 'joint';\n\n\t\tlet type = getType( o );\n\n\t\tif( type === 'joint' && o.mode === undefined ){ \n\t\t\to.mode = o.type;\n\t\t\to.type = 'joint';\n\t\t}\n\n\t\tlet m = items[type].add( o );\n\t\troot.garbage.push( m.name );\n\t\treturn m;\n\n\t}\n\n\tstatic addDirect( b ) {\n\n\t\troot.scenePlus.add( b );\n\t\troot.tmpMesh.push( b );\n\t\treturn b;\n\n\t}\n\n\n\t//-----------------------\n\t//  REMOVE\n\t//-----------------------\n\n\tstatic removes ( r = [], direct ){ \n\n\t\tlet i = r.length, n = 0;\n\t\twhile(i--) Motor.remove( r[n++], direct );\n\n\t}\n\t\n\tstatic remove ( name, direct = false ){\n\n\t\tif ( name.constructor === Array ) return Motor.removes( name, direct );\n\n\t\tlet b = Motor.byName( name );\n\t\tif( b === null ){ \n\t\t\tif( root.instanceMesh[ name ] ) items.body.clearInstance( name );\n\t\t\treturn;\n\t\t}\n\n\t\tif(b.type === 'autoRagdoll' ) {\n\t\t\tUtils.remove(b);\n\t\t\treturn \n\t\t}\n\t\tif( b.extraRemove ) b.extraRemove();\n\n\t\t// remove on three side\n\t\titems[b.type].clear( b );\n\t\t// remove on physics side\n\t\troot.post( { m:'remove', o:{ name:name, type:b.type } }, null, direct );\n\n\t}\n\n\n\t//-----------------------\n\t//  CHANGE\n\t//-----------------------\n\n\tstatic changes ( r = [], direct = false ){ \n\n\t\tlet i = r.length, n = 0;\n\t\twhile( i-- ) Motor.changeOne( r[n++], direct );\n\n\t}\n\n    static change ( o, direct = false ) {\n\n    \tif( direct ){\n    \t\tif( o instanceof Array ) Motor.changes( o, true );\n    \t\telse Motor.changeOne( o, true );\n    \t} else {\n    \t\tif( o instanceof Array ) root.flow.tmp.push( ...o );\n    \t\telse root.flow.tmp.push( o );\n    \t}\n\n\t}\n\n\tstatic changeOne ( o = {}, direct = false ){\n\n\t\tif( o.heightData ) return\n\n\t\tlet b = Motor.byName( o.name );\n\t\tif( b === null ) return null;\n\t\tlet type = b.type;\n\n\t\tif( o.drivePosition ){\n\t\t\tif( o.drivePosition.rot !== undefined ){  \n\t\t\t\to.drivePosition.quat = MathTool.quatFromEuler( o.drivePosition.rot ); \n\t\t\t\tdelete ( o.drivePosition.rot ); \n\t\t\t}\n\t\t}\n\t\tif( o.rot !== undefined ){ o.quat = MathTool.quatFromEuler( o.rot ); delete ( o.rot ); }\n\t\t//if( o.rot1 !== undefined ){ o.quat1 = math.toQuatArray( o.rot1 ); delete ( o.rot1 ); }\n\t\t//if( o.rot2 !== undefined ){ o.quat2 = math.toQuatArray( o.rot2 ); delete ( o.rot2 ); }\n\t\tif( o.localRot !== undefined ){ o.quat = MathTool.toLocalQuatArray( o.localRot, b ); delete ( o.localRot ); }\n\n\n\t\t//if( o.type === 'solver' ) direct = true;\n\t\t//if( o.solver !== undefined ) direct = true;\n\n\t\tswitch( type ){\n\n\t\t\tcase 'terrain': b = items.terrain.set( o, b ); direct = false; break;\n\t\t\tcase 'ray': b = items.ray.set( o, b ); direct = false; break;\n\t\t\tcase 'character': b = items.character.set( o, b ); break;\n\t\t\tcase 'solid': b = items.solid.set( o, b ); break;\n\t\t\tcase 'joint': b = items.joint.set( o, b );  break;\n\t\t\tcase 'body':\n\t\t\tif( b.isKinematic ) items.body.set( o, b );\n\n\t\t\t//b = body.set( o, b ); \n\t\t\tbreak;\n\n\t\t}\n\t\t\n\t\tif( direct ){\n\t\t\troot.post({ m:'change', o:o }, null, direct );\n\t\t}\n\n\t}\n\n\n\t//-----------------------\n\t//  CAMERA CONTROLS\n\t//-----------------------\n\n\tstatic setControl ( Controls ) { \n\n\t\tcontrols = Controls;\n\t\tazimut = controls.getAzimuthalAngle;\n\n\t}\n\n\tstatic getCurrentCharacterPosition (){\n\n\t\treturn controls.followGroup.position;\n\n\t}\n\n\tstatic getCamera ( o = {} ){\n\n\t\treturn controls.object;\n\n\t}\n\n\tstatic setCamera ( o = {} ){\n\n\t\tcontrols.moveCam( o );\n\n\t}\n\n\tstatic follow ( m = '', o = {} ){\n\n\t\tlet mesh = null;\n\n\t\tif ( typeof m === 'string' || m instanceof String ) mesh = m === '' ? null : Motor.byName( m );\n\t\telse if ( m.isObject3D ) mesh = m;\n\n\t\tif( mesh === null ) controls.resetFollow();\n\t\telse controls.startFollow( mesh, o );\n\n\t}\n\n\n    //-----------------------\n\t//  INTERN timout\n\t//-----------------------\n\n\tstatic setTimeout ( f, time = 0, single = false ){\n\n\t\tif(single) timout = setTimeout( f, time );\n\t\telse {\n\t\t\ttimoutFunction = f; \n\t\t\ttimoutTime = time; \n\t\t\ttimout = setTimeout( timoutFunction, timoutTime );\n\t\t}\n\n\t}\n\n\tstatic playtimout (){\n\n\t\tif( timoutFunction === null ) return\n\t\ttimout = setTimeout( timoutFunction, timoutTime );\n\n\t}\n\n\tstatic pausetimout (){\n\n\t\tif( timout === null ) return\n\t\tclearTimeout( timout );\n\n\t}\n\n\tstatic cleartimout ( f, time ){\n\n\t\tif( timout === null ) return\n\t\ttimoutFunction = null;\n\t\ttimoutTime = 0; \n\t\tclearTimeout( timout );\n\t\ttimout = null;\n\n\t}\n\n\n\t//-----------------------\n\t//  TEXTURE\n\t//-----------------------\n\n\tstatic texture = ( o={} ) => ( Pool.texture( o ) );\n\tstatic getTexture = ( name, o={} ) => ( Pool.getTexture( name, o ) );\n\t//static texture( o = {} ) { return Pool.texture( o );}\n\n\n\t//-----------------------\n\t//  MATERIAL\n\t//-----------------------\n\n\tstatic setExtendShader ( f ) { Mat.extendShader = f; }\n\tstatic addMaterial( m, direct ){ Mat.set( m, direct ); }\n\tstatic directIntensity ( v ) { Mat.directIntensity(v); }\n\tstatic setEnvmapIntensity ( v ) { Mat.setEnvmapIntensity(v); }\n\n\t// return\n\tstatic getMatRef = () => ( Mat );\n\tstatic getMat = ( name ) => ( Mat.get( name ) );\n\tstatic getMaterial = ( name ) => ( Mat.get( name ) );\n\tstatic getMaterialList = () => ( Mat.getList() );\n\tstatic material = ( o={} ) => ( Mat.create( o ) );\n\tstatic changeRenderMode = ( n ) => ( Mat.changeRenderMode( n ) );\n\n\t//static changeRenderMode( n ){ return Mat.changeRenderMode( n ) }\n\t//static getMatRef(){ return Mat }\n\t//static material ( o = {} ){ return Mat.create( o ) }\n\t//static getMaterialList(){ return Mat.getList(); }\n\t//static getMat( name ){ return Mat.get( name ) }\n\t//static getMaterial( name ){ return Mat.get( name ) }\n\n\t//-----------------------\n\t//\n\t//  POOL\n\t//\n\t//-----------------------\n\n\tstatic load = Pool.load; // ( Urls, Callback, Path = '', msg = '' )\n\tstatic get = Pool.get; // ( name, type )\n\tstatic getGlb = Pool.getGLB;\n\tstatic getGroup = Pool.getGroup;\n\tstatic getScript = Pool.getScript;\n\n\tstatic preload ( Urls, Callback ){\n\n\t\tpreloadAvatar.add( Urls, Callback );\n\t\t//Pool.load( Urls, Callback, Path, msg )\n\t}\n\n\t/*static load ( Urls, Callback, Path = '', msg = '' ){\n\t\tPool.load( Urls, Callback, Path, msg );\n\t}*/\n\n\t// TODO ?? \n\n\tstatic async loadAsync ( Urls, Path = '', msg = '' ){\n\t\tawait Pool.loadAsync( Urls, Path, msg );\n\t}\n\n\tstatic applyMorph ( modelName, meshs = null, normal = true, relative = true ){\n\t\tPool.applyMorph( modelName, meshs = null, normal = true, relative = true );\n\t}\n\n\tstatic getMesh ( obj, keepMaterial, multyMaterialGroup ){\n\t\tif( keepMaterial ){\n\t\t\tlet mm = Pool.getMaterials(obj);\n\t\t\tfor( let m in mm ){\n\t\t\t\tMotor.addMaterial( mm[m] );\n\t\t\t}\n\t\t}\n\t\treturn Pool.getMesh( obj, multyMaterialGroup );\n\t}\n\n\tstatic getGlbMaterial ( obj ){\n\t\tlet ms = Pool.getMaterials( obj );\n\t\tMat.addToMat( ms );\n\t\treturn ms;\n\t}\n\n\tstatic poolDispose (){\n\t\treturn Pool.dispose();\n\t}\n\n\tstatic setDracoPath ( src ){\n\t\treturn Pool.dracoPath = src;\n\t}\n\n\n\t//-----------------------\n\t//  PARTICLE\n\t//-----------------------\n\n\tstatic initParticle (){}\n\tstatic addParticle (){}\n\tstatic getParticle (){}\n\n\tstatic addParticleSolver ( o ){\n\t\tlet s = new Particle( o );\n\t\tparticles.push(s);\n\t\treturn s;\n\t}\n\n\tstatic updateParticleSolver () { \n\n\t\tlet i = particles.length;\n\t\twhile( i-- ) particles[i].update();\n\t\t\n\t}\n\n\tstatic clearParticleSolver () { \n\n\t\tparticles.length;\n\t\t//while( i-- ) particles[i].dispose()\n    \tparticles = [];\n\t\t\n\t}\n\n\n\t//-----------------------\n\t//  BUTTON\n\t//-----------------------\n\n\tstatic addButton (o) {\n\n\t\tlet b = new Button( o );\n\t\tbuttons.push( b );\n\t\treturn b;\n\n\t}\n\n\tstatic upButton (o) {\n\t\tfor ( const key in buttons ) buttons[key].update();\n\t}\n\n\n\t//-----------------------\n\t//  TEXT\n\t//-----------------------\n\n\tstatic addText ( o ){\n\n\t\tlet t = new Textfield( o );\n\t\tif( o.parent ) o.parent.add( t );\n\t\telse root.scenePlus.add( t );\n\t\ttextfields.push(t);\n\t\treturn t;\n\n\t}\n\n\tstatic clearText () {\n\n\t\tlet i = textfields.length;\n\t\twhile( i-- ) textfields[i].dispose();\n    \ttextfields = [];\n\t\t\n\t}\n\n\t//-----------------------\n\t// BREAK\n\t//-----------------------\n\n\tstatic screenshot() {\n\n\t\tvar w = window.open('', '');\n\t    w.document.title = \"Screenshot\";\n\t    w.document.body.style.cssText = 'margin:0; padding:0; overflow:hidden;';\n\t    //w.document.body.style.backgroundColor = \"red\";\n\t    var img = new Image();\n\t    // Without 'preserveDrawingBuffer' set to true, we must render now\n\t    renderer.render(scene, Motor.getCamera());\n\t    img.src = renderer.domElement.toDataURL();\n\t    w.document.body.appendChild(img); \n\n\t}\n\n\n\t//-----------------------\n\t// BREAK\n\t//-----------------------\n\n\tstatic addBreaker() {\n\n\t\tif( breaker !== null ) return;\n\t\tbreaker = new Breaker();\n\n\t}\n\n\n\t//-----------------------\n\t//  EXPLOSION\n\t//-----------------------\n\n\tstatic explosion ( position = [0,0,0], radius = 10, force = 1 ){\n\n\t\tlet r = [];\n\t    let pos = new Vector3();\n\n\t    if( position ){\n\t    \tif( position.isVector3 ) pos.copy(position);\n\t    \telse pos.fromArray( position );\n\t    }\n\t    \n\t    let dir = new Vector3();\n\t    let i = items.body.list.length, b, scaling;\n\n\t    while( i-- ){\n\n\t        b = items.body.list[i];\n\t        dir.copy( b.position ).sub( pos );\n\t        scaling = 1.0 - dir.length() / radius;\n\n\t        if( b.isKinematic ) continue;\n\t        if ( scaling < 0 ) continue;\n\t        \t\n\t        dir.setLength( scaling );\n\t        dir.multiplyScalar( force );\n\n\t        r.push({ name:b.name, impulse:dir.toArray(), wake:true });\n\t        //r.push({ name:b.name, impulse:[0,0.01,0], impulseCenter:pos.toArray(), wake:true })\n\t    }\n\t    \n\t\tMotor.change( r );\n\t}\n}\n\n\n\n//--------------\n//\n//  SOLID ONLY \n//\n//--------------\n\nclass Solid extends Body {\n\tconstructor () {\n\t\tsuper();\n\t\tthis.type = 'solid';\n\t}\n\tstep (){}\n}\n\nconst phy = Motor;\nconst math$1 = Motor.math;\nconst pool = Motor.pool;\n\nexport { math$1 as math, phy, pool };\n"],
  "mappings": "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rC,UAAK,EAAG,IAAI,cAAe,IAAK,EAAG,CAAE;AACrC,UAAK,EAAG,IAAI,cAAe,IAAK,EAAG,CAAE;AACrC,UAAK,EAAG,IAAI,cAAe,IAAK,EAAG,CAAE;AACrC,UAAK,EAAG,IAAI,cAAe,IAAK,EAAG,CAAE;AACrC,UAAK,EAAG,IAAI,cAAe,IAAK,EAAG,CAAE;AACrC,UAAK,EAAG,IAAI,cAAe,IAAK,EAAG,CAAE;AAErC,UAAK,EAAG,IAAI,cAAe,IAAK,EAAG,CAAE;AACrC,UAAK,EAAG,IAAI,cAAe,IAAK,EAAG,CAAE;AACrC,UAAK,EAAG,IAAI,cAAe,IAAK,EAAG,CAAE;AACrC,UAAK,EAAG,IAAI,cAAe,IAAK,EAAG,CAAE;AACrC,UAAK,EAAG,IAAI,cAAe,IAAK,EAAG,CAAE;AACrC,UAAK,EAAG,IAAI,cAAe,IAAK,EAAG,CAAE;AACrC,UAAK,EAAG,IAAI,cAAe,IAAK,EAAG,CAAE;AACrC,UAAK,EAAG,IAAI,cAAe,IAAK,EAAG,CAAE;AACrC,UAAK,EAAG,IAAI,cAAe,IAAK,EAAG,CAAE;AACrC,UAAK,EAAG,IAAI,cAAe,IAAK,EAAG,CAAE;AAErC,UAAK,EAAG,IAAI,cAAe,IAAK,EAAG,CAAE;AACrC,UAAK,EAAG,IAAI,cAAe,IAAK,EAAG,CAAE;AACrC,UAAK,EAAG,IAAI,cAAe,IAAK,EAAG,CAAE;AACrC,UAAK,EAAG,IAAI,cAAe,IAAK,EAAG,CAAE;AACrC,UAAK,EAAG,IAAI,cAAe,IAAK,EAAG,CAAE;AACrC,UAAK,EAAG,IAAI,cAAe,IAAK,EAAG,CAAE;AACrC,UAAK,EAAG,IAAI,cAAe,IAAK,EAAG,CAAE;AACrC,UAAK,EAAG,IAAI,cAAe,IAAK,EAAG,CAAE;AACrC,UAAK,EAAG,IAAI,cAAe,IAAK,EAAG,CAAE;AACrC,UAAK,EAAG,IAAI,cAAe,IAAK,EAAG,CAAE;AAErC,UAAK,EAAG,IAAI,cAAe,IAAK,EAAG,CAAE;AACrC,UAAK,EAAG,IAAI,cAAe,IAAK,EAAG,CAAE;AACrC,UAAK,EAAG,IAAI,cAAe,IAAK,EAAG,CAAE;AACrC,UAAK,EAA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CAAE,GAAE,GAAE,GAAE,CAAE;AAAA,MAAE,CAAE,GAAE,GAAE,GAAE,CAAE;AAAA,MAAE,CAAE,GAAE,GAAE,GAAE,CAAE;AAAA,MAAE,CAAE,GAAE,GAAE,GAAE,CAAE;AAAA,MAAE,CAAE,GAAE,GAAE,GAAE,CAAE;AAAA,MAC9F,CAAE,GAAE,GAAE,GAAE,CAAE;AAAA,MAAE,CAAE,GAAE,GAAE,GAAE,CAAE;AAAA,MAAE,CAAE,GAAE,GAAE,GAAE,CAAE;AAAA,MAAE,CAAE,GAAE,GAAE,GAAE,CAAE;AAAA,MAAE,CAAE,GAAE,GAAE,GAAE,CAAE;AAAA,MAAE,CAAE,GAAE,GAAE,GAAE,CAAE;AAAA,MAAE,CAAE,GAAE,GAAE,GAAE,CAAE;AAAA,MAAE,CAAE,GAAE,GAAE,GAAE,CAAE;AAAA,MAC9F,CAAE,GAAE,GAAE,GAAE,CAAE;AAAA,MAAE,CAAE,GAAE,GAAE,GAAE,CAAE;AAAA,MAAE,CAAE,GAAE,GAAE,GAAE,CAAE;AAAA,MAAE,CAAE,GAAE,GAAE,GAAE,CAAE;AAAA,MAAE,CAAE,GAAE,GAAE,GAAE,CAAE;AAAA,MAAE,CAAE,GAAE,GAAE,GAAE,CAAE;AAAA,MAAE,CAAE,GAAE,GAAE,GAAE,CAAE;AAAA,MAAE,CAAE,GAAE,GAAE,GAAE,CAAE;AAAA,MAC9F,CAAE,GAAE,GAAE,GAAE,CAAE;AAAA,MAAE,CAAE,GAAE,GAAE,GAAE,CAAE;AAAA,MAAE,CAAE,GAAE,GAAE,GAAE,CAAE;AAAA,MAAE,CAAE,GAAE,GAAE,GAAE,CAAE;AAAA,MAAE,CAAE,GAAE,GAAE,GAAE,CAAE;AAAA,MAAE,CAAE,GAAE,GAAE,GAAE,CAAE;AAAA,MAAE,CAAE,GAAE,GAAE,GAAE,CAAE;AAAA,MAAE,CAAE,GAAE,GAAE,GAAE,CAAE;AAAA,MAC9F,CAAE,GAAE,GAAE,GAAE,CAAE;AAAA,MAAE,CAAE,GAAE,GAAE,GAAE,CAAE;AAAA,MAAE,CAAE,GAAE,GAAE,GAAE,CAAE;AAAA,MAAE,CAAE,GAAE,GAAE,GAAE,CAAE;AAAA,MAAE,CAAE,GAAE,GAAE,GAAE,CAAE;AAAA,MAAE,CAAE,G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",
  "names": ["x", "n", "max", "t", "dt", "p", "m", "x2", "g", "j", "self", "td", "v0", "v1", "v2", "b", "url", "node", "data", "i", "current", "currentTransform", "A", "B", "C", "scanlineMinX", "scanlineMaxX", "joinIsOnLeftSide", "innerSideModified", "points", "model", "mat", "p2", "renderer", "uids", "map", "materials", "root", "nodeIndex", "scene", "quaternion", "clone", "GLTFMaterialsClearcoatExtension", "GLTFMaterialsSheenExtension", "GLTFMaterialsTransmissionExtension", "GLTFMaterialsVolumeExtension", "GLTFMaterialsIorExtension", "GLTFMaterialsEmissiveStrengthExtension", "GLTFMaterialsSpecularExtension", "GLTFMaterialsIridescenceExtension", "GLTFMaterialsAnisotropyExtension", "GLTFMaterialsBumpExtension", "GLTFMeshGpuInstancing", "GLTFMaterialsUnlitExtension", "res", "URL", "sourceURI", "accessor", "worker", "_color", "l", "r", "child", "material", "geo", "skeleton", "Q", "E", "name", "buffer", "w", "h", "uInt8Array", "offset", "EXRDecoder", "EXRHeader", "pool", "resolve", "msg", "e", "s", "I", "jsContent", "binaryContent", "zstd", "o", "d", "c", "M", "F", "K", "X", "V", "u", "a", "Path", "torad", "isAdd", "n2", "tt", "action", "azimut", "t2", "uniforms", "first", "_a", "_b", "_p", "_q", "Scene"]
}
